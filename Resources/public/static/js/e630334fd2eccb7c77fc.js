"use strict";(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[12461],{312461:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});let{Mixin:r}=Shopware,{Criteria:o}=Shopware.Data,{mapPropertyErrors:a,mapState:l,mapGetters:c}=Shopware.Component.getComponentHelper();var i={template:'\n{% block sw_product_seo_form %}\n<div class="sw-product-seo-form">\n    \n    {% block sw_product_seo_form_meta_title %}\n    <sw-inherit-wrapper\n        v-model:value="product.metaTitle"\n        :has-parent="hasParent"\n        :label="$tc(\'sw-product.seoForm.labelMetaTitle\')"\n        :help-text="$tc(\'sw-product.seoForm.helpTextMetaTitle\')"\n        :inherited-value="parentProduct.metaTitle"\n    >\n        <template #content="props">\n            <sw-text-field\n                :placeholder="$tc(\'sw-product.seoForm.placeholderMetaTitle\')"\n                :error="productMetaTitleError"\n                :disabled="props.isInherited || !allowEdit"\n                :value="props.currentValue"\n                @update:value="props.updateCurrentValue"\n            />\n        </template>\n    </sw-inherit-wrapper>\n    {% endblock %}\n\n    \n    {% block sw_product_seo_form_meta_description %}\n    <sw-inherit-wrapper\n        v-model:value="product.metaDescription"\n        :has-parent="hasParent"\n        :label="$tc(\'sw-product.seoForm.labelMetaDescription\')"\n        :help-text="$tc(\'sw-product.seoForm.helpTextMetaDescription\')"\n        :inherited-value="parentProduct.metaDescription"\n    >\n        <template #content="props">\n            <sw-textarea-field\n                :placeholder="$tc(\'sw-product.seoForm.placeholderMetaDescription\')"\n                :error="productMetaDescriptionError"\n                :disabled="props.isInherited || !allowEdit"\n                :value="props.currentValue"\n                @update:value="props.updateCurrentValue"\n            />\n        </template>\n    </sw-inherit-wrapper>\n    {% endblock %}\n\n    \n    {% block sw_product_seo_form_keywords %}\n    <sw-inherit-wrapper\n        v-model:value="product.keywords"\n        :has-parent="hasParent"\n        :label="$tc(\'sw-product.seoForm.labelKeywords\')"\n        :help-text="$tc(\'sw-product.seoForm.helpTextKeywords\')"\n        :inherited-value="parentProduct.keywords"\n    >\n        <template #content="props">\n            <sw-text-field\n                :placeholder="$tc(\'sw-product.seoForm.placeholderKeywords\')"\n                :error="productKeywordsError"\n                :disabled="props.isInherited || !allowEdit"\n                :value="props.currentValue"\n                @update:value="props.updateCurrentValue"\n            />\n        </template>\n    </sw-inherit-wrapper>\n    {% endblock %}\n\n    \n    {% block sw_product_seo_form_canonical_url %}\n    <template v-if="!hasParent && hasVariants">\n\n        \n        {% block sw_product_seo_form_canonical_url_switch %}\n        <sw-switch-field\n            v-model:value="canonicalProductSwitchEnabled"\n            :label="$tc(\'sw-product.seoForm.labelCanonicalUrlMode\')"\n        />\n        {% endblock %}\n\n        \n        {% block sw_product_seo_form_canonical_url_select %}\n        <sw-single-select\n            ref="canonicalProductSelect"\n            v-model:value="product.canonicalProductId"\n            :options="variants"\n            :disabled="!canonicalProductSwitchEnabled"\n            value-property="id"\n            :label="$tc(\'sw-product.seoForm.labelCanonicalProduct\')"\n            :placeholder="$tc(\'sw-product.seoForm.placeholderCanonicalProduct\')"\n            show-clearable-button\n            @search="onSearch"\n        >\n\n            <template #selection-label-property="{ item }">\n                \n                {% block sw_product_seo_form_canonical_url_select_selection %}\n                <sw-product-variant-info\n                    :variations="item.variation"\n                    :show-tooltip="false"\n                >\n                    {{ getItemName(item) }}\n                </sw-product-variant-info>\n                {% endblock %}\n            </template>\n\n            <template #result-label-property="{ item }">\n                \n                {% block sw_product_seo_form_canonical_url_select_result %}\n                <sw-product-variant-info\n                    :variations="item.variation"\n                    :show-tooltip="false"\n                >\n                    {{ getItemName(item) }}\n                </sw-product-variant-info>\n                {% endblock %}\n            </template>\n        </sw-single-select>\n        {% endblock %}\n    </template>\n    {% endblock %}\n</div>\n{% endblock %}\n',compatConfig:Shopware.compatConfig,inject:["repositoryFactory"],mixins:[r.getByName("placeholder")],props:{allowEdit:{type:Boolean,required:!1,default:!0}},data(){return{variants:[],searchTerm:"",canonicalProductSwitchEnabled:!1,switchStateHasBeenSet:!1,shouldKeepSelectValue:!1,selectValue:null}},computed:{productRepository(){return this.repositoryFactory.create("product")},hasParent(){return!!this.parentProduct.id},hasVariants(){return this.product.childCount>0},variantCriteria(){let e=new o(1,25);return e.addAssociation("options.group"),e.addFilter(o.equals("parentId",this.product.id)),this.searchTerm&&(e.setTerm(this.searchTerm),this.searchTerm.split(" ").filter(e=>""!==e).forEach(t=>{e.addQuery(o.equals("product.options.name",t),3500),e.addQuery(o.contains("product.options.name",t),500)})),e},isCanonicalUrlSelectLoading(){return this.variants.length<1},variantsWithResetOption(){let e=this.variants;return e.unshift({id:null,name:this.$tc("sw-product.seoForm.placeholderCanonicalProduct")}),e},...c("swProductDetail",["isLoading"]),...l("swProductDetail",["product","parentProduct"]),...a("product",["keywords","metaDescription","metaTitle"])},watch:{"product.canonicalProductId":{handler(e){void 0===e||this.switchStateHasBeenSet||(this.canonicalProductSwitchEnabled=!!e,this.switchStateHasBeenSet=!0)},immediate:!0},"product.id":{handler:function(e){e&&this.fetchVariants()},immediate:!0},canonicalProductSwitchEnabled(e){if(!this.shouldKeepSelectValue){this.shouldKeepSelectValue=!0;return}if(e){this.product.canonicalProductId=this.selectValue,this.selectValue=null;return}this.selectValue=this.product.canonicalProductId,this.product.canonicalProductId=null},isLoading(e){e||(this.selectValue=this.product.canonicalProductId)}},methods:{fetchVariants(){return this.productRepository.search(this.variantCriteria).then(e=>(this.variants=e,e))},getItemName(e){return e.id?e.translated.name||this.product.translated.name:e.name},onSearch(e){this.searchTerm=e,this.fetchVariants().then(e=>{this.$refs.canonicalProductSelect.results=e,this.$nextTick().then(()=>{this.$refs.canonicalProductSelect.resetActiveItem()})})}}}}}]);