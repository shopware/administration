(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[452],{"6GcI":function(e,t,n){"use strict";n.r(t);n("s5ZG");var i=Shopware.Data.Criteria;t.default={template:'\n{% block sw_settings_rule_category_tree %}\n<sw-card\n    class="sw-settings-rule-category-tree"\n    position-identifier="sw-settings-rule-category-tree"\n>\n    <template #toolbar>\n        \n        {% block sw_settings_rule_category_tree_toolbar %}\n        <sw-card-filter @sw-card-filter-term-change="searchTreeItems" />\n        {% endblock %}\n    </template>\n\n    \n    {% block sw_settings_rule_category_tree_component %}\n    <sw-settings-rule-tree\n        ref="swTree"\n        :allow-create-categories="false"\n        :allow-delete-categories="false"\n        :items="categories"\n        after-id-property="afterCategoryId"\n        :sortable="false"\n        @get-tree-items="getTreeItems"\n        @search-tree-items="searchTreeItems"\n        @check-item="onCheckItem"\n    >\n        \n        {% block sw_settings_rule_category_tree_items %}\n        <template\n            #items="{\n                treeItems,\n                sortable,\n                draggedItem,\n                newElementId,\n                checkItem,\n                translationContext,\n                onChangeRoute,\n                disableContextMenu,\n            }"\n        >\n            \n            {% block sw_settings_rule_category_tree_item %}\n            <sw-settings-rule-tree-item\n                v-for="item in treeItems"\n                :key="item.id"\n                :association="association"\n                :item="item"\n                :sortable="false"\n                should-focus\n                :mark-inactive="true"\n                @check-item="checkItem"\n            />\n            {% endblock %}\n        </template>\n        <template\n            v-if="hideHeadline"\n            #headline\n        >\n            <span></span>\n        </template>\n        <template\n            v-if="hideSearch"\n            #search\n        >\n            <span></span>\n        </template>\n        {% endblock %}\n    </sw-settings-rule-tree>\n    {% endblock %}\n</sw-card>\n{% endblock %}\n',inject:["repositoryFactory"],props:{rule:{type:Object,required:!0},association:{type:String,required:!0},categoriesCollection:{type:Array,required:!0},hideHeadline:{type:Boolean,required:!1,default:!0},hideSearch:{type:Boolean,required:!1,default:!0}},data:function(){return{categories:[]}},computed:{categoryRepository:function(){return this.repositoryFactory.create("category")},treeCriteria:function(){var e=new i(1,500);return e.getAssociation(this.association).addFilter(i.equals("id",this.rule.id)),e}},watch:{categoriesCollection:{handler:function(){var e=this;!this.categoriesCollection.entity||this.isComponentReady||this.isFetching||Promise.all([this.getTreeItems()]).then((function(){e.isComponentReady=!0}))},immediate:!0}},methods:{searchTreeItems:function(e){this.getTreeItems(null,e,!0)},onCheckItem:function(e){this.$emit("on-selection",e)},hasItemAssociation:function(e){var t,n;return(null===(t=e[this.association])||void 0===t?void 0:t.length)>0||(null===(n=e.extensions[this.association])||void 0===n?void 0:n.length)>0},getTreeItems:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isFetching=!0;var s=this.treeCriteria;return s.filters=s.filters.filter((function(e){return("equals"!==e.type||"parentId"!==e.field)&&("contains"!==e.type||"name"!==e.field)})),n&&r&&s.addFilter(i.contains("name",n)),n||s.addFilter(i.equals("parentId",t)),this.categoryRepository.search(s,Shopware.Context.api).then((function(n){return null===t?(e.categories=n,e.isFetching=!1,Promise.resolve()):(n.forEach((function(t){e.categories.add(t)})),Promise.resolve())}))}}}},Wq3I:function(e,t,n){},s5ZG:function(e,t,n){var i=n("Wq3I");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("P8hj").default)("5d05a392",i,!0,{})}}]);