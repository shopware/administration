(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[364],{GOed:function(e,t,r){var n=r("QPMW");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r("P8hj").default)("b830b1f8",n,!0,{})},QPMW:function(e,t,r){},XPLP:function(e,t,r){"use strict";r.r(t);var n=r("6lmj"),o=r.n(n),i=r("CsSd"),s=r.n(i);r("GOed");function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=Shopware,d=l.Component,c=l.Context,u=Shopware.Data,h=u.Criteria,_=u.EntityCollection,m=d.getComponentHelper(),w=m.mapState,f=m.mapGetters;t.default={template:'\n{% block sw_product_properties %}\n<sw-inherit-wrapper\n    v-if="properties"\n    {% if VUE3 %}\n    v-model:value="product.properties"\n    {% else %}\n    v-model="product.properties"\n    {% endif %}\n    class="sw-product-properties"\n    :is-association="isAssociation"\n    :disabled="disabled"\n    :inherited-value="parentProduct.properties"\n>\n    <template #content="{ isInherited, isInheritField, restoreInheritance, removeInheritance }">\n        \n        {% block sw_product_properties_card %}\n        <sw-card\n            class="sw-product-properties__card"\n            :class="{\n                \'is--inherited\': isInherited,\n                \'is--disabled\': disabled,\n            }"\n            position-identifier="sw-product-properties"\n            :is-loading="isLoading"\n        >\n            <template #title>\n                \n                {% block sw_product_properties_card_title %}\n                <div\n                    class="sw-card__title"\n                    :class="{ \'is--inherited\': isInherited }"\n                >\n                    \n                    {% block sw_product_properties_card_title_icon %}\n                    <sw-inheritance-switch\n                        v-if="isInheritField && showInheritanceSwitcher"\n                        class="sw-inherit-wrapper__inheritance-icon"\n                        :is-inherited="isInherited"\n                        :disabled="!acl.can(\'product.editor\')"\n                        @inheritance-restore="restoreInheritance"\n                        @inheritance-remove="removeInheritance"\n                    />\n                    {% endblock %}\n\n                    \n                    {% block sw_product_properties_card_title_text %}\n                    {{ $tc(\'sw-product.properties.cardTitle\') }}\n                    {% endblock %}\n                </div>\n                {% endblock %}\n            </template>\n\n            <template\n                v-if="properties.length > 0 || searchTerm"\n                #grid\n            >\n                \n                {% block sw_product_properties_filled_state %}\n                <sw-container rows="auto auto">\n                    \n                    {% block sw_product_properties_filled_state_header %}\n                    <sw-card-section\n                        secondary\n                        divider="bottom"\n                    >\n                        <sw-container\n                            columns="1fr auto"\n                            gap="0 15px"\n                        >\n                            \n                            {% block sw_product_properties_filled_state_header_form_control %}\n                            <sw-simple-search-field\n                                v-model="searchTerm"\n                                variant="form"\n                                size="small"\n                                :placeholder="$tc(\'sw-product.properties.placeholderSearchAddedProperties\')"\n                                :disabled="isPropertiesLoading"\n                                @search-term-change="onChangeSearchTerm"\n                            />\n                            {% endblock %}\n\n                            \n                            {% block sw_product_properties_filled_state_header_button %}\n                            <sw-button\n                                v-tooltip="{\n                                    message: $tc(\'sw-privileges.tooltip.warning\'),\n                                    disabled: acl.can(\'product.editor\'),\n                                    showOnDisabledElements: true\n                                }"\n                                class="sw-product-properties__button-add-property"\n                                variant="ghost"\n                                size="small"\n                                :disabled="!acl.can(\'product.editor\')"\n                                @click="turnOnAddPropertiesModal"\n                            >\n                                {{ $tc(\'sw-product.properties.buttonAddProperty\') }}\n                            </sw-button>\n                            {% endblock %}\n                        </sw-container>\n                    </sw-card-section>\n                    {% endblock %}\n\n                    \n                    {% block sw_product_properties_filled_state_body_filled_state %}\n                    <sw-entity-listing\n                        v-if="properties.length > 0"\n                        ref="entityListing"\n                        class="sw-product-properties__list"\n                        detail-route="sw.property.detail"\n                        identifier="sw-product-properties-list"\n                        :items="properties"\n                        :data-source="properties"\n                        :columns="propertyColumns"\n                        :repository="propertyGroupRepository"\n                        :plain-appearance="true"\n                        :full-page="false"\n                        :show-settings="false"\n                        :allow-column-edit="false"\n                        :allow-inline-edit="false"\n                        :allow-view="acl.can(\'product.viewer\')"\n                        :allow-edit="acl.can(\'property.editor\')"\n                        :allow-delete="acl.can(\'product.deleter\')"\n                    >\n                        <template #column-values="{ item }">\n                            \n                            {% block sw_product_properties_filled_state_body_filled_state_column_values %}\n                            <div\n                                v-for="option in item.options"\n                                :key="option.id"\n                                class="sw-product-properties-list__column-values"\n                            >\n                                <sw-label\n                                    size="medium"\n                                    :dismissable="acl.can(\'product.deleter\')"\n                                    @dismiss="onDeletePropertyValue(option)"\n                                >\n                                    {{ option.translated.name }}\n                                </sw-label>\n                            </div>\n                            {% endblock %}\n                        </template>\n\n                        <template #delete-modal-delete-item="{ item }">\n                            \n                            {% block sw_product_properties_filled_state_body_filled_state_delete_modal_delete_item %}\n                            <sw-button\n                                variant="danger"\n                                size="small"\n                                @click="onDeleteProperty(item)"\n                            >\n                                {{ $tc(\'global.default.delete\') }}\n                            </sw-button>\n                            {% endblock %}\n                        </template>\n\n                        <template #bulk-modal-delete-items>\n                            \n                            {% block sw_product_properties_filled_state_body_filled_state_bulk_modal_delete_items %}\n                            <sw-button\n                                variant="danger"\n                                size="small"\n                                @click="onDeleteProperties"\n                            >\n                                {{ $tc(\'global.default.delete\') }}\n                            </sw-button>\n                            {% endblock %}\n                        </template>\n                    </sw-entity-listing>\n                    {% endblock %}\n\n                    \n                    {% block sw_product_properties_filled_state_body_empty_state %}\n                    <sw-empty-state\n                        v-if="properties.length <= 0"\n                        :absolute="false"\n                        :show-description="false"\n                        :title="$tc(\'sw-product.properties.titleEmptyStateList\')"\n                    >\n                        <template #icon>\n                            \n                            {% block sw_product_properties_filled_state_body_empty_state_image %}\n                            <img\n                                :src="assetFilter(\'/administration/static/img/empty-states/products-empty-state.svg\')"\n                                :alt="$tc(\'sw-product.properties.titleEmptyStateList\')"\n                            >\n                            {% endblock %}\n                        </template>\n                    </sw-empty-state>\n                    {% endblock %}\n\n                    \n                    {% block sw_product_properties_filled_state_body_loading_state %}\n                    <sw-loader\n                        v-if="isPropertiesLoading"\n                    />\n                    {% endblock %}\n                </sw-container>\n                {% endblock %}\n            </template>\n\n            \n            {% block sw_product_properties_empty_state %}\n            <sw-empty-state\n                v-if="properties.length <= 0 && !searchTerm"\n                :absolute="false"\n                :show-description="false"\n                :title="$tc(\'sw-product.properties.titleEmptyState\')"\n            >\n                <template #icon>\n                    \n                    {% block sw_product_properties_empty_state_image %}\n                    <img\n                        :src="assetFilter(\'/administration/static/img/empty-states/products-empty-state.svg\')"\n                        :alt="$tc(\'sw-product.properties.titleEmptyState\')"\n                    >\n                    {% endblock %}\n                </template>\n\n                <template #actions>\n                    \n                    {% block sw_product_properties_empty_state_button %}\n                    <sw-button\n                        v-tooltip="{\n                            message: $tc(\'sw-privileges.tooltip.warning\'),\n                            disabled: acl.can(\'product.editor\'),\n                            showOnDisabledElements: true\n                        }"\n                        variant="ghost"\n                        :disabled="!acl.can(\'product.editor\')"\n                        @click="turnOnAddPropertiesModal"\n                    >\n                        {{ $tc(\'sw-product.properties.buttonAddProperties\') }}\n                    </sw-button>\n                    {% endblock %}\n                </template>\n            </sw-empty-state>\n            {% endblock %}\n        </sw-card>\n        {% endblock %}\n\n        \n        {% block sw_product_properties_add_properties_modal %}\n        <sw-product-add-properties-modal\n            v-if="showAddPropertiesModal"\n            :new-properties="newProperties"\n            :properties-available="propertiesAvailable"\n            @modal-cancel="onCancelAddPropertiesModal"\n            @modal-save="onSaveAddPropertiesModal"\n        />\n        {% endblock %}\n    </template>\n</sw-inherit-wrapper>\n{% endblock %}\n',inject:["repositoryFactory","acl"],props:{disabled:{type:Boolean,required:!1,default:!1},isAssociation:{type:Boolean,required:!1,default:!0},showInheritanceSwitcher:{type:Boolean,required:!1,default:!0}},data:function(){return{groupIds:[],properties:[],isPropertiesLoading:!1,searchTerm:null,showAddPropertiesModal:!1,newProperties:[],propertiesAvailable:!0}},computed:a(a(a({propertyGroupRepository:function(){return this.repositoryFactory.create("property_group")},propertyOptionRepository:function(){return this.repositoryFactory.create("property_group_option")},propertyGroupCriteria:function(){var e=new h(1,10);e.addSorting(h.sort("name","ASC",!1)),e.addFilter(h.equalsAny("id",this.groupIds)),this.searchTerm&&e.setTerm(this.searchTerm);var t=this.productProperties.getIds();return e.getAssociation("options").addFilter(h.equalsAny("id",t)),e.addFilter(h.equalsAny("options.id",t)),e},propertyColumns:function(){return[{property:"name",label:"sw-product.properties.columnProperty",sortable:!1,routerLink:"sw.property.detail"},{property:"values",label:"sw-product.properties.columnValue",sortable:!1}]}},w("swProductDetail",["product","parentProduct"])),f("swProductDetail",["isLoading","isChild"])),{},{productProperties:function(){var e,t;return this.isChild&&(null===(e=this.product)||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.length)<=0?this.parentProduct.properties:this.product.properties},assetFilter:function(){return Shopware.Filter.getByName("asset")}}),watch:{productProperties:{immediate:!0,handler:function(e){e&&(this.getGroupIds(),this.getProperties())}}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.checkIfPropertiesExists()},getGroupIds:function(){var e;null!==(e=this.product)&&void 0!==e&&e.id&&(this.groupIds=this.productProperties.reduce((function(e,t){var r=t.groupId;return e.indexOf(r)<0&&e.push(r),e}),[]))},getProperties:function(){var e,t=this;return null===(e=this.product)||void 0===e||!e.id||this.groupIds.length<=0?(this.properties=[],Promise.resolve()):(this.isPropertiesLoading=!0,this.propertyGroupRepository.search(this.propertyGroupCriteria,c.api).then((function(e){t.properties=e})).catch((function(){t.properties=[]})).finally((function(){t.isPropertiesLoading=!1})))},onDeletePropertyValue:function(e){this.productProperties.remove(e.id)},onDeleteProperty:function(e){var t=this;this.$refs.entityListing.deleteId=null,this.$nextTick((function(){t.productProperties.filter((function(t){return t.groupId===e.id})).forEach((function(e){var r=e.id;t.productProperties.remove(r)})),t.$refs.entityListing.resetSelection()}))},onDeleteProperties:function(){var e=this;this.$refs.entityListing.showBulkDeleteModal=!1,this.$nextTick((function(){var t=a({},e.$refs.entityListing.selection);Object.values(t).forEach((function(t){t.options.forEach((function(t){e.productProperties.remove(t.id)}))})),e.$refs.entityListing.resetSelection()}))},onChangeSearchTerm:function(e){return this.searchTerm=e,this.getProperties()},turnOnAddPropertiesModal:function(){this.propertiesAvailable?(this.updateNewProperties(),this.showAddPropertiesModal=!0):this.$router.push({name:"sw.property.index"})},turnOffAddPropertiesModal:function(){this.showAddPropertiesModal=!1,this.updateNewProperties()},updateNewProperties:function(){this.newProperties=new _(this.productProperties.source,this.productProperties.entity,this.productProperties.context,h.fromCriteria(this.productProperties.criteria),this.productProperties,this.productProperties.total,this.productProperties.aggregations)},onCancelAddPropertiesModal:function(){this.turnOffAddPropertiesModal()},onSaveAddPropertiesModal:function(e){var t;this.turnOffAddPropertiesModal(),e.length<=0||(t=this.productProperties).splice.apply(t,[0,this.productProperties.length].concat(o()(e)))},checkIfPropertiesExists:function(){var e=this;this.propertyOptionRepository.search(new h(1,1)).then((function(t){e.propertiesAvailable=t.total>0}))}}}}}]);