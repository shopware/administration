(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[40265],{166718:function(){},940265:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return t}}),a(491862);var t={template:'\n{% block sw_category_entry_point_modal %}\n<sw-modal\n    class="sw-category-entry-point-modal"\n    :title="$tc(\'sw-category.base.entry-point-modal.modalTitle\')"\n    @modal-close="closeModal"\n>\n\n    \n    {% block sw_category_entry_point_modal_sales_channel_selection %}\n    <sw-single-select\n        v-model:value="selectedSalesChannelId"\n        class="sw-category-entry-point-modal__sales-channel-selection"\n        :label="$tc(\'sw-category.base.entry-point-modal.salesChannelSelection\')"\n        :options="salesChannelOptions"\n        show-clearable-button\n    />\n    {% endblock %}\n\n    \n    {% block sw_category_entry_point_modal_selected_sales_channel %}\n    <template v-if="selectedSalesChannel">\n\n        \n        {% block sw_category_entry_point_modal_selected_sales_channel_show_in_main_navigation %}\n        <sw-switch-field\n            v-model:value="selectedSalesChannel.homeEnabled"\n            class="sw-category-entry-point-modal__show-in-main-navigation"\n            :label="$tc(\'sw-category.base.entry-point-modal.showInMainNavigation\')"\n            :disabled="!acl.can(\'category.editor\') || undefined"\n        />\n        {% endblock %}\n\n        \n        {% block sw_category_entry_point_modal_selected_sales_channel_name_in_main_navigation %}\n        <sw-text-field\n            v-model:value="selectedSalesChannel.homeName"\n            class="sw-category-entry-point-modal__name-in-main-navigation"\n            :label="$tc(\'sw-category.base.entry-point-modal.mainNavigationName\')"\n            :help-text="$tc(\'sw-category.base.entry-point-modal.mainNavigationNameHelpText\')"\n            :placeholder="selectedSalesChannel.translated.homeName || $tc(\'sw-category.base.entry-point-modal.mainNavigationNamePlaceholder\')"\n            :disabled="!selectedSalesChannel.homeEnabled || !acl.can(\'category.editor\')"\n        />\n        {% endblock %}\n\n        \n        {% block sw_category_entry_point_modal_selected_sales_channel_layout_headline %}\n        <h3 class="sw-category-entry-point-modal__layout-headline">\n            {{ $tc(\'sw-category.base.entry-point-modal.layoutHeadline\') }}\n        </h3>\n        {% endblock %}\n\n        \n        {% block sw_category_entry_point_modal_selected_sales_channel_layout_selection %}\n        <div class="sw-category-entry-point-modal__base-layout">\n\n            \n            {% block sw_category_entry_point_modal_layout_preview %}\n            <div\n                class="sw-category-entry-point-modal__preview"\n                role="button"\n                tabindex="0"\n                @click="openLayoutModal"\n                @keydown.enter="openLayoutModal"\n            >\n                <sw-cms-list-item\n                    class="sw-category-entry-point-modal__layout-item"\n                    :page="selectedSalesChannel.homeCmsPage"\n                    :disabled="!acl.can(\'category.editor\') || undefined"\n                    active\n                />\n            </div>\n            {% endblock %}\n\n            \n            {% block sw_category_entry_point_modal_layout_modal %}\n            <sw-cms-layout-modal\n                v-if="showLayoutSelectionModal"\n                :pre-selection="selectedSalesChannel.homeCmsPage"\n                :cms-page-types="pageTypes"\n                @modal-layout-select="onLayoutSelect"\n                @modal-close="closeLayoutModal"\n            />\n            {% endblock %}\n\n            \n            {% block sw_category_entry_point_modal_layout_desc %}\n            <div class="sw-category-entry-point-modal__desc">\n\n                \n                {% block sw_category_entry_point_modal_layout_desc_info %}\n                <div class="sw-category-entry-point-modal__desc-info">\n\n                    \n                    {% block sw_category_entry_point_modal_layout_desc_info_headline %}\n                    <div\n                        class="sw-category-entry-point-modal__desc-headline"\n                        :class="{ \'is--empty\': !selectedSalesChannel.homeCmsPage }"\n                    >\n                        {{ selectedSalesChannel.homeCmsPage ? selectedSalesChannel.homeCmsPage.name : $tc(\'sw-category.base.cms.defaultTitle\') }}\n                    </div>\n                    {% endblock %}\n\n                    \n                    {% block sw_category_entry_point_modal_layout_desc_info_subheadline %}\n                    <div\n                        class="sw-category-entry-point-modal__desc-subheadline"\n                        :class="{ \'is--empty\': !selectedSalesChannel.homeCmsPage }"\n                    >\n                        {{ getCmsPageTypeName(selectedSalesChannel.homeCmsPage?.type) }}\n                    </div>\n                    {% endblock %}\n\n                </div>\n                {% endblock %}\n\n                \n                {% block sw_category_entry_point_modal_layout_desc_actions %}\n                <div class="sw-category-entry-point-modal__desc-actions">\n\n                    \n                    {% block sw_category_entry_point_modal_layout_desc_actions_layout %}\n                    <sw-button\n                        class="sw-category-detail-layout__change-layout-action"\n                        size="small"\n                        :disabled="!acl.can(\'category.editor\')"\n                        @click="openLayoutModal"\n                    >\n                        {{ selectedSalesChannel.homeCmsPage ? $tc(\'sw-category.base.cms.changeLayout\') : $tc(\'sw-category.base.cms.changeLayoutEmpty\') }}\n                    </sw-button>\n                    {% endblock %}\n\n                    \n                    {% block sw_category_entry_point_modal_layout_desc_actions_designer %}\n                    <sw-button\n                        class="sw-category-detail-layout__open-in-pagebuilder"\n                        size="small"\n                        :disabled="!acl.can(\'category.editor\')"\n                        @click="openInPagebuilder"\n                    >\n                        {{ selectedSalesChannel.homeCmsPage ? $tc(\'sw-category.base.cms.editInPagebuilder\'): $tc(\'sw-category.base.cms.editInPagebuilderEmpty\') }}\n                    </sw-button>\n                    {% endblock %}\n\n                    \n                    {% block sw_category_entry_point_modal_layout_desc_actions_remove %}\n                    <sw-button\n                        v-if="selectedSalesChannel.homeCmsPage"\n                        size="small"\n                        :disabled="!acl.can(\'category.editor\')"\n                        class="sw-category-detail-layout__layout-reset"\n                        square\n                        @click="onLayoutReset"\n                    >\n                        <sw-icon\n                            name="regular-trash"\n                            small\n                        />\n                    </sw-button>\n                    {% endblock %}\n\n                </div>\n                {% endblock %}\n\n            </div>\n            {% endblock %}\n\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_category_entry_point_modal_selected_sales_channel_seo_settings_headline %}\n        <h2 class="sw-category-entry-point-modal__seo-headline">\n            {{ $tc(\'sw-category.base.entry-point-modal.seoSettingsHeadline\') }}\n        </h2>\n        {% endblock %}\n\n        \n        {% block sw_category_entry_point_modal_selected_sales_channel_seo_meta_title %}\n        <sw-text-field\n            v-model:value="selectedSalesChannel.homeMetaTitle"\n            class="sw-category-entry-point-modal__meta-title"\n            :label="$tc(\'sw-category.base.entry-point-modal.metaTitleLabel\')"\n            :placeholder="selectedSalesChannel.translated.homeMetaTitle || $tc(\'sw-category.base.entry-point-modal.metaTitlePlaceholder\')"\n            :disabled="!acl.can(\'category.editor\') || undefined"\n        />\n        {% endblock %}\n\n        \n        {% block sw_category_entry_point_modal_selected_sales_channel_seo_meta_description %}\n        <sw-textarea-field\n            v-model:value="selectedSalesChannel.homeMetaDescription"\n            class="sw-category-entry-point-modal__meta-description"\n            :label="$tc(\'sw-category.base.entry-point-modal.metaDescriptionLabel\')"\n            :placeholder="selectedSalesChannel.translated.homeMetaDescription || $tc(\'sw-category.base.entry-point-modal.metaDescriptionPlaceholder\')"\n            :disabled="!acl.can(\'category.editor\') || undefined"\n        />\n        {% endblock %}\n\n        \n        {% block sw_category_entry_point_modal_selected_sales_channel_seo_keywords %}\n        <sw-text-field\n            v-model:value="selectedSalesChannel.homeKeywords"\n            class="sw-category-entry-point-modal__seo-keywords"\n            :label="$tc(\'sw-category.base.entry-point-modal.seoKeywordsLabel\')"\n            :placeholder="selectedSalesChannel.translated.homeKeywords || $tc(\'sw-category.base.entry-point-modal.seoKeywordsPlaceholder\')"\n            :disabled="!acl.can(\'category.editor\') || undefined"\n        />\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_category_entry_point_modal_footer %}\n    <template #modal-footer>\n\n        \n        {% block sw_category_entry_point_modal_footer_cancel_button %}\n        <sw-button\n            class="sw-category-entry-point-modal__cancel-button"\n            @click="closeModal"\n        >\n            {{ $tc(\'global.default.cancel\') }}\n        </sw-button>\n        {% endblock %}\n\n        \n        {% block sw_category_entry_point_modal_footer_apply_button %}\n        <sw-button\n            class="sw-category-entry-point-modal__apply-button"\n            variant="primary"\n            :disabled="!acl.can(\'category.editor\')"\n            @click="applyChanges"\n        >\n            {{ $tc(\'global.default.apply\') }}\n        </sw-button>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_category_entry_point_modal_discard_changes_modal %}\n    <sw-discard-changes-modal\n        v-if="isDisplayingLeavePageWarning"\n        @keep-editing="onLeaveModalClose()"\n        @discard-changes="onLeaveModalConfirm(nextRoute)"\n    />\n    {% endblock %}\n\n</sw-modal>\n{% endblock %}\n',compatConfig:Shopware.compatConfig,inject:["acl","cmsPageTypeService"],emits:["modal-close"],props:{salesChannelCollection:{type:Array,required:!0}},data(){return{temporaryCollection:[],salesChannelOptions:[],selectedSalesChannelId:"",showLayoutSelectionModal:!1,pageTypes:["page","landingpage","product_list"],nextRoute:null,isDisplayingLeavePageWarning:!1}},computed:{selectedSalesChannel(){return this.temporaryCollection.find(e=>e.id===this.selectedSalesChannelId)}},created(){this.createdComponent()},methods:{createdComponent(){this.salesChannelCollection.forEach(e=>{this.temporaryCollection.push({id:e.id,name:e.name,homeEnabled:e.homeEnabled,homeName:e.homeName,homeMetaTitle:e.homeMetaTitle,homeMetaDescription:e.homeMetaDescription,homeKeywords:e.homeKeywords,homeCmsPageId:e.homeCmsPageId,homeCmsPage:e.homeCmsPage?{...e.homeCmsPage}:null,translated:e.translated?{...e.translated}:null}),this.salesChannelOptions.push({value:e.id,label:e.translated?e.translated.name:e.name})}),this.salesChannelCollection.length>0&&(this.selectedSalesChannelId=this.salesChannelOptions[0].value)},closeModal(){this.$emit("modal-close")},getCmsPageTypeName(e){let n=this.$tc("sw-category.base.cms.defaultDesc");if(!e)return n;let a=this.cmsPageTypeService.getType(e)?.title;return a?this.$tc(a):n},onLayoutSelect(e,n){this.selectedSalesChannel.homeCmsPage=n,this.selectedSalesChannel.homeCmsPageId=e},onLayoutReset(){this.onLayoutSelect(null,null)},openInPagebuilder(){let e={name:"sw.cms.create"};if(this.selectedSalesChannel.homeCmsPage&&(e={name:"sw.cms.detail",params:{id:this.selectedSalesChannel.homeCmsPageId}}),this.hasNotAppliedChanges()){this.isDisplayingLeavePageWarning=!0,this.nextRoute=e;return}this.closeModal(),this.$nextTick(()=>{this.$router.push(e)})},openLayoutModal(){this.acl.can("category.editor")&&(this.showLayoutSelectionModal=!0)},closeLayoutModal(){this.showLayoutSelectionModal=!1},applyChanges(){for(let e=0;e<this.temporaryCollection.length;e+=1){let n=this.temporaryCollection[e],a=this.salesChannelCollection[e];a.name=n.name,a.homeEnabled=n.homeEnabled,a.homeName=n.homeName,a.homeMetaTitle=n.homeMetaTitle,a.homeMetaDescription=n.homeMetaDescription,a.homeKeywords=n.homeKeywords,a.homeCmsPageId=n.homeCmsPageId,this.isCompatEnabled("INSTANCE_SET")?this.$set(a,"homeCmsPage",n.homeCmsPage):a.homeCmsPage=n.homeCmsPage}this.closeModal()},hasNotAppliedChanges(){for(let e=0;e<this.temporaryCollection.length;e+=1){let n=this.salesChannelCollection[e],a=this.temporaryCollection[e];if(this.isAttributeEqual(a.name,n.name)||this.isAttributeEqual(a.homeEnabled,n.homeEnabled)||this.isAttributeEqual(a.homeName,n.homeName)||this.isAttributeEqual(a.homeMetaTitle,n.homeMetaTitle)||this.isAttributeEqual(a.homeMetaDescription,n.homeMetaDescription)||this.isAttributeEqual(a.homeKeywords,n.homeKeywords)||this.isAttributeEqual(a.homeCmsPageId,n.homeCmsPageId))return!0}return!1},isAttributeEqual(e,n){return null===e&&(e=""),null===n&&(n=""),e!==n},onLeaveModalClose(){this.nextRoute=null,this.isDisplayingLeavePageWarning=!1},onLeaveModalConfirm(e){this.isDisplayingLeavePageWarning=!1,this.$nextTick(()=>{this.closeModal(),this.$nextTick(()=>{this.$router.push({name:e.name,params:e.params})})})}}}},491862:function(e,n,a){var t=a(166718);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.id,t,""]]),t.locals&&(e.exports=t.locals),a(745346).Z("05c985e9",t,!0,{})}}]);