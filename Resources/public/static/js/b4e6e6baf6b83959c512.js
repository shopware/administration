(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[91186],{852947:function(){},991186:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return l}}),i(410461);let{Mixin:n}=Shopware,{dom:a}=Shopware.Utils;var l={template:'\n{% block sw_media_media_item %}\n<sw-media-base-item\n    class="sw-media-media-item"\n    v-bind="$attrs"\n    v-on="listeners"\n>\n\n    \n    {% block sw_media_media_item_preview %}\n    <template #preview="{ item }">\n        <sw-media-preview-v2\n            :source="item"\n            :media-is-private="item.private"\n            @media-preview-play="emitPlayEvent($event, item)"\n        />\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_media_media_item_name_container %}\n    <template #name="{ item, isInlineEdit, startInlineEdit, endInlineEdit }">\n        <sw-text-field\n            v-if="isInlineEdit"\n            v-autofocus\n            class="sw-media-base-item__name-field"\n            :value="item.fileName"\n            name="media-item-name"\n            @blur="onBlur($event, item, endInlineEdit)"\n            @keyup.esc="endInlineEdit"\n            @click.stop\n            @keydown.enter.stop\n        />\n        <div\n            v-else\n            ref="itemName"\n            class="sw-media-base-item__name"\n            :title="`${item.fileName}.${item.fileExtension}`"\n            role="menuitem"\n            tabindex="0"\n            @dblclick="startInlineEdit"\n        >\n\n            <template v-if="item.hasFile">\n                {{ mediaNameFilter(item) }}\n            </template>\n        </div>\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_media_media_item_metadata %}\n    <template #metadata="{ item }">\n        <div class="sw-media-media-item__metadata">\n            {{ dateFilter(item.uploadedAt) }}, {{ fileSizeFilter(item.fileSize, locale) }}\n        </div>\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_media_media_item_context_menu %}\n    <template #context-menu="{ item, startInlineEdit, allowEdit, allowDelete }">\n        <slot>\n            \n            {% block sw_media_media_item_additional_context_menu_slot %}{% endblock %}\n        </slot>\n\n        \n        {% block sw_media_media_item_context_group_quick_actions %}\n        <div :class="defaultContextMenuClass">\n            \n            {% block sw_media_media_item_context_item_rename_item %}\n            <sw-context-menu-item\n                :disabled="!item.hasFile || item.private || !allowEdit"\n                @click="startInlineEdit"\n            >\n                {{ $tc(\'global.sw-media-media-item.labelContextMenuRename\') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n            \n            {% block sw_media_media_item_context_item_copy_item_link %}\n            <sw-context-menu-item\n                v-if="item.hasFile"\n                @click="copyItemLink(item)"\n            >\n                {{ $tc(\'global.sw-media-media-item.labelContextMenuCopyLink\') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n            \n            {% block sw_media_media_item_context_item_replace %}\n            <sw-context-menu-item\n                :disabled="item.private || !allowEdit"\n                class="sw-media-context-item__replace-media-action"\n                @click="openModalReplace"\n            >\n                {{ $tc(\'global.sw-media-media-item.labelContextMenuReplace\') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n            \n            {% block sw_media_media_item_context_item_move %}\n            <sw-context-menu-item\n                :disabled="!allowEdit"\n                class="sw-media-context-item__move-media-action"\n                @click="openModalMove"\n            >\n                {{ $tc(\'global.sw-media-media-item.labelContextMenuMove\') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n            \n            {% block sw_media_media_item_context_item_delete %}\n            <sw-context-menu-item\n                :disabled="item.private || !allowDelete"\n                variant="danger"\n                @click="openModalDelete"\n            >\n                {{ $tc(\'global.default.delete\') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n        </div>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <template #modal-windows="{ item, allowEdit, allowDelete }">\n        \n        {% block sw_media_media_item_modal_replace %}\n        <sw-media-modal-replace\n            v-if="showModalReplace && allowEdit"\n            :item-to-replace="item"\n            @media-replace-modal-item-replaced="emitRefreshMediaLibrary"\n            @media-replace-modal-close="closeModalReplace"\n        />\n        {% endblock %}\n\n        \n        {% block sw_media_media_item_delete_modal %}\n        <sw-media-modal-delete\n            v-if="showModalDelete && allowDelete"\n            :items-to-delete="[item]"\n            @media-delete-modal-items-delete="emitItemDeleted"\n            @media-delete-modal-close="closeModalDelete"\n        />\n        {% endblock %}\n\n        \n        {% block sw_media_media_item_move_modal %}\n        <sw-media-modal-move\n            v-if="showModalMove && allowEdit"\n            :items-to-move="[item]"\n            @media-move-modal-close="closeModalMove"\n            @media-move-modal-items-move="onMediaItemMoved"\n        />\n        {% endblock %}\n    </template>\n</sw-media-base-item>\n{% endblock %}\n',inheritAttrs:!1,inject:["mediaService"],mixins:[n.getByName("notification")],data(){return{showModalReplace:!1,showModalDelete:!1,showModalMove:!1}},computed:{locale(){return this.$root.$i18n.locale},defaultContextMenuClass(){return{"sw-context-menu__group":this.$slots.default}},mediaNameFilter(){return Shopware.Filter.getByName("mediaName")},dateFilter(){return Shopware.Filter.getByName("date")},fileSizeFilter(){return Shopware.Filter.getByName("fileSize")},listeners(){return this.isCompatEnabled("INSTANCE_LISTENERS")?this.$listeners:{}}},methods:{async onChangeName(e,t,i){if(!e||!e.trim()){this.rejectRenaming(i);return}t.isLoading=!0;try{await this.mediaService.renameMedia(t.id,e),t.fileName=e,t.isLoading=!1,this.createNotificationSuccess({message:this.$tc("global.sw-media-media-item.notification.renamingSuccess.message")}),this.$emit("media-item-rename-success",t)}catch(e){e.response.data.errors.forEach(e=>{this.handleErrorMessage(e)})}finally{t.isLoading=!1,i()}},handleErrorMessage(e){"CONTENT__MEDIA_FILE_NAME_IS_TOO_LONG"===e.code?this.createNotificationError({message:this.$tc("global.sw-media-media-item.notification.fileNameTooLong.message",0,{length:e.meta.parameters.maxLength})}):this.createNotificationError({message:this.$tc("global.sw-media-media-item.notification.renamingError.message")})},rejectRenaming(e){this.createNotificationError({message:this.$tc("global.sw-media-media-item.notification.errorBlankItemName.message")}),e()},onBlur(e,t,i){let n=e.target.value;if(n!==t.fileName){this.onChangeName(n,t,i);return}i()},emitPlayEvent(e,t){if(!this.selected){this.$emit("media-item-play",{originalDomEvent:e,item:t});return}this.removeFromSelection(e)},async copyItemLink(e){try{await a.copyStringToClipboard(e.url),this.createNotificationSuccess({message:this.$tc("sw-media.general.notification.urlCopied.message")})}catch(e){this.createNotificationError({title:this.$tc("global.default.error"),message:this.$tc("global.sw-field.notification.notificationCopyFailureMessage")})}},openModalDelete(){this.showModalDelete=!0},closeModalDelete(){this.showModalDelete=!1},async emitItemDeleted(e){this.closeModalDelete();let t=await e;this.$emit("media-item-delete",t.mediaIds)},openModalReplace(){this.showModalReplace=!0},closeModalReplace(){this.showModalReplace=!1},openModalMove(){this.showModalMove=!0},closeModalMove(){this.showModalMove=!1},async onMediaItemMoved(e){this.closeModalMove();let t=await e;this.$emit("media-folder-move",t)},emitRefreshMediaLibrary(){this.closeModalReplace(),this.$nextTick(()=>{this.$emit("media-item-replaced")})}}}},410461:function(e,t,i){var n=i(852947);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),i(745346).Z("753610c2",n,!0,{})}}]);