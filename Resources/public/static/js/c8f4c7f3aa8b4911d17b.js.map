{"version":3,"sources":["webpack:///./src/module/sw-cms/elements/cross-selling/component/sw-cms-el-cross-selling.html.twig","webpack:///./src/module/sw-cms/elements/cross-selling/component/index.js","webpack:///./src/module/sw-cms/elements/cross-selling/component/sw-cms-el-cross-selling.scss"],"names":["Mixin","Shopware","isEmpty","Utils","types","template","mixins","getByName","data","sliderBoxLimit","computed","demoProductElement","config","boxLayout","source","value","this","element","displayMode","elMinWidth","sliderBoxMinWidth","indexOf","concat","currentDeviceView","cmsPageState","currentCmsDeviceView","crossSelling","product","crossSellings","length","name","crossSellingProducts","assignedProducts","currentDemoEntity","currentMappingEntity","watch","handler","setSliderRowLimit","_this","setTimeout","created","createdComponent","mounted","mountedComponent","methods","initElementConfig","initElementData","$refs","productHolder","offsetWidth","parseInt","replace","boxWidth","elWidth","Math","floor","getProductEl","content","__esModule","default","module","i","locals","exports","add"],"mappings":"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","file":"static/js/c8f4c7f3aa8b4911d17b.js","sourcesContent":["export default \"\\n{% block sw_cms_element_cross_selling %}\\n<div class=\\\"sw-cms-el-cross-selling\\\">\\n    \\n    {% block sw_cms_element_cross_selling_title %}\\n    <h2 class=\\\"sw-cms-el-cross-selling__title\\\">\\n        {{ placeholder(crossSelling, 'name', crossSelling.name) }}\\n    </h2>\\n    {% endblock %}\\n\\n    \\n    {% block sw_cms_element_cross_selling_content %}\\n    <div class=\\\"sw-cms-el-cross-selling__content\\\">\\n        \\n        {% block sw_cms_element_cross_selling_arrow_left %}\\n        <div class=\\\"sw-cms-el-cross-selling__navigation\\\">\\n            <sw-icon\\n                class=\\\"sw-cms-el-cross-selling__navigation-button\\\"\\n                name=\\\"regular-chevron-left\\\"\\n                size=\\\"24\\\"\\n            />\\n        </div>\\n        {% endblock %}\\n\\n        \\n        {% block sw_cms_element_cross_selling_product_holder %}\\n        <div\\n            ref=\\\"productHolder\\\"\\n            class=\\\"sw-cms-el-cross-selling__product-holder\\\"\\n            :style=\\\"sliderBoxMinWidth\\\"\\n        >\\n            <template v-if=\\\"!element.data.product || !element.data.product.crossSellings.length\\\">\\n                \\n                {% block sw_cms_element_cross_selling_demo_data %}\\n                <sw-cms-el-product-box\\n                    v-for=\\\"index in sliderBoxLimit\\\"\\n                    :key=\\\"index\\\"\\n                    :element=\\\"demoProductElement\\\"\\n                />\\n                {% endblock %}\\n            </template>\\n\\n            <template v-else>\\n                \\n                {% block sw_cms_element_cross_selling_products %}\\n                \\n                <sw-cms-el-product-box\\n                    v-for=\\\"(crossSelling, index) in crossSellingProducts\\\"\\n                    v-if=\\\"index < sliderBoxLimit\\\"\\n                    :key=\\\"crossSelling.id\\\"\\n                    :element=\\\"getProductEl(crossSelling.product)\\\"\\n                />\\n                {% endblock %}\\n            </template>\\n        </div>\\n        {% endblock %}\\n\\n        \\n        {% block sw_cms_element_cross_selling_arrow_right %}\\n        <div class=\\\"sw-cms-el-cross-selling__navigation\\\">\\n            <sw-icon\\n                class=\\\"sw-cms-el-cross-selling__navigation-button\\\"\\n                name=\\\"regular-chevron-right\\\"\\n                size=\\\"24\\\"\\n            />\\n        </div>\\n        {% endblock %}\\n    </div>\\n    {% endblock %}\\n</div>\\n{% endblock %}\\n\";","import template from './sw-cms-el-cross-selling.html.twig';\nimport './sw-cms-el-cross-selling.scss';\n\nconst { Mixin } = Shopware;\nconst { isEmpty } = Shopware.Utils.types;\n\n/**\n * @private\n * @package buyers-experience\n */\nexport default {\n    template,\n\n    mixins: [\n        Mixin.getByName('cms-element'),\n        Mixin.getByName('placeholder'),\n    ],\n\n    data() {\n        return {\n            sliderBoxLimit: 3,\n        };\n    },\n\n    computed: {\n        demoProductElement() {\n            return {\n                config: {\n                    boxLayout: {\n                        source: 'static',\n                        value: this.element.config.boxLayout.value,\n                    },\n                    displayMode: {\n                        source: 'static',\n                        value: this.element.config.displayMode.value,\n                    },\n                    elMinWidth: {\n                        source: 'static',\n                        value: this.element.config.elMinWidth.value,\n                    },\n                },\n            };\n        },\n\n        sliderBoxMinWidth() {\n            if (this.element.config.elMinWidth.value && this.element.config.elMinWidth.value.indexOf('px') > -1) {\n                return `repeat(auto-fit, minmax(${this.element.config.elMinWidth.value}, 1fr))`;\n            }\n\n            return null;\n        },\n\n        currentDeviceView() {\n            return this.cmsPageState.currentCmsDeviceView;\n        },\n\n        crossSelling() {\n            if (!this.element.data.product || !this.element.data.product.crossSellings.length) {\n                return {\n                    name: 'Cross selling title',\n                };\n            }\n\n            return this.element.data.product.crossSellings[0];\n        },\n\n        crossSellingProducts() {\n            return (this.element.data.product.crossSellings.length)\n                ? this.element.data.product.crossSellings[0].assignedProducts\n                : [];\n        },\n\n        currentDemoEntity() {\n            if (this.cmsPageState.currentMappingEntity === 'product') {\n                return this.cmsPageState.currentDemoEntity;\n            }\n\n            return null;\n        },\n    },\n\n    watch: {\n        'element.config.elMinWidth.value': {\n            handler() {\n                this.setSliderRowLimit();\n            },\n        },\n\n        currentDeviceView() {\n            setTimeout(() => {\n                this.setSliderRowLimit();\n            }, 400);\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    mounted() {\n        this.mountedComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.initElementConfig('cross-selling');\n            this.initElementData('cross-selling');\n        },\n\n        mountedComponent() {\n            this.setSliderRowLimit();\n        },\n\n        setSliderRowLimit() {\n            if (isEmpty(this.element.config)) {\n                this.createdComponent();\n            }\n\n            if (this.currentDeviceView === 'mobile'\n                || (this.$refs.productHolder && this.$refs.productHolder.offsetWidth < 500)\n            ) {\n                this.sliderBoxLimit = 1;\n                return;\n            }\n\n            if (!this.element.config.elMinWidth.value ||\n                this.element.config.elMinWidth.value === 'px' ||\n                this.element.config.elMinWidth.value.indexOf('px') === -1) {\n                this.sliderBoxLimit = 3;\n                return;\n            }\n\n            if (parseInt(this.element.config.elMinWidth.value.replace('px', ''), 10) <= 0) {\n                return;\n            }\n\n            // Subtract to fake look in storefront which has more width\n            const fakeLookWidth = 100;\n            const boxWidth = this.$refs.productHolder.offsetWidth;\n            const elGap = 32;\n            let elWidth = parseInt(this.element.config.elMinWidth.value.replace('px', ''), 10);\n\n            if (elWidth >= 300) {\n                elWidth -= fakeLookWidth;\n            }\n\n            this.sliderBoxLimit = Math.floor(boxWidth / (elWidth + elGap));\n        },\n\n        getProductEl(product) {\n            return {\n                config: {\n                    boxLayout: {\n                        source: 'static',\n                        value: this.element.config.boxLayout.value,\n                    },\n                    displayMode: {\n                        source: 'static',\n                        value: this.element.config.displayMode.value,\n                    },\n                },\n                data: {\n                    product,\n                },\n            };\n        },\n    },\n};\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-cms-el-cross-selling.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0179c384\", content, true, {});"],"sourceRoot":""}