{"version":3,"sources":["webpack:///./src/module/sw-settings-custom-field/page/sw-settings-custom-field-set-create/index.js","webpack:///./src/module/sw-settings-custom-field/page/sw-settings-custom-field-set-create/sw-settings-custom-field-set-create.html.twig"],"names":["Criteria","Shopware","Data","utils","Utils","template","beforeRouteEnter","to","from","next","name","includes","params","id","createId","methods","createdComponent","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","isLoading","customFieldSetRepository","create","Context","api","$route","set","sent","$set","setId","stop","saveFinish","this","isSaveSuccessful","$router","push","onSave","_this2","createNotificationError","title","$tc","message","technicalNameError","detail","criteria","addFilter","equals","search","then","res","length","createNameNotUniqueNotification","$super"],"mappings":"0KAKQA,EAAaC,SAASC,KAAtBF,SACFG,EAAQF,SAASG,MAGR,WACXC,SCVW,ktBDYXC,iBAAgB,SAACC,EAAIC,EAAMC,GACnBF,EAAGG,KAAKC,SAAS,qCAAuCJ,EAAGK,OAAOC,KAClEN,EAAGK,OAAOC,GAAKV,EAAMW,YAGzBL,KAGJM,QAAS,CACCC,iBAAgB,WAAI,IAADC,EAAA,YAAAC,IAAAC,IAAAC,MAAA,SAAAC,IAAA,OAAAF,IAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAd,MAAA,OACC,OAAtBQ,EAAKQ,WAAY,EAAKF,EAAAd,KAAA,EACLQ,EAAKS,yBAAyBC,OAAO1B,SAAS2B,QAAQC,IAAKZ,EAAKa,OAAOlB,OAAOC,IAAI,KAAD,EAAlGI,EAAKc,IAAGR,EAAAS,KACRf,EAAKc,IAAIrB,KAAO,UAChBO,EAAKgB,KAAKhB,EAAKc,IAAK,SAAU,IAC9Bd,EAAKiB,MAAQjB,EAAKc,IAAIlB,GACtBI,EAAKQ,WAAY,EAAM,wBAAAF,EAAAY,UAAAd,MANFH,IAQzBkB,WAAU,WACNC,KAAKC,kBAAmB,EACxBD,KAAKE,QAAQC,KAAK,CAAE9B,KAAM,kCAAmCE,OAAQ,CAAEC,GAAIwB,KAAKH,UAEpFO,OAAM,WAAI,IAADC,EAAA,KAGL,GAFAL,KAAKZ,WAAY,GAEZY,KAAKN,MAAQM,KAAKN,IAAIrB,KAYvB,OAXA2B,KAAKM,wBAAwB,CACzBC,MAAOP,KAAKQ,IAAI,wBAChBC,QAAST,KAAKQ,IAAI,6DAGtBR,KAAKU,mBAAqB,CACtBC,OAAQX,KAAKQ,IAAI,iEAGrBR,KAAKZ,WAAY,GAMrB,IAAMwB,EAAW,IAAIjD,EAAS,EAAG,IACjCiD,EAASC,UAAUlD,EAASmD,OAAO,OAAQd,KAAKN,IAAIrB,OAEpD2B,KAAKX,yBAAyB0B,OAAOH,GAAUI,MAAK,SAACC,GAC9B,IAAfA,EAAIC,QAMRb,EAAKc,kCACLd,EAAKjB,WAAY,GANbiB,EAAKe,OAAO,cASxBD,gCAA+B,WAC3BnB,KAAKM,wBAAwB,CACzBC,MAAOP,KAAKQ,IAAI,wBAChBC,QAAST,KAAKQ,IAAI,8DAGtBR,KAAKU,mBAAqB,CACtBC,OAAQX,KAAKQ,IAAI","file":"static/js/96275c9cc29394a67833.js","sourcesContent":["/**\n * @package services-settings\n */\nimport template from './sw-settings-custom-field-set-create.html.twig';\n\nconst { Criteria } = Shopware.Data;\nconst utils = Shopware.Utils;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    beforeRouteEnter(to, from, next) {\n        if (to.name.includes('sw.settings.custom.field.create') && !to.params.id) {\n            to.params.id = utils.createId();\n        }\n\n        next();\n    },\n\n    methods: {\n        async createdComponent() {\n            this.isLoading = true;\n            this.set = await this.customFieldSetRepository.create(Shopware.Context.api, this.$route.params.id);\n            this.set.name = 'custom_';\n            this.$set(this.set, 'config', {});\n            this.setId = this.set.id;\n            this.isLoading = false;\n        },\n        saveFinish() {\n            this.isSaveSuccessful = false;\n            this.$router.push({ name: 'sw.settings.custom.field.detail', params: { id: this.setId } });\n        },\n        onSave() {\n            this.isLoading = true;\n\n            if (!this.set || !this.set.name) {\n                this.createNotificationError({\n                    title: this.$tc('global.default.error'),\n                    message: this.$tc('global.error-codes.c1051bb4-d103-4f74-8988-acbcafc7fdc3'),\n                });\n\n                this.technicalNameError = {\n                    detail: this.$tc('global.error-codes.c1051bb4-d103-4f74-8988-acbcafc7fdc3'),\n                };\n\n                this.isLoading = false;\n\n                return;\n            }\n\n            // Check if a set with the same name exists\n            const criteria = new Criteria(1, 25);\n            criteria.addFilter(Criteria.equals('name', this.set.name));\n\n            this.customFieldSetRepository.search(criteria).then((res) => {\n                if (res.length === 0) {\n                    this.$super('onSave');\n\n                    return;\n                }\n\n                this.createNameNotUniqueNotification();\n                this.isLoading = false;\n            });\n        },\n        createNameNotUniqueNotification() {\n            this.createNotificationError({\n                title: this.$tc('global.default.error'),\n                message: this.$tc('sw-settings-custom-field.set.detail.messageNameNotUnique'),\n            });\n\n            this.technicalNameError = {\n                detail: this.$tc('sw-settings-custom-field.set.detail.messageNameNotUnique'),\n            };\n        },\n    },\n};\n","export default \"\\n{% block sw_settings_custom_field_set_detail_content_detail_custom_field_list %}\\n<sw-card\\n    class=\\\"sw-settings-set-create__option-list-empty-state__wrapper\\\"\\n    position-identifier=\\\"sw-settings-custom-field-set-create\\\"\\n>\\n\\n    \\n    {% block sw_settings_custom_field_set_detail_content_detail_custom_field_list_empty_state %}\\n    <sw-empty-state\\n        :absolute=\\\"false\\\"\\n        class=\\\"sw-settings-set-create__option-list-empty-state__empty-state\\\"\\n        :title=\\\"$tc('sw-settings-custom-field.set.detail.messageCustomFieldsEmpty')\\\"\\n    >\\n\\n        <p>{{ $tc('sw-settings-custom-field.set.detail.emptyStateDescription') }}</p>\\n    </sw-empty-state>\\n    {% endblock %}\\n</sw-card>\\n{% endblock %}\\n\";"],"sourceRoot":""}