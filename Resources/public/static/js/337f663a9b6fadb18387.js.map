{"version":3,"sources":["webpack:///./src/module/sw-product/view/sw-product-detail-cross-selling/index.js","webpack:///./src/module/sw-product/view/sw-product-detail-cross-selling/sw-product-detail-cross-selling.html.twig","webpack:///./src/module/sw-product/view/sw-product-detail-cross-selling/sw-product-detail-cross-selling.scss"],"names":["Criteria","Shopware","Data","_Shopware$Component$g","Component","getComponentHelper","mapState","mapGetters","template","inject","props","allowEdit","type","Boolean","required","default","data","crossSelling","computed","_objectSpread","showCrossSellingCard","this","isLoading","product","crossSellings","length","onAddCrossSellingTooltipMessage","isSystemDefaultLanguage","$tc","assetFilter","Filter","getByName","watch","_this","forEach","item","assignedProducts","loadAssignedProducts","methods","repository","repositoryFactory","create","entity","source","criteria","addFilter","equals","id","addSorting","sort","addAssociation","search","Context","api","inheritance","then","onAddCrossSelling","crossSellingRepository","productId","position","sortBy","sortDirection","limit","push","content","__esModule","module","i","locals","exports","add"],"mappings":"guBAOA,IAAQA,EAAaC,SAASC,KAAtBF,SACRG,EAAiCF,SAASG,UAAUC,qBAA5CC,EAAQH,EAARG,SAAUC,EAAUJ,EAAVI,WAGH,WACXC,SCZW,27FDcXC,OAAQ,CAAC,oBAAqB,OAE9BC,MAAO,CACHC,UAAW,CACPC,KAAMC,QACNC,UAAU,EAGVC,SAAS,IAIjBC,KAAI,WACA,MAAO,CACHC,aAAc,OAItBC,SAAQC,QAAA,GACDb,EAAS,kBAAmB,CAC3B,aAGDC,EAAW,kBAAmB,CAC7B,eAGDA,EAAW,UAAW,CACrB,6BACF,IAEFa,qBAAoB,WAChB,OAAQC,KAAKC,WAAaD,KAAKE,QAAQC,eAAiBH,KAAKE,QAAQC,cAAcC,OAAS,GAGhGC,gCAA+B,WAC3B,OAAIL,KAAKM,wBACEN,KAAKO,IAAI,iCAGbP,KAAKO,IAAI,iEAGpBC,YAAW,WACP,OAAO5B,SAAS6B,OAAOC,UAAU,YAIzCC,MAAO,CACHT,QAAO,SAACA,GAAU,IAADU,EAAA,KACbV,EAAQC,cAAcU,SAAQ,SAACC,GACvBA,EAAKC,iBAAiBX,OAAS,GAInCQ,EAAKI,qBAAqBF,QAKtCG,QAAS,CACLD,qBAAoB,SAACpB,GACjB,IAAMsB,EAAalB,KAAKmB,kBAAkBC,OACtCxB,EAAamB,iBAAiBM,OAC9BzB,EAAamB,iBAAiBO,QAG5BC,EAAW,IAAI5C,EAAS,EAAG,IAYjC,OAXA4C,EAASC,UAAU7C,EAAS8C,OAAO,iBAAkB7B,EAAa8B,KAC7DC,WAAWhD,EAASiD,KAAK,WAAY,QACrCC,eAAe,WAEpBX,EAAWY,OACPP,EAAQzB,IAAA,GACHlB,SAASmD,QAAQC,KAAG,IAAEC,aAAa,KAC1CC,MAAK,SAACnB,GACJnB,EAAamB,iBAAmBA,KAG7BnB,GAGXuC,kBAAiB,WACb,IAAMC,EAAyBpC,KAAKmB,kBAAkBC,OAClDpB,KAAKE,QAAQC,cAAckB,OAC3BrB,KAAKE,QAAQC,cAAcmB,QAE/BtB,KAAKJ,aAAewC,EAAuBhB,SAC3CpB,KAAKJ,aAAayC,UAAYrC,KAAKE,QAAQwB,GAC3C1B,KAAKJ,aAAa0C,SAAWtC,KAAKE,QAAQC,cAAcC,OAAS,EACjEJ,KAAKJ,aAAaL,KAAO,gBACzBS,KAAKJ,aAAa2C,OAAS,OAC3BvC,KAAKJ,aAAa4C,cAAgB,MAClCxC,KAAKJ,aAAa6C,MAAQ,GAE1BzC,KAAKE,QAAQC,cAAcuC,KAAK1C,KAAKJ,kB,qBE1GjD,IAAI+C,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQjD,SACnB,iBAAZiD,IAAsBA,EAAU,CAAC,CAACE,EAAOC,EAAIH,EAAS,MAC7DA,EAAQI,SAAQF,EAAOG,QAAUL,EAAQI,SAG/BE,EADH,EAAQ,QAAwEvD,SACzE,WAAYiD,GAAS,EAAM,K","file":"static/js/337f663a9b6fadb18387.js","sourcesContent":["/*\n * @package inventory\n */\n\nimport template from './sw-product-detail-cross-selling.html.twig';\nimport './sw-product-detail-cross-selling.scss';\n\nconst { Criteria } = Shopware.Data;\nconst { mapState, mapGetters } = Shopware.Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: ['repositoryFactory', 'acl'],\n\n    props: {\n        allowEdit: {\n            type: Boolean,\n            required: false,\n            // TODO: Boolean props should only be opt in and therefore default to false\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n        },\n    },\n\n    data() {\n        return {\n            crossSelling: null,\n        };\n    },\n\n    computed: {\n        ...mapState('swProductDetail', [\n            'product',\n        ]),\n\n        ...mapGetters('swProductDetail', [\n            'isLoading',\n        ]),\n\n        ...mapGetters('context', [\n            'isSystemDefaultLanguage',\n        ]),\n\n        showCrossSellingCard() {\n            return !this.isLoading && this.product.crossSellings && this.product.crossSellings.length > 0;\n        },\n\n        onAddCrossSellingTooltipMessage() {\n            if (this.isSystemDefaultLanguage) {\n                return this.$tc('sw-privileges.tooltip.warning');\n            }\n\n            return this.$tc('sw-product.crossselling.buttonAddCrossSellingLanguageWarning');\n        },\n\n        assetFilter() {\n            return Shopware.Filter.getByName('asset');\n        },\n    },\n\n    watch: {\n        product(product) {\n            product.crossSellings.forEach((item) => {\n                if (item.assignedProducts.length > 0) {\n                    return;\n                }\n\n                this.loadAssignedProducts(item);\n            });\n        },\n    },\n\n    methods: {\n        loadAssignedProducts(crossSelling) {\n            const repository = this.repositoryFactory.create(\n                crossSelling.assignedProducts.entity,\n                crossSelling.assignedProducts.source,\n            );\n\n            const criteria = new Criteria(1, 25);\n            criteria.addFilter(Criteria.equals('crossSellingId', crossSelling.id))\n                .addSorting(Criteria.sort('position', 'ASC'))\n                .addAssociation('product');\n\n            repository.search(\n                criteria,\n                { ...Shopware.Context.api, inheritance: true },\n            ).then((assignedProducts) => {\n                crossSelling.assignedProducts = assignedProducts;\n            });\n\n            return crossSelling;\n        },\n\n        onAddCrossSelling() {\n            const crossSellingRepository = this.repositoryFactory.create(\n                this.product.crossSellings.entity,\n                this.product.crossSellings.source,\n            );\n            this.crossSelling = crossSellingRepository.create();\n            this.crossSelling.productId = this.product.id;\n            this.crossSelling.position = this.product.crossSellings.length + 1;\n            this.crossSelling.type = 'productStream';\n            this.crossSelling.sortBy = 'name';\n            this.crossSelling.sortDirection = 'ASC';\n            this.crossSelling.limit = 24;\n\n            this.product.crossSellings.push(this.crossSelling);\n        },\n    },\n};\n","export default \"\\n{% block sw_product_detail_cross_selling %}\\n<div v-if=\\\"isLoading\\\">\\n    <sw-skeleton />\\n    <sw-skeleton />\\n</div>\\n\\n<div\\n    v-else\\n    class=\\\"sw-product-detail-cross-selling\\\"\\n>\\n    \\n    {% block sw_product_detail_cross_selling_items_wrapper %}\\n    <template v-if=\\\"showCrossSellingCard\\\">\\n        \\n        {% block sw_product_detail_cross_selling_items %}\\n        <ul class=\\\"sw-product-detail-cross-selling__cross-selling-list\\\">\\n            <sw-product-cross-selling-form\\n                v-for=\\\"item in product.crossSellings\\\"\\n                :key=\\\"item.id\\\"\\n                :cross-selling=\\\"item\\\"\\n                :allow-edit=\\\"acl.can('product.editor')\\\"\\n            />\\n        </ul>\\n        {% endblock %}\\n\\n        \\n        {% block sw_product_detail_cross_selling_add %}\\n        <sw-button\\n            v-tooltip=\\\"{\\n                message: onAddCrossSellingTooltipMessage,\\n                disabled: acl.can('product.editor') && isSystemDefaultLanguage,\\n                showOnDisabledElements: true\\n            }\\\"\\n            class=\\\"sw-product-detail-cross-selling__add-btn\\\"\\n            variant=\\\"ghost\\\"\\n            :disabled=\\\"!acl.can('product.editor') || !isSystemDefaultLanguage\\\"\\n            @click=\\\"onAddCrossSelling\\\"\\n        >\\n            {{ $tc('sw-product.crossselling.buttonAddCrossSelling') }}\\n        </sw-button>\\n        {% endblock %}\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_product_detail_empty_state %}\\n    <sw-card\\n        v-else\\n        position-identifier=\\\"sw-product-detail-cross-selling-empty-state\\\"\\n    >\\n        <sw-empty-state\\n            :title=\\\"$tc('sw-product.crossselling.cardTitleCrossSelling')\\\"\\n            :subline=\\\"$tc('sw-product.crossselling.emptyStateDescription')\\\"\\n            :absolute=\\\"false\\\"\\n            empty-module\\n        >\\n            <template #icon>\\n                <img\\n                    :src=\\\"assetFilter('/administration/static/img/empty-states/products-empty-state.svg')\\\"\\n                    :alt=\\\"$tc('sw-product.crossselling.cardTitleCrossSelling')\\\"\\n                >\\n            </template>\\n\\n            \\n            {% block sw_product_detail_empty_state_cross_selling_add %}\\n            <template #actions>\\n                <sw-button\\n                    v-tooltip=\\\"{\\n                        message: onAddCrossSellingTooltipMessage,\\n                        disabled: acl.can('product.editor') && isSystemDefaultLanguage,\\n                        showOnDisabledElements: true\\n                    }\\\"\\n                    variant=\\\"ghost\\\"\\n                    :disabled=\\\"!acl.can('product.editor') || !isSystemDefaultLanguage\\\"\\n                    @click=\\\"onAddCrossSelling\\\"\\n                >\\n                    {{ $tc('sw-product.crossselling.buttonAddCrossSelling') }}\\n                </sw-button>\\n            </template>\\n            {% endblock %}\\n        </sw-empty-state>\\n    </sw-card>\\n    {% endblock %}\\n</div>\\n{% endblock %}\\n\";","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-product-detail-cross-selling.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"fa1a4e64\", content, true, {});"],"sourceRoot":""}