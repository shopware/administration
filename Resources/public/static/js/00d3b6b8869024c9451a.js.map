{"version":3,"sources":["webpack:///./src/module/sw-sales-channel/view/sw-sales-channel-detail-product-comparison/sw-sales-channel-detail-product-comparison.scss","webpack:///./src/module/sw-sales-channel/view/sw-sales-channel-detail-product-comparison/sw-sales-channel-detail-product-comparison.html.twig","webpack:///./src/module/sw-sales-channel/view/sw-sales-channel-detail-product-comparison/index.js"],"names":["content","__esModule","default","module","i","locals","exports","add","Mixin","Shopware","Criteria","Data","warn","Utils","debug","template","inject","mixins","getByName","props","salesChannel","required","productExport","isLoading","type","Boolean","data","showDeleteModal","defaultSnippetSetId","isLoadingDomains","deleteDomain","previewContent","previewErrors","isLoadingPreview","isPreviewSuccessful","isLoadingValidate","isValidateSuccessful","computed","editorConfig","enableBasicAutocompletion","productExportRepository","this","repositoryFactory","create","domainRepository","domains","entity","source","salesChannelRepository","mainNavigationCriteria","addFilter","equals","outerCompleterFunctionHeader","outerCompleterFunction","outerCompleterFunctionBody","product","outerCompleterFunctionFooter","methods","validateTemplate","_this","notificationValidateSuccess","message","$tc","productExportService","validateProductExportTemplate","then","errors","createNotificationSuccess","catch","exception","createNotificationError","response","detail","_name","preview","_this2","previewProductExport","mapping","entityMappingService","prefix","entityMapping","getEntityMapping","Object","keys","map","val","value","onPreviewClose","resetValid"],"mappings":"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","file":"static/js/00d3b6b8869024c9451a.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-sales-channel-detail-product-comparison.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"e03e7ddc\", content, true, {});","export default \"\\n{% block sw_sales_channel_detail_base %}\\n<div class=\\\"sw-sales-channel-detail-product-comparison\\\">\\n\\n    \\n    {% block sw_sales_channel_detail_product_comparison %}\\n    <sw-card\\n        key=\\\"edit\\\"\\n        position-identifier=\\\"sw-sales-channel-detail-product-comparison\\\"\\n        :is-loading=\\\"isLoading\\\"\\n        :title=\\\"$tc('sw-sales-channel.detail.titleProductComparisonTemplate')\\\"\\n    >\\n\\n        \\n        {% block sw_sales_channel_detail_product_comparison_header %}\\n        <sw-container>\\n            \\n            {% block sw_sales_channel_detail_product_comparison_input_header %}\\n            <sw-code-editor\\n                v-model=\\\"productExport.headerTemplate\\\"\\n                :label=\\\"$tc('sw-sales-channel.detail.productComparison.inputHeaderLabel')\\\"\\n                :completer-function=\\\"outerCompleterFunctionHeader\\\"\\n                :editor-config=\\\"editorConfig\\\"\\n                completion-mode=\\\"entity\\\"\\n                mode=\\\"twig\\\"\\n                :soft-wraps=\\\"true\\\"\\n                :set-focus=\\\"false\\\"\\n                :disabled=\\\"!acl.can('sales_channel.editor')\\\"\\n                @input=\\\"resetValid\\\"\\n                @blur=\\\"resetValid\\\"\\n            />\\n            {% endblock %}\\n        </sw-container>\\n        {% endblock %}\\n\\n        \\n        {% block sw_sales_channel_detail_product_comparison_body %}\\n        <sw-container>\\n            \\n            {% block sw_sales_channel_detail_product_comparison_input_body %}\\n            <sw-code-editor\\n                v-model=\\\"productExport.bodyTemplate\\\"\\n                :label=\\\"$tc('sw-sales-channel.detail.productComparison.inputBodyLabel')\\\"\\n                :completer-function=\\\"outerCompleterFunctionBody\\\"\\n                :editor-config=\\\"editorConfig\\\"\\n                completion-mode=\\\"entity\\\"\\n                mode=\\\"twig\\\"\\n                :soft-wraps=\\\"true\\\"\\n                :set-focus=\\\"false\\\"\\n                :disabled=\\\"!acl.can('sales_channel.editor')\\\"\\n                @input=\\\"resetValid\\\"\\n                @blur=\\\"resetValid\\\"\\n            />\\n            {% endblock %}\\n        </sw-container>\\n        {% endblock %}\\n\\n        \\n        {% block sw_sales_channel_detail_product_comparison_footer %}\\n        <sw-container>\\n            \\n            {% block sw_sales_channel_detail_product_comparison_input_footer %}\\n            <sw-code-editor\\n                v-model=\\\"productExport.footerTemplate\\\"\\n                :label=\\\"$tc('sw-sales-channel.detail.productComparison.inputFooterLabel')\\\"\\n                :completer-function=\\\"outerCompleterFunctionFooter\\\"\\n                :editor-config=\\\"editorConfig\\\"\\n                completion-mode=\\\"entity\\\"\\n                mode=\\\"twig\\\"\\n                :soft-wraps=\\\"true\\\"\\n                :set-focus=\\\"false\\\"\\n                :disabled=\\\"!acl.can('sales_channel.editor')\\\"\\n                @input=\\\"resetValid\\\"\\n                @blur=\\\"resetValid\\\"\\n            />\\n            {% endblock %}\\n        </sw-container>\\n        {% endblock %}\\n\\n        \\n        {% block sw_sales_channel_detail_product_comparison_actions %}\\n        <div class=\\\"sw-sales-channel-detail-product-comparison__button-group\\\">\\n            \\n            {% block sw_sales_channel_detail_product_comparison_actions_test_button %}\\n            <sw-button-process\\n                size=\\\"small\\\"\\n                variant=\\\"ghost\\\"\\n                class=\\\"sw-sales-channel-detail-product-comparison__button sw-sales-channel-detail-product-comparison__test-action\\\"\\n                :is-loading=\\\"isLoadingValidate\\\"\\n                :disabled=\\\"isLoadingValidate || (!productExport.headerTemplate && !productExport.bodyTemplate && !productExport.footerTemplate)\\\"\\n                :process-success=\\\"isValidateSuccessful\\\"\\n                @click=\\\"validateTemplate\\\"\\n            >\\n                {{ $tc('sw-sales-channel.detail.productComparison.buttonTestLabel') }}\\n            </sw-button-process>\\n            {% endblock %}\\n\\n            \\n            {% block sw_sales_channel_detail_product_comparison_actions_preview_button %}\\n            <sw-button-process\\n                size=\\\"small\\\"\\n                variant=\\\"ghost\\\"\\n                class=\\\"sw-sales-channel-detail-product-comparison__button sw-sales-channel-detail-product-comparison__preview-action\\\"\\n                :is-loading=\\\"isLoadingPreview\\\"\\n                :disabled=\\\"isLoadingPreview || (!productExport.headerTemplate && !productExport.bodyTemplate && !productExport.footerTemplate)\\\"\\n                :process-success=\\\"isPreviewSuccessful\\\"\\n                @click=\\\"preview\\\"\\n            >\\n                {{ $tc('sw-sales-channel.detail.productComparison.buttonPreviewLabel') }}\\n            </sw-button-process>\\n            {% endblock %}\\n\\n            \\n            {% block sw_sales_channel_detail_product_comparison_actions_preview_component %}\\n            <sw-sales-channel-detail-product-comparison-preview\\n                :content=\\\"previewContent\\\"\\n                :errors=\\\"previewErrors\\\"\\n                @close=\\\"onPreviewClose\\\"\\n            />\\n            {% endblock %}\\n        </div>\\n        {% endblock %}\\n    </sw-card>\\n    {% endblock %}\\n</div>\\n{% endblock %}\\n\";","/**\n * @package buyers-experience\n */\n\nimport template from './sw-sales-channel-detail-product-comparison.html.twig';\nimport './sw-sales-channel-detail-product-comparison.scss';\n\nconst { Mixin } = Shopware;\nconst { Criteria } = Shopware.Data;\nconst { warn } = Shopware.Utils.debug;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: [\n        'salesChannelService',\n        'repositoryFactory',\n        'productExportService',\n        'entityMappingService',\n        'acl',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n        Mixin.getByName('placeholder'),\n    ],\n\n    props: {\n        // FIXME: add type for salesChannel property\n        // eslint-disable-next-line vue/require-prop-types\n        salesChannel: {\n            required: true,\n        },\n\n        // FIXME: add type for prodcutExport property\n        // eslint-disable-next-line vue/require-prop-types\n        productExport: {\n            required: true,\n        },\n\n        isLoading: {\n            type: Boolean,\n            default: false,\n        },\n    },\n\n    data() {\n        return {\n            showDeleteModal: false,\n            defaultSnippetSetId: '71a916e745114d72abafbfdc51cbd9d0',\n            isLoadingDomains: false,\n            deleteDomain: null,\n            previewContent: null,\n            previewErrors: null,\n            isLoadingPreview: false,\n            isPreviewSuccessful: false,\n            isLoadingValidate: false,\n            isValidateSuccessful: false,\n        };\n    },\n\n    computed: {\n        editorConfig() {\n            return {\n                enableBasicAutocompletion: true,\n            };\n        },\n\n        productExportRepository() {\n            return this.repositoryFactory.create('product_export');\n        },\n\n        domainRepository() {\n            return this.repositoryFactory.create(\n                this.salesChannel.domains.entity,\n                this.salesChannel.domains.source,\n            );\n        },\n\n        salesChannelRepository() {\n            return this.repositoryFactory.create('sales_channel');\n        },\n\n        mainNavigationCriteria() {\n            const criteria = new Criteria(1, 10);\n\n            return criteria.addFilter(Criteria.equals('type', 'page'));\n        },\n\n        outerCompleterFunctionHeader() {\n            return this.outerCompleterFunction({\n                productExport: 'product_export',\n            });\n        },\n\n        outerCompleterFunctionBody() {\n            return this.outerCompleterFunction({\n                productExport: 'product_export',\n                product: 'product',\n            });\n        },\n\n        outerCompleterFunctionFooter() {\n            return this.outerCompleterFunction({\n                productExport: 'product_export',\n            });\n        },\n    },\n\n    methods: {\n        validateTemplate() {\n            const notificationValidateSuccess = {\n                message: this.$tc('sw-sales-channel.detail.productComparison.notificationMessageValidateSuccessful'),\n            };\n\n            this.isLoadingValidate = true;\n\n            this.productExportService\n                .validateProductExportTemplate(this.productExport)\n                .then((data) => {\n                    this.isLoadingValidate = false;\n\n                    if (data.errors) {\n                        this.previewContent = data.content;\n                        this.previewErrors = data.errors;\n                        return;\n                    }\n\n                    this.createNotificationSuccess(notificationValidateSuccess);\n                    this.isValidateSuccessful = true;\n                }).catch((exception) => {\n                    this.createNotificationError({\n                        message: exception.response.data.errors[0].detail,\n                    });\n                    warn(this._name, exception.message, exception.response);\n\n                    this.isLoadingValidate = false;\n                    this.isValidateSuccessful = false;\n                });\n        },\n\n        preview() {\n            this.isLoadingPreview = true;\n\n            this.productExportService\n                .previewProductExport(this.productExport)\n                .then((data) => {\n                    this.isLoadingPreview = false;\n                    this.previewContent = data.content;\n\n                    if (data.errors) {\n                        this.previewErrors = data.errors;\n                        return;\n                    }\n\n                    this.isPreviewSuccessful = true;\n                }).catch((exception) => {\n                    this.createNotificationError({\n                        message: exception.response.data.errors[0].detail,\n                    });\n                    warn(this._name, exception.message, exception.response);\n\n                    this.isLoadingPreview = false;\n                });\n        },\n\n        outerCompleterFunction(mapping) {\n            const entityMappingService = this.entityMappingService;\n\n            return function completerFunction(prefix) {\n                const entityMapping = entityMappingService.getEntityMapping(prefix, mapping);\n                return Object.keys(entityMapping).map(val => {\n                    return { value: val };\n                });\n            };\n        },\n\n        onPreviewClose() {\n            this.previewContent = null;\n            this.previewErrors = null;\n            this.isPreviewSuccessful = false;\n        },\n\n        resetValid() {\n            this.isValidateSuccessful = false;\n        },\n    },\n};\n"],"sourceRoot":""}