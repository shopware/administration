(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[27211],{586978:function(){},527211:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}}),n(971896);let{Criteria:s}=Shopware.Data;var i={template:'\n{% block sw_entity_many_to_many_assignment_card %}\n<div\n    class="sw-cms-product-assignment"\n    v-bind="$attrs"\n>\n    \n    {% block sw_cms_product_assignment_content %}\n    <div class="sw-cms-product-assignment__select-container">\n        \n        {% block sw_cms_product_assignment_select %}\n        <slot name="select">\n            <sw-select-base\n                v-bind="$attrs"\n                ref="selectBase"\n                class="sw-cms-product-assignment-select"\n                :disabled="disabled"\n                :label="selectLabel"\n                :is-loading="isLoadingResults"\n                @select-expanded="onSelectExpanded"\n                @select-collapsed="onSelectCollapsed"\n            >\n\n                <template #sw-select-selection="{ identification, error, disabled, size, expand, collapse }">\n                    \n                    {% block sw_cms_product_assignment_search_field %}\n                    <input\n                        ref="searchInput"\n                        tabindex="-1"\n                        :placeholder="placeholder"\n                        :value="searchTerm"\n                        :disabled="disabled"\n                        @input="onSearchTermChange"\n                    >\n                    {% endblock %}\n                </template>\n\n                <template #results-list>\n                    \n                    {% block sw_cms_product_assignment_results_list %}\n                    <sw-select-result-list\n                        ref="swSelectResultList"\n                        :options="resultCollection"\n                        :is-loading="isLoadingResults"\n                        :empty-message="$tc(\'global.sw-entity-many-to-many-select.messageNoResults\', 0, { term: searchTerm })"\n                        :focus-el="$refs.searchInput"\n                        @paginate="paginateResult"\n                        @item-select="onItemSelect"\n                    >\n\n                        \n                        {% block sw_cms_product_assignment_results_list_before %}\n                        <template #before-item-list>\n                            \n                            {% block sw_cms_product_assignment_results_list_before_content %}\n                            <slot name="before-item-list"></slot>\n                        {% endblock %}\n                        </template>\n                        {% endblock %}\n\n                        \n                        {% block sw_cms_product_assignment_results_list_result %}\n                        <template #result-item="{ item, index }">\n                            \n                            {% block sw_cms_product_assignment_results_list_result_content %}\n                            <slot\n                                name="result-item"\n                                v-bind="{ item, index, labelProperty, valueProperty: \'id\', searchTerm, highlightSearchTerm, isSelected, onItemSelect, getKey }"\n                            >\n\n                                \n                                {% block sw_cms_product_assignment_results_list_list_item %}\n                                <sw-select-result\n                                    :selected="isSelected(item)"\n                                    v-bind="{ item, index }"\n                                    @item-select="onItemSelect"\n                                >\n\n                                    \n                                    {% block sw_cms_product_assignment_results_list_list_item_label %}\n                                    <slot\n                                        name="result-label-property"\n                                        v-bind="{ item, index, labelProperty, valueProperty: \'id\', searchTerm, highlightSearchTerm, getKey }"\n                                    >\n\n                                        <sw-highlight-text\n                                            v-if="highlightSearchTerm"\n                                            :text="getKey(item, `translated.${labelProperty}`)"\n                                            :search-term="searchTerm"\n                                        />\n\n                                        <template v-else>\n                                            {{ getKey(item, `translated.${labelProperty}`) }}\n                                        </template>\n                                    </slot>\n                                {% endblock %}\n                                </sw-select-result>\n                            {% endblock %}\n                            </slot>\n                        {% endblock %}\n                        </template>\n                        {% endblock %}\n\n                        \n                        {% block sw_cms_product_assignment_results_list_after %}\n                        <template #after-item-list>\n                            \n                            {% block sw_cms_product_assignment_results_list_after_content %}\n                            <slot name="after-item-list"></slot>\n                        {% endblock %}\n                        </template>\n                    {% endblock %}\n                    </sw-select-result-list>\n                    {% endblock %}\n                </template>\n            </sw-select-base>\n        </slot>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    \n    {% block sw_cms_product_assignment_grid %}\n    <sw-data-grid\n        class="sw-cms-product-assignment__grid"\n        :data-source="gridData"\n        :is-loading="isLoadingGrid"\n        :columns="columns"\n        :v-bind="$attrs"\n        :show-selection="false"\n        :plain-appearance="true"\n    >\n\n        \n        {% block sw_cms_product_assignment_grid_column %}\n        <template\n            v-for="column in columns"\n            #[`column-${column.property}`]="columnProps"\n        >\n            \n            {% block sw_cms_product_assignment_grid_column_content %}\n            <slot\n                :name="`column-${column.property}`"\n                v-bind="{ ...columnProps, searchTerm, highlightSearchTerm }"\n            ></slot>\n            {% endblock %}\n        </template>\n        {% endblock %}\n\n        \n        {% block sw_cms_product_assignment_grid_column_actions %}\n        <template #actions="{ item }">\n            \n            {% block sw_cms_product_assignment_grid_column_actions_content %}\n            <sw-context-menu-item\n                variant="danger"\n                :disabled="disabled"\n                @click="removeFromGrid(item)"\n            >\n                {{ $tc(\'global.entity-components.labelRemoveAssociation\') }}\n            </sw-context-menu-item>\n            {% endblock %}\n        </template>\n        {% endblock %}\n\n        \n        {% block sw_cms_product_assignment_grid_footer %}\n        <template #pagination>\n            \n            {% block sw_cms_product_assignment_grid_footer_content %}\n            <sw-pagination\n                v-if="total > 0"\n                v-bind="{ limit, page, total }"\n                :steps="steps"\n                :auto-hide="false"\n                @page-change="paginateGrid"\n            />\n\n            <div\n                v-else\n                class="sw-cms-product-assignment__empty-state"\n            >\n                <slot name="empty-state"></slot>\n            </div>\n            {% endblock %}\n        </template>\n        {% endblock %}\n    </sw-data-grid>\n    {% endblock %}\n</div>\n{% endblock %}\n',compatConfig:Shopware.compatConfig,emits:["change","paginate"],data(){return{steps:[5]}},computed:{listeners(){return this.isCompatEnabled("INSTANCE_LISTENERS")?this.$listeners:{}}},watch:{criteria:{immediate:!0,handler(){this.gridCriteria=s.fromCriteria(this.criteria),this.searchCriteria=s.fromCriteria(this.criteria),this.paginateGrid()}},entityCollection(){this.selectedIds=this.entityCollection.getIds(),this.paginateGrid()},languageId(){this.paginateGrid()}},created(){this.createdComponent()},methods:{createdComponent(){this.initData()},initData(){this.page=1,this.selectedIds=this.entityCollection.getIds()},searchItems(){return this.searchRepository.search(this.searchCriteria,this.context).then(e=>(new s(1,this.searchCriteria.limit).setIds(e.getIds()),e))},onItemSelect(e){if(this.isSelected(e)){this.removeItem(e);return}this.entityCollection.add(e),this.selectedIds=this.entityCollection.getIds(),this.gridData=this.entityCollection,this.$emit("change",this.entityCollection)},removeItem(e){return this.entityCollection.remove(e.id),this.selectedIds=this.entityCollection.getIds(),this.gridData=this.entityCollection,this.$emit("change",this.entityCollection),Promise.resolve()},onSelectCollapsed(){this.resultCollection=null,this.focusEl.blur(),this.paginateGrid()},paginateGrid({page:e,limit:t}=this.gridCriteria){this.gridCriteria.page=e,this.gridCriteria.limit=t,this.isLoadingGrid=!0;let n=this.entityCollection.slice((e-1)*t,(e-1)*t+t);this.gridData=n,this.isLoadingGrid=!1,this.$emit("paginate",this.gridData)},removeFromGrid(e){this.removeItem(e).then(()=>{this.paginateGrid()})}}}},971896:function(e,t,n){var s=n(586978);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),n(745346).Z("00b9a172",s,!0,{})}}]);