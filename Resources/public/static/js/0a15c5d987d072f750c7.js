(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[478],{"3mmH":function(e,n,t){var a=t("C49f");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,t("ydqr").default)("7848056c",a,!0,{})},C49f:function(e,n,t){},pNRN:function(e,n,t){"use strict";t.r(n);var a=t("HZZ/"),i=t.n(a),s=t("hJxD"),r=t.n(s),l=t("xnOi"),o=(t("3mmH"),Shopware.Mixin),c=Shopware.Utils,d=c.object,u=c.string.kebabCase,f=Shopware.Component.getComponentHelper().mapSystemConfigErrors;n.default={template:'\n{% block sw_system_config %}\n<div class="sw-system-config">\n    <div\n        v-if="salesChannelSwitchable && config.length > 1"\n        class="sw-system-config__global-sales-channel-switch"\n    >\n        <sw-sales-channel-switch\n            :label="$tc(\'sw-settings.system-config.labelSalesChannelSelect\')"\n            @change-sales-channel-id="onSalesChannelChanged"\n        />\n    </div>\n    \n    {% block sw_system_config_content_card %}\n    <sw-card\n        v-for="card, index in config"\n        :key="index"\n        position-identifier="sw-system-config-content"\n        :class="`sw-system-config__card--${index}`"\n        :is-loading="isLoading"\n        :title="getInlineSnippet(card.title)"\n    >\n        <slot\n            name="beforeElements"\n            v-bind="{ card, config: actualConfigData[currentSalesChannelId] }"\n        ></slot>\n        <template\n            v-if="salesChannelSwitchable && config.length === 1"\n            #toolbar\n        >\n            <sw-sales-channel-switch\n                :label="$tc(\'sw-settings.system-config.labelSalesChannelSelect\')"\n                @change-sales-channel-id="onSalesChannelChanged"\n            />\n        </template>\n        <template v-if="hasCssFields">\n            \n            {% block sw_system_config_content_compile_notice %}\n            <sw-alert variant="warning">\n                {{ $tc(\'sw-settings.system-config.compileNotice\') }}\n            </sw-alert>\n\n            {% endblock %}\n        </template>\n        <template v-if="!isLoading">\n            <template v-for="element in card.elements">\n                <slot\n                    name="card-element"\n                    v-bind="{ element: getElementBind(element), config: actualConfigData[currentSalesChannelId], card }"\n                >\n                    \n                    {% block sw_system_config_content_card_field %}\n                    <sw-inherit-wrapper\n                        v-model="actualConfigData[currentSalesChannelId][element.name]"\n                        v-bind="getInheritWrapperBind(element)"\n                        :has-parent="isNotDefaultSalesChannel"\n                        :inherited-value="getInheritedValue(element)"\n                        :class="\'sw-system-config--field-\' + kebabCase(getElementBind(element).name)"\n                    >\n                        <template #content="props">\n                            <sw-form-field-renderer\n                                v-bind="getElementBind(element, props)"\n                                :key="props.isInheritField + props.isInherited"\n                                :disabled="props.isInherited"\n                                :value="props.currentValue"\n                                :error="getFieldError(element.name)"\n                                @input="props.updateCurrentValue"\n                                @change="props.updateCurrentValue"\n                            />\n                        </template>\n                    </sw-inherit-wrapper>\n                    {% endblock %}\n                </slot>\n            </template>\n            <slot name="card-element-last"></slot>\n        </template>\n        <slot\n            name="afterElements"\n            v-bind="{ card, config: actualConfigData[currentSalesChannelId], index }"\n        ></slot>\n    </sw-card>\n    {% endblock %}\n</div>\n{% endblock %}\n',inject:["systemConfigApiService"],mixins:[o.getByName("notification"),o.getByName("sw-inline-snippet")],props:{domain:{required:!0,type:String},salesChannelId:{required:!1,type:String,default:null},salesChannelSwitchable:{type:Boolean,required:!1,default:!1},inherit:{type:Boolean,required:!1,default:!0}},data:function(){return{currentSalesChannelId:this.salesChannelId,isLoading:!1,config:{},actualConfigData:{},salesChannelModel:null,hasCssFields:!1}},computed:{isNotDefaultSalesChannel:function(){return null!==this.currentSalesChannelId},typesWithMapInheritanceSupport:function(){return["text","textarea","url","password","int","float","bool","checkbox","colorpicker"]}},watch:{actualConfigData:{handler:function(){this.emitConfig()},deep:!0},isLoading:function(e){this.$emit("loading-changed",e)}},created:function(){this.createdComponent()},methods:{getFieldError:function(e){return f(l.a.ENTITY_NAME,this.salesChannelId,e)},createdComponent:function(){var e=this;return i()(r.a.mark((function n(){var t,a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isLoading=!0,n.prev=1,n.next=4,e.readConfig();case 4:return n.next=6,e.readAll();case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),null!==n.t0&&void 0!==n.t0&&null!==(t=n.t0.response)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.errors&&e.createErrorNotification(n.t0.response.data.errors);case 11:return n.prev=11,e.isLoading=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,8,11,14]])})))()},readConfig:function(){var e=this;return i()(r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.systemConfigApiService.getConfig(e.domain);case 2:e.config=n.sent,e.config.every((function(n){return null==n?void 0:n.elements.every((function(n){var t;return null==n||null===(t=n.config)||void 0===t||!t.css||(e.hasCssFields=!0,!1)}))}));case 4:case"end":return n.stop()}}),n)})))()},readAll:function(){return this.isLoading=!0,this.actualConfigData.hasOwnProperty(this.currentSalesChannelId)?(this.isLoading=!1,Promise.resolve()):this.loadCurrentSalesChannelConfig()},loadCurrentSalesChannelConfig:function(){var e=this;return i()(r.a.mark((function n(){var t;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isLoading=!0,n.prev=1,n.next=4,e.systemConfigApiService.getValues(e.domain,e.currentSalesChannelId);case 4:t=n.sent,e.$set(e.actualConfigData,e.currentSalesChannelId,t);case 6:return n.prev=6,e.isLoading=!1,n.finish(6);case 9:case"end":return n.stop()}}),n,null,[[1,,6,9]])})))()},saveAll:function(){var e=this;return this.isLoading=!0,this.systemConfigApiService.batchSave(this.actualConfigData).finally((function(){e.isLoading=!1}))},createErrorNotification:function(e){var n="<div>".concat(this.$tc("sw-config-form-renderer.configLoadErrorMessage",e.length),"</div><ul>");e.forEach((function(e){n="".concat(n,"<li>").concat(e.detail,"</li>")})),n+="</ul>",this.createNotificationError({message:n,autoClose:!1})},onSalesChannelChanged:function(e){this.currentSalesChannelId=e,this.readAll()},hasMapInheritanceSupport:function(e){var n=e.config?e.config.componentName:void 0;return"sw-switch-field"===n||"sw-snippet-field"===n||this.typesWithMapInheritanceSupport.includes(e.type)},getElementBind:function(e,n){var t=d.deepCopyObject(e);return this.hasMapInheritanceSupport(e)?t.mapInheritance=n:(delete t.config.label,delete t.config.helpText),["single-select","multi-select"].includes(t.type)&&(t.config.labelProperty="name",t.config.valueProperty="id"),"text-editor"===e.type&&(t.config.componentName="sw-text-editor"),t.config.css&&void 0===t.config.helpText&&(t.config.helpText=this.$tc("sw-settings.system-config.scssHelpText")+e.config.css),t},getInheritWrapperBind:function(e){return this.hasMapInheritanceSupport(e)?{}:{label:this.getInlineSnippet(e.config.label),helpText:this.getInlineSnippet(e.config.helpText)}},getInheritedValue:function(e){var n,t=this.actualConfigData.null[e.name];if(t)return t;if(null!==(n=e.config)&&void 0!==n&&n.componentName&&"sw-switch-field"===e.config.componentName)return!1;switch(e.type){case"date":case"datetime":case"single-select":case"colorpicker":case"password":case"url":case"text":case"textarea":case"text-editor":return"";case"multi-select":return[];case"checkbox":case"bool":return!1;case"float":case"int":return 0;default:return null}},emitConfig:function(){this.$emit("config-changed",this.actualConfigData[this.currentSalesChannelId])},kebabCase:function(e){return u(e)}}}}}]);