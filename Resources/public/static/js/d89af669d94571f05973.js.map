{"version":3,"sources":["webpack:///./src/app/asyncComponent/media/sw-media-folder-content/index.js","webpack:///./src/app/asyncComponent/media/sw-media-folder-content/sw-media-folder-content.html.twig","webpack:///./src/app/asyncComponent/media/sw-media-folder-content/sw-media-folder-content.scss"],"names":["Context","Shopware","Criteria","Data","template","inject","props","startFolderId","type","String","required","default","selectedId","data","subFolders","parentFolder","computed","mediaFolderRepository","this","repositoryFactory","create","assetFilter","Filter","getByName","watch","getSubFolders","fetchParentFolder","mounted","mountedComponent","methods","parentId","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","criteria","searchResult","wrap","_context","prev","next","addFilter","equals","addAssociation","addSorting","sort","search","api","sent","filter","filterItems","stop","getChildCount","folder","children","length","folderId","_this2","_callee2","_context2","get","updateParentFolder","child","_this3","_callee3","_context3","id","name","$tc","emitInput","$emit","content","__esModule","module","i","locals","exports","add"],"mappings":"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","file":"static/js/d89af669d94571f05973.js","sourcesContent":["import template from './sw-media-folder-content.html.twig';\nimport './sw-media-folder-content.scss';\n\nconst { Context } = Shopware;\nconst { Criteria } = Shopware.Data;\n\n/**\n * @package content\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: [\n        'filterItems',\n        'repositoryFactory',\n    ],\n\n    props: {\n        startFolderId: {\n            type: String,\n            required: false,\n            default: null,\n        },\n\n        selectedId: {\n            type: String,\n            required: false,\n            default: null,\n        },\n    },\n\n    data() {\n        return {\n            subFolders: [],\n            parentFolder: null,\n        };\n    },\n\n    computed: {\n        mediaFolderRepository() {\n            return this.repositoryFactory.create('media_folder');\n        },\n\n        assetFilter() {\n            return Shopware.Filter.getByName('asset');\n        },\n    },\n\n    watch: {\n        startFolderId() {\n            this.getSubFolders(this.startFolderId);\n            this.fetchParentFolder(this.startFolderId);\n        },\n    },\n\n    mounted() {\n        this.mountedComponent();\n    },\n\n    methods: {\n        mountedComponent() {\n            this.getSubFolders(this.startFolderId);\n            this.fetchParentFolder(this.startFolderId);\n        },\n\n        async getSubFolders(parentId) {\n            const criteria = new Criteria(1, 50)\n                .addFilter(Criteria.equals('parentId', parentId))\n                .addAssociation('children')\n                .addSorting(Criteria.sort('name', 'asc'));\n\n            const searchResult = await this.mediaFolderRepository.search(criteria, Context.api);\n            this.subFolders = searchResult.filter(this.filterItems);\n        },\n\n        getChildCount(folder) {\n            return folder.children.filter(this.filterItems).length;\n        },\n\n        async fetchParentFolder(folderId) {\n            if (folderId !== null) {\n                const folder = await this.mediaFolderRepository.get(folderId, Context.api);\n                this.updateParentFolder(folder);\n            } else {\n                this.parentFolder = null;\n            }\n        },\n\n        async updateParentFolder(child) {\n            if (child.id === null) {\n                this.parentFolder = null;\n            } else if (child.parentId === null) {\n                this.parentFolder = { id: null, name: this.$tc('sw-media.index.rootFolderName') };\n            } else {\n                this.parentFolder = await this.mediaFolderRepository.get(child.parentId, Context.api);\n            }\n        },\n\n        emitInput(folder) {\n            this.$emit('selected', folder);\n        },\n    },\n};\n","export default \"\\n{% block sw_media_folder_content %}\\n<div class=\\\"sw-media-folder-content\\\">\\n    \\n    {% block sw_media_folder_content_folder_listing %}\\n    <ul\\n        v-if=\\\"subFolders.length > 0 || parentFolder !== null\\\"\\n        class=\\\"sw-media-folder-content__folder-listing\\\"\\n    >\\n        \\n        {% block sw_media_folder_content_list_item %}\\n\\n        <li\\n            v-if=\\\"parentFolder !== null\\\"\\n            class=\\\"sw-media-folder-content__list-item\\\"\\n        >\\n            <button\\n                class=\\\"sw-media-folder-content__button sw-media-folder-content__parent-folder\\\"\\n                @click=\\\"emitInput(parentFolder)\\\"\\n            >\\n                \\n                {% block sw_media_folder_content_folder_icon %}\\n                <img\\n                    :src=\\\"assetFilter('/administration/static/img/media/folder-thumbnail.svg')\\\"\\n                    class=\\\"sw-media-folder-content__folder-icon\\\"\\n                    alt=\\\"Folder thumbnail\\\"\\n                >\\n                {% endblock %}\\n                {{ parentFolder.name }}\\n            </button>\\n        </li>\\n\\n        <li\\n            v-for=\\\"(folder, index) in subFolders\\\"\\n            :key=\\\"folder.id\\\"\\n            :class=\\\"[{'is--selected': folder.id === selectedId}, 'sw-media-folder-content__list-item--' + index ]\\\"\\n            class=\\\"sw-media-folder-content__list-item\\\"\\n            role=\\\"button\\\"\\n            tabindex=\\\"0\\\"\\n            @click=\\\"emitInput(folder)\\\"\\n            @keydown.enter=\\\"emitInput(folder)\\\"\\n        >\\n\\n            \\n            {% block sw_media_folder_content_button_folder %}\\n            \\n            {% block sw_media_folder_content_button_folder_button %}\\n            <button class=\\\"sw-media-folder-content__button sw-media-folder-content__folder-button\\\">\\n                \\n                {% block sw_media_folder_content_folder_button_icon %}\\n                <img\\n                    :src=\\\"assetFilter('/administration/static/img/media/folder-thumbnail.svg')\\\"\\n                    class=\\\"sw-media-folder-content__folder-icon\\\"\\n                    alt=\\\"Folder thumbnail\\\"\\n                >\\n                {% endblock %}\\n                {{ folder.name }}\\n            </button>\\n            {% endblock %}\\n            \\n            {% block sw_media_folder_content_switch_button %}\\n            <sw-icon\\n                v-if=\\\"getChildCount(folder) > 0\\\"\\n                class=\\\"sw-media-folder-content__switch-button\\\"\\n                name=\\\"regular-chevron-right-xxs\\\"\\n                size=\\\"12px\\\"\\n            />\\n            {% endblock %}\\n            {% endblock %}\\n        </li>\\n        {% endblock %}\\n    </ul>\\n    {% endblock %}\\n</div>\\n{% endblock %}\\n\";","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-media-folder-content.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6c594bbb\", content, true, {});"],"sourceRoot":""}