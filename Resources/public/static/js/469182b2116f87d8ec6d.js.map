{"version":3,"sources":["webpack:///./src/module/sw-import-export/component/profile-wizard/sw-import-export-new-profile-wizard-mapping-page/index.js","webpack:///./src/module/sw-import-export/component/profile-wizard/sw-import-export-new-profile-wizard-mapping-page/sw-import-export-new-profile-wizard-mapping-page.html.twig","webpack:///./node_modules/lodash/unionBy.js","webpack:///./src/module/sw-import-export/component/profile-wizard/sw-import-export-new-profile-wizard-mapping-page/sw-import-export-new-profile-wizard-mapping-page.scss"],"names":["template","inject","props","profile","type","Object","required","systemRequiredFields","data","automatedCount","created","this","createdComponent","methods","countAutomatedValues","mergeMappings","$emit","requiredMappings","entries","map","mapping","_mapping","_slicedToArray","key","mappedKey","unifiedMappings","unionBy","sort","firstMappings","secondMappings","position","index","updateMapping","newMapping","reduce","count","undefined","baseFlatten","baseIteratee","baseRest","baseUniq","isArrayLikeObject","last","arrays","iteratee","module","exports","content","__esModule","default","i","locals","add"],"mappings":"8MASe,WACXA,SCVW,y9BDYXC,OAAQ,CACJ,qBAGJC,MAAO,CACHC,QAAS,CACLC,KAAMC,OACNC,UAAU,GAEdC,qBAAsB,CAClBH,KAAMC,OACNC,UAAU,IAIlBE,KAAI,WACA,MAAO,CACHC,eAAgB,IAIxBC,QAAO,WACHC,KAAKC,oBAGTC,QAAS,CACLD,iBAAgB,WACZD,KAAKF,eAAiBE,KAAKG,uBAC3BH,KAAKI,gBAELJ,KAAKK,MAAM,eAGfD,cAAa,WACT,IAAME,EAAmBZ,OAAOa,QAAQP,KAAKJ,sBAAsBY,KAAI,SAAAC,GACnE,IAAAC,EAAAC,IAAyBF,EAAO,GAEhC,MAAO,CAAEG,IAFCF,EAAA,GAEIG,UAFOH,EAAA,OAKnBI,EAAkBC,IAAQf,KAAKR,QAAQiB,QAASH,EAAkB,OACxEQ,EAAgBE,MAAK,SAACC,EAAeC,GACjC,OAAOD,EAAcE,SAAWD,EAAeC,YAGnDnB,KAAKR,QAAQiB,QAAUK,EAAgBN,KAAI,SAACC,EAASW,GAKjD,OAJKX,EAAQU,WACTV,EAAQU,SAAWC,GAGhBX,MAIfY,cAAa,SAACC,GACVtB,KAAKR,QAAQiB,QAAUa,GAG3BnB,qBAAoB,WAChB,OAAOH,KAAKR,QAAQiB,QAAQc,QAAO,SAACC,EAAOf,GAKvC,YAJoBgB,IAAhBhB,EAAQG,KAAqC,OAAhBH,EAAQG,KAAgC,KAAhBH,EAAQG,MAC7DY,GAAS,GAGNA,IACR,O,qBE7Ef,IAAIE,EAAc,EAAQ,QACtBC,EAAe,EAAQ,QACvBC,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAoB,EAAQ,QAC5BC,EAAO,EAAQ,QAyBfhB,EAAUa,GAAS,SAASI,GAC9B,IAAIC,EAAWF,EAAKC,GAIpB,OAHIF,EAAkBG,KACpBA,OAAWR,GAENI,EAASH,EAAYM,EAAQ,EAAGF,GAAmB,GAAOH,EAAaM,EAAU,OAG1FC,EAAOC,QAAUpB,G,qBCnCjB,IAAIqB,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQE,SACnB,iBAAZF,IAAsBA,EAAU,CAAC,CAACF,EAAOK,EAAIH,EAAS,MAC7DA,EAAQI,SAAQN,EAAOC,QAAUC,EAAQI,SAG/BC,EADH,EAAQ,QAA2EH,SAC5E,WAAYF,GAAS,EAAM","file":"static/js/469182b2116f87d8ec6d.js","sourcesContent":["/**\n * @package services-settings\n */\nimport unionBy from 'lodash/unionBy';\n\nimport template from './sw-import-export-new-profile-wizard-mapping-page.html.twig';\nimport './sw-import-export-new-profile-wizard-mapping-page.scss';\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: [\n        'repositoryFactory',\n    ],\n\n    props: {\n        profile: {\n            type: Object,\n            required: true,\n        },\n        systemRequiredFields: {\n            type: Object,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            automatedCount: 0,\n        };\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.automatedCount = this.countAutomatedValues();\n            this.mergeMappings();\n\n            this.$emit('next-allow');\n        },\n\n        mergeMappings() {\n            const requiredMappings = Object.entries(this.systemRequiredFields).map(mapping => {\n                const [key, mappedKey] = mapping;\n\n                return { key, mappedKey };\n            });\n\n            const unifiedMappings = unionBy(this.profile.mapping, requiredMappings, 'key');\n            unifiedMappings.sort((firstMappings, secondMappings) => {\n                return firstMappings.position - secondMappings.position;\n            });\n\n            this.profile.mapping = unifiedMappings.map((mapping, index) => {\n                if (!mapping.position) {\n                    mapping.position = index;\n                }\n\n                return mapping;\n            });\n        },\n\n        updateMapping(newMapping) {\n            this.profile.mapping = newMapping;\n        },\n\n        countAutomatedValues() {\n            return this.profile.mapping.reduce((count, mapping) => {\n                if (mapping.key !== undefined && mapping.key !== null && mapping.key !== '') {\n                    count += 1;\n                }\n\n                return count;\n            }, 0);\n        },\n    },\n};\n","export default \"\\n{% block sw_import_export_new_profile_wizard_mapping_page %}\\n<div class=\\\"sw-import-export-new-profile-wizard-mapping-page\\\">\\n    \\n    {% block sw_import_export_new_profile_wizard_mapping_page_text %}\\n    <p class=\\\"sw-import-export-new-profile-wizard-mapping-page__text\\\">\\n        <template v-if=\\\"automatedCount < 1\\\">\\n            {{ $tc('sw-import-export.profile.mappingDescription') }}\\n        </template>\\n        <template v-else>\\n            {{ $tc('sw-import-export.profile.mappingAutomatedDescription', 0, { automatedCount }) }}\\n        </template>\\n    </p>\\n    {% endblock %}\\n\\n    \\n    {% block sw_import_export_new_profile_wizard_mapping_page_mapping %}\\n    <sw-import-export-edit-profile-modal-mapping\\n        class=\\\"sw-import-export-new-profile-wizard-mapping-page__mapping\\\"\\n        :profile=\\\"profile\\\"\\n        :system-required-fields=\\\"systemRequiredFields\\\"\\n        @update-mapping=\\\"updateMapping\\\"\\n    />\\n    {% endblock %}\\n</div>\\n{% endblock %}\\n\";","var baseFlatten = require('./_baseFlatten'),\n    baseIteratee = require('./_baseIteratee'),\n    baseRest = require('./_baseRest'),\n    baseUniq = require('./_baseUniq'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    last = require('./last');\n\n/**\n * This method is like `_.union` except that it accepts `iteratee` which is\n * invoked for each element of each `arrays` to generate the criterion by\n * which uniqueness is computed. Result values are chosen from the first\n * array in which the value occurs. The iteratee is invoked with one argument:\n * (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.unionBy([2.1], [1.2, 2.3], Math.floor);\n * // => [2.1, 1.2]\n *\n * // The `_.property` iteratee shorthand.\n * _.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n * // => [{ 'x': 1 }, { 'x': 2 }]\n */\nvar unionBy = baseRest(function(arrays) {\n  var iteratee = last(arrays);\n  if (isArrayLikeObject(iteratee)) {\n    iteratee = undefined;\n  }\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), baseIteratee(iteratee, 2));\n});\n\nmodule.exports = unionBy;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-import-export-new-profile-wizard-mapping-page.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0e965517\", content, true, {});"],"sourceRoot":""}