(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[347],{"+cmE":function(t,e,n){},HXfb:function(t,e,n){"use strict";n.r(e);var i=n("J58c"),o=n.n(i);n("R9DT");function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var a=Shopware.EntityDefinition;e.default={template:'\n{% block sw_condition_base %}\n\n{% block sw_product_stream_filter %}\n<div\n    class="sw-product-stream-filter"\n    :class="conditionClasses"\n>\n    \n    {% block sw_product_stream_filter_container %}\n    <div class="sw-product-stream-filter__container">\n        \n        {% block sw_product_stream_filter_selects %}\n        <div class="sw-product-stream-filter__selects">\n            \n            {% block sw_product_stream_filter_fields %}\n            <template v-for="(definition, index) in fieldDefinitions">\n                \n                {% block sw_product_stream_filter_field_select %}\n                <sw-product-stream-field-select\n                    :key="index"\n                    v-bind="{ field: fields[index], definition, index }"\n                    :disabled="!acl.can(\'product_stream.editor\')"\n                    :has-error="hasError"\n                    @field-changed="updateFields"\n                />\n                {% endblock %}\n            </template>\n            {% endblock %}\n\n            \n            {% block sw_product_stream_filter_value %}\n            <sw-product-stream-value\n                v-bind="{ condition, ...lastField }"\n                :disabled="!acl.can(\'product_stream.editor\')"\n                @type-change="changeType"\n                @boolean-change="changeBooleanValue"\n                @empty-change="changeEmptyValue"\n            />\n            {% endblock %}\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_product_stream_filter_field_actions %}\n        <sw-context-button\n            v-tooltip="getNoPermissionsTooltip(\'product_stream.editor\', false)"\n            class="sw-product-stream-filter__context-button"\n            :disabled="!acl.can(\'product_stream.editor\')"\n        >\n            \n            {% block sw_product_stream_filter_field_create_before_action %}\n            <sw-context-menu-item\n                class="sw-product-stream-filter__create-before-action"\n                @click="onCreateBefore"\n            >\n                {{ $tc(\'global.sw-condition.condition.createBefore\') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n            \n            {% block sw_product_stream_filter_field_create_after_action %}\n            <sw-context-menu-item\n                class="sw-product-stream-filter__create-after-action"\n                @click="onCreateAfter"\n            >\n                {{ $tc(\'global.sw-condition.condition.createAfter\') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n            \n            {% block sw_product_stream_filter_field_delete_action %}\n            <sw-context-menu-item\n                variant="danger"\n                @click="onDeleteCondition"\n            >\n                {{ $tc(\'global.default.delete\') }}\n            </sw-context-menu-item>\n            {% endblock %}\n        </sw-context-button>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    \n    {% block sw_product_stream_filter_error %}\n    <sw-field-error :error="currentError" />\n    {% endblock %}\n</div>\n    {% endblock %}\n{% endblock %}\n',inject:["createCondition","insertNodeIntoTree","removeNodeFromTree","productCustomFields","acl","conditionDataProviderService"],computed:{actualCondition:function(){return"not"===this.condition.type?this.condition.queries[0]:this.condition},fields:{get:function(){return this.actualCondition.field?this.conditionDataProviderService.allowedJsonAccessors.hasOwnProperty(this.actualCondition.field)||this.isCustomField(this.actualCondition.field)?[this.actualCondition.field]:this.actualCondition.field.split("."):[]},set:function(t){var e=t.join(".");e.match(".$")&&(e=e.substr(0,e.length)),this.actualCondition.field=e||null}},fieldDefinitions:function(){var t=a.get("product"),e=[t];return this.fields.forEach((function(n){var i=t.getField(n);i&&"association"===i.type&&(t=a.get(i.entity),e.push(t))})),e},lastField:function(){return this.fieldDefinitions.length>this.fields.length?{fieldName:null,definition:a.get("product")}:{fieldName:this.fields[this.fields.length-1],definition:this.fieldDefinitions[this.fieldDefinitions.length-1]}}},methods:{updateFields:function(t){var e=t.field,n=t.index,i=this.fields.slice(0,n);e&&i.push(e),this.changeType({type:null,parameters:null}),this.fields=i},handleWrapForTypeNull:function(t,e){return null===t&&"not"===this.condition.type&&this.unwrapNot(this.condition,null),this.conditionDataProviderService.isNegatedType(t)&&"not"!==this.condition.type?(this.wrapInNot(this.condition,t,e),!1):"not"!==this.condition.type||this.conditionDataProviderService.isNegatedType(t)?"not"===this.condition.type&&this.conditionDataProviderService.isNegatedType(t)?(this.unwrapNot(this.condition,t,e),this.wrapInNot(this.condition,t,e),!1):(this.actualCondition.type=t,!0):(this.unwrapNot(this.condition,t,e),!1)},changeBooleanValue:function(t){var e=t.type,n=t.value;this.handleWrapForTypeNull(e),"not"===this.condition.type&&(this.condition.queries[0].value="1"),this.condition.value=n},changeEmptyValue:function(t){var e=t.type;this.handleWrapForTypeNull(e),"not"===this.condition.type&&(this.condition.queries[0].value=null),this.condition.value=null},changeType:function(t){var e=t.type,n=t.parameters;this.handleWrapForTypeNull(e,n)&&(this.actualCondition.parameters=n,this.actualCondition.value=null)},wrapInNot:function(t,e,n){var i=this.conditionDataProviderService.negateOperator(e).identifier,o=this.copyParameters(s(s({},t),{},{parameters:n}));o.type=i;var r=this.createCondition(o,t.id,0);this.insertNodeIntoTree(this.condition,r),Object.assign(t,{type:"not",field:null,operator:null,value:null,parameters:null})},unwrapNot:function(t,e,n){var i=t.queries[0],o=this.copyParameters(s(s({},i),{},{parameters:n}));o.type=e,Object.assign(t,o),this.removeNodeFromTree(this.condition,i)},copyParameters:function(t){return{field:t.field,type:t.type,operator:t.operator,parameters:t.parameters,value:t.value}},getNoPermissionsTooltip:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{showDelay:300,message:this.$tc("sw-privileges.tooltip.warning"),appearance:"dark",showOnDisabledElements:e,disabled:this.acl.can(t)}},isCustomField:function(t){var e=t.replace(/customFields\./,"");return Object.keys(this.productCustomFields).includes(e)}}}},R9DT:function(t,e,n){var i=n("+cmE");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("ydqr").default)("285e5a2a",i,!0,{})}}]);