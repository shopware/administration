{"version":3,"sources":["webpack:///./src/module/sw-first-run-wizard/view/sw-first-run-wizard-shopware-domain/index.js","webpack:///./src/module/sw-first-run-wizard/view/sw-first-run-wizard-shopware-domain/sw-first-run-wizard-shopware-domain.html.twig","webpack:///./src/module/sw-first-run-wizard/view/sw-first-run-wizard-shopware-domain/sw-first-run-wizard-shopware-domain.scss"],"names":["template","inject","data","licenceDomains","selectedShopDomain","createShopDomain","newShopDomain","testEnvironment","domainError","isLoading","computed","domainToVerify","this","isDomainEmpty","length","watch","updateButtons","created","createdComponent","methods","_this","setTitle","firstRunWizardService","getLicenseDomains","then","response","items","domain","finally","$emit","$tc","buttonConfig","key","label","position","variant","action","disabled","verifyDomain","bind","_this2","verifyLicenseDomain","catch","error","msg","errors","pop","content","__esModule","default","module","i","locals","exports","add"],"mappings":"wIAOe,WACXA,SCRW,knEDUXC,OAAQ,CAAC,yBAETC,KAAI,WACA,MAAO,CACHC,eAAgB,GAChBC,mBAAoB,GACpBC,kBAAkB,EAClBC,cAAe,GACfC,iBAAiB,EACjBC,YAAa,KACbC,WAAW,IAInBC,SAAU,CACNC,eAAc,WACV,OAAOC,KAAKP,iBACNO,KAAKN,cACLM,KAAKR,oBAGfS,cAAa,WACT,OAAOD,KAAKD,eAAeG,QAAU,IAI7CC,MAAO,CACHF,cAAa,WACTD,KAAKI,kBAIbC,QAAO,WACHL,KAAKM,oBAGTC,QAAS,CACLD,iBAAgB,WAAI,IAADE,EAAA,KACfR,KAAKH,WAAY,EACjBG,KAAKI,gBACLJ,KAAKS,WAELT,KAAKU,sBAAsBC,oBAAoBC,MAAK,SAACC,GACjD,IAAQC,EAAUD,EAAVC,OAEHA,GAASA,EAAMZ,OAAS,IAI7BM,EAAKjB,eAAiBuB,EACtBN,EAAKhB,mBAAqBsB,EAAM,GAAGC,WACpCC,SAAQ,WACHR,EAAKjB,eAAeW,QAAU,IAC9BM,EAAKf,kBAAmB,GAE5Be,EAAKX,WAAY,MAIzBY,SAAQ,WACJT,KAAKiB,MAAM,gBAAiBjB,KAAKkB,IAAI,oDAGzCd,cAAa,WACT,IAAMe,EAAe,CACjB,CACIC,IAAK,OACLC,MAAOrB,KAAKkB,IAAI,0CAChBI,SAAU,OACVC,QAAS,KACTC,OAAQ,6CACRC,UAAU,GAEd,CACIL,IAAK,OACLC,MAAOrB,KAAKkB,IAAI,0CAChBI,SAAU,QACVC,QAAS,UACTC,OAAQxB,KAAK0B,aAAaC,KAAK3B,MAC/ByB,SAAUzB,KAAKC,gBAIvBD,KAAKiB,MAAM,iBAAkBE,IAGjCO,aAAY,WAAI,IAADE,EAAA,KACHjC,EAAoBK,KAApBL,gBACFoB,EAASf,KAAKD,eAIpB,OAFAC,KAAKJ,YAAc,KAEZI,KAAKU,sBAAsBmB,oBAAoB,CAClDd,SACApB,oBACDiB,MAAK,WAEJ,OADAgB,EAAKX,MAAM,eAAgB,oCACpB,KACRa,OAAM,SAACC,GACN,IAAMC,EAAMD,EAAMlB,SAASvB,KAAK2C,OAAOC,MAIvC,OAFAN,EAAKhC,YAAcoC,GAEZ,S,4CE9GvB,IAAIG,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQE,SACnB,iBAAZF,IAAsBA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAC7DA,EAAQK,SAAQF,EAAOG,QAAUN,EAAQK,SAG/BE,EADH,EAAQ,QAAwEL,SACzE,WAAYF,GAAS,EAAM","file":"static/js/4a7025d9ac6d73ded404.js","sourcesContent":["import template from './sw-first-run-wizard-shopware-domain.html.twig';\nimport './sw-first-run-wizard-shopware-domain.scss';\n\n/**\n * @package services-settings\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: ['firstRunWizardService'],\n\n    data() {\n        return {\n            licenceDomains: [],\n            selectedShopDomain: '',\n            createShopDomain: false,\n            newShopDomain: '',\n            testEnvironment: false,\n            domainError: null,\n            isLoading: false,\n        };\n    },\n\n    computed: {\n        domainToVerify() {\n            return this.createShopDomain\n                ? this.newShopDomain\n                : this.selectedShopDomain;\n        },\n\n        isDomainEmpty() {\n            return this.domainToVerify.length <= 0;\n        },\n    },\n\n    watch: {\n        isDomainEmpty() {\n            this.updateButtons();\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.isLoading = true;\n            this.updateButtons();\n            this.setTitle();\n\n            this.firstRunWizardService.getLicenseDomains().then((response) => {\n                const { items } = response;\n\n                if (!items || items.length < 1) {\n                    return;\n                }\n\n                this.licenceDomains = items;\n                this.selectedShopDomain = items[0].domain;\n            }).finally(() => {\n                if (this.licenceDomains.length <= 0) {\n                    this.createShopDomain = true;\n                }\n                this.isLoading = false;\n            });\n        },\n\n        setTitle() {\n            this.$emit('frw-set-title', this.$tc('sw-first-run-wizard.shopwareAccount.modalTitle'));\n        },\n\n        updateButtons() {\n            const buttonConfig = [\n                {\n                    key: 'back',\n                    label: this.$tc('sw-first-run-wizard.general.buttonBack'),\n                    position: 'left',\n                    variant: null,\n                    action: 'sw.first.run.wizard.index.shopware.account',\n                    disabled: false,\n                },\n                {\n                    key: 'next',\n                    label: this.$tc('sw-first-run-wizard.general.buttonNext'),\n                    position: 'right',\n                    variant: 'primary',\n                    action: this.verifyDomain.bind(this),\n                    disabled: this.isDomainEmpty,\n                },\n            ];\n\n            this.$emit('buttons-update', buttonConfig);\n        },\n\n        verifyDomain() {\n            const { testEnvironment } = this;\n            const domain = this.domainToVerify;\n\n            this.domainError = null;\n\n            return this.firstRunWizardService.verifyLicenseDomain({\n                domain,\n                testEnvironment,\n            }).then(() => {\n                this.$emit('frw-redirect', 'sw.first.run.wizard.index.store');\n                return false;\n            }).catch((error) => {\n                const msg = error.response.data.errors.pop();\n\n                this.domainError = msg;\n\n                return true;\n            });\n        },\n    },\n};\n","export default \"\\n{% block sw_first_run_wizard_shopware_domain %}\\n<div class=\\\"sw-first-run-wizard-shopware-domain\\\">\\n    <h3 class=\\\"headline\\\">\\n        {{ $tc('sw-first-run-wizard.shopwareDomain.headline') }}\\n    </h3>\\n    <p\\n        class=\\\"message\\\"\\n        v-html=\\\"$tc('sw-first-run-wizard.shopwareDomain.message')\\\"\\n    ></p>\\n\\n    <sw-switch-field\\n        {% if VUE3 %}\\n        v-model:value=\\\"createShopDomain\\\"\\n        {% else %}\\n        v-model=\\\"createShopDomain\\\"\\n        {% endif %}\\n        :label=\\\"$tc('sw-first-run-wizard.shopwareDomain.labelCreateDomain')\\\"\\n    />\\n\\n    <div v-if=\\\"createShopDomain\\\">\\n        <sw-text-field\\n            {% if VUE3 %}\\n            v-model:value=\\\"newShopDomain\\\"\\n            {% else %}\\n            v-model=\\\"newShopDomain\\\"\\n            {% endif %}\\n            name=\\\"newShopDomain\\\"\\n            validation=\\\"required\\\"\\n            :label=\\\"'Shop domain'\\\"\\n        />\\n        <sw-checkbox-field\\n            {% if VUE3 %}\\n            v-model:value=\\\"testEnvironment\\\"\\n            {% else %}\\n            v-model=\\\"testEnvironment\\\"\\n            {% endif %}\\n            :label=\\\"$tc('sw-first-run-wizard.shopwareDomain.testEnvironment')\\\"\\n        />\\n    </div>\\n    <div v-else-if=\\\"licenceDomains.length > 0\\\">\\n        <sw-select-field\\n            {% if VUE3 %}\\n            v-model:value=\\\"selectedShopDomain\\\"\\n            {% else %}\\n            v-model=\\\"selectedShopDomain\\\"\\n            {% endif %}\\n            label=\\\"Shop domain\\\"\\n            placeholder=\\\"\\\"\\n        >\\n            <option\\n                v-for=\\\"domain in licenceDomains\\\"\\n                :key=\\\"domain.domain\\\"\\n                :value=\\\"domain.domain\\\"\\n            >\\n                {{ domain.domain }}\\n            </option>\\n        </sw-select-field>\\n    </div>\\n    <div\\n        v-if=\\\"domainError\\\"\\n        class=\\\"sw-first-run-wizard-shopware-domain__error\\\"\\n    >\\n        <sw-alert\\n            :title=\\\"domainError.title\\\"\\n            variant=\\\"error\\\"\\n            appearance=\\\"notification\\\"\\n        >\\n            {{ domainError.detail }}\\n        </sw-alert>\\n    </div>\\n\\n    <sw-loader v-if=\\\"isLoading\\\" />\\n</div>\\n{% endblock %}\\n\";","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-first-run-wizard-shopware-domain.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"92696aa6\", content, true, {});"],"sourceRoot":""}