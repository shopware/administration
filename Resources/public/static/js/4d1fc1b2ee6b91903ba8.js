(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[96238],{687333:function(){},596238:function(i,e,t){"use strict";t.r(e),t.d(e,{default:function(){return o}}),t(425487);let{Mixin:n,Data:{Criteria:s},Context:r}=Shopware,{cloneDeep:p}=Shopware.Utils.object,{mapState:a,mapGetters:c}=Shopware.Component.getComponentHelper();var o={template:'\n{% block sw_settings_shipping_price_matrices %}\n<div class="sw-settings-shipping-price-matrices">\n    \n    {% block sw_settings_shipping_price_matrices_price_matrix %}\n    <sw-settings-shipping-price-matrix\n        v-for="priceGroup in shippingPriceGroups"\n        :key="priceGroup.ruleId"\n        :price-group="priceGroup"\n        :disabled="disabled || undefined"\n        @duplicate-price-matrix="onDuplicatePriceMatrix"\n        @delete-price-matrix="onDeletePriceMatrix"\n    />\n    {% endblock %}\n\n    \n    {% block sw_settings_shipping_detail_advanced_prices_actions %}\n    <div class="sw-settings-shipping-price-matrices__actions">\n        \n        {% block sw_settings_shipping_detail_advanced_prices_actions_add_button %}\n        <sw-button\n            v-tooltip="{\n                showDelay: 300,\n                showOnDisabledElements: true,\n                message: $tc(\'sw-settings-shipping.priceMatrix.newMatrixAlreadyExists\'),\n                disabled: !newPriceMatrixExists\n            }"\n            :disabled="newPriceMatrixExists || disabled || undefined"\n            class="sw-settings-shipping-price-matrices__actions-add-matrix"\n            @click="onAddNewPriceGroup"\n        >\n            {{ $tc(\'sw-settings-shipping.priceMatrix.buttonAddAdditionalPriceMatrix\') }}\n        </sw-button>\n        {% endblock %}\n    </div>\n    {% endblock %}\n</div>\n{% endblock %}\n',compatConfig:Shopware.compatConfig,inject:["repositoryFactory","ruleConditionDataProviderService","feature"],mixins:[n.getByName("notification"),n.getByName("placeholder")],props:{disabled:{type:Boolean,required:!1,default:!1}},computed:{...a("swShippingDetail",["shippingMethod"]),...c("swShippingDetail",["shippingPriceGroups","usedRules","unrestrictedPriceMatrixExists","newPriceMatrixExists"]),ruleRepository(){return this.repositoryFactory.create("rule")},ruleFilter(){let i=new s(1,500);return i.addFilter(s.multi("OR",[s.contains("rule.moduleTypes.types","price"),s.equals("rule.moduleTypes",null)])),i},shippingPriceRepository(){return this.repositoryFactory.create("shipping_method_price")},isLoaded(){return this.currencies.length&&this.shippingMethod}},methods:{onAddNewPriceGroup(){let i=this.shippingPriceRepository.create(r.api);i.shippingMethodId=this.shippingMethod.id,i.quantityStart=1,i.ruleId=null,this.unrestrictedPriceMatrixExists&&(i._inNewMatrix=!0),this.shippingMethod.prices.add(i)},onDeletePriceMatrix(i){this.shippingMethod.prices=this.shippingMethod.prices.filter(e=>i.isNew?!e._inNewMatrix:e.ruleId!==i.ruleId)},onDuplicatePriceMatrix(i){let e=[];i.prices.forEach(i=>{let t=this.shippingPriceRepository.create(r.api);this.unrestrictedPriceMatrixExists&&(t._inNewMatrix=!0),t.ruleId=null,t.calculation=i.calculation,t.calculationRule=i.calculationRule,t.calculationRuleId=i.calculationRuleId,t.shippingMethodId=i.shippingMethodId,t.currencyPrice=p(i.currencyPrice),t.quantityStart=i.quantityStart,t.quantityEnd=i.quantityEnd,e.push(t)}),this.shippingMethod.prices.push(...e)}}}},425487:function(i,e,t){var n=t(687333);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[i.id,n,""]]),n.locals&&(i.exports=n.locals),t(745346).Z("8dc64b22",n,!0,{})}}]);