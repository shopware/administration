{"version":3,"sources":["webpack:///./src/module/sw-order/component/sw-order-document-settings-credit-note-modal/sw-order-document-settings-credit-note-modal.scss","webpack:///./src/module/sw-order/component/sw-order-document-settings-credit-note-modal/index.js","webpack:///./src/module/sw-order/component/sw-order-document-settings-credit-note-modal/sw-order-document-settings-credit-note-modal.html.twig"],"names":["content","__esModule","default","module","i","locals","exports","add","template","data","documentConfig","custom","creditNoteNumber","invoiceNumber","invoiceNumbers","computed","highlightedItems","items","this","order","lineItems","forEach","lineItem","type","push","documentPreconditionsFulfilled","length","created","createdComponent","methods","$super","documents","filter","document","documentType","technicalName","map","item","config","_toConsumableArray","Set","sort","onCreateDocument","_this","additionalAction","arguments","undefined","$emit","documentNumberPreview","documentNumber","numberRangeService","reserve","concat","currentDocumentType","salesChannelId","then","response","number","createNotificationInfo","message","$tc","callDocumentCreate"],"mappings":"+HAGA,IAAIA,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQE,SACnB,iBAAZF,IAAsBA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAC7DA,EAAQK,SAAQF,EAAOG,QAAUN,EAAQK,SAG/BE,EADH,EAAQ,QAAwEL,SACzE,WAAYF,GAAS,EAAM,K,4ECD7B,WACXQ,SCTW,ypDDWXC,KAAI,WACA,MAAO,CACHC,eAAgB,CACZC,OAAQ,CACJC,iBAAkB,GAClBC,cAAe,KAGvBC,eAAgB,KAIxBC,SAAU,CACNC,iBAAgB,WACZ,IAAMC,EAAQ,GAQd,OANAC,KAAKC,MAAMC,UAAUC,SAAQ,SAACC,GACJ,WAAlBA,EAASC,MACTN,EAAMO,KAAKF,MAIZL,GAGXQ,+BAA8B,WAC1B,OAAwC,IAAjCP,KAAKF,iBAAiBU,QAAgBR,KAAKR,eAAeC,OAAOE,gBAIhFc,QAAO,WACHT,KAAKU,oBAGTC,QAAS,CACLD,iBAAgB,WACZV,KAAKY,OAAO,oBAEZ,IAAMhB,EAAiBI,KAAKC,MAAMY,UAC7BC,QAAO,SAAAC,GACJ,MAA+C,YAAxCA,EAASC,aAAaC,iBAEhCC,KAAI,SAAAC,GACD,OAAOA,EAAKC,OAAO3B,OAAOE,iBAGlCK,KAAKJ,eAAiByB,IAAI,IAAIC,IAAI1B,IAAiB2B,QAGvDC,iBAAgB,WAA4B,IAADC,EAAA,KAA1BC,EAAgBC,UAAAnB,OAAA,QAAAoB,IAAAD,UAAA,IAAAA,UAAA,GAC7B3B,KAAK6B,MAAM,oBAEP7B,KAAK8B,wBAA0B9B,KAAKR,eAAeuC,eACnD/B,KAAKgC,mBAAmBC,QAAQ,YAADC,OACflC,KAAKmC,oBAAoBlB,eACrCjB,KAAKC,MAAMmC,gBACX,GACFC,MAAK,SAACC,GACJb,EAAKjC,eAAeC,OAAOC,iBAAmB4C,EAASC,OACnDD,EAASC,SAAWd,EAAKjC,eAAeuC,gBACxCN,EAAKe,uBAAuB,CACxBC,QAAShB,EAAKiB,IAAI,6DAG1BjB,EAAKjC,eAAeuC,eAAiBO,EAASC,OAC9Cd,EAAKkB,mBAAmBjB,OAG5B1B,KAAKR,eAAeC,OAAOC,iBAAmBM,KAAKR,eAAeuC,eAClE/B,KAAK2C,mBAAmBjB","file":"static/js/b274acfbe8e26c0e0663.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-order-document-settings-credit-note-modal.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"58bfd6da\", content, true, {});","import template from './sw-order-document-settings-credit-note-modal.html.twig';\nimport './sw-order-document-settings-credit-note-modal.scss';\n\n/**\n * @package checkout\n */\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    data() {\n        return {\n            documentConfig: {\n                custom: {\n                    creditNoteNumber: '',\n                    invoiceNumber: '',\n                },\n            },\n            invoiceNumbers: [],\n        };\n    },\n\n    computed: {\n        highlightedItems() {\n            const items = [];\n\n            this.order.lineItems.forEach((lineItem) => {\n                if (lineItem.type === 'credit') {\n                    items.push(lineItem);\n                }\n            });\n\n            return items;\n        },\n\n        documentPreconditionsFulfilled() {\n            return this.highlightedItems.length !== 0 && this.documentConfig.custom.invoiceNumber;\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.$super('createdComponent');\n\n            const invoiceNumbers = this.order.documents\n                .filter(document => {\n                    return document.documentType.technicalName === 'invoice';\n                })\n                .map(item => {\n                    return item.config.custom.invoiceNumber;\n                });\n\n            this.invoiceNumbers = [...new Set(invoiceNumbers)].sort();\n        },\n\n        onCreateDocument(additionalAction = false) {\n            this.$emit('loading-document');\n\n            if (this.documentNumberPreview === this.documentConfig.documentNumber) {\n                this.numberRangeService.reserve(\n                    `document_${this.currentDocumentType.technicalName}`,\n                    this.order.salesChannelId,\n                    false,\n                ).then((response) => {\n                    this.documentConfig.custom.creditNoteNumber = response.number;\n                    if (response.number !== this.documentConfig.documentNumber) {\n                        this.createNotificationInfo({\n                            message: this.$tc('sw-order.documentCard.info.DOCUMENT__NUMBER_WAS_CHANGED'),\n                        });\n                    }\n                    this.documentConfig.documentNumber = response.number;\n                    this.callDocumentCreate(additionalAction);\n                });\n            } else {\n                this.documentConfig.custom.creditNoteNumber = this.documentConfig.documentNumber;\n                this.callDocumentCreate(additionalAction);\n            }\n        },\n    },\n};\n","export default \"\\n{% block sw_order_document_settings_modal_form_first_row %}\\n<sw-container\\n    columns=\\\"1fr 1fr 1fr\\\"\\n    gap=\\\"0 14px\\\"\\n>\\n    \\n    {% block sw_order_document_settings_modal_form_credit_document_number %}\\n    <sw-text-field\\n        {% if VUE3 %}\\n        v-model:value=\\\"documentConfig.documentNumber\\\"\\n        {% else %}\\n        v-model=\\\"documentConfig.documentNumber\\\"\\n        {% endif %}\\n        :label=\\\"$tc('sw-order.documentModal.labelDocumentNumber')\\\"\\n    />\\n    {% endblock %}\\n\\n    \\n    {% block sw_order_document_settings_modal_form_document_select_invoice %}\\n    <sw-select-field\\n        {% if VUE3 %}\\n        v-model:value=\\\"documentConfig.custom.invoiceNumber\\\"\\n        {% else %}\\n        v-model=\\\"documentConfig.custom.invoiceNumber\\\"\\n        {% endif %}\\n        class=\\\"sw-order-document-settings-credit-note-modal__invoice-select\\\"\\n        required\\n        :label=\\\"$tc('sw-order.documentModal.labelInvoiceNumber')\\\"\\n        :placeholder=\\\"$tc('sw-order.documentModal.selectInvoiceNumber')\\\"\\n    >\\n        <option\\n            v-for=\\\"number in invoiceNumbers\\\"\\n            :key=\\\"number\\\"\\n            :value=\\\"number\\\"\\n        >\\n            {{ number }}\\n        </option>\\n    </sw-select-field>\\n    {% endblock %}\\n\\n    \\n    {% block sw_order_document_settings_modal_form_document_date %}\\n    <sw-datepicker\\n        {% if VUE3 %}\\n        v-model:value=\\\"documentConfig.documentDate\\\"\\n        {% else %}\\n        v-model=\\\"documentConfig.documentDate\\\"\\n        {% endif %}\\n        date-type=\\\"date\\\"\\n        required\\n        :label=\\\"$tc('sw-order.documentModal.labelDocumentDate')\\\"\\n    />\\n    {% endblock %}\\n</sw-container>\\n{% endblock %}\\n\";"],"sourceRoot":""}