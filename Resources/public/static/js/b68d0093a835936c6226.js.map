{"version":3,"sources":["webpack:///./src/module/sw-product/view/sw-product-detail-reviews/index.js","webpack:///./src/module/sw-product/view/sw-product-detail-reviews/sw-product-detail-reviews.html.twig","webpack:///./src/module/sw-product/view/sw-product-detail-reviews/sw-product-detail-reviews.scss"],"names":["_Shopware","Shopware","Component","Data","Context","Criteria","_Component$getCompone","getComponentHelper","mapState","mapGetters","template","inject","data","showReviewDeleteModal","deleteReviewId","dataSource","page","limit","total","computed","_objectSpread","cardTitle","this","$tc","reviewRepository","repositoryFactory","create","reviewCriteria","criteria","addFilter","equals","product","id","setTotalCountMode","reviewColumns","property","dataIndex","label","align","routerLink","assetFilter","Filter","getByName","dateFilter","watch","immediate","handler","newValue","getReviews","created","createdComponent","methods","_this","search","api","then","reviews","length","onStartReviewDelete","review","onShowReviewDeleteModal","onCancelReviewDelete","onCloseReviewDeleteModal","onConfirmReviewDelete","_this2","delete","onChangePage","content","__esModule","default","module","i","locals","exports","add"],"mappings":"kuBAOA,IAAAA,EAAqCC,SAA7BC,EAASF,EAATE,UAAWC,EAAIH,EAAJG,KAAMC,EAAOJ,EAAPI,QACjBC,EAAaF,EAAbE,SACRC,EAAiCJ,EAAUK,qBAAnCC,EAAQF,EAARE,SAAUC,EAAUH,EAAVG,WAGH,WACXC,SCbW,+5NDeXC,OAAQ,CAAC,oBAAqB,OAE9BC,KAAI,WACA,MAAO,CACHC,uBAAuB,EACvBC,eAAgB,KAChBC,WAAY,GACZC,KAAM,EACNC,MAAO,GACPC,MAAO,IAIfC,SAAQC,MAAA,GACDZ,EAAS,kBAAmB,CAC3B,aAGDC,EAAW,kBAAmB,CAC7B,eACF,IAEFY,UAAS,WACL,OAAOC,KAAKJ,MAAQI,KAAKC,IAAI,uCAAyC,MAG1EC,iBAAgB,WACZ,OAAOF,KAAKG,kBAAkBC,OAAO,mBAGzCC,eAAc,WACV,IAAMC,EAAW,IAAIvB,EAASiB,KAAKN,KAAMM,KAAKL,OAO9C,OALAW,EAASC,UACLxB,EAASyB,OAAO,YAAaR,KAAKS,QAAQC,KAE9CJ,EAASK,kBAAkB,GAEpBL,GAGXM,cAAa,WACT,MAAO,CACH,CACIC,SAAU,SACVC,UAAW,SACXC,MAAOf,KAAKC,IAAI,sCAEpB,CACIY,SAAU,SACVC,UAAW,SACXC,MAAOf,KAAKC,IAAI,qCAChBe,MAAO,UAEX,CACIH,SAAU,YACVC,UAAW,YACXC,MAAOf,KAAKC,IAAI,yCAEpB,CACIY,SAAU,QACVC,UAAW,QACXC,MAAOf,KAAKC,IAAI,oCAChBgB,WAAY,sBAKxBC,YAAW,WACP,OAAOvC,SAASwC,OAAOC,UAAU,UAGrCC,WAAU,WACN,OAAO1C,SAASwC,OAAOC,UAAU,WAIzCE,MAAO,CACH,aAAc,CACVC,WAAW,EACXC,QAAO,SAACC,GACCA,GAILzB,KAAK0B,gBAKjBC,QAAO,WACH3B,KAAK4B,oBAGTC,QAAS,CACLD,iBAAgB,WACZ5B,KAAK0B,cAGTA,WAAU,WAAI,IAADI,EAAA,KACJ9B,KAAKS,SAAYT,KAAKS,QAAQC,IAInCV,KAAKE,iBAAiB6B,OAAO/B,KAAKK,eAAgBvB,EAAQkD,KAAKC,MAAK,SAACC,GACjEJ,EAAKlC,MAAQsC,EAAQtC,MACrBkC,EAAKrC,WAAayC,EAEdJ,EAAKlC,MAAQ,GAAKkC,EAAKrC,WAAW0C,QAAU,IAC5CL,EAAKpC,KAAsB,IAAdoC,EAAKpC,KAAc,EAAIoC,EAAKpC,KAAO,EAChDoC,EAAKJ,kBAKjBU,oBAAmB,SAACC,GAChBrC,KAAKR,eAAiB6C,EAAO3B,GAC7BV,KAAKsC,2BAGTC,qBAAoB,WAChBvC,KAAKR,eAAiB,KACtBQ,KAAKwC,4BAGTF,wBAAuB,WACnBtC,KAAKT,uBAAwB,GAGjCiD,yBAAwB,WACpBxC,KAAKT,uBAAwB,GAGjCkD,sBAAqB,WAAI,IAADC,EAAA,KACpB1C,KAAKwC,2BAELxC,KAAKE,iBAAiByC,OAAO3C,KAAKR,eAAgBV,EAAQkD,KAAKC,MAAK,WAChES,EAAKlD,eAAiB,KACtBkD,EAAKhB,iBAIbkB,aAAY,SAACtD,GACTU,KAAKN,KAAOJ,EAAKI,KACjBM,KAAKL,MAAQL,EAAKK,MAClBK,KAAK0B,iB,4CE7JjB,IAAImB,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQE,SACnB,iBAAZF,IAAsBA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAC7DA,EAAQK,SAAQF,EAAOG,QAAUN,EAAQK,SAG/BE,EADH,EAAQ,QAAwEL,SACzE,WAAYF,GAAS,EAAM","file":"static/js/b68d0093a835936c6226.js","sourcesContent":["/*\n * @package inventory\n */\n\nimport template from './sw-product-detail-reviews.html.twig';\nimport './sw-product-detail-reviews.scss';\n\nconst { Component, Data, Context } = Shopware;\nconst { Criteria } = Data;\nconst { mapState, mapGetters } = Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: ['repositoryFactory', 'acl'],\n\n    data() {\n        return {\n            showReviewDeleteModal: false,\n            deleteReviewId: null,\n            dataSource: [],\n            page: 1,\n            limit: 10,\n            total: 0,\n        };\n    },\n\n    computed: {\n        ...mapState('swProductDetail', [\n            'product',\n        ]),\n\n        ...mapGetters('swProductDetail', [\n            'isLoading',\n        ]),\n\n        cardTitle() {\n            return this.total ? this.$tc('sw-product.reviews.cardTitleReviews') : null;\n        },\n\n        reviewRepository() {\n            return this.repositoryFactory.create('product_review');\n        },\n\n        reviewCriteria() {\n            const criteria = new Criteria(this.page, this.limit);\n\n            criteria.addFilter(\n                Criteria.equals('productId', this.product.id),\n            );\n            criteria.setTotalCountMode(1);\n\n            return criteria;\n        },\n\n        reviewColumns() {\n            return [\n                {\n                    property: 'points',\n                    dataIndex: 'points',\n                    label: this.$tc('sw-product.reviewForm.labelPoints'),\n                },\n                {\n                    property: 'status',\n                    dataIndex: 'status',\n                    label: this.$tc('sw-product.reviewForm.labelStatus'),\n                    align: 'center',\n                },\n                {\n                    property: 'createdAt',\n                    dataIndex: 'createdAt',\n                    label: this.$tc('sw-product.reviewForm.labelCreatedAt'),\n                },\n                {\n                    property: 'title',\n                    dataIndex: 'title',\n                    label: this.$tc('sw-product.reviewForm.labelTitle'),\n                    routerLink: 'sw.review.detail',\n                },\n            ];\n        },\n\n        assetFilter() {\n            return Shopware.Filter.getByName('asset');\n        },\n\n        dateFilter() {\n            return Shopware.Filter.getByName('date');\n        },\n    },\n\n    watch: {\n        'product.id': {\n            immediate: true,\n            handler(newValue) {\n                if (!newValue) {\n                    return;\n                }\n\n                this.getReviews();\n            },\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.getReviews();\n        },\n\n        getReviews() {\n            if (!this.product || !this.product.id) {\n                return;\n            }\n\n            this.reviewRepository.search(this.reviewCriteria, Context.api).then((reviews) => {\n                this.total = reviews.total;\n                this.dataSource = reviews;\n\n                if (this.total > 0 && this.dataSource.length <= 0) {\n                    this.page = (this.page === 1) ? 1 : this.page - 1;\n                    this.getReviews();\n                }\n            });\n        },\n\n        onStartReviewDelete(review) {\n            this.deleteReviewId = review.id;\n            this.onShowReviewDeleteModal();\n        },\n\n        onCancelReviewDelete() {\n            this.deleteReviewId = null;\n            this.onCloseReviewDeleteModal();\n        },\n\n        onShowReviewDeleteModal() {\n            this.showReviewDeleteModal = true;\n        },\n\n        onCloseReviewDeleteModal() {\n            this.showReviewDeleteModal = false;\n        },\n\n        onConfirmReviewDelete() {\n            this.onCloseReviewDeleteModal();\n\n            this.reviewRepository.delete(this.deleteReviewId, Context.api).then(() => {\n                this.deleteReviewId = null;\n                this.getReviews();\n            });\n        },\n\n        onChangePage(data) {\n            this.page = data.page;\n            this.limit = data.limit;\n            this.getReviews();\n        },\n    },\n};\n","export default \"<div class=\\\"sw-product-detail-reviews\\\">\\n    \\n    {% block sw_product_detail_reviews %}\\n    <div v-if=\\\"isLoading\\\">\\n        <sw-skeleton />\\n        <sw-skeleton />\\n    </div>\\n\\n    <sw-card\\n        v-if=\\\"!isLoading\\\"\\n        class=\\\"sw-product-detail-reviews__list\\\"\\n        position-identifier=\\\"sw-product-detail-reviews\\\"\\n        :title=\\\"cardTitle\\\"\\n    >\\n        \\n        {% block sw_product_detail_reviews_data %}\\n        <template\\n            v-if=\\\"total\\\"\\n            #grid\\n        >\\n            <sw-data-grid\\n                ref=\\\"gridReview\\\"\\n                :data-source=\\\"dataSource\\\"\\n                :columns=\\\"reviewColumns\\\"\\n                :is-loading=\\\"isLoading\\\"\\n                :show-selection=\\\"false\\\"\\n                :show-actions=\\\"true\\\"\\n            >\\n                \\n                {% block sw_product_detail_reviews_data_stars %}\\n                <template #column-points=\\\"{ item }\\\">\\n                    \\n                    {% block sw_product_detail_reviews_data_stars_content %}\\n\\n                    <sw-rating-stars v-model=\\\"item.points\\\" />\\n\\n                    {# @deprecated tag:v6.6.0 - Block will removed because it will be replaced by `sw-rating-stars` component. Use upper block `sw_product_detail_reviews_data_stars_content` instead.  #}\\n                    \\n                    {% block sw_product_detail_reviews_data_stars_filled %}{% endblock %}\\n\\n                    {# @deprecated tag:v6.6.0 - Block will removed because it will be replaced by `sw-rating-stars` component. Use upper block `sw_product_detail_reviews_data_stars_content` instead.  #}\\n                    \\n                    {% block sw_product_detail_reviews_data_stars_empty %}{% endblock %}\\n\\n                    {% endblock %}\\n                </template>\\n                {% endblock %}\\n\\n                \\n                {% block sw_product_detail_reviews_data_status %}\\n                <template #column-status=\\\"{ item }\\\">\\n                    <sw-data-grid-column-boolean\\n                        v-model=\\\"item.status\\\"\\n                        :is-inline-edit=\\\"false\\\"\\n                    />\\n                </template>\\n                {% endblock %}\\n\\n                \\n                {% block sw_product_detail_reviews_data_created_at %}\\n                <template #column-createdAt=\\\"{ item }\\\">\\n                    {{ dateFilter(item.createdAt, { hour: '2-digit', minute: '2-digit', second: '2-digit' }) }}\\n                </template>\\n                {% endblock %}\\n\\n                \\n                {% block sw_product_detail_reviews_data_action %}\\n                <template #actions=\\\"{ item }\\\">\\n                    \\n                    {% block sw_product_detail_reviews_data_action_edit %}\\n                    <sw-context-menu-item\\n                        class=\\\"sw-product-detail-reviews__action-edit\\\"\\n                        :disabled=\\\"!acl.can('product.editor')\\\"\\n                        :router-link=\\\"{ name: 'sw.review.detail', params: { id: item.id } }\\\"\\n                    >\\n                        {{ $tc('sw-product.reviewForm.contextMenuEdit') }}\\n                    </sw-context-menu-item>\\n                    {% endblock %}\\n\\n                    \\n                    {% block sw_product_detail_reviews_data_action_delete %}\\n                    <sw-context-menu-item\\n                        class=\\\"sw-product-detail-reviews__action-delete\\\"\\n                        variant=\\\"danger\\\"\\n                        :disabled=\\\"!acl.can('product.editor')\\\"\\n                        @click=\\\"onStartReviewDelete(item)\\\"\\n                    >\\n                        {{ $tc('sw-product.reviewForm.contextMenuDelete') }}\\n                    </sw-context-menu-item>\\n                    {% endblock %}\\n                </template>\\n                {% endblock %}\\n\\n                \\n                {% block sw_product_detail_reviews_data_pagination %}\\n                <template #pagination>\\n                    <sw-pagination\\n                        :total=\\\"total\\\"\\n                        :limit=\\\"limit\\\"\\n                        :page=\\\"page\\\"\\n                        :total-visible=\\\"7\\\"\\n                        :steps=\\\"[10]\\\"\\n                        @page-change=\\\"onChangePage\\\"\\n                    />\\n                </template>\\n                {% endblock %}\\n            </sw-data-grid>\\n        </template>\\n        {% endblock %}\\n\\n        \\n        {% block sw_product_detail_reviews_empty_state %}\\n\\n        <sw-empty-state\\n            v-if=\\\"!total\\\"\\n            :title=\\\"$tc('sw-product.reviewForm.messageEmptyTitle')\\\"\\n            :subline=\\\"$tc('sw-product.reviewForm.messageEmptySubline')\\\"\\n            :absolute=\\\"false\\\"\\n            empty-module\\n        >\\n            <template #icon>\\n                <img\\n                    :src=\\\"assetFilter('/administration/static/img/empty-states/products-empty-state.svg')\\\"\\n                    :alt=\\\"$tc('sw-product.reviewForm.messageEmptyTitle')\\\"\\n                >\\n            </template>\\n\\n            <template #actions>\\n                \\n                {% block sw_product_detail_reviews_empty_state_button %}\\n                <sw-button\\n                    variant=\\\"ghost\\\"\\n                    :router-link=\\\"{ name: 'sw.review.index' }\\\"\\n                >\\n                    {{ $tc('sw-product.reviewForm.emptyStateButton') }}\\n                </sw-button>\\n                {% endblock %}\\n            </template>\\n        </sw-empty-state>\\n        {% endblock %}\\n\\n        \\n        {% block sw_product_detail_reviews_modal_delete %}\\n        <sw-modal\\n            v-if=\\\"showReviewDeleteModal\\\"\\n            variant=\\\"small\\\"\\n            :title=\\\"$tc('sw-product.reviewForm.modal.confirmTitle')\\\"\\n            @modal-close=\\\"onCancelReviewDelete\\\"\\n        >\\n            \\n            {% block sw_product_detail_reviews_modal_delete_body %}\\n            <p>{{ $tc('sw-product.reviewForm.modal.confirmText') }}</p>\\n            {% endblock %}\\n\\n            \\n            {% block sw_product_detail_reviews_modal_delete_footer %}\\n            <template #modal-footer>\\n                \\n                {% block sw_product_detail_reviews_modal_delete_button_cancel %}\\n                <sw-button\\n                    size=\\\"small\\\"\\n                    @click=\\\"onCancelReviewDelete\\\"\\n                >\\n                    {{ $tc('sw-product.reviewForm.modal.buttonCancel') }}\\n                </sw-button>\\n                {% endblock %}\\n\\n                \\n                {% block sw_product_detail_reviews_modal_delete_button_confirm %}\\n                <sw-button\\n                    size=\\\"small\\\"\\n                    variant=\\\"danger\\\"\\n                    @click=\\\"onConfirmReviewDelete\\\"\\n                >\\n                    {{ $tc('sw-product.reviewForm.modal.buttonDelete') }}\\n                </sw-button>\\n                {% endblock %}\\n            </template>\\n            {% endblock %}\\n        </sw-modal>\\n        {% endblock %}\\n    </sw-card>\\n    {% endblock %}\\n</div>\\n\";","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-product-detail-reviews.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"e66e0c74\", content, true, {});"],"sourceRoot":""}