(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[204],{hj3z:function(t,e,n){var a=n("oFxG");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n("ydqr").default)("4f435ffa",a,!0,{})},oFxG:function(t,e,n){},voZW:function(t,e,n){"use strict";n.r(e);var a=n("HZZ/"),i=n.n(a),s=n("hJxD"),o=n.n(s),c=(n("hj3z"),Shopware.Mixin);e.default=Shopware.Component.wrapComponentConfig({template:'<sw-page\n    class="sw-generic-custom-entity-detail"\n    :header-border-color="entityAccentColor"\n>\n    <template #smart-bar-header>\n        <h2 class="sw-generic-custom-entity-detail__title">\n            {{ placeholder(customEntityData, titlePropertyName, $tc(`${customEntityName}.moduleTitle`)) }}\n        </h2>\n    </template>\n\n    <template #smart-bar-actions>\n        <sw-button-process\n            class="sw-generic-custom-entity-detail__save-action"\n            :is-loading="isLoading"\n            :process-success="isSaveSuccessful"\n            variant="primary"\n            :disabled="isLoading"\n            @process-finish="saveFinish"\n            @click="onSave"\n        >\n            {{ $tc(\'global.default.save\') }}\n        </sw-button-process>\n    </template>\n\n    <template #language-switch>\n        <sw-language-switch @on-change="onChangeLanguage" />\n    </template>\n\n    <template #content>\n        <sw-card-view>\n            <sw-tabs\n                v-if="detailTabs"\n                class="sw-generic-custom-entity-detail__tabs"\n                position-identifier="sw-generic-custom-entity-detail-tabs"\n                :default-item="mainTabName"\n                :small="false"\n            >\n                <template #default="{ active }">\n                    <sw-tabs-item\n                        v-for="tab in detailTabs"\n                        :key="`tab-item-${tab.name}`"\n                        class="sw-generic-custom-entity-detail__tab-item"\n                        :name="tab.name"\n                        :active-tab="active"\n                    >\n                        {{ getLabel(\'tabs\', tab.name) }}\n                    </sw-tabs-item>\n\n                    <sw-tabs-item\n                        v-if="customEntityDataDefinition?.flags?.[\'cms-aware\']"\n                        class="sw-generic-custom-entity-detail__tab-item"\n                        name="cms-aware-tab-layout"\n                        :active-tab="active"\n                    >\n                        {{ $tc(\'sw-custom-entity.detail.tabs.layout\') }}\n                    </sw-tabs-item>\n\n                    <sw-tabs-item\n                        v-if="customEntityDataDefinition?.flags?.[\'cms-aware\']"\n                        class="sw-generic-custom-entity-detail__tab-item"\n                        name="cms-aware-tab-seo"\n                        :active-tab="active"\n                    >\n                        {{ $tc(\'sw-custom-entity.detail.tabs.seo\') }}\n                    </sw-tabs-item>\n                </template>\n\n                <template #content="{ active }">\n                    <template\n                        v-for="tab in detailTabs"\n                    >\n                        <div\n                            v-if="active === tab.name"\n                            :key="`tab-${tab.name}`"\n                            class="sw-generic-custom-entity-detail__tab"\n                        >\n                            <sw-card\n                                v-for="card in tab.cards"\n                                :key="`card-${card.name}`"\n                                class="sw-generic-custom-entity-detail__card"\n                                position-identifier="`sw-generic-custom-entity-detail-tab-${card.name}`"\n                                :title="getLabel(\'cards\', card.name)"\n                            >\n                                <template v-if="!isLoading">\n                                    <sw-custom-entity-input-field\n                                        v-for="field in card.fields"\n                                        :key="field.ref"\n                                        v-model="customEntityData[field.ref]"\n                                        class="sw-generic-custom-entity-detail__field"\n                                        :type="getType(field.ref)"\n                                        :label="getLabel(\'fields\', field.ref)"\n                                        :placeholder="getPlaceholder(\'fields\', field.ref)"\n                                        :help-text="getHelpText(\'fields\', field.ref)"\n                                    />\n                                </template>\n                            </sw-card>\n                        </div>\n                    </template>\n\n                    <sw-generic-cms-page-assignment\n                        v-if="active === \'cms-aware-tab-layout\'"\n                        :cms-page-id="customEntityData?.swCmsPageId"\n                        :slot-overrides="customEntityData?.swSlotConfig"\n                        class="sw-generic-custom-entity-detail__tab sw-generic-custom-entity-detail__tab-cms-aware"\n                        @update:cms-page-id="updateCmsPageId"\n                        @update:slot-overrides="updateCmsSlotOverwrites"\n                        @create-layout="onCreateLayout"\n                    />\n\n                    <template\n                        v-else-if="active === \'cms-aware-tab-seo\'"\n                    >\n                        <sw-generic-seo-general-card\n                            :seo-meta-title="customEntityData?.swSeoMetaTitle"\n                            :seo-meta-description="customEntityData?.swSeoMetaDescription"\n                            :seo-url="customEntityData?.swSeoUrl"\n                            @update:seo-meta-title="updateSeoMetaTitle"\n                            @update:seo-meta-description="updateSeoMetaDescription"\n                            @update:seo-url="updateSeoUrl"\n                        />\n\n                        <sw-generic-social-media-card\n                            :og-title="customEntityData?.swOgTitle"\n                            :og-description="customEntityData?.swOgDescription"\n                            :og-image-id="customEntityData?.swOgImageId"\n                            @update:og-title="updateOgTitle"\n                            @update:og-description="updateOgDescription"\n                            @update:og-image-id="updateOgImageId"\n                        />\n                    </template>\n                </template>\n            </sw-tabs>\n        </sw-card-view>\n    </template>\n</sw-page>\n',inject:["customEntityDefinitionService","repositoryFactory","acl"],mixins:[c.getByName("placeholder"),c.getByName("notification")],data:function(){return{isLoading:!0,isSaveSuccessful:!1,customEntityData:null,customEntityDataInstances:void 0}},computed:{customEntityDataId:function(){var t;return null===(t=this.$route.params)||void 0===t?void 0:t.id},customEntityName:function(){return this.$route.params.entityName||""},customEntityDataDefinition:function(){var t;return this.customEntityName&&null!==(t=this.customEntityDefinitionService.getDefinitionByName(this.customEntityName))&&void 0!==t?t:null},customEntityDataRepository:function(){return null===this.customEntityDataDefinition?null:this.repositoryFactory.create(this.customEntityDataDefinition.entity)},customEntityProperties:function(){var t;return null===(t=this.customEntityDataDefinition)||void 0===t?void 0:t.properties},adminConfig:function(){var t;return null===(t=this.customEntityDataDefinition)||void 0===t?void 0:t.flags["admin-ui"]},entityAccentColor:function(){var t;return null===(t=this.adminConfig)||void 0===t?void 0:t.color},detailTabs:function(){var t,e,n,a;return null!==(t=null===(e=this.customEntityDataDefinition)||void 0===e||null===(n=e.flags["admin-ui"])||void 0===n||null===(a=n.detail)||void 0===a?void 0:a.tabs)&&void 0!==t?t:[]},mainTabName:function(){var t,e;return null===(t=this.detailTabs)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.name},titlePropertyName:function(){var t,e,n,a,i;return null===(t=this.detailTabs)||void 0===t||null===(e=t[0])||void 0===e||null===(n=e.cards)||void 0===n||null===(a=n[0].fields)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.ref}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.initializeCustomEntity()},initializeCustomEntity:function(){var t;null!==this.adminConfig&&(this.$route.meta.$module.icon=null===(t=this.adminConfig)||void 0===t?void 0:t.icon);this.loadData()},loadData:function(){var t=this;return i()(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoading=!0,e.prev=1,t.customEntityDataRepository){e.next=4;break}throw new Error('Custom entity repository for "'.concat(t.customEntityName,'" not found'));case 4:if(t.customEntityDataId){e.next=8;break}return t.customEntityData=t.customEntityDataRepository.create(),t.isLoading=!1,e.abrupt("return");case 8:return e.next=10,t.customEntityDataRepository.get(t.customEntityDataId);case 10:t.customEntityData=e.sent,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0),t.createNotificationError({message:t.$tc("global.notification.notificationLoadingDataErrorMessage")});case 17:return e.prev=17,t.isLoading=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))()},onSave:function(){var t=this;return i()(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoading=!0,t.customEntityData){e.next=3;break}return e.abrupt("return",Promise.reject());case 3:return e.abrupt("return",null===(n=t.customEntityDataRepository)||void 0===n?void 0:n.save(t.customEntityData).then(i()(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isSaveSuccessful=!0,t.customEntityDataId||null===(n=t.customEntityData)||void 0===n||!n.id){e.next=4;break}return e.next=4,t.$router.push({name:"sw.custom.entity.detail",params:{id:t.customEntityData.id}});case 4:t.loadData();case 5:case"end":return e.stop()}}),e)})))).finally((function(){t.isLoading=!1})));case 4:case"end":return e.stop()}}),e)})))()},saveFinish:function(){this.isSaveSuccessful=!1},onChangeLanguage:function(t){Shopware.State.commit("context/setApiLanguageId",t),this.loadData()},getFieldTranslation:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[this.customEntityName,t,e].join(".").concat(n);return a&&!this.$te(i)?"":this.$tc(i)},getLabel:function(t,e){return this.getFieldTranslation(t,e)},getPlaceholder:function(t,e){return this.getFieldTranslation(t,e,"Placeholder",!0)},getHelpText:function(t,e){return this.getFieldTranslation(t,e,"HelpText",!0)},getType:function(t){var e,n;return(null===(e=this.customEntityProperties)||void 0===e||null===(n=e[t])||void 0===n?void 0:n.type)||""},updateCmsPageId:function(t){this.customEntityData&&(this.customEntityData.swCmsPageId=t)},updateCmsSlotOverwrites:function(t){this.customEntityData&&(this.customEntityData.swSlotConfig=t)},updateSeoMetaTitle:function(t){this.customEntityData&&(this.customEntityData.swSeoMetaTitle=t)},updateSeoMetaDescription:function(t){this.customEntityData&&(this.customEntityData.swSeoMetaDescription=t)},updateSeoUrl:function(t){this.customEntityData&&(this.customEntityData.swSeoUrl=t)},updateOgTitle:function(t){this.customEntityData&&(this.customEntityData.swOgTitle=t)},updateOgDescription:function(t){this.customEntityData&&(this.customEntityData.swOgDescription=t)},updateOgImageId:function(t){this.customEntityData&&(this.customEntityData.swOgImageId=t)},onCreateLayout:function(){this.customEntityData&&this.$router.push({name:"sw.cms.create",params:{id:this.customEntityData.id,type:this.customEntityName}})}}})}}]);