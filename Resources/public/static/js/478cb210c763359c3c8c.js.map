{"version":3,"sources":["webpack:///./src/module/sw-extension/component/sw-ratings/sw-extension-ratings-card/index.js","webpack:///./src/module/sw-extension/component/sw-ratings/sw-extension-ratings-card/sw-extension-ratings-card.html.twig","webpack:///./src/module/sw-extension/component/sw-ratings/sw-extension-ratings-card/sw-extension-ratings-card.scss"],"names":["template","mixins","props","extension","type","Object","required","producerName","String","isInstalledAndLicensed","Boolean","default","data","reviews","isLoading","criteriaPage","criteriaLimit","summary","numberOfRatings","computed","canShowMore","this","length","numberOfRatingsHasChanged","extensionStoreDataService","Shopware","Service","hasReviews","watch","fetchReviews","created","createdComponent","methods","_arguments","arguments","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","isLoadingMore","_yield$_this$getRevie","wrap","_context","prev","next","undefined","getReviews","sent","abrupt","concat","t0","showExtensionErrors","finish","stop","loadMoreReviews","_this2","_callee2","_context2","_this3","_callee3","_context3","id","content","__esModule","module","i","locals","exports","add"],"mappings":"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","file":"static/js/478cb210c763359c3c8c.js","sourcesContent":["import template from './sw-extension-ratings-card.html.twig';\nimport './sw-extension-ratings-card.scss';\n\n/**\n * @package services-settings\n * @private\n */\nexport default {\n    template,\n\n    mixins: ['sw-extension-error'],\n\n    props: {\n        extension: {\n            type: Object,\n            required: true,\n        },\n        producerName: {\n            type: String,\n            required: true,\n        },\n        isInstalledAndLicensed: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    data() {\n        return {\n            reviews: [],\n            isLoading: false,\n            criteriaPage: 1,\n            criteriaLimit: 4,\n            summary: null,\n            numberOfRatings: 0,\n        };\n    },\n\n    computed: {\n        canShowMore() {\n            return this.summary.numberOfRatings > this.reviews.length;\n        },\n\n        numberOfRatingsHasChanged() {\n            return this.numberOfRatings !== this.summary.numberOfRatings;\n        },\n\n        extensionStoreDataService() {\n            return Shopware.Service('extensionStoreDataService');\n        },\n\n        hasReviews() {\n            return this.reviews.length > 0;\n        },\n    },\n\n    watch: {\n        extension() {\n            this.fetchReviews();\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.fetchReviews();\n        },\n\n        async fetchReviews(isLoadingMore = false) {\n            this.isLoading = true;\n\n            try {\n                const { reviews, summary } = await this.getReviews();\n                this.summary = summary;\n\n                if (isLoadingMore && this.numberOfRatingsHasChanged) {\n                    this.criteriaPage = 1;\n                    this.criteriaLimit = 4;\n                    this.reviews = [];\n                    await this.fetchReviews();\n\n                    return;\n                }\n\n                this.numberOfRatings = this.summary.numberOfRatings;\n                this.reviews = this.reviews.concat(reviews);\n            } catch (e) {\n                this.showExtensionErrors(e);\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        async loadMoreReviews() {\n            this.criteriaPage += 1;\n            await this.fetchReviews(true);\n        },\n\n        async getReviews() {\n            return this.extensionStoreDataService.getReviews(\n                this.criteriaPage,\n                this.criteriaLimit,\n                this.extension.id,\n            );\n        },\n    },\n};\n","export default \"\\n{% block sw_extension_ratings_card %}\\n<sw-meteor-card\\n    class=\\\"sw-extension-ratings-card\\\"\\n    :is-loading=\\\"isLoading\\\"\\n    :title=\\\"$tc('sw-extension-store.component.sw-extension-ratings.sw-extension-ratings-card.cardTitle')\\\"\\n>\\n    \\n    {% block sw_extension_ratings_card_has_reviews %}\\n    <template v-if=\\\"hasReviews\\\">\\n        \\n        {% block sw_extension_ratings_card_has_reviews_summary %}\\n        <sw-extension-ratings-summary :summary=\\\"summary\\\" />\\n        {% endblock %}\\n\\n        \\n        {% block sw_extension_ratings_card_has_reviews_wrapper %}\\n        <div class=\\\"sw-extension-ratings-card__reviews\\\">\\n            \\n            {% block sw_extension_ratings_card_has_reviews_wrapper_review %}\\n            <sw-extension-review\\n                v-for=\\\"(review, index) in reviews\\\"\\n                :key=\\\"`sw-extension-ratings-card__reviews-review-${index}`\\\"\\n                :producer-name=\\\"producerName\\\"\\n                :review=\\\"review\\\"\\n            />\\n            {% endblock %}\\n\\n            \\n            {% block sw_extension_ratings_card_has_reviews_wrapper_more_button %}\\n            <sw-button\\n                v-if=\\\"canShowMore\\\"\\n                size=\\\"small\\\"\\n                @click=\\\"loadMoreReviews\\\"\\n            >\\n                {{ $tc('sw-extension-store.component.sw-extension-ratings.sw-extension-ratings-card.labelMoreReviewsBtn') }}\\n            </sw-button>\\n            {% endblock %}\\n        </div>\\n        {% endblock %}\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_extension_ratings_card_empty_state %}\\n    <template v-else>\\n        \\n        {% block sw_extension_ratings_card_empty_state_content %}\\n        {{ $tc('sw-extension-store.component.sw-extension-ratings.sw-extension-ratings-card.labelNoReviews') }}\\n        {% endblock %}\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_extension_ratings_card_installed_and_licensed_headline %}\\n    <h3\\n        v-if=\\\"isInstalledAndLicensed && !isLoading\\\"\\n        class=\\\"sw-extension-ratings-card__footer-headline\\\"\\n    >\\n        {{ $tc('sw-extension-store.component.sw-extension-ratings.sw-extension-ratings-card.footerHeadline') }}\\n    </h3>\\n    {% endblock %}\\n\\n    \\n    {% block sw_extension_ratings_card_footer %}\\n    <template\\n        v-if=\\\"isInstalledAndLicensed && !isLoading\\\"\\n        #footer\\n    >\\n        \\n        {% block sw_extension_ratings_card_footer_review_creation %}\\n        <sw-extension-review-creation\\n            :extension=\\\"extension\\\"\\n            @created=\\\"$emit('update-extension')\\\"\\n        />\\n        {% endblock %}\\n    </template>\\n    {% endblock %}\\n</sw-meteor-card>\\n{% endblock %}\\n\";","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-extension-ratings-card.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"430323d7\", content, true, {});"],"sourceRoot":""}