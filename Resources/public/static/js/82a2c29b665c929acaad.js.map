{"version":3,"sources":["webpack:///./src/module/sw-settings-search/component/sw-settings-search-live-search/sw-settings-search-live-search.html.twig","webpack:///./src/module/sw-settings-search/component/sw-settings-search-live-search/index.js","webpack:///./src/module/sw-settings-search/component/sw-settings-search-live-search-keyword/sw-settings-search-live-search-keyword.scss","webpack:///./src/module/sw-settings-search/component/sw-settings-search-live-search-keyword/index.js","webpack:///./src/module/sw-settings-search/component/sw-settings-search-live-search-keyword/sw-settings-search-live-search-keyword.html.twig","webpack:///./src/module/sw-settings-search/component/sw-settings-search-live-search/sw-settings-search-live-search.scss"],"names":["Mixin","Shopware","Criteria","Data","template","inject","mixins","getByName","props","currentSalesChannelId","type","String","required","default","searchTerms","searchResults","Object","data","liveSearchTerm","salesChannels","salesChannelId","this","liveSearchResults","searchInProgress","showExampleModal","computed","salesChannelRepository","repositoryFactory","create","isSearchEnable","searchColumns","property","label","$tc","rawData","products","elements","created","createdComponent","methods","fetchSalesChannels","searchOnStorefront","_this","length","liveSearchService","search","Context","api","languageId","then","$emit","catch","error","message","response","status","createNotificationError","finally","_this2","changeSalesChannel","onShowExampleModal","onCloseExampleModal","content","__esModule","module","i","locals","exports","add","text","searchTerm","highlightClass","parsedSearch","concat","trim","replace","parsedMsg","split","RegExp","getClass","index"],"mappings":"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","file":"static/js/82a2c29b665c929acaad.js","sourcesContent":["export default \"\\n{% block sw_settings_search_view_live_search_card %}\\n<sw-card\\n    class=\\\"sw-settings-search-live-search\\\"\\n    position-identifier=\\\"sw-settings-search-live-search\\\"\\n    :title=\\\"$tc('sw-settings-search.liveSearchTab.titleCard')\\\"\\n>\\n\\n    \\n    {% block sw_settings_search_view_live_search_rebuild_index_row %}\\n    <div class=\\\"sw-settings-search-live-search__rebuild-index-row\\\">\\n\\n        \\n        {% block sw_settings_search_view_live_search_description %}\\n        <div class=\\\"sw-settings-search-live-search__description\\\">\\n            {{ $tc('sw-settings-search.liveSearchTab.textDescription') }}\\n        </div>\\n        {% endblock %}\\n\\n        \\n        {% block sw_settings_search_view_live_search_show_example_link %}\\n        <sw-container\\n            columns=\\\"1fr\\\"\\n            justify=\\\"end\\\"\\n        >\\n            \\n            <a\\n                class=\\\"sw-settings-search-live-search__show-example-link\\\"\\n                role=\\\"button\\\"\\n                tabindex=\\\"0\\\"\\n                @click=\\\"onShowExampleModal\\\"\\n            >\\n                {{ $tc('sw-settings-search.generalTab.linkExample') }}\\n                <sw-icon\\n                    name=\\\"regular-long-arrow-right\\\"\\n                    small\\n                />\\n            </a>\\n        </sw-container>\\n        {% endblock %}\\n\\n        \\n        {% block sw_settings_search_searchable_show_example_modal %}\\n        <sw-settings-search-example-modal\\n            v-if=\\\"showExampleModal\\\"\\n            @modal-close=\\\"onCloseExampleModal\\\"\\n        />\\n        {% endblock %}\\n    </div>\\n    {% endblock %}\\n\\n    \\n    {% block sw_settings_search_view_live_search_sales_channel %}\\n    <sw-single-select\\n        class=\\\"sw-settings-search-live-search__sales-channel-select\\\"\\n        value-property=\\\"id\\\"\\n        label-property=\\\"translated.name\\\"\\n        :placeholder=\\\"$tc('sw-settings-search.liveSearchTab.textPlaceholderSalesChannel')\\\"\\n        :label=\\\"$tc('sw-settings-search.liveSearchTab.labelSalesChannelSelect')\\\"\\n        :value=\\\"salesChannelId\\\"\\n        :options=\\\"salesChannels\\\"\\n        show-clearable-button\\n        {% if VUE3 %}\\n        @update:value=\\\"changeSalesChannel\\\"\\n        {% else %}\\n        @change=\\\"changeSalesChannel\\\"\\n        {% endif %}\\n    />\\n    {% endblock %}\\n\\n    \\n    {% block sw_settings_search_view_live_search_input %}\\n    <sw-simple-search-field\\n        v-model=\\\"liveSearchTerm\\\"\\n        class=\\\"sw-settings-search-live-search__search_box\\\"\\n        variant=\\\"form\\\"\\n        :delay=\\\"1000\\\"\\n        :disabled=\\\"!isSearchEnable\\\"\\n        @search-term-change=\\\"searchOnStorefront\\\"\\n    >\\n\\n        \\n        {% block sw_settings_search_view_live_search_search_icon_wrapper %}\\n        <template #sw-simple-search-field-icon>\\n            \\n            {% block sw_settings_search_view_live_search_search_icon %}\\n            <sw-icon\\n                class=\\\"sw-settings-search-live-search__search-icon\\\"\\n                name=\\\"regular-search-s\\\"\\n                small\\n                @click=\\\"searchOnStorefront\\\"\\n            />\\n            {% endblock %}\\n        </template>\\n        {% endblock %}\\n\\n    </sw-simple-search-field>\\n    {% endblock %}\\n\\n    \\n    {% block sw_settings_search_view_live_search_results %}\\n    <div class=\\\"sw-settings-search-live-search__search-results\\\">\\n\\n        \\n        {% block sw_search_bar_results_empty_state %}\\n        <sw-loader v-if=\\\"searchInProgress\\\" />\\n        {% endblock %}\\n\\n        \\n        {% block sw_settings_search_view_live_search_results_no_result %}\\n        <div\\n            v-if=\\\"products && products.length === 0\\\"\\n            class=\\\"sw-settings-search-live-search__no-result\\\"\\n        >\\n            {{ $tc('sw-settings-search.liveSearchTab.textNoResult') }}\\n        </div>\\n        {% endblock %}\\n\\n        \\n        {% block sw_settings_search_view_live_search_results_search_grid %}\\n        <sw-data-grid\\n            v-if=\\\"products && products.length > 0\\\"\\n            class=\\\"sw-settings-search-live-search__grid-result\\\"\\n            :plain-appearance=\\\"true\\\"\\n            :show-selection=\\\"false\\\"\\n            :show-actions=\\\"false\\\"\\n            :data-source=\\\"products\\\"\\n            :is-loading=\\\"searchInProgress\\\"\\n            :columns=\\\"searchColumns\\\"\\n        >\\n\\n            \\n            {% block sw_settings_search_view_live_search_results_search_grid_columns %}\\n            \\n            {% block sw_settings_search_view_live_search_results_search_grid_name %}\\n            <template #column-name=\\\"{ item }\\\">\\n                <sw-product-variant-info\\n                    :variations=\\\"item.variation\\\"\\n                    :show-tooltip=\\\"false\\\"\\n                >\\n                    <sw-settings-search-live-search-keyword\\n                        :text=\\\"(item.name || item.translated.name)\\\"\\n                        :search-term=\\\"liveSearchTerm\\\"\\n                    />\\n                </sw-product-variant-info>\\n            </template>\\n            {% endblock %}\\n\\n            \\n            {% block sw_settings_search_view_live_search_results_search_grid_score %}\\n            <template #column-score=\\\"{ item }\\\">\\n                <span class=\\\"sw-settings-search-live-search__grid-result__score\\\">\\n                    {{ Math.round(parseFloat(item.extensions.search._score)) }}\\n                </span>\\n            </template>\\n            {% endblock %}\\n            {% endblock %}\\n\\n        </sw-data-grid>\\n        {% endblock %}\\n\\n    </div>\\n    {% endblock %}\\n</sw-card>\\n{% endblock %}\\n\";","/**\n * @package buyers-experience\n */\nimport template from './sw-settings-search-live-search.html.twig';\nimport './sw-settings-search-live-search.scss';\nimport '../sw-settings-search-live-search-keyword';\n\nconst { Mixin } = Shopware;\nconst { Criteria } = Shopware.Data;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: [\n        'repositoryFactory',\n        'liveSearchService',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n    ],\n\n    props: {\n        currentSalesChannelId: {\n            type: String,\n            required: false,\n            default: null,\n        },\n\n        searchTerms: {\n            type: String,\n            required: false,\n            default: null,\n        },\n\n        searchResults: {\n            type: Object,\n            required: false,\n            default: null,\n        },\n    },\n\n    data() {\n        return {\n            liveSearchTerm: '',\n            salesChannels: [],\n            salesChannelId: this.currentSalesChannelId,\n            liveSearchResults: null,\n            searchInProgress: false,\n            showExampleModal: false,\n        };\n    },\n\n    computed: {\n        salesChannelRepository() {\n            return this.repositoryFactory.create('sales_channel');\n        },\n\n        isSearchEnable() {\n            return this.salesChannelId !== null;\n        },\n\n        searchColumns() {\n            return [{\n                property: 'name',\n                label: this.$tc('sw-settings-search.liveSearchTab.labelName'),\n                rawData: true,\n            }, {\n                property: 'score',\n                label: this.$tc('sw-settings-search.liveSearchTab.labelScore'),\n                rawData: true,\n            }];\n        },\n\n        products() {\n            return this.liveSearchResults && this.liveSearchResults.elements;\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.fetchSalesChannels();\n            this.liveSearchTerm = this.searchTerms;\n            this.liveSearchResults = this.searchResults;\n        },\n\n        searchOnStorefront() {\n            if (!this.liveSearchTerm.length) {\n                return;\n            }\n\n            this.searchInProgress = true;\n            this.liveSearchService.search({\n                salesChannelId: this.salesChannelId,\n                search: this.liveSearchTerm,\n            }, {}, {}, { 'sw-language-id': Shopware.Context.api.languageId }).then((data) => {\n                this.liveSearchResults = data.data;\n                this.searchInProgress = false;\n                this.$emit('live-search-results-change', {\n                    searchTerms: this.liveSearchTerm,\n                    searchResults: this.liveSearchResults,\n                });\n            }).catch((error) => {\n                const message = error.response.status === 500\n                    ? this.$tc('sw-settings-search.notification.notSupportedLanguageError')\n                    : error.message;\n\n                this.createNotificationError({\n                    message,\n                });\n            }).finally(() => {\n                this.searchInProgress = false;\n            });\n        },\n\n        fetchSalesChannels() {\n            this.salesChannelRepository.search(new Criteria(1, 25)).then((response) => {\n                this.salesChannels = response;\n            });\n        },\n\n        changeSalesChannel(salesChannelId) {\n            this.salesChannelId = salesChannelId;\n            this.$emit('sales-channel-change', salesChannelId);\n        },\n\n        onShowExampleModal() {\n            this.showExampleModal = true;\n        },\n\n        onCloseExampleModal() {\n            this.showExampleModal = false;\n        },\n    },\n};\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-settings-search-live-search-keyword.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"3893af8a\", content, true, {});","/**\n * @package buyers-experience\n */\nimport template from './sw-settings-search-live-search-keyword.html.twig';\nimport './sw-settings-search-live-search-keyword.scss';\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    props: {\n        text: {\n            type: String,\n            required: true,\n            default: null,\n        },\n\n        searchTerm: {\n            type: String,\n            required: true,\n            default: null,\n        },\n\n        highlightClass: {\n            type: String,\n            required: false,\n            default: 'sw-settings-search-live-search-keyword__highlight',\n        },\n    },\n\n    computed: {\n        parsedSearch() {\n            return `(${this.searchTerm.trim().replace(/ +/g, '|')})`;\n        },\n\n        parsedMsg() {\n            return this.text.split(\n                new RegExp(this.parsedSearch, 'gi'),\n            );\n        },\n    },\n\n    methods: {\n        getClass(index) {\n            return index ? this.highlightClass : {};\n        },\n    },\n};\n","export default \"\\n{% block sw_settings_search_view_live_search_keyword %}\\n<div class=\\\"sw-settings-search-live-search-keyword\\\">\\n\\n    \\n    {% block sw_settings_search_view_live_search_keyword_highlight %}\\n    <span\\n        v-for=\\\"(keyword, i) in parsedMsg\\\"\\n        :key=\\\"i\\\"\\n        :class=\\\"getClass(i%2)\\\"\\n    >{{ keyword }}</span>\\n    {% endblock %}\\n\\n</div>\\n{% endblock %}\\n\";","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-settings-search-live-search.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"59b49aee\", content, true, {});"],"sourceRoot":""}