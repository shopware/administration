{"version":3,"sources":["webpack:///./src/module/sw-settings-seo/component/sw-seo-main-category/index.js","webpack:///./src/module/sw-settings-seo/component/sw-seo-main-category/sw-seo-main-category.html.twig"],"names":["template","inject","props","currentSalesChannelId","type","String","required","default","categories","Array","mainCategories","isLoading","Boolean","allowEdit","overwriteLabel","data","mainCategoryForSalesChannel","computed","mainCategoryRepository","this","repositoryFactory","create","isHeadlessSalesChannel","_this","Shopware","State","get","salesChannelCollection","salesChannel","find","entry","id","typeId","selectedCategory","categoryId","watch","refreshMainCategoryForSalesChannel","created","createdComponent","methods","onMainCategorySelected","value","category","mainCategory","salesChannelId","$emit","_this2","undefined"],"mappings":"4HAOe,WACXA,SCRW,suBDUXC,OAAQ,CAAC,qBAETC,MAAO,CACHC,sBAAuB,CACnBC,KAAMC,OACNC,UAAU,EACVC,QAAS,MAEbC,WAAY,CACRJ,KAAMK,MACNH,UAAU,GAEdI,eAAgB,CACZN,KAAMK,MACNH,UAAU,GAEdK,UAAW,CACPP,KAAMQ,QACNN,UAAU,EACVC,SAAS,GAEbM,UAAW,CACPT,KAAMQ,QACNN,UAAU,EAGVC,SAAS,GAEbO,eAAgB,CACZV,KAAMQ,QACNN,UAAU,EACVC,SAAS,IAIjBQ,KAAI,WACA,MAAO,CACHC,4BAA6B,OAIrCC,SAAU,CACNC,uBAAsB,WAClB,OAAOC,KAAKC,kBAAkBC,OAAO,kBAGzCC,uBAAsB,WAAI,IAADC,EAAA,KACrB,GAA8D,OAA1DC,SAASC,MAAMC,IAAI,YAAYC,uBAC/B,OAAO,EAGX,IAAMC,EAAeJ,SAASC,MAAMC,IAAI,YAAYC,uBAAuBE,MAAK,SAACC,GAC7E,OAAOA,EAAMC,KAAOR,EAAKpB,yBAI7B,OAAsC,OAA/BgB,KAAKhB,uBAA0D,qCAAxByB,EAAaI,QAG/DC,iBAAgB,WACZ,OAA4C,OAArCd,KAAKH,4BAAuCG,KAAKH,4BAA4BkB,WAAa,OAIzGC,MAAO,CACHhC,sBAAqB,WACjBgB,KAAKiB,sCAET1B,eAAc,WACVS,KAAKiB,uCAIbC,QAAO,WACHlB,KAAKmB,oBAGTC,QAAS,CACLD,iBAAgB,WACZnB,KAAKiB,sCAETI,uBAAsB,SAACN,GACnB,GAAmB,OAAfA,EAAJ,CAIA,IAAMD,EAAmBd,KAAKX,WAAWqB,MAAK,SAACY,GAC3C,OAAOA,EAAMV,KAAOG,KAGxB,GAAyC,OAArCf,KAAKH,4BAGL,OAFAG,KAAKH,4BAA4B0B,SAAWT,OAC5Cd,KAAKH,4BAA4BkB,WAAaD,EAAiBF,IAInE,IAAMY,EAAexB,KAAKD,uBAAuBG,SACjDsB,EAAaC,eAAiBzB,KAAKhB,sBACnCwC,EAAaD,SAAWT,EACxBU,EAAaT,WAAaD,EAAiBF,GAC3CZ,KAAK0B,MAAM,oBAAqBF,GAChCxB,KAAKiB,uCAETA,mCAAkC,WAAI,IAADU,EAAA,KAC3BH,EAAexB,KAAKT,eAAemB,MAAK,SAACa,GAC3C,OAAOA,EAASE,iBAAmBE,EAAK3C,yBAQ5CgB,KAAKH,iCALgB+B,IAAjBJ,EAK+BA,EAJI","file":"static/js/92f11b963d73b0232740.js","sourcesContent":["/**\n * @package buyers-experience\n */\n\nimport template from './sw-seo-main-category.html.twig';\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: ['repositoryFactory'],\n\n    props: {\n        currentSalesChannelId: {\n            type: String,\n            required: false,\n            default: null,\n        },\n        categories: {\n            type: Array,\n            required: true,\n        },\n        mainCategories: {\n            type: Array,\n            required: true,\n        },\n        isLoading: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n        allowEdit: {\n            type: Boolean,\n            required: false,\n            // TODO: Boolean props should only be opt in and therefore default to false\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n        },\n        overwriteLabel: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    data() {\n        return {\n            mainCategoryForSalesChannel: null,\n        };\n    },\n\n    computed: {\n        mainCategoryRepository() {\n            return this.repositoryFactory.create('main_category');\n        },\n\n        isHeadlessSalesChannel() {\n            if (Shopware.State.get('swSeoUrl').salesChannelCollection === null) {\n                return true;\n            }\n\n            const salesChannel = Shopware.State.get('swSeoUrl').salesChannelCollection.find((entry) => {\n                return entry.id === this.currentSalesChannelId;\n            });\n\n            // from Defaults.php\n            return this.currentSalesChannelId !== null && salesChannel.typeId === 'f183ee5650cf4bdb8a774337575067a6';\n        },\n\n        selectedCategory() {\n            return this.mainCategoryForSalesChannel !== null ? this.mainCategoryForSalesChannel.categoryId : null;\n        },\n    },\n\n    watch: {\n        currentSalesChannelId() {\n            this.refreshMainCategoryForSalesChannel();\n        },\n        mainCategories() {\n            this.refreshMainCategoryForSalesChannel();\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.refreshMainCategoryForSalesChannel();\n        },\n        onMainCategorySelected(categoryId) {\n            if (categoryId === null) {\n                return;\n            }\n\n            const selectedCategory = this.categories.find((value) => {\n                return value.id === categoryId;\n            });\n\n            if (this.mainCategoryForSalesChannel !== null) {\n                this.mainCategoryForSalesChannel.category = selectedCategory;\n                this.mainCategoryForSalesChannel.categoryId = selectedCategory.id;\n                return;\n            }\n\n            const mainCategory = this.mainCategoryRepository.create();\n            mainCategory.salesChannelId = this.currentSalesChannelId;\n            mainCategory.category = selectedCategory;\n            mainCategory.categoryId = selectedCategory.id;\n            this.$emit('main-category-add', mainCategory);\n            this.refreshMainCategoryForSalesChannel();\n        },\n        refreshMainCategoryForSalesChannel() {\n            const mainCategory = this.mainCategories.find((category) => {\n                return category.salesChannelId === this.currentSalesChannelId;\n            });\n\n            if (mainCategory === undefined) {\n                this.mainCategoryForSalesChannel = null;\n                return;\n            }\n\n            this.mainCategoryForSalesChannel = mainCategory;\n        },\n    },\n};\n","export default \"\\n{% block sw_seo_main_category %}\\n<div class=\\\"sw-seo-main-category\\\">\\n    \\n    {% block sw_seo_main_category_select %}\\n    <sw-single-select\\n        :options=\\\"categories\\\"\\n        label-property=\\\"translated.name\\\"\\n        value-property=\\\"id\\\"\\n        show-clearable-button\\n        :placeholder=\\\"$tc('sw-seo-url.placeholderMainCategory')\\\"\\n        :label=\\\"overwriteLabel ? undefined : $tc('sw-seo-url.labelMainCategory')\\\"\\n        :value=\\\"selectedCategory\\\"\\n        :disabled=\\\"currentSalesChannelId === null || !allowEdit\\\"\\n        {% if VUE3 %}\\n        @update:value=\\\"onMainCategorySelected\\\"\\n        {% else %}\\n        @change=\\\"onMainCategorySelected\\\"\\n        {% endif %}\\n    />\\n    {% endblock %}\\n</div>\\n{% endblock %}\\n\";"],"sourceRoot":""}