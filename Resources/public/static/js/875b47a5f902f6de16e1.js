(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[89526],{468172:function(){},189526:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return n}}),s(467518);let{Application:i}=Shopware,a=Shopware.Utils.types,{Criteria:o}=Shopware.Data;var n={template:'\n{% block sw_media_quickinfo_usage %}\n<div class="sw-media-quickinfo-usage">\n    \n    {% block sw_media_quickinfo_usage_loader %}\n    <sw-loader\n        v-if="isLoading"\n        size="30px"\n        class="sw-media-quickinfo-usage__loading-indicator"\n    />\n    {% endblock %}\n\n    \n    {% block sw_media_quickinfo_usage_empty_state %}\n    <sw-alert\n        v-else-if="isNotUsed"\n        class="sw-media-quickinfo-usage__info-not-used"\n        variant="info"\n        :title="$tc(\'sw-media.sidebar.usage.titleMediaNotUsed\')"\n    >\n        {{ $tc(\'sw-media.sidebar.usage.labelMediaNotUsed\') }}\n    </sw-alert>\n    {% endblock %}\n\n    \n    {% block sw_media_quickinfo_usage_list %}\n    <ul\n        v-else\n        class="sw-media-quickinfo-usage__list"\n    >\n        \n        {% block sw_media_quickinfo_usage_item %}\n        <router-link\n            v-for="usage in getUsages"\n            :key="usage.link.id"\n            :to="{ name: usage.link.name, params: { id: usage.link.id } }"\n            :target="routerLinkTarget"\n        >\n            <li\n                v-tooltip="{\n                    showDelay: 300,\n                    hideDelay: 5,\n                    message: usage.tooltip\n                }"\n                class="sw-media-quickinfo-usage__item"\n            >\n                \n                {% block sw_media_quickinfo_usage_item_icon %}\n                <div class="sw-media-quickinfo-usage__label">\n                    <sw-icon\n                        :name="usage.icon.name"\n                        :color="usage.icon.color"\n                        small\n                    />\n                </div>\n                {% endblock %}\n\n                \n                {% block sw_media_quickinfo_usage_item_label %}\n                <div class="sw-media-quickinfo-usage__label">\n                    {{ usage.name }}\n                </div>\n                {% endblock %}\n            </li>\n        </router-link>\n        {% endblock %}\n    </ul>\n    {% endblock %}\n</div>\n{% endblock %}\n\n',inject:["repositoryFactory"],props:{item:{required:!0,type:Object,validator(t){return"media"===t.getEntityName()}},routerLinkTarget:{required:!1,type:String,default:""}},data(){return{products:[],categories:[],manufacturers:[],mailTemplates:[],documentBaseConfigs:[],avatarUsers:[],paymentMethods:[],shippingMethods:[],layouts:[],landingPages:[],isLoading:!1}},computed:{productRepository(){return this.repositoryFactory.create("product")},landingPageRepository(){return this.repositoryFactory.create("landing_page")},categoryRepository(){return this.repositoryFactory.create("category")},cmsPageRepository(){return this.repositoryFactory.create("cms_page")},moduleFactory(){return i.getContainer("factory").module},slotConfigCriteria(){let t=new o;return t.setLimit(5),t.addFilter(o.contains("slotConfig.*.media.value",this.item.id)),t.addFields("name"),t},cmsPageBlockConfigCriteria(){let t=new o;return t.setLimit(5),t.addFilter(o.equals("sections.blocks.slots.config.media.value",this.item.id)),t.addFields("name"),t},getUsages(){let t=[];return this.products.forEach(({product:e})=>{t.push(this.getProductUsage(e))}),this.categories.forEach(e=>{t.push(this.getCategoryUsage(e))}),this.manufacturers.forEach(e=>{t.push(this.getManufacturerUsage(e))}),this.mailTemplates.forEach(({mailTemplate:e})=>{t.some(t=>t.link.id===e.id)||t.push(this.getMailTemplateUsage(e))}),this.documentBaseConfigs.forEach(e=>{t.push(this.getDocumentBaseConfigUsage(e))}),this.paymentMethods.forEach(e=>{t.push(this.getPaymentMethodUsage(e))}),this.shippingMethods.forEach(e=>{t.push(this.getShippingMethodUsage(e))}),this.layouts.forEach(e=>{t.push(this.getLayoutUsage(e))}),a.isEmpty(this.avatarUsers)||this.avatarUsers.forEach(e=>{t.push(this.getAvatarUserUsage(e))}),this.landingPages.forEach(e=>{t.push(this.getLandingPageUsage(e))}),t},isNotUsed(){return 0===this.getUsages.length}},watch:{item(){this.createdComponent()}},created(){this.createdComponent()},methods:{async createdComponent(){this.loadProductAssociations(),this.loadCategoryAssociations(),this.loadManufacturerAssociations(),this.loadMailTemplateAssociations(),this.loadDocumentBaseConfigAssociations(),this.loadAvatarUserAssociations(),this.loadPaymentMethodAssociations(),this.loadShippingMethodAssociations(),this.loadLayoutAssociations(),await this.loadSlotConfigAssociations()},async loadSlotConfigAssociations(){this.isLoading=!0;let[t,e,s,i]=await Promise.all([this.productRepository.search(this.slotConfigCriteria),this.landingPageRepository.search(this.slotConfigCriteria),this.categoryRepository.search(this.slotConfigCriteria),this.cmsPageRepository.search(this.cmsPageBlockConfigCriteria)]);t.forEach(t=>{this.products&&!this.products.some(e=>e.product.id===t.id)&&this.products.push({product:t})}),this.landingPages=e,s.forEach(t=>{this.categories&&!this.categories.some(e=>e.id===t.id)&&this.categories.push(t)}),i.forEach(t=>{this.layouts&&!this.layouts.some(e=>e.id===t.id)&&this.layouts.push(t)}),this.isLoading=!1},loadProductAssociations(){this.products=this.item.productMedia},loadCategoryAssociations(){this.categories=this.item.categories},loadManufacturerAssociations(){this.manufacturers=this.item.productManufacturers},loadMailTemplateAssociations(){this.mailTemplates=this.item.mailTemplateMedia},loadDocumentBaseConfigAssociations(){this.documentBaseConfigs=this.item.documentBaseConfigs},loadAvatarUserAssociations(){this.avatarUsers=this.item.avatarUsers},loadPaymentMethodAssociations(){this.paymentMethods=this.item.paymentMethods},loadShippingMethodAssociations(){this.shippingMethods=this.item.shippingMethods},loadLayoutAssociations(){this.layouts=[],this.item.cmsBlocks.forEach(t=>{this.isExistedCmsMedia(t.section.pageId)||this.layouts.push({id:t.section.pageId,name:t.section.page.translated.name})}),this.item.cmsSections.forEach(t=>{this.isExistedCmsMedia(t.pageId)||this.layouts.push({id:t.pageId,name:t.page.translated.name})}),this.item.cmsPages.forEach(t=>{this.isExistedCmsMedia(t.id)||this.layouts.push({id:t.id,name:t.translated.name})})},isExistedCmsMedia(t){return this.layouts.some(e=>e.id===t)},getProductUsage(t){return{name:t.translated.name,tooltip:this.$tc("sw-media.sidebar.usage.tooltipFoundInProducts"),link:{name:"sw.product.detail",id:t.id},icon:this.getIconForModule("sw-product")}},getCategoryUsage(t){return{name:t.translated.name,tooltip:this.$tc("sw-media.sidebar.usage.tooltipFoundInCategories"),link:{name:"sw.category.detail",id:t.id},icon:this.getIconForModule("sw-category")}},getManufacturerUsage(t){return{name:t.translated.name,tooltip:this.$tc("sw-media.sidebar.usage.tooltipFoundInManufacturers"),link:{name:"sw.manufacturer.detail",id:t.id},icon:this.getIconForModule("sw-manufacturer")}},getMailTemplateUsage(t){return{name:t.translated.description,tooltip:this.$tc("sw-media.sidebar.usage.tooltipFoundInMailTemplate"),link:{name:"sw.mail.template.detail",id:t.id},icon:this.getIconForModule("sw-mail-template")}},getDocumentBaseConfigUsage(t){return{name:t.name,tooltip:this.$tc("sw-media.sidebar.usage.tooltipFoundInDocument"),link:{name:"sw.settings.document.detail",id:t.id},icon:this.getIconForModule("sw-settings-document")}},getAvatarUserUsage(t){return{name:t.username,tooltip:this.$tc("sw-media.sidebar.usage.tooltipFoundInUser"),link:{name:"sw.settings.user.detail",id:t.id},icon:this.getIconForModule("sw-settings-user")}},getPaymentMethodUsage(t){return{name:t.translated.distinguishableName,tooltip:this.$tc("sw-media.sidebar.usage.tooltipFoundInPayment"),link:{name:"sw.settings.payment.detail",id:t.id},icon:this.getIconForModule("sw-settings-payment")}},getShippingMethodUsage(t){return{name:t.translated.name,tooltip:this.$tc("sw-media.sidebar.usage.tooltipFoundShipping"),link:{name:"sw.settings.shipping.detail",id:t.id},icon:this.getIconForModule("sw-settings-shipping")}},getLayoutUsage(t){return{name:t.name,tooltip:this.$tc("sw-media.sidebar.usage.tooltipFoundLayout"),link:{name:"sw.cms.detail",id:t.id},icon:this.getIconForModule("sw-cms")}},getLandingPageUsage(t){return{name:t.translated.name,tooltip:this.$tc("sw-media.sidebar.usage.tooltipFoundInLandingPages"),link:{name:"sw.category.landingPageDetail",id:t.id},icon:this.getIconForModule("sw-category")}},getIconForModule(t){let e=this.moduleFactory.getModuleRegistry().get(t);return{name:e.manifest.icon,color:e.manifest.color}}}}},467518:function(t,e,s){var i=s(468172);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals),s(745346).Z("46e8f2a8",i,!0,{})}}]);