{"version":3,"sources":["webpack:///./src/module/sw-promotion-v2/page/sw-promotion-v2-list/sw-promotion-v2-list.scss","webpack:///./src/module/sw-promotion-v2/page/sw-promotion-v2-list/index.js","webpack:///./src/module/sw-promotion-v2/page/sw-promotion-v2-list/sw-promotion-v2-list.html.twig"],"names":["content","__esModule","default","module","i","locals","exports","add","Mixin","Shopware","Criteria","Data","template","inject","mixins","getByName","data","isLoading","promotions","total","showDeleteModal","sortBy","sortDirection","searchConfigEntity","metaInfo","title","this","$createTitle","computed","promotionRepository","repositoryFactory","create","promotionCriteria","page","limit","setTerm","term","addSorting","sort","promotionColumns","getPromotionColumns","addButtonTooltip","message","$tc","disabled","acl","can","showOnDisabledElements","position","dateFilter","Filter","methods","getList","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","criteria","wrap","_context","prev","next","addQueryScores","sent","entitySearchable","abrupt","search","then","searchResult","stop","onChangeLanguage","property","label","routerLink","inlineEdit","allowResize","primary","align","updateTotal","_ref"],"mappings":"+HAGA,IAAIA,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQE,SACnB,iBAAZF,IAAsBA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAC7DA,EAAQK,SAAQF,EAAOG,QAAUN,EAAQK,SAG/BE,EADH,EAAQ,QAAwEL,SACzE,WAAYF,GAAS,EAAM,K,uFCHpCQ,G,UAAUC,SAAVD,OACAE,EAAaD,SAASE,KAAtBD,SAGO,WACXE,SCXW,y5NDaXC,OAAQ,CACJ,oBACA,OAGJC,OAAQ,CACJN,EAAMO,UAAU,YAGpBC,KAAI,WACA,MAAO,CACHC,WAAW,EACXC,WAAY,KACZC,MAAO,EACPC,iBAAiB,EACjBC,OAAQ,YACRC,cAAe,OACfC,mBAAoB,cAI5BC,SAAQ,WACJ,MAAO,CACHC,MAAOC,KAAKC,iBAIpBC,SAAU,CACNC,oBAAmB,WACf,OAAOH,KAAKI,kBAAkBC,OAAO,cAGzCC,kBAAiB,WACb,OAAQ,IAAItB,EAASgB,KAAKO,KAAMP,KAAKQ,OAChCC,QAAQT,KAAKU,MACbC,WAAW3B,EAAS4B,KAAKZ,KAAKL,OAAQK,KAAKJ,iBAGpDiB,iBAAgB,WACZ,OAAOb,KAAKc,uBAGhBC,iBAAgB,WACZ,MAAO,CACHC,QAAShB,KAAKiB,IAAI,iCAClBC,SAAUlB,KAAKmB,IAAIC,IAAI,qBACvBC,wBAAwB,EACxBC,SAAU,WAIlBC,WAAU,WACN,OAAOxC,SAASyC,OAAOnC,UAAU,UAIzCoC,QAAS,CACCC,QAAO,WAAI,IAADC,EAAA,YAAAC,IAAAC,IAAAC,MAAA,SAAAC,IAAA,IAAAC,EAAA,OAAAH,IAAAI,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACU,OAAtBT,EAAKpC,WAAY,EAAK2C,EAAAE,KAAA,EAECT,EAAKU,eAAeV,EAAKjB,KAAMiB,EAAKrB,mBAAmB,KAAD,EAA/D,GAAR0B,EAAQE,EAAAI,KACTX,EAAKY,iBAAiB,CAADL,EAAAE,KAAA,QAEP,OADfT,EAAKpC,WAAY,EACjBoC,EAAKlC,MAAQ,EAAEyC,EAAAM,OAAA,UAER,GAAK,cAAAN,EAAAM,OAAA,SAETb,EAAKxB,oBAAoBsC,OAAOT,GAAUU,MAAK,SAACC,GAKnD,OAJAhB,EAAKpC,WAAY,EACjBoC,EAAKlC,MAAQkD,EAAalD,MAC1BkC,EAAKnC,WAAamD,EAEXhB,EAAKnC,eACd,wBAAA0C,EAAAU,UAAAb,MAhBUH,IAmBhBiB,iBAAgB,WACZ7C,KAAK0B,WAGTZ,oBAAmB,WACf,MAAO,CAAC,CACJgC,SAAU,OACVC,MAAO,kCACPC,WAAY,yBACZC,WAAY,SACZC,aAAa,EACbC,SAAS,GACV,CACCL,SAAU,SACVC,MAAO,oCACPE,WAAY,UACZC,aAAa,EACbE,MAAO,UACR,CACCN,SAAU,YACVC,MAAO,uCACPE,WAAY,OACZC,aAAa,EACbE,MAAO,UACR,CACCN,SAAU,aACVC,MAAO,wCACPE,WAAY,OACZC,aAAa,EACbE,MAAO,YAIfC,YAAW,SAAAC,GAAa,IAAV7D,EAAK6D,EAAL7D,MACVO,KAAKP,MAAQA","file":"static/js/78e16e189c1db6efa609.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-promotion-v2-list.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"14f15026\", content, true, {});","/**\n * @package buyers-experience\n */\nimport template from './sw-promotion-v2-list.html.twig';\nimport './sw-promotion-v2-list.scss';\n\nconst { Mixin } = Shopware;\nconst { Criteria } = Shopware.Data;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: [\n        'repositoryFactory',\n        'acl',\n    ],\n\n    mixins: [\n        Mixin.getByName('listing'),\n    ],\n\n    data() {\n        return {\n            isLoading: true,\n            promotions: null,\n            total: 0,\n            showDeleteModal: false,\n            sortBy: 'createdAt',\n            sortDirection: 'DESC',\n            searchConfigEntity: 'promotion',\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(),\n        };\n    },\n\n    computed: {\n        promotionRepository() {\n            return this.repositoryFactory.create('promotion');\n        },\n\n        promotionCriteria() {\n            return (new Criteria(this.page, this.limit))\n                .setTerm(this.term)\n                .addSorting(Criteria.sort(this.sortBy, this.sortDirection));\n        },\n\n        promotionColumns() {\n            return this.getPromotionColumns();\n        },\n\n        addButtonTooltip() {\n            return {\n                message: this.$tc('sw-privileges.tooltip.warning'),\n                disabled: this.acl.can('promotion.creator'),\n                showOnDisabledElements: true,\n                position: 'bottom',\n            };\n        },\n\n        dateFilter() {\n            return Shopware.Filter.getByName('date');\n        },\n    },\n\n    methods: {\n        async getList() {\n            this.isLoading = true;\n\n            const criteria = await this.addQueryScores(this.term, this.promotionCriteria);\n            if (!this.entitySearchable) {\n                this.isLoading = false;\n                this.total = 0;\n\n                return false;\n            }\n            return this.promotionRepository.search(criteria).then((searchResult) => {\n                this.isLoading = false;\n                this.total = searchResult.total;\n                this.promotions = searchResult;\n\n                return this.promotions;\n            });\n        },\n\n        onChangeLanguage() {\n            this.getList();\n        },\n\n        getPromotionColumns() {\n            return [{\n                property: 'name',\n                label: 'sw-promotion-v2.list.columnName',\n                routerLink: 'sw.promotion.v2.detail',\n                inlineEdit: 'string',\n                allowResize: true,\n                primary: true,\n            }, {\n                property: 'active',\n                label: 'sw-promotion-v2.list.columnActive',\n                inlineEdit: 'boolean',\n                allowResize: true,\n                align: 'center',\n            }, {\n                property: 'validFrom',\n                label: 'sw-promotion-v2.list.columnValidFrom',\n                inlineEdit: 'date',\n                allowResize: true,\n                align: 'center',\n            }, {\n                property: 'validUntil',\n                label: 'sw-promotion-v2.list.columnValidUntil',\n                inlineEdit: 'date',\n                allowResize: true,\n                align: 'center',\n            }];\n        },\n\n        updateTotal({ total }) {\n            this.total = total;\n        },\n    },\n};\n","export default \"\\n{% block sw_promotion_v2_list %}\\n<sw-page class=\\\"sw-promotion-v2-list\\\">\\n\\n    \\n    {% block sw_promotion_v2_search_bar %}\\n    <template #search-bar>\\n        <sw-search-bar\\n            initial-search-type=\\\"promotion\\\"\\n            :placeholder=\\\"$tc('sw-promotion-v2.list.placeholderSearchBar')\\\"\\n            :initial-search=\\\"term\\\"\\n            @search=\\\"onSearch\\\"\\n        />\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_promotion_v2_list_smart_bar_header %}\\n    <template #smart-bar-header>\\n\\n        \\n        {% block sw_promotion_v2_list_smart_bar_header_title %}\\n        <h2>\\n\\n            \\n            {% block sw_promotion_v2_list_smart_bar_header_title_text %}\\n            {{ $tc('sw-promotion-v2.list.textTitle') }}\\n            {% endblock %}\\n\\n            \\n            {% block sw_promotion_v2_list_smart_bar_header_amount %}\\n            <span\\n                v-if=\\\"!isLoading\\\"\\n                class=\\\"sw-page__smart-bar-amount\\\"\\n            >\\n                ({{ total }})\\n            </span>\\n            {% endblock %}\\n\\n        </h2>\\n        {% endblock %}\\n\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_promotion_v2_list_smart_bar_actions %}\\n    <template #smart-bar-actions>\\n\\n        \\n        {% block sw_promotion_v2_list_smart_bar_actions_add %}\\n        <sw-button\\n            v-tooltip=\\\"addButtonTooltip\\\"\\n            class=\\\"sw-promotion-v2-list__smart-bar-button-add\\\"\\n            variant=\\\"primary\\\"\\n            :router-link=\\\"{ name: 'sw.promotion.v2.create' }\\\"\\n            :disabled=\\\"!acl.can('promotion.creator')\\\"\\n        >\\n            {{ $tc('sw-promotion-v2.list.buttonAddPromotion') }}\\n        </sw-button>\\n        {% endblock %}\\n\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_promotion_v2_list_language_switch %}\\n    <template #language-switch>\\n        <sw-language-switch @on-change=\\\"onChangeLanguage\\\" />\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_promotion_v2_list_content %}\\n    <template #content>\\n        <div class=\\\"sw-promotion-v2-list__content\\\">\\n\\n            \\n            {% block sw_promotion_v2_list_grid %}\\n            <sw-entity-listing\\n                v-if=\\\"entitySearchable\\\"\\n                :repository=\\\"promotionRepository\\\"\\n                :columns=\\\"promotionColumns\\\"\\n                :items=\\\"promotions\\\"\\n                detail-route=\\\"sw.promotion.v2.detail\\\"\\n                :is-loading=\\\"isLoading\\\"\\n                :allow-inline-edit=\\\"acl.can('promotion.editor')\\\"\\n                :show-selection=\\\"acl.can('promotion.deleter')\\\"\\n                :allow-edit=\\\"acl.can('promotion.editor')\\\"\\n                :allow-view=\\\"acl.can('promotion.viewer')\\\"\\n                allow-column-edit\\n                full-page\\n                @update-records=\\\"updateTotal\\\"\\n            >\\n\\n                \\n                {% block sw_promotion_v2_list_grid_columns %}\\n                \\n                {% block sw_promotion_v2_list_grid_columns_active %}\\n                <template #column-active=\\\"{ item }\\\">\\n                    <sw-icon\\n                        v-if=\\\"item.active\\\"\\n                        class=\\\"sw-promotion-v2-list__icon-activity is--active\\\"\\n                        name=\\\"regular-checkmark-xs\\\"\\n                    />\\n                    <sw-icon\\n                        v-else\\n                        class=\\\"sw-promotion-v2-list__icon-activity is--inactive\\\"\\n                        name=\\\"regular-times-s\\\"\\n                    />\\n                </template>\\n                {% endblock %}\\n\\n                \\n                {% block sw_promotion_v2_list_grid_columns_valid_from %}\\n                <template #column-validFrom=\\\"{ item }\\\">\\n                    {{ dateFilter(item.validFrom, { hour: '2-digit', minute: '2-digit' }) }}\\n                </template>\\n                {% endblock %}\\n\\n                \\n                {% block sw_promotion_v2_list_grid_columns_valid_until %}\\n                <template #column-validUntil=\\\"{ item }\\\">\\n                    {{ dateFilter(item.validUntil, { hour: '2-digit', minute: '2-digit' }) }}\\n                </template>\\n                {% endblock %}\\n                {% endblock %}\\n\\n                \\n                {% block sw_promotion_v2_list_grid_columns_actions %}\\n                \\n                {% block sw_promotion_v2_list_grid_columns_actions_delete %}\\n                <template #delete-action=\\\"{ item, showDelete }\\\">\\n                    <sw-context-menu-item\\n                        variant=\\\"danger\\\"\\n                        :disabled=\\\"(item && item.orderCount > 0) || !acl.can('promotion.deleter')\\\"\\n                        @click=\\\"showDelete(item.id)\\\"\\n                    >\\n                        {{ $tc('global.default.delete') }}\\n                    </sw-context-menu-item>\\n                </template>\\n                {% endblock %}\\n                {% endblock %}\\n\\n            </sw-entity-listing>\\n            {% endblock %}\\n\\n            \\n            {% block sw_promotion_v2_list_empty_state %}\\n            <template v-if=\\\"!isLoading && !total\\\">\\n                <sw-promotion-v2-empty-state-hero\\n                    v-if=\\\"isValidTerm(term)\\\"\\n                    :title=\\\"$tc('sw-empty-state.messageNoResultTitle')\\\"\\n                    :description=\\\"$tc('sw-empty-state.messageNoResultSubline')\\\"\\n                />\\n                <sw-promotion-v2-empty-state-hero\\n                    v-else\\n                    :title=\\\"$tc('sw-promotion-v2.list.titleEmpty')\\\"\\n                    :description=\\\"$tc('sw-promotion-v2.list.descriptionEmpty')\\\"\\n                >\\n\\n                    \\n                    {% block sw_promotion_v2_list_empty_state_actions %}\\n                    <template #actions>\\n                        <sw-button\\n                            v-tooltip=\\\"addButtonTooltip\\\"\\n                            class=\\\"sw-promotion-v2-list__empty-state-button-add\\\"\\n                            variant=\\\"primary\\\"\\n                            :router-link=\\\"{ name: 'sw.promotion.v2.create' }\\\"\\n                            :disabled=\\\"!acl.can('promotion.creator')\\\"\\n                        >\\n                            {{ $tc('sw-promotion-v2.list.buttonAddPromotion') }}\\n                        </sw-button>\\n                    </template>\\n                    {% endblock %}\\n\\n                </sw-promotion-v2-empty-state-hero>\\n            </template>\\n            {% endblock %}\\n\\n        </div>\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_promotion_v2_list_sidebar %}\\n    <template #sidebar>\\n        <sw-sidebar>\\n\\n            \\n            {% block sw_promotion_v2_list_sidebar_refresh %}\\n            <sw-sidebar-item\\n                icon=\\\"regular-undo\\\"\\n                :title=\\\"$tc('sw-promotion-v2.list.titleSidebarItemRefresh')\\\"\\n                @click=\\\"onRefresh\\\"\\n            />\\n            {% endblock %}\\n\\n        </sw-sidebar>\\n    </template>\\n    {% endblock %}\\n\\n</sw-page>\\n{% endblock %}\\n\";"],"sourceRoot":""}