(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[347],{MVNl:function(e,t,n){"use strict";n.r(t);var i=n("CsSd"),o=n.n(i);n("sTcR");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=Shopware.EntityDefinition;t.default={template:'\n{% block sw_condition_base %}\n\n{% block sw_product_stream_filter %}\n<div\n    class="sw-product-stream-filter"\n    :class="conditionClasses"\n>\n    \n    {% block sw_product_stream_filter_container %}\n    <div class="sw-product-stream-filter__container">\n        \n        {% block sw_product_stream_filter_selects %}\n        <div class="sw-product-stream-filter__selects">\n            \n            {% block sw_product_stream_filter_fields %}\n            <template\n                v-for="(definition, index) in fieldDefinitions"\n                {% if VUE3 %}\n                :key="index"\n                {% endif %}\n            >\n                \n                {% block sw_product_stream_filter_field_select %}\n                <sw-product-stream-field-select\n                    {% if VUE2 %}\n                    :key="index"\n                    {% endif %}\n                    v-bind="{ field: fields[index], definition, index }"\n                    :disabled="!acl.can(\'product_stream.editor\')"\n                    :has-error="hasError"\n                    @field-changed="updateFields"\n                />\n                {% endblock %}\n            </template>\n            {% endblock %}\n\n            \n            {% block sw_product_stream_filter_value %}\n            <sw-product-stream-value\n                v-bind="{ condition, ...lastField }"\n                :disabled="!acl.can(\'product_stream.editor\')"\n                @type-change="changeType"\n                @boolean-change="changeBooleanValue"\n                @empty-change="changeEmptyValue"\n            />\n            {% endblock %}\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_product_stream_filter_field_actions %}\n        <sw-context-button\n            v-tooltip="getNoPermissionsTooltip(\'product_stream.editor\', false)"\n            class="sw-product-stream-filter__context-button"\n            :disabled="!acl.can(\'product_stream.editor\')"\n        >\n            \n            {% block sw_product_stream_filter_field_create_before_action %}\n            <sw-context-menu-item\n                class="sw-product-stream-filter__create-before-action"\n                @click="onCreateBefore"\n            >\n                {{ $tc(\'global.sw-condition.condition.createBefore\') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n            \n            {% block sw_product_stream_filter_field_create_after_action %}\n            <sw-context-menu-item\n                class="sw-product-stream-filter__create-after-action"\n                @click="onCreateAfter"\n            >\n                {{ $tc(\'global.sw-condition.condition.createAfter\') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n            \n            {% block sw_product_stream_filter_field_delete_action %}\n            <sw-context-menu-item\n                variant="danger"\n                @click="onDeleteCondition"\n            >\n                {{ $tc(\'global.default.delete\') }}\n            </sw-context-menu-item>\n            {% endblock %}\n        </sw-context-button>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    \n    {% block sw_product_stream_filter_error %}\n    <sw-field-error :error="currentError" />\n    {% endblock %}\n</div>\n    {% endblock %}\n{% endblock %}\n',inject:["createCondition","insertNodeIntoTree","removeNodeFromTree","productCustomFields","acl","conditionDataProviderService"],computed:{actualCondition:function(){return"not"===this.condition.type?this.condition.queries[0]:this.condition},fields:{get:function(){return this.actualCondition.field?this.conditionDataProviderService.allowedJsonAccessors.hasOwnProperty(this.actualCondition.field)||this.isCustomField(this.actualCondition.field)?[this.actualCondition.field]:this.actualCondition.field.split("."):[]},set:function(e){var t=e.join(".");t.match(".$")&&(t=t.substring(0,t.length)),this.actualCondition.field=t||null}},fieldDefinitions:function(){var e=a.get("product"),t=[e];return this.fields.forEach((function(n){var i=e.getField(n);i&&"association"===i.type&&(e=a.get(i.entity),t.push(e))})),t},lastField:function(){return this.fieldDefinitions.length>this.fields.length?{fieldName:null,definition:a.get("product")}:{fieldName:this.fields[this.fields.length-1],definition:this.fieldDefinitions[this.fieldDefinitions.length-1]}}},methods:{updateFields:function(e){var t=e.field,n=e.index,i=this.fields.slice(0,n);t&&i.push(t),this.changeType({type:null,parameters:null}),this.fields=i},handleWrapForTypeNull:function(e,t){return null===e&&"not"===this.condition.type&&this.unwrapNot(this.condition,null),this.conditionDataProviderService.isNegatedType(e)&&"not"!==this.condition.type?(this.wrapInNot(this.condition,e,t),!1):"not"!==this.condition.type||this.conditionDataProviderService.isNegatedType(e)?"not"===this.condition.type&&this.conditionDataProviderService.isNegatedType(e)?(this.unwrapNot(this.condition,e,t),this.wrapInNot(this.condition,e,t),!1):(this.actualCondition.type=e,!0):(this.unwrapNot(this.condition,e,t),!1)},changeBooleanValue:function(e){var t=e.type,n=e.value;this.handleWrapForTypeNull(t),"not"===this.condition.type&&(this.condition.queries[0].value="1"),this.condition.value=n},changeEmptyValue:function(e){var t=e.type;this.handleWrapForTypeNull(t),"not"===this.condition.type&&(this.condition.queries[0].value=null),this.condition.value=null},changeType:function(e){var t=e.type,n=e.parameters;this.handleWrapForTypeNull(t,n)&&(this.actualCondition.parameters=n,this.actualCondition.value=null)},wrapInNot:function(e,t,n){var i=this.conditionDataProviderService.negateOperator(t).identifier,o=this.copyParameters(s(s({},e),{},{parameters:n}));o.type=i;var r=this.createCondition(o,e.id,0);this.insertNodeIntoTree(this.condition,r),Object.assign(e,{type:"not",field:null,operator:null,value:null,parameters:null})},unwrapNot:function(e,t,n){var i=e.queries[0],o=this.copyParameters(s(s({},i),{},{parameters:n}));o.type=t,Object.assign(e,o),this.removeNodeFromTree(this.condition,i)},copyParameters:function(e){return{field:e.field,type:e.type,operator:e.operator,parameters:e.parameters,value:e.value}},getNoPermissionsTooltip:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{showDelay:300,message:this.$tc("sw-privileges.tooltip.warning"),appearance:"dark",showOnDisabledElements:t,disabled:this.acl.can(e)}},isCustomField:function(e){var t=e.replace(/customFields\./,"");return Object.keys(this.productCustomFields).includes(t)}}}},c1KP:function(e,t,n){},sTcR:function(e,t,n){var i=n("c1KP");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("P8hj").default)("68bd8a69",i,!0,{})}}]);
//# sourceMappingURL=548ed6be7c4ed2794267.js.map