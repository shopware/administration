(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[64],{EhCv:function(e,n,t){},GHCL:function(e,n,t){"use strict";t.r(n);var a=t("CsSd"),i=t.n(a);t("wdlf");function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var s=Shopware.Data.Criteria,r=Shopware.Component.getComponentHelper().mapState;n.default={template:'\n{% block sw_landing_page_tree %}\n<div class="sw-landing-page-tree">\n\n    \n    {% block sw_landing_page_tree_inner %}\n    <sw-tree\n        v-if="!isLoadingInitialData"\n        ref="landingPageTree"\n        class="sw-landing-page-tree__inner"\n        :items="landingPages"\n        :sortable="false"\n        :searchable="false"\n        :translation-context="translationContext"\n        :on-change-route="changeLandingPage"\n        :disable-context-menu="disableContextMenu"\n        :allow-delete-categories="allowDelete"\n        :allow-create-categories="false"\n        :active-tree-item-id="landingPageId"\n        @batch-delete="deleteCheckedItems"\n        @delete-element="onDeleteLandingPage"\n        @editing-end="syncLandingPages"\n        @checked-elements-count="checkedElementsCount"\n    >\n\n        <template #headline>\n            <span></span>\n        </template>\n\n        <template\n            #items="{\n                treeItems,\n                sortable,\n                draggedItem,\n                newElementId,\n                checkItem,\n                translationContext,\n                onChangeRoute,\n                disableContextMenu\n            }"\n        >\n\n            \n            {% block sw_landing_page_tree_items %}\n            <sw-tree-item\n                v-for="item in treeItems"\n                :key="item.id"\n                :item="item"\n                :should-show-active-state="true"\n                :allow-duplicate="true"\n                :allow-new-categories="false"\n                :allow-delete-categories="allowDelete"\n                :active="item.active"\n                :translation-context="translationContext"\n                :on-change-route="onChangeRoute"\n                :sortable="sortable"\n                :dragged-item="draggedItem"\n                :disable-context-menu="disableContextMenu"\n                :display-checkbox="allowEdit"\n                :context-menu-tooltip-text="contextMenuTooltipText"\n                :new-element-id="newElementId"\n                :get-item-url="getLandingPageUrl"\n                @check-item="checkItem"\n            >\n                <template #grip>\n                    <span></span>\n                </template>\n\n                <template\n                    #actions="{\n                        onDuplicate,\n                        onChangeRoute,\n                        deleteElement,\n                        toolTip\n                    }"\n                >\n                    \n                    {% block sw_landing_page_tree_items_actions %}\n                    <sw-context-button\n                        v-tooltip="toolTip"\n                        class="sw-tree-item__context_button"\n                        :disabled="disableContextMenu"\n                    >\n\n                        \n                        {% block sw_landing_page_tree_items_actions_edit %}\n                        <sw-context-menu-item @click="onChangeRoute(item)">\n                            {{ $tc(\'global.default.edit\') }}\n                        </sw-context-menu-item>\n                        {% endblock %}\n\n                        \n                        {% block sw_landing_page_tree_items_actions_duplicate %}\n                        <sw-context-menu-item\n                            class="sw-context-menu__duplicate-action"\n                            @click="onDuplicate(item)"\n                        >\n                            {{ $tc(`global.default.duplicate`) }}\n                        </sw-context-menu-item>\n                        {% endblock %}\n\n                        \n                        {% block sw_landing_page_tree_items_actions_delete %}\n                        <sw-context-menu-item\n                            class="sw-context-menu__group-button-delete"\n                            variant="danger"\n                            @click="deleteElement(item)"\n                        >\n                            {{ $tc(\'global.default.delete\') }}\n                        </sw-context-menu-item>\n                        {% endblock %}\n\n                    </sw-context-button>\n                    {% endblock %}\n\n                </template>\n            </sw-tree-item>\n            {% endblock %}\n\n        </template>\n    </sw-tree>\n    {% endblock %}\n\n    <div v-else>\n        <sw-skeleton variant="tree-item" />\n        <sw-skeleton variant="tree-item" />\n        <sw-skeleton variant="tree-item" />\n        <sw-skeleton variant="tree-item" />\n        <sw-skeleton variant="tree-item" />\n        <sw-skeleton variant="tree-item" />\n        <sw-skeleton variant="tree-item" />\n    </div>\n\n    \n    {% block sw_landing_page_tree_action %}\n    <div class="sw-landing-page-tree__add-button">\n        <sw-button\n            class="sw-landing-page-tree__add-button-button"\n            :router-link="newLandingPageUrl()"\n            size="small"\n            variant="ghost"\n            :disabled="disableContextMenu || !acl.can(\'landing_page.creator\')"\n        >\n            {{ $tc(\'sw-landing-page.general.buttonCreate\') }}\n        </sw-button>\n    </div>\n    {% endblock %}\n\n</div>\n{% endblock %}\n',inject:["repositoryFactory","syncService","acl"],mixins:["notification"],props:{landingPageId:{type:String,required:!1,default:null},currentLanguageId:{type:String,required:!0},allowEdit:{type:Boolean,required:!1,default:!0},allowCreate:{type:Boolean,required:!1,default:!0},allowDelete:{type:Boolean,required:!1,default:!0}},data:function(){return{loadedLandingPages:{},translationContext:"sw-landing-page",linkContext:"sw.category.landingPage",isLoadingInitialData:!0}},computed:l(l({},r("swCategoryDetail",["landingPagesToDelete"])),{},{cmsLandingPageCriteria:function(){var e=new s(1,500);return e.addSorting(s.sort("name")),e},landingPage:function(){return Shopware.State.get("swCategoryDetail").landingPage},landingPageRepository:function(){return this.repositoryFactory.create("landing_page")},landingPages:function(){return Object.values(this.loadedLandingPages)},disableContextMenu:function(){return!this.allowEdit||this.currentLanguageId!==Shopware.Context.api.systemLanguageId},contextMenuTooltipText:function(){return this.allowEdit?null:this.$tc("sw-privileges.tooltip.warning")}}),watch:{landingPagesToDelete:function(e){void 0!==e&&(this.$refs.landingPageTree.onDeleteElements(e),Shopware.State.commit("swCategoryDetail/setLandingPagesToDelete",{landingPagesToDelete:void 0}))},landingPage:function(e,n){var t=this;n||!this.isLoadingInitialData?null!==e&&n&&"create"!==this.landingPageId&&e.id===n.id&&this.landingPageRepository.get(e.id).then((function(e){t.$set(t.loadedLandingPages,e.id,e)})):this.loadLandingPages()},currentLanguageId:function(){var e=this;this.isLoadingInitialData=!0,this.loadedLandingPages={},this.loadLandingPages().finally((function(){e.isLoadingInitialData=!1}))}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var e=this;this.loadLandingPages().catch((function(){e.createNotificationError({message:e.$tc("global.notification.unspecifiedSaveErrorMessage")})})).finally((function(){e.isLoadingInitialData=!1}))},loadLandingPages:function(){var e=this;return this.landingPageRepository.search(this.cmsLandingPageCriteria).then((function(n){e.addLandingPages(n)}))},checkedElementsCount:function(e){this.$emit("landing-page-checked-elements-count",e),this.$emit("landingPage-checked-elements-count",e)},deleteCheckedItems:function(e){var n=this,t=Object.keys(e);this.landingPageRepository.syncDeleted(t).then((function(){t.forEach((function(e){return n.removeFromStore(e)}))}))},onDeleteLandingPage:function(e){var n=this,t=e.data;return t.isNew()?(this.$delete(this.loadedLandingPages,t.id),Promise.resolve()):this.landingPageRepository.delete(t.id).then((function(){n.removeFromStore(t.id),t.id===n.landingPageId&&n.$router.push({name:"sw.category.index"})}))},changeLandingPage:function(e){var n={name:"sw.category.landingPageDetail",params:{id:e.id}};this.landingPage&&this.landingPageRepository.hasChanges(this.landingPage)?this.$emit("unsaved-changes",n):this.$router.push(n)},duplicateElement:function(e){var n=this,t={cloneChildren:!1,overwrites:{name:"".concat(e.data.name," ").concat(this.$tc("global.default.copy")),url:"".concat(e.data.url,"-").concat(this.$tc("global.default.copy")),active:!1}};this.landingPageRepository.clone(e.id,Shopware.Context.api,t).then((function(e){var t=new s(1,25);t.setIds([e.id]),n.landingPageRepository.search(t).then((function(e){e.forEach((function(e){e.childCount=0,e.parentId=null})),n.addLandingPages(e)}))})).catch((function(){n.createNotificationError({message:n.$tc("global.notification.unspecifiedSaveErrorMessage")})}))},createNewElement:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=this.createNewLandingPage(t);return this.addLandingPage(a),a},syncLandingPages:function(){return this.landingPageRepository.sync(this.landingPages)},createNewLandingPage:function(e){var n=this,t=this.landingPageRepository.create();return t.name=e,t.active=!1,t.save=function(){return n.landingPageRepository.save(t).then((function(){var e=new s(1,25);e.setIds([t.id].filter((function(e){return null!==e}))),n.landingPageRepository.search(e).then((function(e){n.addLandingPages(e)}))}))},t},addLandingPage:function(e){e&&this.$set(this.loadedLandingPages,e.id,e)},addLandingPages:function(e){var n=this;e.forEach((function(e){n.$set(n.loadedLandingPages,e.id,e)}))},removeFromStore:function(e){this.$delete(this.loadedLandingPages,e)},getLandingPageUrl:function(e){return this.$router.resolve({name:this.linkContext,params:{id:e.id}}).href},newLandingPageUrl:function(){return{name:"sw.category.landingPageDetail",params:{id:"create"}}}}}},wdlf:function(e,n,t){var a=t("EhCv");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,t("P8hj").default)("4f11a12a",a,!0,{})}}]);