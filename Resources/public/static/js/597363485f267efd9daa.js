"use strict";(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[50498],{50498:function(e,n,o){o.r(n),o.d(n,{default:function(){return t}});var t={template:'\n{% block sw_order_document_settings_modal_form_first_row %}\n<sw-container\n    columns="1fr 1fr 1fr"\n    gap="0 14px"\n>\n    \n    {% block sw_order_document_settings_modal_form_cancellation_document_number %}\n    <sw-text-field\n        v-model:value="documentConfig.documentNumber"\n        :label="$tc(\'sw-order.documentModal.labelDocumentStornoNumber\')"\n    />\n    {% endblock %}\n\n    \n    {% block sw_order_document_settings_modal_form_document_select_invoice %}\n    <sw-select-field\n        v-model:value="documentConfig.custom.invoiceNumber"\n        class="sw-order-document-settings-storno-modal__invoice-select"\n        :label="$tc(\'sw-order.documentModal.labelInvoiceNumber\')"\n        :placeholder="$tc(\'sw-order.documentModal.selectInvoiceNumber\')"\n    >\n        <option\n            v-for="invoice in invoices"\n            :key="invoice.config.custom.invoiceNumber"\n            :value="invoice.config.custom.invoiceNumber"\n        >\n            {{ invoice.config.custom.invoiceNumber }}\n        </option>\n    </sw-select-field>\n    {% endblock %}\n\n    \n    {% block sw_order_document_settings_modal_form_cancellation_document_date %}\n    <sw-datepicker\n        v-model:value="documentConfig.documentDate"\n        date-type="date"\n        required\n        :label="$tc(\'sw-order.documentModal.labelDocumentDate\')"\n    />\n    {% endblock %}\n</sw-container>\n{% endblock %}\n',inject:["feature"],props:{order:{type:Object,required:!0},currentDocumentType:{type:Object,required:!0}},data(){return{documentConfig:{custom:{stornoNumber:"",invoiceNumber:""},documentNumber:0,documentComment:"",documentDate:""}}},computed:{documentPreconditionsFulfilled(){return!!this.documentConfig.custom.invoiceNumber},invoices(){return this.order.documents.filter(e=>"invoice"===e.documentType.technicalName)}},created(){this.createdComponent()},methods:{createdComponent(){this.numberRangeService.reserve(`document_${this.currentDocumentType.technicalName}`,this.order.salesChannelId,!0).then(e=>{this.documentConfig.documentNumber=e.number,this.documentNumberPreview=this.documentConfig.documentNumber,this.documentConfig.documentDate=new Date().toISOString()})},onCreateDocument(e=!1){this.$emit("loading-document");let n=this.invoices.filter(e=>e.config.custom.invoiceNumber===this.documentConfig.custom.invoiceNumber)[0];this.documentNumberPreview===this.documentConfig.documentNumber?this.numberRangeService.reserve(`document_${this.currentDocumentType.technicalName}`,this.order.salesChannelId,!1).then(o=>{this.documentConfig.custom.stornoNumber=o.number,o.number!==this.documentConfig.documentNumber&&this.createNotificationInfo({message:this.$tc("sw-order.documentCard.info.DOCUMENT__NUMBER_WAS_CHANGED")}),this.documentConfig.documentNumber=o.number,this.callDocumentCreate(e,n.id)}):(this.documentConfig.custom.stornoNumber=this.documentConfig.documentNumber,this.callDocumentCreate(e,n.id))},onPreview(){this.$emit("loading-preview"),this.documentConfig.custom.stornoNumber=this.documentConfig.documentNumber,this.$super("onPreview")}}}}}]);