(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[462],{"25oy":function(e,t,n){},EE0D:function(e,t,n){"use strict";n.r(t);var a=n("J58c"),s=n.n(a);n("pY5r");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var r=Shopware.Mixin,c=Shopware.Data.Criteria;t.default={template:'\n{% block sw_settings_search_searchable_content %}\n<sw-card\n    class="sw-settings-search-searchable-content"\n    position-identifier="sw-settings-search-searchable-content"\n    :title="$tc(\'sw-settings-search.generalTab.labelSearchableContent\')"\n>\n    \n    {% block sw_settings_search_searchable_content_title %}\n    <span class="sw-field sw-settings-search__searchable-content-title">\n        {{ $tc(\'sw-settings-search.generalTab.textDescriptionSearchableContent\') }}\n    </span>\n    {% endblock %}\n\n    \n    {% block sw_settings_search_searchable_actions %}\n    <sw-container\n        class="sw-field"\n        columns="repeat(auto-fit, minmax(100px, 1fr))"\n        align="center"\n        gap="0px 30px"\n    >\n        <div class="sw-settings-search__searchable-content-button-group">\n            \n            {% block sw_settings_search_searchable_add_item %}\n            <sw-button\n                v-if="defaultTab !== tabNames.generalTab"\n                class="sw-settings-search__searchable-content-add-button"\n                variant="ghost"\n                size="small"\n                :disabled="!acl.can(\'product_search_config.creator\')"\n                @click="onAddNewConfig"\n            >\n                {{ $tc(\'sw-settings-search.generalTab.buttonAddContent\') }}\n            </sw-button>\n            {% endblock %}\n\n            \n            {% block sw_settings_search_searchable_reset_default %}\n            <sw-button\n                v-if="defaultTab !== tabNames.customTab"\n                class="sw-settings-search__searchable-content-reset-button"\n                size="small"\n                :disabled="isEnabledReset || !acl.can(\'product_search_config.editor\')"\n                @click="onResetToDefault"\n            >\n                {{ $tc(\'sw-settings-search.generalTab.buttonResetDefault\') }}\n            </sw-button>\n            {% endblock %}\n        </div>\n\n        \n        {% block sw_settings_search_searchable_show_example %}\n        \n        {% block sw_settings_search_searchable_show_example_link %}\n        <div class="sw-settings-search__searchable-content-link-text">\n\n            \n            {% block sw_settings_search_searchable_show_example_link_element %}\n            \n            <a\n                class="sw-settings-search__searchable-content-show-example-link"\n                @click="onShowExampleModal"\n            >\n                {{ $tc(\'sw-settings-search.generalTab.linkExample\') }}\n                <sw-icon\n                    name="regular-long-arrow-right"\n                    small\n                />\n            </a>\n            {% endblock %}\n\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_settings_search_searchable_show_example_modal %}\n        <sw-settings-search-example-modal\n            v-if="showExampleModal"\n            @modal-close="onCloseExampleModal"\n        />\n        {% endblock %}\n        {% endblock %}\n    </sw-container>\n    {% endblock %}\n\n    \n    {% block sw_settings_search_searchable_content_tabs %}\n    <sw-tabs\n        :default-item="defaultTab"\n        position-identifier="sw-settings-search-searchable-content"\n    >\n        <template #default="{ active }">\n            \n            {% block sw_settings_search_searchable_content_general_tab_title %}\n            <sw-tabs-item\n                class="sw-settings-search__searchable-content-tab-title"\n                name="general"\n                :active-tab="active"\n                @click="onChangeTab(tabNames.generalTab)"\n            >\n                {{ $tc(\'sw-settings-search.generalTab.labelGeneralTab\') }}\n            </sw-tabs-item>\n            {% endblock %}\n\n        </template>\n\n        <template #content="{ active }">\n            \n            {% block sw_settings_search_searchable_content_general_tab_item %}\n            <sw-settings-search-searchable-content-general\n                v-if="active === tabNames.generalTab"\n                :is-empty="isListEmpty"\n                :is-loading="isLoading"\n                :columns="getProductSearchFieldColumns"\n                :repository="productSearchFieldRepository"\n                :search-configs="searchConfigFields"\n                :field-configs="fieldConfigs"\n                @data-load="loadData"\n                @config-save="saveConfig"\n            />\n            {% endblock %}\n\n        </template>\n    </sw-tabs>\n    {% endblock %}\n</sw-card>\n{% endblock %}\n',inject:["repositoryFactory","acl","feature"],mixins:[r.getByName("notification")],props:{searchConfigId:{type:String,required:!0},productSearchConfigs:{type:Object,required:!1,default:function(){return null}}},data:function(){return{showExampleModal:!1,defaultTab:"general",tabNames:{generalTab:"general",customTab:"customfields"},isLoading:!1,isEnabledReset:!0,searchConfigFields:[],fieldConfigs:[{label:this.$tc("sw-settings-search.generalTab.configFields.name"),value:"name",defaultConfigs:{searchable:!0,ranking:700,tokenize:!0}},{label:this.$tc("sw-settings-search.generalTab.configFields.description"),value:"description",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.productNumber"),value:"productNumber",defaultConfigs:{searchable:!0,ranking:1e3,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.manufacturerNumber"),value:"manufacturerNumber",defaultConfigs:{searchable:!0,ranking:500,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.ean"),value:"ean",defaultConfigs:{searchable:!0,ranking:500,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.customSearchKeywords"),value:"customSearchKeywords",defaultConfigs:{searchable:!0,ranking:800,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.manufacturerName"),value:"manufacturer.name",defaultConfigs:{searchable:!0,ranking:500,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.manufacturerCustomFields"),value:"manufacturer.customFields",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.categoriesName"),value:"categories.name",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.categoriesCustomFields"),value:"categories.customFields",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.tagsName"),value:"tags.name",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.metaTitle"),value:"metaTitle",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.metaDescription"),value:"metaDescription",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.propertiesName"),value:"properties.name",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.variantValue"),value:"options.name",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}}]}},computed:{productSearchFieldRepository:function(){return this.repositoryFactory.create("product_search_config_field")},productSearchFieldCriteria:function(){var e=new c(1,25);return e.addFilter(c.equals("searchConfigId",this.searchConfigId)),e.addSorting(c.sort("field","ESC")),this.defaultTab===this.tabNames.generalTab?e.addFilter(c.equals("customFieldId",null)):e.addFilter(c.not("AND",[c.equals("customFieldId",null)])),e},isListEmpty:function(){return!this.searchConfigFields||!this.searchConfigFields.length},getProductSearchFieldColumns:function(){return[{property:"field",label:"sw-settings-search.generalTab.list.columnContent",inlineEdit:"string",sortable:!0,width:"250px"},{property:"searchable",label:"sw-settings-search.generalTab.list.columnSearchable",align:"center",inlineEdit:"string",sortable:!0},{property:"ranking",inlineEdit:"number",label:"sw-settings-search.generalTab.list.columnRankingPoints",align:"right",sortable:!0},{property:"tokenize",inlineEdit:"string",label:"sw-settings-search.generalTab.list.columnSplitKeywords",align:"center",sortable:!0}]}},watch:{searchConfigId:function(e){this.searchConfigId=e,this.loadData()},productSearchConfigs:function(){this.loadData()}},methods:{onShowExampleModal:function(){this.showExampleModal=!0},onCloseExampleModal:function(){this.showExampleModal=!1},onAddNewConfig:function(){var e=this.createNewConfigItem();this.searchConfigFields.unshift(e),this.$emit("edit-change",!0)},createNewConfigItem:function(){var e=this.productSearchFieldRepository.create();return e.searchConfigId=this.searchConfigId,e.searchable=!1,e.ranking=0,e.field="",e.tokenize=!1,e},getConfigFieldDefault:function(e){var t=this.fieldConfigs.find((function(t){return t.value===e}));return t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.defaultConfigs):{ranking:0,searchable:!1,tokenize:!1}},onResetToDefault:function(){var e=this,t=this.defaultTab===this.tabNames.generalTab;this.searchConfigFields.forEach((function(n){return n.ranking=t?e.getConfigFieldDefault(n.field).ranking:0,n.searchable=!!t&&e.getConfigFieldDefault(n.field).searchable,n.tokenize=!!t&&e.getConfigFieldDefault(n.field).tokenize,n})),this.saveConfig()},onChangeTab:function(e){this.defaultTab=e,this.loadData()},loadData:function(){this.getProductSearchFieldsList()},getProductSearchFieldsList:function(){var e=this;this.isLoading=!0;var t=this.productSearchFieldCriteria;this.productSearchFieldRepository.search(t).then((function(t){e.total=t.total,e.isEnabledReset=!t.total,e.searchConfigFields=t})).catch((function(){e.createNotificationError({message:e.$tc("sw-settings-search.notification.loadError")})})).finally((function(){e.isLoading=!1}))},saveConfig:function(){var e=this;this.isLoading=!0,this.productSearchFieldRepository.saveAll(this.searchConfigFields).then((function(){e.createNotificationSuccess({message:e.$tc("sw-settings-search.notification.saveSuccess")}),e.$emit("edit-change",!1)})).catch((function(){e.createNotificationError({message:e.$tc("sw-settings-search.notification.saveError")})})).finally((function(){e.isLoading=!1,e.loadData()}))},deleteConfig:function(e){var t=this;e&&(this.isLoading=!0,this.productSearchFieldRepository.delete(e).then((function(){t.createNotificationSuccess({message:t.$tc("sw-settings-search.notification.saveSuccess")})})).catch((function(){t.createNotificationError({message:t.$tc("sw-settings-search.notification.saveError")})})).finally((function(){t.isLoading=!1,t.loadData()})))}}}},pY5r:function(e,t,n){var a=n("25oy");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("ydqr").default)("f82ea36c",a,!0,{})}}]);