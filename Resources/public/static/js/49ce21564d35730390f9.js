(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[252],{"0Jc7":function(n,e,o){var t=o("Ob2Y");t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);(0,o("P8hj").default)("cf35466a",t,!0,{})},Ob2Y:function(n,e,o){},niP5:function(n,e,o){"use strict";o.r(e);var t=o("4fmW"),l=o.n(t),i=o("c1oF"),a=o.n(i),c=o("CsSd"),r=o.n(c);o("0Jc7");function s(n,e){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.push.apply(o,t)}return o}function d(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(Object(o),!0).forEach((function(e){r()(n,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}))}return n}var p=Shopware,u=p.Mixin,f=p.Classes.ShopwareError;e.default={template:'\n{% block sw_flow_app_action_modal %}\n<sw-modal\n    class="sw-flow-app-action-modal"\n    @modal-close="onClose"\n>\n    <template #modal-header>\n        \n        {% block sw_flow_app_action_modal_header %}\n        <div class="sw-flow-app-action-modal__header">\n            {{ actionLabel }}\n            <span class="sw-flow-app-action-modal__app-badge">\n                {{ appBadge }}\n            </span>\n        </div>\n        {% endblock %}\n    </template>\n\n    \n    {% block sw_flow_app_action_modal_content %}\n    \n    {% block sw_flow_app_action_modal_headcontent %}\n    <div\n        v-if="headline || paragraph"\n        class="sw-flow-app-action-modal__headcontent"\n    >\n        \n        {% block sw_flow_app_action_modal_headline %}\n        <div\n            v-if="headline"\n            class="sw-flow-app-action-modal__headline"\n        >\n            {{ headline }}\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_flow_app_action_modal_paragraph %}\n        <div\n            v-if="paragraph"\n            class="sw-flow-app-action-modal__paragraph"\n        >\n            {{ paragraph }}\n        </div>\n        {% endblock %}\n    </div>\n    {% endblock %}\n    <sw-form-field-renderer\n        v-for="field in fields"\n        :key="field.name"\n        v-model="config[field.name]"\n        :type="field.type"\n        :config="getConfig(field)"\n        :error="errors[field.name]"\n        @update="onChange($event, field)"\n    />\n    {% endblock %}\n    <template #modal-footer>\n        \n        {% block sw_flow_app_action_modal_footer_cancel_button %}\n        <sw-button\n            class="sw-flow-app-action-modal__cancel-button"\n            size="small"\n            @click="onClose"\n        >\n            {{ $tc(\'global.default.cancel\') }}\n        </sw-button>\n        {% endblock %}\n\n        \n        {% block sw_flow_app_action_modal_footer_save_button %}\n        <sw-button\n            class="sw-flow-app-action-modal__save-button"\n            variant="primary"\n            size="small"\n            @click="onSave"\n        >\n            {{ $tc(\'sw-flow.modals.buttonSaveAction\') }}\n        </sw-button>\n        {% endblock %}\n    </template>\n</sw-modal>\n{% endblock %}\n',inject:["acl"],mixins:[u.getByName("placeholder"),u.getByName("notification")],props:{sequence:{type:Object,required:!0}},data:function(){return{config:{},fields:[],errors:{}}},computed:{actionLabel:function(){var n,e,o,t,l;return(null===(n=this.sequence)||void 0===n||null===(e=n.propsAppFlowAction)||void 0===e||null===(o=e.translated)||void 0===o?void 0:o.label)||(null===(t=this.sequence)||void 0===t||null===(l=t.propsAppFlowAction)||void 0===l?void 0:l.label)},appBadge:function(){var n,e,o;return null===(n=this.sequence)||void 0===n||null===(e=n.propsAppFlowAction)||void 0===e||null===(o=e.app)||void 0===o?void 0:o.label},currentLocale:function(){return Shopware.State.get("session").currentLocale},headline:function(){var n,e,o,t,l;return(null===(n=this.sequence)||void 0===n||null===(e=n.propsAppFlowAction)||void 0===e||null===(o=e.translated)||void 0===o?void 0:o.headline)||(null===(t=this.sequence)||void 0===t||null===(l=t.propsAppFlowAction)||void 0===l?void 0:l.headline)},paragraph:function(){var n,e,o,t,l;return(null===(n=this.sequence)||void 0===n||null===(e=n.propsAppFlowAction)||void 0===e||null===(o=e.translated)||void 0===o?void 0:o.description)||(null===(t=this.sequence)||void 0===t||null===(l=t.propsAppFlowAction)||void 0===l?void 0:l.description)}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var n,e=this;this.getFields(),null!==(n=this.sequence)&&void 0!==n&&n.config&&Object.entries(d({},this.sequence.config)).forEach((function(n){var o=a()(n,2),t=o[0],i=o[1];e.config[t]="object"===l()(i)&&void 0!==i.value?i.value:i}))},onChange:function(n,e){this.handleValid(e,n)},isValid:function(){var n=this;return this.errors={},this.fields.forEach((function(e){var o,t=null!==(o=n.config[e.name])&&void 0!==o?o:null;n.handleValid(e,t)})),0===Object.keys(this.errors).length},handleValid:function(n,e){var o,t,i,a=e;if("object"!==l()(a)||0!==(null===(o=a)||void 0===o?void 0:o.length)&&0!==(null===(t=a)||void 0===t||null===(i=t.value)||void 0===i?void 0:i.length)||(a=null),n.required&&!a&&"boolean"!=typeof a)return this.$delete(this.config,[n.name]),void this.$set(this.errors,n.name,new f({code:"c1051bb4-d103-4f74-8988-acbcafc7fdc3"}));this.$delete(this.errors,[n.name])},onSave:function(){var n,e,o;if(this.isValid()&&null!==(n=this.sequence)&&void 0!==n&&null!==(e=n.propsAppFlowAction)&&void 0!==e&&null!==(o=e.app)&&void 0!==o&&o.active){var t=this.buildConfig(),l=d(d({},this.sequence),{},{config:t});this.$emit("process-finish",l),this.onClose()}},buildConfig:function(){var n=this,e={};return this.fields.forEach((function(o){var t;0!==(null===(t=n.config[o.name])||void 0===t?void 0:t.length)&&null!==n.config[o.name]&&(e[o.name]=n.config[o.name])})),e},onClose:function(){this.$emit("modal-close")},getFields:function(){var n,e=this;null===(n=this.sequence.propsAppFlowAction)||void 0===n||n.config.forEach((function(n){e.config[n.name]=e.convertDefaultValue(n.type,n.defaultValue),e.fields.push(n),e.$delete(e.errors,n.name)}))},convertDefaultValue:function(n,e){return void 0===e?null:["int","float"].includes(n)?parseInt(e,10):["bool","checkbox"].includes(n)?!!e:["date","datetime","time"].includes(n)?null:e},getConfig:function(n){var e={label:n.label,placeholder:n.placeHolder,disabled:n.disabled,required:n.required,helpText:this.helpText(n)};return"colorpicker"===n.type?(e.componentName="sw-colorpicker",e.zIndex=1e3,e.colorOutput="hex",e):"text-editor"===n.type?(e.componentName="sw-text-editor",e):(["single-select","multi-select"].includes(n.type)&&(e.componentName="sw-".concat(n.type),e.options=n.options),e)},helpText:function(n){var e,o;if(void 0===n.helpText)return null;var t=JSON.parse(JSON.stringify(n.helpText));return null!==(e=null!==(o=t[this.currentLocale])&&void 0!==o?o:t[Shopware.Context.app.fallbackLocale])&&void 0!==e?e:null}}}}}]);