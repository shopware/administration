(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[78030],{441529:function(){},778030:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return t}}),i(626433);var t={template:'\n{% block sw_cms_mapping_field %}\n<div class="sw-cms-mapping-field">\n\n    \n    {% block sw_cms_mapping_field_info %}\n    <div class="sw-cms-mapping-field__info">\n\n        \n        {% block sw_cms_mapping_field_label %}\n        <div class="sw-cms-mapping-field__label">\n            {{ label }}\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_cms_mapping_field_mapping %}\n        <template v-if="allowedMappingTypes.length">\n            \n            {% block sw_cms_mapping_field_mapping_selection %}\n            <sw-context-button\n                v-if="!isMapped"\n                class="sw-cms-mapping-field__selection"\n                :menu-width="340"\n            >\n                \n                {% block sw_cms_mapping_field_mapping_selection_action %}\n                <template #button>\n                    <div class="sw-cms-mapping-field__action">\n                        <sw-icon\n                            name="regular-external-link"\n                            size="16"\n                        />\n                        <span class="sw-cms-mapping-field__action-label">\n                            {{ $tc(\'sw-cms.detail.label.buttonMappingAction\') }}\n                        </span>\n                    </div>\n                </template>\n                {% endblock %}\n\n                \n                {% block sw_cms_mapping_field_mapping_selection_options %}\n                <div class="sw-cms-mapping-field__options">\n                    <sw-context-menu-item\n                        v-for="(prop, index) in allowedMappingTypes"\n                        :key="index"\n                        @click="onMappingSelect(prop)"\n                    >\n                        {{ prop }}\n                    </sw-context-menu-item>\n                </div>\n                {% endblock %}\n            </sw-context-button>\n            {% endblock %}\n\n            \n            {% block sw_cms_mapping_field_mapping_remove_action %}\n            <div\n                v-else\n                class="sw-cms-mapping-field__action-remove"\n                role="button"\n                tabindex="0"\n                @click="onMappingRemove"\n                @keydown.enter="onMappingRemove"\n            >\n                <sw-icon name="regular-times" />\n                <span class="sw-cms-mapping-field__action-label">\n                    {{ $tc(\'sw-cms.detail.label.buttonMappingRemoveAction\') }}\n                </span>\n            </div>\n            {% endblock %}\n        </template>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    \n    {% block sw_cms_mapping_field_content %}\n    <div\n        v-if="!isMapped"\n        class="sw-cms-mapping-field__form-field"\n    >\n        <slot>\n        {% block sw_cms_mapping_field_slot_default %}{% endblock %}</slot>\n    </div>\n    {% endblock %}\n\n    <template v-else>\n        \n        {% block sw_cms_mapping_field_mapping_value %}\n        <div class="sw-cms-mapping-field__mapping-value">\n            {{ $tc(\'sw-cms.detail.label.mappingPreview\') }} <b>{{ config.value }}</b>\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_cms_mapping_field_preview %}\n        <div\n            v-if="hasPreview"\n            class="sw-cms-mapping-field__preview"\n        >\n            <slot\n                v-if="demoValue !== null"\n                name="preview"\n                :demo-value="demoValue"\n            ></slot>\n\n            <sw-alert\n                v-else\n                variant="info"\n                class="sw-cms-mapping-field__empty-demo"\n            >\n                {{ $tc(\'sw-cms.detail.label.mappingEmptyPreview\') }}\n            </sw-alert>\n        </div>\n        {% endblock %}\n    </template>\n</div>\n{% endblock %}\n',inject:["cmsService"],props:{config:{type:Object,required:!0,default(){return{source:"static",value:null}}},valueTypes:{type:[String,Array],required:!1,default:"string"},entity:{type:String,required:!1,default:null},label:{type:String,required:!1,default:""}},data(){return{cmsPageState:Shopware.State.get("cmsPageState"),mappingTypes:{},allowedMappingTypes:[],demoValue:null}},computed:{isMapped(){return"mapped"===this.config.source},hasPreview(){return void 0!==this.$scopedSlots.preview}},watch:{cmsPageState:{deep:!0,handler(){this.updateMappingTypes(),this.updateDemoValue()}}},created(){this.createdComponent()},methods:{createdComponent(){this.updateMappingTypes(),this.updateDemoValue()},updateMappingTypes(){this.mappingTypes=this.cmsPageState.currentMappingTypes,this.getAllowedMappingTypes(),"mapped"===this.config.source&&this.config.value.split(".")[0]!==this.cmsPageState.currentMappingEntity&&this.onMappingRemove()},updateDemoValue(){"mapped"===this.config.source&&(this.demoValue=this.getDemoValue(this.config.value))},onMappingSelect(e){this.config.source="mapped",this.config.value=e,this.demoValue=this.getDemoValue(e)},onMappingRemove(){this.config.source="static",this.config.value=this.config.type===Array?[]:null,this.demoValue=null},getAllowedMappingTypes(){let e=[];"entity"===this.valueTypes?null!==this.entity&&this.mappingTypes.entity&&this.mappingTypes.entity[this.entity]&&(e=this.mappingTypes.entity[this.entity]):Object.keys(this.mappingTypes).forEach(n=>{(n===this.valueTypes||this.valueTypes.includes(n))&&(e=[...e,...this.mappingTypes[n]]).sort()}),this.allowedMappingTypes=e},getDemoValue(e){return this.cmsService.getPropertyByMappingPath(this.cmsPageState.currentDemoEntity,e)}}}},626433:function(e,n,i){var t=i(441529);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.id,t,""]]),t.locals&&(e.exports=t.locals),i(745346).Z("5c671eac",t,!0,{})}}]);