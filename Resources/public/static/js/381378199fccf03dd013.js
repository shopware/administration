(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[328],{"9OKY":function(e,n,t){var r=t("AYPb");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,t("ydqr").default)("fc65f57e",r,!0,{})},AYPb:function(e,n,t){},ShSD:function(e,n,t){"use strict";t.r(n);var r=t("QGb3"),i=t.n(r),o=t("HZZ/"),d=t.n(o),l=t("hJxD"),a=t.n(l),s=(t("9OKY"),Shopware.Filter),c=Shopware.Data.Criteria;n.default={template:'\n{% block sw_order_nested_line_item_modal %}\n<sw-modal\n    class="sw-order-nested-line-items-modal"\n    variant="large"\n    :title="modalTitle"\n    @modal-close="onCloseModal"\n>\n\n    \n    {% block sw_order_nested_line_item_modal_loader %}\n    <sw-loader\n        v-if="isLoading"\n        class="sw-order-nested-line-items-modal__loader"\n    />\n    {% endblock %}\n\n    \n    {% block sw_order_nested_line_item_modal_container %}\n    <div\n        v-else\n        class="sw-order-nested-line-items-modal__container"\n    >\n\n        \n        {% block sw_order_nested_line_item_modal_header_container %}\n        <div class="sw-order-nested-line-items-modal__header-container">\n\n            \n            {% block sw_order_nested_line_item_modal_header_label %}\n            <div class="sw-order-nested-line-items-modal__header-label sw-order-nested-line-items-modal__header-item">\n                {{ $tc(\'sw-order.nestedLineItemsModal.headerLabel\') }}\n            </div>\n            {% endblock %}\n\n            \n            {% block sw_order_nested_line_item_modal_header_unit_price %}\n            <div class="sw-order-nested-line-items-modal__header-unit-price sw-order-nested-line-items-modal__header-item">\n                {{ $tc(\'sw-order.nestedLineItemsModal.headerUnitPrice\') }}\n            </div>\n            {% endblock %}\n\n            \n            {% block sw_order_nested_line_item_modal_header_quantity %}\n            <div class="sw-order-nested-line-items-modal__header-quantity sw-order-nested-line-items-modal__header-item">\n                {{ $tc(\'sw-order.nestedLineItemsModal.headerQuantity\') }}\n            </div>\n            {% endblock %}\n\n            \n            {% block sw_order_nested_line_item_modal_header_total_price %}\n            <div class="sw-order-nested-line-items-modal__header-total-price sw-order-nested-line-items-modal__header-item">\n                {{ $tc(\'sw-order.nestedLineItemsModal.headerTotalPrice\') }}\n            </div>\n            {% endblock %}\n\n            \n            {% block sw_order_nested_line_item_modal_header_tax %}\n            <div class="sw-order-nested-line-items-modal__header-tax sw-order-nested-line-items-modal__header-item">\n                {{ $tc(\'sw-order.nestedLineItemsModal.headerTax\') }}\n            </div>\n            {% endblock %}\n\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_order_nested_line_item_modal_content %}\n        <sw-order-nested-line-items-row\n            class="sw-order-nested-line-items-modal__content"\n            :line-item="lineItem"\n            :currency="order.currency"\n        />\n        {% endblock %}\n\n    </div>\n    {% endblock %}\n\n    \n    {% block sw_order_nested_line_item_modal_footer %}\n    <template #modal-footer>\n\n        \n        {% block sw_order_nested_line_item_modal_footer_content %}\n        <sw-button\n            variant="primary"\n            size="small"\n            @click="onCloseModal"\n        >\n            {{ $tc(\'global.default.close\') }}\n        </sw-button>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n</sw-modal>\n{% endblock %}\n',inject:["repositoryFactory"],props:{lineItem:{type:Object,required:!0},order:{type:Object,required:!0}},data:function(){return{isLoading:!1}},computed:{lineItemRepository:function(){return this.repositoryFactory.create("order_line_item")},modalTitle:function(){var e=s.getByName("currency")(this.lineItem.totalPrice,this.order.currency.shortName);return this.$tc("sw-order.nestedLineItemsModal.titlePrefix",0,{lineItemLabel:this.lineItem.label,price:e})}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var e=this;return d()(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==e.lineItem){n.next=2;break}return n.abrupt("return");case 2:return e.isLoading=!0,e.lineItem.nestingLevel=0,n.next=6,e.enrichNestedLineItems(e.lineItem.children);case 6:case"end":return n.stop()}}),n)})))()},enrichNestedLineItems:function(e){var n=arguments,t=this;return d()(a.a.mark((function r(){var o,d,l,s,_;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=n.length>1&&void 0!==n[1]?n[1]:1,!(null===e||e.length<=0)){r.next=4;break}return t.isLoading=!1,r.abrupt("return");case 4:return d=e.map((function(e){return e.id})),(l=new c(1,25).addFilter(c.equalsAny("parentId",d))).getAssociation("children").addSorting(c.naturalSorting("label")),r.next=9,t.lineItemRepository.search(l,Shopware.Context.api);case 9:return s=r.sent,_=[],e.forEach((function(e){e.nestingLevel=o,e.children=s.filter((function(n){return n.parentId===e.id})),e.children.sort(t.naturalSort),_.push.apply(_,i()(e.children))})),r.next=14,t.enrichNestedLineItems(_,o+1);case 14:case"end":return r.stop()}}),r)})))()},naturalSort:function(e,n){return e.label.localeCompare(n.label,"en-GB",{numeric:!0,ignorePunctuation:!0})},onCloseModal:function(){this.$emit("modal-close")}}}}}]);