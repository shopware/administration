(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[248],{"2AUB":function(t,n,e){"use strict";e.r(n);var i=e("HZZ/"),r=e.n(i),s=e("hJxD"),a=e.n(s);e("ICn5"),n.default={template:'\n{% block sw_first_run_wizard_store %}\n<div class="sw-first-run-wizard-store">\n    <template v-if="loadStatus">\n        <sw-loader />\n\n        <p class="message">\n            {{ $tc(\'sw-first-run-wizard.store.loadStatusCollect\') }}\n            <br>\n            {{ $tc(\'sw-first-run-wizard.store.takeMinutes\') }}\n        </p>\n    </template>\n\n    <template v-else-if="extensionStatus && extensionStatus.active">\n        <sw-label\n            class="sw-first-run-wizard-store__label"\n            appearance="pill"\n            variant="success"\n        >\n            <sw-icon\n                name="regular-check-circle"\n                size="30px"\n            />\n        </sw-label>\n\n        <h2>\n            {{ $tc(\'sw-first-run-wizard.store.alreadyActivated\') }}\n        </h2>\n    </template>\n\n    <template v-else-if="isActivating">\n        <sw-loader />\n\n        <p class="message">\n            {{ $tc(\'sw-first-run-wizard.store.enablingStore\') }}\n            <br>\n            {{ $tc(\'sw-first-run-wizard.store.takeMinutes\') }}\n        </p>\n    </template>\n\n    <template v-else-if="activationError">\n        <sw-label\n            class="sw-first-run-wizard-store__label"\n            appearance="pill"\n            variant="danger"\n        >\n            <sw-icon\n                name="regular-times-circle"\n                size="30px"\n            />\n        </sw-label>\n\n        <h2>\n            {{ error && error.title || $tc(\'sw-first-run-wizard.store.activationErrorTitle\') }}\n        </h2>\n        <p>\n            {{ error && error.detail || $tc(\'sw-first-run-wizard.store.activationErrorDescription\') }}\n        </p>\n    </template>\n\n    <template v-else>\n        <img\n            :src="\'/administration/static/img/extension-store/store_illustration.svg\' | asset"\n            alt=""\n        >\n\n        <h2 class="sw-first-run-wizard-store__heading">\n            {{ $tc(\'sw-first-run-wizard.store.headingOne\') }}\n            <br>\n            {{ $tc(\'sw-first-run-wizard.store.headingTwo\') }}\n        </h2>\n\n        <p>\n            {{ $tc(\'sw-first-run-wizard.store.description\') }}\n        </p>\n    </template>\n</div>\n{% endblock %}\n',inject:["extensionHelperService"],data:function(){return{loadStatus:!1,isActivating:!1,activationError:null,extensionStatus:null,error:null}},computed:{edition:function(){var t=this.licenceDomains.find((function(t){return t.active}));return t?t.edition:""},buttonConfig:function(){var t={key:"back",label:this.$tc("sw-first-run-wizard.general.buttonBack"),position:"left",variant:null,action:"sw.first.run.wizard.index.shopware.account",disabled:this.isActivating||this.loadStatus};return this.extensionStatus&&this.extensionStatus.active?[t,{key:"next",label:this.$tc("sw-first-run-wizard.general.buttonNext"),position:"right",variant:"primary",action:"sw.first.run.wizard.index.finish",disabled:!1}]:[t,{key:"skip",label:this.$tc("sw-first-run-wizard.general.buttonSkip"),position:"right",variant:null,action:"sw.first.run.wizard.index.finish",disabled:this.isActivating||this.loadStatus},{key:"activate",label:this.$tc("sw-first-run-wizard.general.buttonActivate"),position:"right",variant:"primary",action:this.activateStore.bind(this),disabled:this.isActivating||this.loadStatus}]}},watch:{buttonConfig:{handler:function(){this.updateButtons()},deep:!0}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.updateButtons(),this.setTitle(),this.updateExtensionStatus()},setTitle:function(){this.$emit("frw-set-title",this.$tc("sw-first-run-wizard.store.modalTitle"))},updateExtensionStatus:function(){var t=this;return r()(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.loadStatus=!0,n.prev=1,n.next=4,t.extensionHelperService.getStatusOfExtension("SwagExtensionStore");case 4:t.extensionStatus=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),Shopware.Utils.debug.error(n.t0);case 10:return n.prev=10,t.loadStatus=!1,n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})))()},activateStore:function(){var t=this;this.isActivating=!0,this.activationError=null,Promise.all([this.installExtensionStore()]).then((function(){t.$emit("frw-redirect","sw.first.run.wizard.index.finish")})).catch((function(n){var e;t.activationError=!0,null!=n&&null!==(e=n.response)&&void 0!==e&&e.data&&Array.isArray(n.response.data.errors)&&n.response.data.errors[0]&&(t.error=n.response.data.errors[0]),Shopware.Utils.debug.error(n)})).finally((function(){t.isActivating=!1}))},installExtensionStore:function(){var t=this;return r()(a.a.mark((function n(){var e;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.extensionHelperService.downloadAndActivateExtension("SwagExtensionStore");case 2:return e=n.sent,t.$emit("extension-activated"),n.abrupt("return",e);case 5:case"end":return n.stop()}}),n)})))()},updateButtons:function(){this.$emit("buttons-update",this.buttonConfig)}}}},ICn5:function(t,n,e){var i=e("gRf/");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,e("ydqr").default)("3f3317aa",i,!0,{})},"gRf/":function(t,n,e){}}]);