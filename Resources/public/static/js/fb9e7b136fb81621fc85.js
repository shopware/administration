(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[217],{"2jD8":function(e,n,t){var i=t("U94Z");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,t("P8hj").default)("38401eed",i,!0,{})},U94Z:function(e,n,t){},YCFm:function(e,n,t){"use strict";t.r(n);var i=t("7yzw"),s=t.n(i),o=t("CsSd"),a=t.n(o),r=t("92Mt"),c=t.n(r),l=(t("2jD8"),t("ySdR"));function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}n.default={template:'\n{% block sw_extension_card_base_activation_switch %}\n{% parent %}\n\n\n{% block sw_bought_extension_card_deactivation_modal %}\n<sw-extension-deactivation-modal\n    v-if="showDeactivationModal"\n    :extension-name="label"\n    :is-licensed="license !== null"\n    :is-loading="isLoading"\n    @modal-close="closeDeactivationModal"\n    @extension-deactivate="closeModalAndDeactivateExtension"\n/>\n{% endblock %}\n{% endblock %}\n\n\n{% block sw_extension_card_base_info_content %}\n{% parent %}\n\n\n{% block sw_extension_card_base_calculated_price %}\n<section v-if="priceInfo && extension.storeLicense.variant === \'rent\'">\n    \n    {% block sw_bought_extension_card_info_price %}\n    <span class="sw-extension-card-bought__info-price">\n        {{ priceInfo }}\n    </span>\n    {% endblock %}\n</section>\n{% endblock %}\n\n\n{% block sw_extension_card_base_subscription_expired_info %}\n<section v-if="subscriptionExpiredText">\n    \n    {% block sw_extension_card_base_subscription_expired_info_text %}\n    <span\n        class="sw-extension-card-bought__info-subscription-expiry"\n        :class="subscriptionExpiredTextClasses"\n    >\n        <sw-icon\n            v-if="isExpiredTestPhase || isExpiredRent"\n            name="solid-exclamation-circle"\n            size="14"\n            small\n        />\n        {{ subscriptionExpiredText }}\n    </span>\n    {% endblock %}\n</section>\n{% endblock %}\n{% endblock %}\n\n\n{% block sw_extension_card_base_context_menu_actions %}\n\n\n{% block sw_bought_extension_card_context_menu_open_detail %}\n<sw-context-menu-item\n    v-if="detailLink"\n    class="sw-extension-card-bought__detail-link"\n    :router-link="detailLink"\n>\n    {{ $tc(\'sw-extension-store.component.sw-extension-card-base.contextMenu.seeDetailsLabel\') }}\n</sw-context-menu-item>\n{% endblock %}\n\n\n{% block sw_bought_extension_card_context_menu_rate %}\n<sw-context-menu-item\n    v-if="isInstalled && extension.storeLicense"\n    class="sw-extension-card-bought__rate-link"\n    @click="openRatingModal"\n>\n    {{ $tc(\'sw-extension-store.component.sw-extension-card-base.contextMenu.rateLabel\') }}\n</sw-context-menu-item>\n{% endblock %}\n\n{% parent %}\n{% endblock %}\n\n\n{% block sw_extension_card_base_modals %}\n{% parent %}\n\n\n{% block sw_bought_extension_card_rating_modal %}\n<sw-extension-rating-modal\n    v-if="showRatingModal"\n    :extension="extension"\n    @modal-close="closeRatingModal"\n/>\n{% endblock %}\n\n\n{% block sw_bought_extension_card_installation_failed_modal %}\n<sw-modal\n    v-if="showExtensionInstallationFailedModal"\n    :title="extension.label"\n    variant="small"\n    class="sw-extension-card-bought__installation-failed-modal"\n    @modal-close="closeInstallationFailedNotification"\n>\n    \n    {% block sw_bought_extension_card_installation_failed_modal_extension %}\n    <sw-extension-adding-failed\n        :extension-name="extension.name"\n        :title="installationFailedError && installationFailedError.title"\n        :detail="installationFailedError && installationFailedError.message"\n        :documentation-link="installationFailedError && installationFailedError.parameters && installationFailedError.parameters.documentationLink"\n        @close="closeInstallationFailedNotification"\n    />\n    {% endblock %}\n</sw-modal>\n    {% endblock %}\n{% endblock %}\n',mixins:["sw-extension-error"],props:{extension:{type:Object,required:!1,default:null}},data:function(){return{showDeactivationModal:!1,showRatingModal:!1,showExtensionInstallationFailedModal:!1,installationFailedError:null}},computed:{extensionCardClasses:function(){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({"sw-extension-card-bought":!0},this.$super("extensionCardClasses"))},priceInfo:function(){var e,n,t;return null!==(e=null===(n=this.extension)||void 0===n||null===(t=n.storeLicense)||void 0===t?void 0:t.paymentText)&&void 0!==e?e:""},detailLink:function(){return{name:"sw.extension.store.detail",params:{id:String(this.extension.storeExtension?this.extension.storeExtension.id:this.extension.id)}}},subscriptionExpiredText:function(){var e,n,t,i,s,o,a,r=null!==(e=null===(n=this.extension)||void 0===n||null===(t=n.storeLicense)||void 0===t?void 0:t.expirationDate)&&void 0!==e?e:null;if(null===r)return null;var c=new Date(r).toLocaleDateString();return"test"!==(null===(i=this.extension)||void 0===i||null===(s=i.storeLicense)||void 0===s?void 0:s.variant)||null!==(o=this.extension)&&void 0!==o&&null!==(a=o.storeLicense)&&void 0!==a&&a.expired?this.isExpiredTestPhase?this.$t("sw-extension-store.component.sw-extension-card-bought.testPhaseExpiredAt",{date:c}):this.isExpiredRent?this.$t("sw-extension-store.component.sw-extension-card-bought.rentExpiredAt",{date:c}):this.$t("sw-extension-store.component.sw-extension-card-bought.rentWillExpireAt",{date:c}):this.$t("sw-extension-store.component.sw-extension-card-bought.testPhaseWillExpireAt",{date:c})},isExpiredRent:function(){var e,n,t,i;return"rent"===(null===(e=this.extension)||void 0===e||null===(n=e.storeLicense)||void 0===n?void 0:n.variant)&&(null===(t=this.extension)||void 0===t||null===(i=t.storeLicense)||void 0===i?void 0:i.expired)},isExpiredTestPhase:function(){var e,n,t,i;return"test"===(null===(e=this.extension)||void 0===e||null===(n=e.storeLicense)||void 0===n?void 0:n.variant)&&(null===(t=this.extension)||void 0===t||null===(i=t.storeLicense)||void 0===i?void 0:i.expired)},subscriptionExpiredTextClasses:function(){return{"is--expired-test-phase":this.isExpiredTestPhase,"is--expired-rent":this.isExpiredRent}}},methods:{changeExtensionStatus:function(){var e=this;return s()(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isActive){n.next=4;break}return n.next=3,e.activateExtension();case 3:return n.abrupt("return");case 4:if(e.license&&e.license.variant===e.shopwareExtensionService.EXTENSION_VARIANT_TYPES.RENT){n.next=8;break}return n.next=7,e.deactivateExtension();case 7:return n.abrupt("return");case 8:e.showDeactivationModal=!0,e.$nextTick((function(){e.extension.active=!e.extension.active}));case 10:case"end":return n.stop()}}),n)})))()},activateExtension:function(){var e=this;return s()(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.isLoading=!0,n.next=4,e.shopwareExtensionService.activateExtension(e.extension.name,e.extension.type);case 4:e.extension.active=!0,e.clearCacheAndReloadPage(),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),e.extension.active=!1,e.showExtensionErrors(n.t0);case 12:return n.prev=12,e.isLoading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,8,12,15]])})))()},deactivateExtension:function(){var e=this;return s()(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.isLoading=!0,n.next=4,e.shopwareExtensionService.deactivateExtension(e.extension.name,e.extension.type);case 4:e.extension.active=!1,e.clearCacheAndReloadPage(),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),e.extension.active=!0,e.showExtensionErrors(n.t0);case 12:return n.prev=12,e.isLoading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,8,12,15]])})))()},closeDeactivationModal:function(){this.showDeactivationModal=!1},closeModalAndDeactivateExtension:function(){var e=this;return s()(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.deactivateExtension();case 2:e.showDeactivationModal=!1;case 3:case"end":return n.stop()}}),n)})))()},installExtension:function(){var e=this;return s()(c.a.mark((function n(){var t,i;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.isLoading=!0,n.prev=1,"store"!==e.extension.source){n.next=5;break}return n.next=5,e.extensionStoreActionService.downloadExtension(e.extension.name);case 5:return n.next=7,e.shopwareExtensionService.installExtension(e.extension.name,e.extension.type);case 7:return n.next=9,e.clearCacheAndReloadPage();case 9:n.next=17;break;case 11:n.prev=11,n.t0=n.catch(1),e.showExtensionErrors(n.t0),(i=null===(t=l.a.mapErrors(n.t0.response.data.errors))||void 0===t?void 0:t[0]).parameters?e.installationFailedError=i:e.installationFailedError={title:e.$tc(i.title),message:e.$tc(i.message)},e.showExtensionInstallationFailedModal=!0;case 17:return n.prev=17,e.isLoading=!1,n.finish(17);case 20:case"end":return n.stop()}}),n,null,[[1,11,17,20]])})))()},installAndActivateExtension:function(){var e=this;return s()(c.a.mark((function n(){var t,i;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.isLoading=!0,n.prev=1,"store"!==e.extension.source){n.next=5;break}return n.next=5,e.extensionStoreActionService.downloadExtension(e.extension.name);case 5:return n.next=7,e.shopwareExtensionService.installExtension(e.extension.name,e.extension.type);case 7:return n.next=9,e.shopwareExtensionService.activateExtension(e.extension.name,e.extension.type);case 9:return n.next=11,e.clearCacheAndReloadPage();case 11:n.next=19;break;case 13:n.prev=13,n.t0=n.catch(1),e.showExtensionErrors(n.t0),(i=null===(t=l.a.mapErrors(n.t0.response.data.errors))||void 0===t?void 0:t[0]).parameters?e.installationFailedError=i:e.installationFailedError={title:e.$tc(i.title),message:e.$tc(i.message)},e.showExtensionInstallationFailedModal=!0;case 19:return n.prev=19,e.isLoading=!1,n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[1,13,19,22]])})))()},cancelAndRemoveExtension:function(){var e=this;return s()(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e.closeRemovalModal(),e.isLoading=!0,e.extension.storeLicense.expirationDate){n.next=6;break}return n.next=6,e.shopwareExtensionService.cancelLicense(e.extension.storeLicense.id);case 6:return n.next=8,e.shopwareExtensionService.removeExtension(e.extension.name,e.extension.type);case 8:e.$nextTick((function(){e.emitUpdateList()})),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),e.showExtensionErrors(n.t0);case 14:return n.prev=14,e.isLoading=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,11,14,17]])})))()},openRatingModal:function(){this.showRatingModal=!0},closeRatingModal:function(){this.showRatingModal=!1},closeInstallationFailedNotification:function(){this.showExtensionInstallationFailedModal=!1}}}}}]);