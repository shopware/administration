(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[3],{"0WOu":function(n,e){n.exports=function(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}},"5ugh":function(n,e,t){var i=t("b9G3");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);(0,t("ydqr").default)("f93a0908",i,!0,{})},"67e+":function(n,e,t){var i=t("i91D"),o=t("Jnpc")(i);n.exports=o},Jnpc:function(n,e,t){var i=t("yTJ1");n.exports=function(n,e){return function(t,o){if(null==t)return t;if(!i(t))return n(t,o);for(var c=t.length,s=e?c:-1,a=Object(t);(e?s--:++s<c)&&!1!==o(a[s],s,a););return t}}},LqMR:function(n,e,t){"use strict";t.r(e);var i=t("euUg"),o=t.n(i),c=t("XkwL"),s=t.n(c),a=t("J58c"),l=t.n(a),r=t("v5XQ"),u=t.n(r),d=t("PpCK"),p=t.n(d),f=(t("5ugh"),t("mlQo"));function w(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function m(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?w(Object(t),!0).forEach((function(e){l()(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var v=Shopware,_=v.Component,h=v.State,g=v.Mixin,b=Shopware.Utils,A=b.object.cloneDeep,S=Shopware.Classes.ShopwareError,q=_.getComponentHelper(),F=q.mapState,y=q.mapGetters,O=b.string.snakeCase,C=Shopware.Data.Criteria;e.default={template:'\n{% block sw_flow_sequence_action %}\n<div\n    class="sw-flow-sequence-action"\n    :class="actionClasses"\n>\n    \n    {% block sw_flow_sequence_action_card %}\n    <div class="sw-flow-sequence-action__card">\n        \n        {% block sw_flow_sequence_action_header %}\n        <div class="sw-flow-sequence-action__header">\n            \n            {% block sw_flow_sequence_action_title %}\n            <div class="sw-flow-sequence-action__title-description">\n                <h3 class="sw-flow-sequence-action__title">\n                    {{ $tc(\'sw-flow.detail.sequence.actionTitle\') }}\n                </h3>\n\n                <p class="sw-flow-sequence-action__description">\n                    {{ $tc(\'sw-flow.detail.sequence.actionDescription\') }}\n                </p>\n            </div>\n            {% endblock %}\n\n            \n            {% block sw_flow_sequence_action_context_menu %}\n            <sw-context-button\n                class="sw-flow-sequence-action__context-button"\n                :class="actionClasses"\n                :disabled="disabled"\n            >\n                \n                {% block sw_flow_sequence_action_remove_action_container %}\n                <sw-context-menu-item\n                    variant="danger"\n                    class="sw-flow-sequence-action__delete-action-container"\n                    @click="removeActionContainer"\n                >\n                    {{ $tc(\'sw-flow.detail.sequence.contextButton.deleteActionContainer\') }}\n                </sw-context-menu-item>\n                {% endblock %}\n            </sw-context-button>\n            {% endblock %}\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_flow_sequence_action_content %}\n        <div class="sw-flow-sequence-action__content">\n            \n            {% block sw_flow_sequence_action_actions %}\n            <div class="sw-flow-sequence-action__actions">\n                \n                {% block sw_flow_sequence_action_actions_empty %}\n                <div\n                    v-if="sequenceData.length === 1 && !sequence.actionName"\n                    class="sw-flow-sequence-action__actions-empty"\n                >\n                    <sw-icon\n                        size="12px"\n                        name="regular-minus-xs"\n                    />\n                    <span class="sw-flow-sequence-action__no-action">\n                        {{ $tc(\'sw-flow.detail.sequence.noActions\') }}\n                    </span>\n                </div>\n                {% endblock %}\n\n                \n                {% block sw_flow_sequence_action_actions_list %}\n                <ul\n                    v-else\n                    class="sw-flow-sequence-action__action-list"\n                >\n                    \n                    {% block sw_flow_sequence_action_actions_transition_group %}\n                    <transition-group\n                        name="list"\n                        tag="div"\n                    >\n                        \n                        {% block sw_flow_sequence_action_actions_item %}\n                        \n                        <li\n                            v-for="(item, key) in sequenceData"\n                            :key="item.id"\n                            v-tooltip="{\n                                message: $tc(\'sw-flow.actions.tooltipActionDisabled\'),\n                                disabled: !item.disabled\n                            }"\n                            class="sw-flow-sequence-action__action-item"\n                            :class="{\'sw-flow-sequence-action__disabled\': item.disabled}"\n                            @click="(event) => onEditAction(item, event.target, key)"\n                        >\n                            <sw-flow-sequence-action-error\n                                v-if="!isValidAction(item)"\n                                :sequence="item"\n                            >\n                                <template #content>\n                                    <div class="sw-flow-sequence-action__error-action">\n                                        <div class="sw-flow-sequence-action__error-action-title">\n                                            <sw-icon\n                                                name="regular-question-circle-s"\n                                                size="14px"\n                                                class="sw-icon-action"\n                                            />\n\n                                            {{ $tc(\'sw-flow.actions.unknownLabel\') }}\n                                        </div>\n\n                                        <p>\n                                            {{ $tc(\'sw-flow.actions.warningText\') }}\n                                        </p>\n                                    </div>\n                                </template>\n                            </sw-flow-sequence-action-error>\n\n                            <div v-else>\n                                \n                                {% block sw_flow_sequence_action_actions_item_header %}\n                                <div class="sw-flow-sequence-action__action-header">\n                                    <div class="sw-flow-sequence-action__action-icon">\n                                        <sw-icon\n                                            v-if="!item.iconRaw"\n                                            :name="`${item.icon}`"\n                                            size="12px"\n                                            class="sw-icon-action"\n                                        />\n\n                                        <img\n                                            v-else\n                                            class="sw-flow-sequence-action__icon-raw sw-icon"\n                                            :src="`data:image/png;base64, ${item.iconRaw}`"\n                                            alt=""\n                                        >\n                                    </div>\n\n                                    \n                                    {% block sw_flow_sequence_action_actions_item_name %}\n                                    <div class="sw-flow-sequence-action__action-name">\n                                        <h3>{{ item.label }}</h3>\n                                    </div>\n                                    {% endblock %}\n\n                                    \n                                    {% block sw_flow_sequence_action_actions_item_context_button %}\n                                    <sw-context-button\n                                        ref="contextButton"\n                                        class="sw-flow-sequence-action__context-button"\n                                        :disabled="disabled || item.disabled"\n                                    >\n                                        \n                                        {% block sw_flow_sequence_action_actions_item_button_edit %}\n                                        <sw-context-menu-item\n                                            v-if="isNotStopFlow(item)"\n                                            class="sw-flow-sequence-action__edit-action"\n                                            @click="(event) => onEditAction(item, event.target, key)"\n                                        >\n                                            {{ $tc(\'sw-flow.actions.contextButton.editAction\') }}\n                                        </sw-context-menu-item>\n                                        {% endblock %}\n\n                                        \n                                        {% block sw_flow_sequence_action_actions_item_button_delete %}\n                                        <sw-context-menu-item\n                                            variant="danger"\n                                            class="sw-flow-sequence-action__delete-action"\n                                            @click="removeAction(item.id)"\n                                        >\n                                            {{ $tc(\'sw-flow.actions.contextButton.deleteAction\') }}\n                                        </sw-context-menu-item>\n                                        {% endblock %}\n\n                                        \n                                        {% block sw_flow_sequence_action_actions_item_button_move_up %}\n                                        <sw-context-menu-item\n                                            v-if="showMoveOption(item, \'up\')"\n                                            class="sw-flow-sequence-action__move-up"\n                                            @click="moveAction(item, \'up\')"\n                                        >\n                                            {{ $tc(\'sw-flow.actions.contextButton.moveUpAction\') }}\n                                        </sw-context-menu-item>\n                                        {% endblock %}\n\n                                        \n                                        {% block sw_flow_sequence_action_actions_item_button_move_down %}\n                                        <sw-context-menu-item\n                                            v-if="showMoveOption(item, \'down\')"\n                                            class="sw-flow-sequence-action__move-down"\n                                            @click="moveAction(item, \'down\')"\n                                        >\n                                            {{ $tc(\'sw-flow.actions.contextButton.moveDownAction\') }}\n                                        </sw-context-menu-item>\n                                        {% endblock %}\n                                    </sw-context-button>\n                                    {% endblock %}\n                                </div>\n                                {% endblock %}\n                            </div>\n\n                            \n                            {% block sw_flow_sequence_action_actions_item_description %}\n                            <div\n                                class="sw-flow-sequence-action__action-description"\n                                v-html="getActionDescription(item)"\n                            >\n                            </div>\n                            {% endblock %}\n\n                            \n                            {% block sw_flow_sequence_action_item_custom %}\n                            {% endblock %}\n\n                        </li>\n                        {% endblock %}\n                    </transition-group>\n                    {% endblock %}\n                </ul>\n                {% endblock %}\n            </div>\n            {% endblock %}\n\n            \n            {% block sw_flow_sequence_action_add_select %}\n            <div\n                v-if="showAddAction && !disabled"\n                class="sw-flow-sequence-action__select"\n            >\n                \n                {% block sw_flow_sequence_action_list %}\n                <sw-grouped-single-select\n                    class="sw-flow-sequence-action__selection-action"\n                    size="small"\n                    value=""\n                    :placeholder="$tc(\'sw-flow.actions.placeholderSelectAction\')"\n                    :options="actionOptions"\n                    :groups="groups"\n                    :popover-classes="[\'sw-flow-sequence-action__popover\']"\n                    :error="fieldError"\n                    @change="openDynamicModal"\n                >\n                    <template #result-item="{ item, index, labelProperty, highlightSearchTerm, isSelected, setValue, getKey }">\n                        <li\n                            is="sw-select-result"\n                            v-tooltip="{\n                                message: $tc(\'sw-flow.actions.tooltipActionDisabled\'),\n                                disabled: !item.disabled\n                            }"\n                            :selected="isSelected(item)"\n                            v-bind="{ item, index }"\n                            :class="[stopFlowStyle(item.value), {\'sw-flow-sequence-action__disabled\': item.disabled}]"\n                            @item-select="setValue"\n                        >\n                            \n                            {% block sw_flow_sequence_action_select_results_list_result_label %}\n                            <sw-icon\n                                v-if="!item.iconRaw"\n                                :name="`${item.icon}`"\n                                size="12px"\n                                class="sw-icon-action"\n                            />\n\n                            <img\n                                v-else\n                                class="sw-flow-sequence-action__icon-raw"\n                                :src="`data:image/png;base64, ${item.iconRaw}`"\n                                alt=""\n                            >\n\n                            <sw-highlight-text\n                                v-if="highlightSearchTerm"\n                                :text="getKey(item, labelProperty)"\n                            />\n\n                            <template v-else>\n                                {{ getKey(item, labelProperty) }}\n                            </template>\n                            {% endblock %}\n                        </li>\n                    </template>\n                </sw-grouped-single-select>\n                {% endblock %}\n            </div>\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    <div\n        v-if="errorArrow"\n        class="sw-flow-sequence-action__true-arrow"\n    >\n        <div class="sw-flow-sequence-action__true-line"></div>\n        <div class="sw-flow-sequence-action__oval"></div>\n        <sw-icon\n            name="regular-chevron-right-s"\n            small\n        />\n\n    </div>\n\n    \n    {% block sw_flow_sequence_action_modal %}\n    <sw-flow-sequence-modal\n        :sequence="currentSequence"\n        :action="selectedAction"\n        :modal-name="modalName"\n        @process-finish="onSaveActionSuccess"\n        @modal-close="onCloseModal"\n    />\n    {% endblock %}\n</div>\n{% endblock %}\n',inject:["repositoryFactory","flowBuilderService","feature"],mixins:[g.getByName("sw-inline-snippet")],props:{sequence:{type:Object,required:!0},disabled:{type:Boolean,required:!1,default:!1}},data:function(){return{fieldError:null,selectedAction:"",currentSequence:{},appFlowActions:[],isAppAction:!1}},computed:m(m({sequenceRepository:function(){return this.repositoryFactory.create("flow_sequence")},customFieldSetRepository:function(){return this.repositoryFactory.create("custom_field_set")},appFlowActionRepository:function(){return this.repositoryFactory.create("app_flow_action")},actionOptions:function(){var n=this,e=this.availableActions.map((function(e){return n.getActionTitle(e)}));return this.sortActionOptions(e)},groups:function(){var n=this,e=this.actionGroups.map((function(e){return{id:e,label:n.$tc("sw-flow.actions.group.".concat(e))}}));if(this.appFlowActions.length){var t,i,o,c=this.appFlowActions[0];if(!this.actionGroups.find((function(n){var e;return n===(null==c||null===(e=c.app)||void 0===e?void 0:e.name)})))e.unshift({id:"".concat(null==c||null===(t=c.app)||void 0===t?void 0:t.name[0].toLowerCase()).concat(null==c||null===(i=c.app)||void 0===i?void 0:i.name.slice(1)),label:null==c||null===(o=c.app)||void 0===o?void 0:o.label})}return p()(e,["label"])},sequenceData:function(){var n=this;return this.sequence.id?[m(m({},this.sequence),this.getActionTitle(this.sequence.actionName))]:this.sortByPosition(Object.values(this.sequence).map((function(e){return m(m({},e),n.getActionTitle(e.actionName))})))},showAddAction:function(){return!(this.sequence.actionName===f.a.STOP_FLOW||this.sequenceData.some((function(n){return n.actionName===f.a.STOP_FLOW})))},actionClasses:function(){return{"is--stop-flow":!this.showAddAction,"has--arrow":this.errorArrow}},errorArrow:function(){return!this.isValidAction(this.sequence)&&this.sequence.actionName&&this.sequence.trueBlock},modalName:function(){return this.getSelectedAppFlowAction(this.selectedAction)?"sw-flow-app-action-modal":this.flowBuilderService.getActionModalName(this.selectedAction)},currentLocale:function(){return Shopware.State.get("session").currentLocale},actionDescription:function(){var n,e=this;return n={},l()(n,f.a.STOP_FLOW,(function(){return e.$tc("sw-flow.actions.textStopFlowDescription")})),l()(n,f.a.SET_ORDER_STATE,(function(n){return e.getSetOrderStateDescription(n)})),l()(n,f.a.GENERATE_DOCUMENT,(function(n){return e.getGenerateDocumentDescription(n)})),l()(n,f.a.MAIL_SEND,(function(n){return e.getMailSendDescription(n)})),l()(n,f.a.CHANGE_CUSTOMER_GROUP,(function(n){return e.getCustomerGroupDescription(n)})),l()(n,f.a.CHANGE_CUSTOMER_STATUS,(function(n){return e.getCustomerStatusDescription(n)})),l()(n,f.a.SET_CUSTOMER_CUSTOM_FIELD,(function(n){return e.getCustomFieldDescription(n)})),l()(n,f.a.SET_CUSTOMER_GROUP_CUSTOM_FIELD,(function(n){return e.getCustomFieldDescription(n)})),l()(n,f.a.SET_ORDER_CUSTOM_FIELD,(function(n){return e.getCustomFieldDescription(n)})),l()(n,f.a.ADD_CUSTOMER_AFFILIATE_AND_CAMPAIGN_CODE,(function(n){return e.getAffiliateAndCampaignCodeDescription(n)})),l()(n,f.a.ADD_ORDER_AFFILIATE_AND_CAMPAIGN_CODE,(function(n){return e.getAffiliateAndCampaignCodeDescription(n)})),l()(n,f.a.APP_FLOW_ACTION,(function(n,t){return e.getAppFlowActionDescription(n,t)})),n}},F("swFlowState",["invalidSequences","stateMachineState","documentTypes","mailTemplates","customerGroups","customFieldSets","customFields","triggerEvent","triggerActions"])),y("swFlowState",["availableActions","actionGroups","sequences"])),watch:{sequence:{handler:function(){this.setFieldError()}}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.getAppFlowAction()},openDynamicModal:function(n){var e=this.getSelectedAppFlowAction(n);e&&(this.isAppAction=!0,this.currentSequence.propsAppFlowAction=e),n!==f.a.STOP_FLOW?this.selectedAction=n:this.addAction({name:f.a.STOP_FLOW,config:null})},getSelectedAppFlowAction:function(n){return this.appFlowActions.find((function(e){return e.name===n}))},onSaveActionSuccess:function(n){var e=n.config,t=n.id,i=null==e?void 0:e.entity,o=this.selectedAction,c=this.flowBuilderService.mapActionType(this.selectedAction);c&&i&&(i=O(i).replace("_","."),o=c.replace("entity",i)),t?this.editAction({name:o,config:e}):this.addAction({name:o,config:e}),this.onCloseModal()},onCloseModal:function(){this.currentSequence={},this.selectedAction="",this.isAppAction=!1,this.$delete(this.sequence,"propsAppFlowAction")},addAction:function(n){if(n.name){var e=this.getSelectedAppFlowAction(n.name);if(!this.sequence.actionName&&this.sequence.id){var t={id:this.sequence.id,actionName:n.name,config:n.config};e&&(t.appFlowActionId=e.id),h.commit("swFlowState/updateSequence",t)}else{var i=this.sequenceData[this.sequenceData.length-1],o=this.sequenceRepository.create(),c=m(m({},o),{},{parentId:i.parentId,trueCase:i.trueCase,displayGroup:i.displayGroup,ruleId:null,actionName:n.name,position:i.position+1,config:n.config,id:b.createId()});e&&(c.appFlowActionId=e.id),o=Object.assign(o,c),h.commit("swFlowState/addSequence",o)}this.removeFieldError()}},editAction:function(n){n.name&&h.commit("swFlowState/updateSequence",{id:this.currentSequence.id,actionName:n.name,config:n.config})},removeAction:function(n){var e,t=this.sequences.find((function(e){return e.id===n}));null!=t&&t.id&&this.sequences.filter((function(e){return e.parentId===t.parentId&&e.trueCase===t.trueCase&&e.id!==n})).forEach((function(n,e){h.commit("swFlowState/updateSequence",{id:n.id,position:e+1})}));this.isAppDisabled(this.getSelectedAppFlowAction(null===(e=this.sequence[n])||void 0===e?void 0:e.actionName))||h.commit("swFlowState/removeSequences",[n])},actionsWithoutStopFlow:function(){if(this.sequence.id)return[m({},this.sequence)];var n=Object.values(this.sequence);return this.sortByPosition(n.filter((function(n){return n.actionName!==f.a.STOP_FLOW})))},showMoveOption:function(n,e){var t=this.actionsWithoutStopFlow();return!(t.length<=1)&&(("up"!==e||t[0].position!==n.position)&&(("down"!==e||t[t.length-1].position!==n.position)&&n.actionName!==f.a.STOP_FLOW))},moveAction:function(n,e){if(!this.isAppDisabled(this.getSelectedAppFlowAction(n.actionName))){var t=this.actionsWithoutStopFlow(),i=t.findIndex((function(e){return e.position===n.position})),o="up"===e?t[i-1]:t[i+1],c=A(o);h.commit("swFlowState/updateSequence",{id:o.id,position:n.position}),h.commit("swFlowState/updateSequence",{id:n.id,position:c.position})}},onEditAction:function(n,e,t){n.actionName&&n.actionName===f.a.STOP_FLOW||this.$refs.contextButton[t]&&null!=n&&n.actionName&&e&&(this.$refs.contextButton[t].$el.contains(e)||this.isAppDisabled(this.getSelectedAppFlowAction(n.actionName))||(n.propsAppFlowAction=this.getSelectedAppFlowAction(n.actionName),this.currentSequence=n,this.selectedAction=n.actionName))},removeActionContainer:function(){var n=this.sequence.id?[this.sequence.id]:Object.keys(this.sequence);h.commit("swFlowState/removeSequences",n)},getActionTitle:function(n){if(!n)return null;var e,t,i,o,c=this.getSelectedAppFlowAction(n);if(c)return{label:c.label||(null===(e=c.translated)||void 0===e?void 0:e.label),icon:c.swIcon,iconRaw:c.icon,value:c.name,disabled:!(null!==(t=c.app)&&void 0!==t&&t.active),group:"".concat(null===(i=c.app)||void 0===i?void 0:i.name[0].toLowerCase()).concat(null===(o=c.app)||void 0===o?void 0:o.name.slice(1))};var s=this.flowBuilderService.getActionTitle(n);return m(m({},s),{},{label:this.$tc(s.label),group:f.b[n]||f.d})},getAppFlowAction:function(){var n=this,e=new C(1,25);return e.addAssociation("app"),this.appFlowActionRepository.search(e,Shopware.Context.api).then((function(e){n.appFlowActions=e}))},sortByPosition:function(n){return n.sort((function(n,e){return n.position-e.position}))},stopFlowStyle:function(n){return{"is--stop-flow":n===f.a.STOP_FLOW}},convertTagString:function(n){return n.toString().replace(/,/g,", ")},getActionDescription:function(n){var e=n.actionName,t=n.config;return e?this.getSelectedAppFlowAction(e)?this.actionDescription[f.a.APP_FLOW_ACTION](t,e):e.includes("tag")&&(e.includes("add")||e.includes("remove"))?"".concat(this.$tc("sw-flow.actions.labelTo",0,{entity:this.capitalize(t.entity)}),"<br>").concat(this.$tc("sw-flow.actions.labelTag",0,{tagNames:this.convertTagString(Object.values(t.tagIds))})):"function"==typeof this.actionDescription[e]||this.isAppAction?this.actionDescription[e](t):"":""},setFieldError:function(){var n;null!==(n=this.invalidSequences)&&void 0!==n&&n.includes(this.sequence.id)?this.fieldError=new S({code:"c1051bb4-d103-4f74-8988-acbcafc7fdc3"}):this.fieldError=null},removeFieldError:function(){var n,e=this;if(this.fieldError){this.fieldError=null;var t=null===(n=this.invalidSequences)||void 0===n?void 0:n.filter((function(n){return e.sequence.id!==n}));h.commit("swFlowState/setInvalidSequences",t)}},isNotStopFlow:function(n){return n.actionName!==f.a.STOP_FLOW},getSetOrderStateDescription:function(n){var e=[];if(n.order){var t,i=this.stateMachineState.find((function(e){return e.technicalName===n.order&&"order.state"===e.stateMachine.technicalName})),o=(null==i||null===(t=i.translated)||void 0===t?void 0:t.name)||"";e.push("".concat(this.$tc("sw-flow.modals.status.labelOrderStatus"),": ").concat(o))}if(n.order_delivery){var c,s=this.stateMachineState.find((function(e){return e.technicalName===n.order_delivery&&"order_delivery.state"===e.stateMachine.technicalName})),a=(null==s||null===(c=s.translated)||void 0===c?void 0:c.name)||"";e.push("".concat(this.$tc("sw-flow.modals.status.labelDeliveryStatus"),": ").concat(a))}if(n.order_transaction){var l,r=this.stateMachineState.find((function(e){return e.technicalName===n.order_transaction&&"order_transaction.state"===e.stateMachine.technicalName})),u=(null==r||null===(l=r.translated)||void 0===l?void 0:l.name)||"";e.push("".concat(this.$tc("sw-flow.modals.status.labelPaymentStatus"),": ").concat(u))}var d=n.force_transition?this.$tc("global.default.yes"):this.$tc("global.default.no");return e.push("".concat(this.$tc("sw-flow.modals.status.forceTransition"),": ").concat(d)),e.join("<br>")},getGenerateDocumentDescription:function(n){var e=this;n.documentType&&(n={documentTypes:[n]});var t=n.documentTypes.map((function(n){var t,i;return null===(t=e.documentTypes.find((function(e){return e.technicalName===n.documentType})))||void 0===t||null===(i=t.translated)||void 0===i?void 0:i.name}));return this.convertTagString(t)},getCustomerGroupDescription:function(n){var e,t=this.customerGroups.find((function(e){return e.id===n.customerGroupId}));return null==t||null===(e=t.translated)||void 0===e?void 0:e.name},getCustomerStatusDescription:function(n){return n.active?this.$tc("sw-flow.modals.customerStatus.active"):this.$tc("sw-flow.modals.customerStatus.inactive")},getMailSendDescription:function(n){var e,t=this.mailTemplates.find((function(e){return e.id===n.mailTemplateId})),i=this.$tc("sw-flow.actions.labelTemplate",0,{template:null==t||null===(e=t.mailTemplateType)||void 0===e?void 0:e.name}),o=null==t?void 0:t.description;return o&&(o=o.length>60?"".concat(o.substring(0,60),"..."):o,i="".concat(i,"<br>").concat(this.$tc("sw-flow.actions.labelDescription",0,{description:o}))),i},getCustomFieldDescription:function(n){var e=this.customFieldSets.find((function(e){return e.id===n.customFieldSetId})),t=this.customFields.find((function(e){return e.id===n.customFieldId}));return e&&t?"".concat(this.$tc("sw-flow.actions.labelCustomFieldSet",0,{customFieldSet:this.getInlineSnippet(e.config.label)||e.name}),"<br>").concat(this.$tc("sw-flow.actions.labelCustomField",0,{customField:this.getInlineSnippet(t.config.label)||t.name}),"<br>").concat(this.$tc("sw-flow.actions.labelCustomFieldOption",0,{customFieldOption:n.optionLabel})):""},getAffiliateAndCampaignCodeDescription:function(n){var e=this.$tc("sw-flow.actions.labelTo",0,{entity:this.capitalize(n.entity)});return(n.affiliateCode.upsert||null!=n.affiliateCode.value)&&(e="".concat(e,"<br>").concat(this.$tc("sw-flow.actions.labelAffiliateCode",0,{affiliateCode:n.affiliateCode.value||""}))),(n.campaignCode.upsert||null!=n.campaignCode.value)&&(e="".concat(e,"<br>").concat(this.$tc("sw-flow.actions.labelCampaignCode",0,{campaignCode:n.campaignCode.value||""}))),e},capitalize:function(n){return"".concat(n.slice(0,1).toUpperCase()).concat(n.slice(1))},getAppFlowActionDescription:function(n,e){var t=this,i=m({},n),c="";return Object.entries(i).forEach((function(n){var a=s()(n,1)[0];if("object"===o()(i[a])&&i[a].length>1){var l="";return i[a].forEach((function(n){var i=t.formatValuePreview(a,e,n);l="".concat(l,"- ").concat(i,"<br/>")})),void(c="".concat(c).concat(t.convertLabelPreview(a,e),":<br/> ").concat(l))}var r=t.formatValuePreview(a,e,i[a]);c="".concat(c).concat(t.convertLabelPreview(a,e),": ").concat(r,"<br/>")})),c},formatValuePreview:function(n,e,t){var i=this.getSelectedAppFlowAction(e);if(void 0===i)return t;var o=i.config.find((function(e){return e.name===n}));if(void 0===o)return t;if(["password"].includes(o.type))return t.replace(/([^;])/g,"*");if(["single-select","multi-select"].includes(o.type)){var c,s,a="string"==typeof t?t:t[0],l=o.options.find((function(n){return n.value===a}));return void 0===l?t:null!==(c=null!==(s=l.label[this.currentLocale])&&void 0!==s?s:o.label["en-GB"])&&void 0!==c?c:t}return["datetime","date","time"].includes(o.type)?new Date(t):["colorpicker"].includes(o.type)?'<span class="sw-color-badge is--default" style="background: '.concat(t,';"></span> ').concat(t):t},convertLabelPreview:function(n,e){var t,i,o=this.getSelectedAppFlowAction(e);if(void 0===o)return n;var c=o.config.find((function(e){return e.name===n}));return void 0===c?n:null!==(t=null!==(i=c.label[this.currentLocale])&&void 0!==i?i:c.label["en-GB"])&&void 0!==t?t:n},isAppDisabled:function(n){return!!n&&!n.app.active},getStopFlowIndex:function(n){return n.map((function(n,e){return n.group===f.d&&e})).filter((function(n){return n>0})).pop()||n.length},sortActionOptions:function(n){var e=n.pop();(n=u()(n,["group","label"])).forEach((function(e){e.group&&e.group!==f.d||(e.group=e.group||f.d,n.push(n.splice(n.findIndex((function(n){return n.group===f.d})),1)[0]))})),n=p()(n,["group","label"],["esc","esc"]);var t=this.getStopFlowIndex(n)+1;return n.splice(t,0,e),n},isValidAction:function(n){return!this.triggerActions.length||!n.actionName||this.triggerActions.find((function(e){return e.name===n.actionName}))}}}},MXVp:function(n,e,t){var i=t("67e+"),o=t("yTJ1");n.exports=function(n,e){var t=-1,c=o(n)?Array(n.length):[];return i(n,(function(n,i,o){c[++t]=e(n,i,o)})),c}},PpCK:function(n,e,t){var i=t("IcUP"),o=t("tNpl"),c=t("Ce+n"),s=t("7MQn"),a=c((function(n,e){if(null==n)return[];var t=e.length;return t>1&&s(n,e[0],e[1])?e=[]:t>2&&s(e[0],e[1],e[2])&&(e=[e[0]]),o(n,i(e,1),[])}));n.exports=a},YIwv:function(n,e,t){var i=t("+IXE");n.exports=function(n,e){if(n!==e){var t=void 0!==n,o=null===n,c=n==n,s=i(n),a=void 0!==e,l=null===e,r=e==e,u=i(e);if(!l&&!u&&!s&&n>e||s&&a&&r&&!l&&!u||o&&a&&r||!t&&r||!c)return 1;if(!o&&!s&&!u&&n<e||u&&t&&c&&!o&&!s||l&&t&&c||!a&&c||!r)return-1}return 0}},b9G3:function(n,e,t){},i91D:function(n,e,t){var i=t("rlNI"),o=t("NHjt");n.exports=function(n,e){return n&&i(n,e,o)}},jaXZ:function(n,e,t){var i=t("YIwv");n.exports=function(n,e,t){for(var o=-1,c=n.criteria,s=e.criteria,a=c.length,l=t.length;++o<a;){var r=i(c[o],s[o]);if(r)return o>=l?r:r*("desc"==t[o]?-1:1)}return n.index-e.index}},tNpl:function(n,e,t){var i=t("4FGL"),o=t("+Bmy"),c=t("JF7T"),s=t("MXVp"),a=t("0WOu"),l=t("Ijh8"),r=t("jaXZ"),u=t("Q7kj"),d=t("8u9v");n.exports=function(n,e,t){e=e.length?i(e,(function(n){return d(n)?function(e){return o(e,1===n.length?n[0]:n)}:n})):[u];var p=-1;e=i(e,l(c));var f=s(n,(function(n,t,o){return{criteria:i(e,(function(e){return e(n)})),index:++p,value:n}}));return a(f,(function(n,e){return r(n,e,t)}))}},v5XQ:function(n,e,t){var i=t("tNpl"),o=t("8u9v");n.exports=function(n,e,t,c){return null==n?[]:(o(e)||(e=null==e?[]:[e]),o(t=c?void 0:t)||(t=null==t?[]:[t]),i(n,e,t))}}}]);