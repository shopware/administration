(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[68],{EgWL:function(t,e,n){},WAi1:function(t,e,n){"use strict";n.r(e);var a=n("7yzw"),s=n.n(a),i=n("92Mt"),o=n.n(i),c=n("axCo"),r=(n("orhR"),Shopware.Utils),y="SwCategories";e.default=Shopware.Component.wrapComponentConfig({template:'<div class="sw-category-detail-custom-entity">\n    <template v-if="category">\n        <sw-card\n            v-if="!Array.isArray(customEntityAssignments)"\n            :title="$tc(\'sw-category.base.customEntity.cardTitle\')"\n            position-identifier="category-detail-custom-entity"\n            class="sw-category-detail-custom-entity__selection-container"\n        >\n            <sw-entity-single-select\n                class="sw-category-detail-custom-entity__assignment"\n                :value="category.customEntityTypeId"\n                :label="$tc(\'sw-category.base.customEntity.assignment.label\')"\n                :help-text="$tc(\'sw-category.base.customEntity.assignment.helpText\')"\n                :disabled="!acl.can(\'category.editor\')"\n                :criteria="customEntityCriteria"\n                entity="custom_entity"\n                required\n                @change="onEntityChange"\n            />\n        </sw-card>\n\n        <sw-many-to-many-assignment-card\n            v-else\n            :entity-collection="customEntityAssignments"\n            :title="$tc(\'sw-category.base.customEntity.cardTitle\')"\n            :columns="customEntityColumns"\n            :local-mode="category.isNew()"\n            label-property="cmsAwareTitle"\n            :criteria="sortingCriteria"\n            :select-label="$tc(\'sw-category.base.customEntity.instanceAssignment.label\')"\n            :placeholder="$tc(\'sw-category.base.customEntity.instanceAssignment.placeholder\')"\n            {% if VUE3 %}\n            @update:entity-collection="onAssignmentChange"\n            {% else %}\n            @change="onAssignmentChange"\n            {% endif %}\n        >\n            <template #prepend-select>\n                <sw-entity-single-select\n                    class="sw-category-detail-custom-entity__assignment"\n                    :value="category.customEntityTypeId"\n                    :label="$tc(\'sw-category.base.customEntity.assignment.label\')"\n                    :help-text="$tc(\'sw-category.base.customEntity.assignment.helpText\')"\n                    :disabled="!acl.can(\'category.editor\')"\n                    :criteria="customEntityCriteria"\n                    entity="custom_entity"\n                    required\n                    @change="onEntityChange"\n                />\n            </template>\n\n            <template #empty-state>\n                <sw-empty-state\n                    :title="$tc(\'sw-category.base.customEntity.instanceAssignment.emptyState.title\')"\n                    :absolute="false"\n                >\n                    <template #icon>\n                        <img\n                            :src="assetFilter(\'/administration/static/img/empty-states/products-empty-state.svg\')"\n                            alt="$tc(\'sw-category.base.customEntity.instanceAssignment.emptyState.title\')"\n                        >\n                    </template>\n                </sw-empty-state>\n            </template>\n        </sw-many-to-many-assignment-card>\n    </template>\n</div>\n',inject:["repositoryFactory","acl"],data:function(){return{categoryCustomEntityProperty:""}},props:{isLoading:{type:Boolean,required:!1,default:!1}},computed:{customEntityAssignments:function(){var t,e;return null===(t=this.category)||void 0===t||null===(e=t.extensions)||void 0===e?void 0:e["".concat(this.categoryCustomEntityProperty).concat(y)]},customEntityColumns:function(){return[{dataIndex:"cmsAwareTitle",property:"cmsAwareTitle",label:this.$tc("sw-category.base.customEntity.instanceAssignment.title")}]},category:function(){return Shopware.State.get("swCategoryDetail").category},customEntityCriteria:function(){return new c.a(1,10).addFilter(c.a.contains("flags","cms-aware"))},sortingCriteria:function(){return new c.a(1,10).addSorting(c.a.sort("cmsAwareTitle","ASC"))},assetFilter:function(){return Shopware.Filter.getByName("asset")}},created:function(){this.fetchCustomEntityName()},methods:{onAssignmentChange:function(t){var e,n=null===(e=this.category)||void 0===e?void 0:e.extensions;n&&(n["".concat(this.categoryCustomEntityProperty).concat(y)]=t)},onEntityChange:function(t,e){var n;this.category&&(this.category.customEntityTypeId=t,this.categoryCustomEntityProperty=r.string.camelCase(null!==(n=null==e?void 0:e.name)&&void 0!==n?n:""))},fetchCustomEntityName:function(){var t=this;return s()(o.a.mark((function e(){var n,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.category)&&void 0!==n&&n.customEntityTypeId){e.next=2;break}return e.abrupt("return");case 2:return a=t.repositoryFactory.create("custom_entity"),e.next=5,a.get(t.category.customEntityTypeId);case 5:if(s=e.sent){e.next=8;break}return e.abrupt("return");case 8:t.categoryCustomEntityProperty=r.string.camelCase(s.name);case 9:case"end":return e.stop()}}),e)})))()}}})},orhR:function(t,e,n){var a=n("EgWL");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n("P8hj").default)("ceeb9a48",a,!0,{})}}]);