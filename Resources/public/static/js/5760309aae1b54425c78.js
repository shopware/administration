(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[234],{"1euQ":function(e,n,t){},qD1o:function(e,n,t){var i=t("1euQ");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,t("P8hj").default)("05638867",i,!0,{})},t1Lh:function(e,n,t){"use strict";t.r(n);t("qD1o");var i=Shopware,o=i.State,a=i.Context;n.default=Shopware.Component.wrapComponentConfig({template:'<sw-page class="sw-extension-app-module-page">\n    <template\n        v-if="!suspend"\n        #smart-bar-header\n    >\n        <h2>{{ heading }}</h2>\n    </template>\n\n    <template #content>\n        <template v-if="!suspend && signedIframeSrc">\n            <iframe\n                v-show="appLoaded"\n                id="app-content"\n                class="sw-extension-app-module-page__app-content"\n                referrerpolicy="origin-when-cross-origin"\n                :src="signedIframeSrc"\n                :title="heading"\n            ></iframe>\n\n            <template v-if="!appLoaded">\n                <template v-if="timedOut">\n                    <sw-extension-app-module-error-page />\n                </template>\n\n                <template v-else>\n                    <sw-loader />\n                </template>\n            </template>\n        </template>\n    </template>\n</sw-page>\n',inject:["acl","extensionSdkService"],props:{appName:{type:String,required:!0},moduleName:{type:String,required:!1,default:null}},data:function(){return{appLoaded:!1,timedOut:!1,timedOutTimeout:null,signedIframeSrc:void 0}},computed:{currentLocale:function(){return o.get("session").currentLocale},fallbackLocale:function(){return a.app.fallbackLocale},appDefinition:function(){var e,n=this;return null!==(e=o.get("shopwareApps").apps.find((function(e){return e.name===n.appName})))&&void 0!==e?e:null},moduleDefinition:function(){var e,n,t=this;return this.appDefinition?this.moduleName?null!==(e=this.appDefinition.modules.find((function(e){return e.name===t.moduleName})))&&void 0!==e?e:null:null!==(n=this.appDefinition.mainModule)&&void 0!==n?n:null:null},suspend:function(){return!this.appDefinition||!this.moduleDefinition},heading:function(){if(!this.appDefinition)return null;var e=this.translate(this.appDefinition.label);return this.moduleDefinition&&this.moduleDefinition.label?[e,this.translate(this.moduleDefinition.label)].filter((function(e){return!!e})).join(" - "):e},entryPoint:function(){var e,n;return this.suspend?null:null!==(e=null===(n=this.moduleDefinition)||void 0===n?void 0:n.source)&&void 0!==e?e:null},origin:function(){if(!this.entryPoint)return null;try{return new URL(this.entryPoint).origin}catch(e){return null}},loadedMessage:function(){return"sw-app-loaded"}},watch:{entryPoint:function(){this.appLoaded=!1,this.timedOut=!1},appLoaded:{immediate:!0,handler:function(e){var n=this;null!==this.timedOutTimeout&&clearTimeout(this.timedOutTimeout),this.timedOutTimeout=null,e||(this.timedOutTimeout=window.setTimeout((function(){n.appLoaded||(n.timedOut=!0)}),5e3))}},moduleDefinition:{immediate:!0,deep:!0,handler:function(){var e,n=this,t=null===(e=this.moduleDefinition)||void 0===e?void 0:e.source;if(t){var i=new URL(t),o=i.origin+i.pathname;this.extensionSdkService.signIframeSrc(this.appName,o).then((function(e){var t=null==e?void 0:e.uri;t&&(n.signedIframeSrc=t)})).catch((function(){}))}}}},mounted:function(){window.addEventListener("message",this.onContentLoaded)},beforeUnmount:function(){window.removeEventListener("message",this.onContentLoaded)},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.acl.can("app.".concat(this.appName))||this.$router.push({name:"sw.privilege.error.index"})},translate:function(e){return this.currentLocale&&e[this.currentLocale]?e[this.currentLocale]:this.fallbackLocale&&e[this.fallbackLocale]?e[this.fallbackLocale]:null},onContentLoaded:function(e){e.origin===this.origin&&e.data===this.loadedMessage&&(this.appLoaded=!0)}}})}}]);