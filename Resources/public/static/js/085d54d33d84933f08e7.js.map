{"version":3,"sources":["webpack:///./src/module/sw-product/component/sw-product-category-form/sw-product-category-form.scss","webpack:///./src/module/sw-product/component/sw-product-category-form/index.js","webpack:///./src/module/sw-product/component/sw-product-category-form/sw-product-category-form.html.twig"],"names":["content","__esModule","default","module","i","locals","exports","add","_Shopware","Shopware","Context","Mixin","_Shopware$Data","Data","EntityCollection","Criteria","_Shopware$Component$g","Component","getComponentHelper","mapPropertyErrors","mapState","mapGetters","template","inject","mixins","getByName","props","allowEdit","type","Boolean","required","data","displayVisibilityDetail","multiSelectVisible","salesChannel","defaultVisibility","computed","_objectSpread","hasSelectedVisibilities","this","product","visibilities","length","productVisibilityRepository","repositoryFactory","create","entity","salesChannelRepository","created","createdComponent","methods","api","displayAdvancedVisibility","closeAdvancedVisibility","visibilitiesRemoveInheritanceFunction","newValue","_this","forEach","_ref","productVersionId","salesChannelId","visibility","Object","assign","productId","id","push","$refs","productVisibilitiesInheritance","forceInheritanceRemove"],"mappings":"+HAGA,IAAIA,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQE,SACnB,iBAAZF,IAAsBA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAC7DA,EAAQK,SAAQF,EAAOG,QAAUN,EAAQK,SAG/BE,EADH,EAAQ,QAAwEL,SACzE,WAAYF,GAAS,EAAM,K,6oBCF5C,IAAAQ,EAA2BC,SAAnBC,EAAOF,EAAPE,QAASC,EAAKH,EAALG,MACjBC,EAAuCH,SAASI,KAAxCC,EAAgBF,EAAhBE,iBAAkBC,EAAQH,EAARG,SAC1BC,EAAoDP,SAASQ,UAAUC,qBAA/DC,EAAiBH,EAAjBG,kBAAmBC,EAAQJ,EAARI,SAAUC,EAAUL,EAAVK,WAGtB,WACXC,SCbW,6zSDeXC,OAAQ,CAAC,oBAAqB,yBAA0B,WAExDC,OAAQ,CACJb,EAAMc,UAAU,iBAGpBC,MAAO,CACHC,UAAW,CACPC,KAAMC,QACNC,UAAU,EAGV5B,SAAS,IAIjB6B,KAAI,WACA,MAAO,CACHC,yBAAyB,EACzBC,oBAAoB,EACpBC,aAAc,KACdC,kBAAmB,KAI3BC,SAAQC,QAAA,GACDjB,EAAS,kBAAmB,CAC3B,UACA,gBACA,YACA,aAGDC,EAAW,kBAAmB,CAC7B,UACA,qBAGDF,EAAkB,UAAW,CAC5B,OACA,YACF,IAEFmB,wBAAuB,WACnB,SAAIC,KAAKC,UAAWD,KAAKC,QAAQC,eACtBF,KAAKC,QAAQC,aAAaC,OAAS,GAKlDC,4BAA2B,WACvB,OAAOJ,KAAKK,kBAAkBC,OAAON,KAAKC,QAAQC,aAAaK,SAGnEC,uBAAsB,WAClB,OAAOR,KAAKK,kBAAkBC,OAAO,oBAI7CG,QAAO,WACHT,KAAKU,oBAGTC,QAAS,CACLD,iBAAgB,WACZV,KAAKL,aAAe,IAAIpB,EACpB,iBACA,gBACAL,SAASC,QAAQyC,IACjB,IAAIpC,EAAS,EAAG,MAIxBqC,0BAAyB,WACrBb,KAAKP,yBAA0B,GAGnCqB,wBAAuB,WACnBd,KAAKP,yBAA0B,GAGnCsB,sCAAqC,SAACC,GAAW,IAADC,EAAA,KAiB5C,OAhBAD,EAASE,SAAQ,SAAAC,GAAqE,IAAlEC,EAAgBD,EAAhBC,iBAAkBC,EAAcF,EAAdE,eAAgB1B,EAAYwB,EAAZxB,aAAc2B,EAAUH,EAAVG,WAC1DpB,EAAee,EAAKb,4BAA4BE,OAAOnC,EAAQyC,KAErEW,OAAOC,OAAOtB,EAAc,CACxBuB,UAAWR,EAAKhB,QAAQyB,GACxBN,mBACAC,iBACA1B,eACA2B,eAGJL,EAAKhB,QAAQC,aAAayB,KAAKzB,MAGnCF,KAAK4B,MAAMC,+BAA+BC,wBAAyB,EAE5D9B,KAAKC,QAAQC","file":"static/js/085d54d33d84933f08e7.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-product-category-form.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"26b0f238\", content, true, {});","/*\n * @package inventory\n */\n\nimport template from './sw-product-category-form.html.twig';\nimport './sw-product-category-form.scss';\n\nconst { Context, Mixin } = Shopware;\nconst { EntityCollection, Criteria } = Shopware.Data;\nconst { mapPropertyErrors, mapState, mapGetters } = Shopware.Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: ['repositoryFactory', 'systemConfigApiService', 'feature'],\n\n    mixins: [\n        Mixin.getByName('notification'),\n    ],\n\n    props: {\n        allowEdit: {\n            type: Boolean,\n            required: false,\n            // TODO: Boolean props should only be opt in and therefore default to false\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n        },\n    },\n\n    data() {\n        return {\n            displayVisibilityDetail: false,\n            multiSelectVisible: true,\n            salesChannel: null,\n            defaultVisibility: 30,\n        };\n    },\n\n    computed: {\n        ...mapState('swProductDetail', [\n            'product',\n            'parentProduct',\n            'localMode',\n            'loading',\n        ]),\n\n        ...mapGetters('swProductDetail', [\n            'isChild',\n            'showModeSetting',\n        ]),\n\n        ...mapPropertyErrors('product', [\n            'tags',\n            'active',\n        ]),\n\n        hasSelectedVisibilities() {\n            if (this.product && this.product.visibilities) {\n                return this.product.visibilities.length > 0;\n            }\n            return false;\n        },\n\n        productVisibilityRepository() {\n            return this.repositoryFactory.create(this.product.visibilities.entity);\n        },\n\n        salesChannelRepository() {\n            return this.repositoryFactory.create('sales_channel');\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.salesChannel = new EntityCollection(\n                '/sales-channel',\n                'sales_channel',\n                Shopware.Context.api,\n                new Criteria(1, 25),\n            );\n        },\n\n        displayAdvancedVisibility() {\n            this.displayVisibilityDetail = true;\n        },\n\n        closeAdvancedVisibility() {\n            this.displayVisibilityDetail = false;\n        },\n\n        visibilitiesRemoveInheritanceFunction(newValue) {\n            newValue.forEach(({ productVersionId, salesChannelId, salesChannel, visibility }) => {\n                const visibilities = this.productVisibilityRepository.create(Context.api);\n\n                Object.assign(visibilities, {\n                    productId: this.product.id,\n                    productVersionId,\n                    salesChannelId,\n                    salesChannel,\n                    visibility,\n                });\n\n                this.product.visibilities.push(visibilities);\n            });\n\n            this.$refs.productVisibilitiesInheritance.forceInheritanceRemove = true;\n\n            return this.product.visibilities;\n        },\n    },\n};\n","export default \"\\n{% block sw_product_category_form %}\\n<div class=\\\"sw-product-category-form\\\">\\n    <sw-container class=\\\"sw-product-category-form__description\\\">\\n        \\n        {% block sw_product_category_form_visibility_title %}\\n        <span class=\\\"sw-product-category-form__visibility-title\\\">\\n            {{ $tc('sw-product.visibility.labelVisibility') }}\\n        </span>\\n        {% endblock %}\\n\\n        \\n        {% block sw_product_category_form_visibility_body %}\\n        <p class=\\\"sw-product-category-form__visibility-body\\\">\\n            {{ $tc('sw-product.visibility.bodyVisibility') }}\\n        </p>\\n        {% endblock %}\\n\\n        \\n        {% block sw_product_category_form_visibility_field %}\\n        <sw-inherit-wrapper\\n            ref=\\\"productVisibilitiesInheritance\\\"\\n            {% if VUE3 %}\\n            v-model:value=\\\"product.visibilities\\\"\\n            {% else %}\\n            v-model=\\\"product.visibilities\\\"\\n            {% endif %}\\n            :has-parent=\\\"!!parentProduct.id\\\"\\n            class=\\\"sw-product-category-form__visibility_field\\\"\\n            :inherited-value=\\\"parentProduct.visibilities\\\"\\n            :label=\\\"$tc('sw-product.visibility.labelVisibility')\\\"\\n            :custom-remove-inheritance-function=\\\"visibilitiesRemoveInheritanceFunction\\\"\\n            is-association\\n        >\\n            <template #content=\\\"{ currentValue, isInherited, updateCurrentValue }\\\">\\n                <sw-product-visibility-select\\n                    v-if=\\\"!loading.product && !loading.parentProduct && multiSelectVisible\\\"\\n                    ref=\\\"productVisibility\\\"\\n                    :key=\\\"isInherited\\\"\\n                    class=\\\"sw-product-detail__select-visibility\\\"\\n                    :entity-collection=\\\"currentValue\\\"\\n                    :placeholder=\\\"$tc('sw-product.visibility.placeholderVisibility')\\\"\\n                    :disabled=\\\"isInherited || !allowEdit\\\"\\n                    {% if VUE3 %}\\n                    @update:entity-collection=\\\"updateCurrentValue\\\"\\n                    {% else %}\\n                    @change=\\\"updateCurrentValue\\\"\\n                    {% endif %}\\n                />\\n            </template>\\n        </sw-inherit-wrapper>\\n        {% endblock %}\\n    </sw-container>\\n\\n    \\n    {% block sw_product_category_form_visibility_field_link %}\\n    <sw-container\\n        columns=\\\"repeat(auto-fit, minmax(250px, 1fr))\\\"\\n        align=\\\"center\\\"\\n    >\\n        \\n        {% block sw_product_category_form_active_field %}\\n        <sw-inherit-wrapper\\n            {% if VUE3 %}\\n            v-model:value=\\\"product.active\\\"\\n            {% else %}\\n            v-model=\\\"product.active\\\"\\n            {% endif %}\\n            :has-parent=\\\"!!parentProduct.id\\\"\\n            :inherited-value=\\\"parentProduct.active\\\"\\n        >\\n            <template #content=\\\"props\\\">\\n                <sw-switch-field\\n                    class=\\\"sw-field--product-active no-margin\\\"\\n                    :error=\\\"productActiveError\\\"\\n                    :map-inheritance=\\\"props\\\"\\n                    :label=\\\"$tc('sw-product.settingsForm.labelActive')\\\"\\n                    :disabled=\\\"props.isInherited || !allowEdit\\\"\\n                    :value=\\\"props.currentValue\\\"\\n                    {% if VUE3 %}\\n                    @update:value=\\\"props.updateCurrentValue\\\"\\n                    {% else %}\\n                    @change=\\\"props.updateCurrentValue\\\"\\n                    {% endif %}\\n                />\\n            </template>\\n        </sw-inherit-wrapper>\\n        {% endblock %}\\n        <a\\n            v-if=\\\"hasSelectedVisibilities && showModeSetting\\\"\\n            class=\\\"sw-card__quick-link advanced-visibility\\\"\\n            style=\\\"text-align: right; display: block\\\"\\n            role=\\\"button\\\"\\n            tabindex=\\\"0\\\"\\n            @click=\\\"displayAdvancedVisibility\\\"\\n            @keydown.enter=\\\"displayAdvancedVisibility\\\"\\n        >\\n            {{ $tc('sw-product.visibility.linkAdvancedVisibility') }} <sw-icon\\n                name=\\\"regular-long-arrow-right\\\"\\n                small\\n            />\\n        </a>\\n    </sw-container>\\n\\n    <sw-modal\\n        v-if=\\\"displayVisibilityDetail\\\"\\n        :title=\\\"$tc('sw-product.visibility.textHeadline')\\\"\\n        class=\\\"sw-product-category-form__visibility_modal\\\"\\n        @modal-close=\\\"closeAdvancedVisibility\\\"\\n    >\\n        <p>{{ $tc('sw-product.visibility.visibilityModalDescription') }}</p>\\n\\n        <sw-product-visibility-detail :disabled=\\\"!allowEdit\\\" />\\n\\n        <template #modal-footer>\\n            <sw-button\\n                variant=\\\"primary\\\"\\n                size=\\\"small\\\"\\n                @click=\\\"closeAdvancedVisibility\\\"\\n            >\\n                {{ $tc('sw-product.visibility.closeModal') }}\\n            </sw-button>\\n        </template>\\n    </sw-modal>\\n    {% endblock %}\\n\\n    \\n    {% block sw_product_category_form_category_field %}\\n    <sw-container\\n        rows=\\\"2em 4em 4em\\\"\\n        class=\\\"sw-product-feature-set-form__description\\\"\\n    >\\n        \\n        {% block sw_product_category_form_categories_title %}\\n        <span class=\\\"sw-product-category-form__visibility-title\\\">\\n            {{ $tc('sw-product.categoryForm.categoriesTitle') }}\\n        </span>\\n        {% endblock %}\\n\\n        \\n        {% block sw_product_category_form_categories_body %}\\n        <p class=\\\"sw-product-category-form__categories-body\\\">\\n            {{ $tc('sw-product.categoryForm.descriptionCategories') }}\\n        </p>\\n        <p class=\\\"sw-product-category-form__categories-body\\\">\\n            {{ $tc('sw-product.categoryForm.descriptionTags') }}\\n        </p>\\n        {% endblock %}\\n        <sw-inherit-wrapper\\n            {% if VUE3 %}\\n            v-model:value=\\\"product.categories\\\"\\n            {% else %}\\n            v-model=\\\"product.categories\\\"\\n            {% endif %}\\n            is-association\\n            :has-parent=\\\"!!parentProduct.id\\\"\\n            :inherited-value=\\\"parentProduct.categories\\\"\\n            :label=\\\"$tc('sw-product.categoryForm.labelCategory')\\\"\\n        >\\n            <template #content=\\\"{ currentValue, isInherited }\\\">\\n                <sw-category-tree-field\\n                    :key=\\\"isInherited\\\"\\n                    class=\\\"sw-product-detail__select-category\\\"\\n                    :categories-collection=\\\"currentValue ? currentValue : []\\\"\\n                    :disabled=\\\"isInherited || !allowEdit\\\"\\n                    :placeholder=\\\"$tc('sw-product.categoryForm.placeholderCategory')\\\"\\n                />\\n            </template>\\n        </sw-inherit-wrapper>\\n    </sw-container>\\n    {% endblock %}\\n\\n    \\n    {% block sw_product_category_form_tags_field %}\\n    <sw-inherit-wrapper\\n        v-if=\\\"showModeSetting\\\"\\n        {% if VUE3 %}\\n        v-model:value=\\\"product.tags\\\"\\n        {% else %}\\n        v-model=\\\"product.tags\\\"\\n        {% endif %}\\n        class=\\\"sw-product-category-form__tag-field-wrapper\\\"\\n        :inherited-value=\\\"parentProduct.tags\\\"\\n        :has-parent=\\\"!!parentProduct.id\\\"\\n        is-association\\n        :help-text=\\\"$tc('sw-product.categoryForm.helpTextTags')\\\"\\n        :label=\\\"$tc('global.sw-tag-field.title')\\\"\\n    >\\n\\n        <template #content=\\\"{ currentValue, isInherited, updateCurrentValue }\\\">\\n            <sw-entity-tag-select\\n                v-if=\\\"!loading.product && !loading.parentProduct\\\"\\n                :key=\\\"isInherited\\\"\\n                class=\\\"sw-product-category-form__tag-field\\\"\\n                :disabled=\\\"isInherited || !allowEdit\\\"\\n                :placeholder=\\\"$tc('sw-product.categoryForm.placeholderTags')\\\"\\n                :error=\\\"productTagsError\\\"\\n                :entity-collection=\\\"currentValue ? currentValue : {}\\\"\\n                {% if VUE3 %}\\n                @update:entity-collection=\\\"updateCurrentValue\\\"\\n                {% else %}\\n                @change=\\\"updateCurrentValue\\\"\\n                {% endif %}\\n            />\\n        </template>\\n    </sw-inherit-wrapper>\\n    {% endblock %}\\n\\n    \\n    {% block sw_product_category_form_search_keyword_field %}\\n    <sw-inherit-wrapper\\n        v-if=\\\"showModeSetting\\\"\\n        {% if VUE3 %}\\n        v-model:value=\\\"product.customSearchKeywords\\\"\\n        {% else %}\\n        v-model=\\\"product.customSearchKeywords\\\"\\n        {% endif %}\\n        :help-text=\\\"$tc('sw-product.categoryForm.helpTextSearchKeyword')\\\"\\n        :inherited-value=\\\"parentProduct.customSearchKeywords\\\"\\n        :has-parent=\\\"!!parentProduct.id\\\"\\n        :label=\\\"$tc('sw-product.categoryForm.labelSearchKeyword')\\\"\\n    >\\n        <template #content=\\\"{ currentValue, isInherited, updateCurrentValue }\\\">\\n            <sw-multi-tag-select\\n                class=\\\"sw-product-category-form__search-keyword-field\\\"\\n                :value=\\\"currentValue ? currentValue : []\\\"\\n                :placeholder=\\\"$tc('sw-product.categoryForm.placeholderSearchKeywords')\\\"\\n                {% if VUE3 %}\\n                @update:value=\\\"updateCurrentValue\\\"\\n                {% else %}\\n                @change=\\\"updateCurrentValue\\\"\\n                {% endif %}\\n            >\\n                <template #message-add-data>\\n                    <span>{{ $tc('sw-product.categoryForm.textAddSearchKeyword') }}</span>\\n                </template>\\n                <template #message-enter-valid-data>\\n                    <span>{{ $tc('sw-product.categoryForm.textEnterValidSearchKeyword') }}</span>\\n                </template>\\n            </sw-multi-tag-select>\\n        </template>\\n    </sw-inherit-wrapper>\\n    {% endblock %}\\n</div>\\n{% endblock %}\\n\";"],"sourceRoot":""}