(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[289],{"/+62":function(n,e,t){},"5jIo":function(n,e,t){var i=t("/+62");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);(0,t("P8hj").default)("5df35fd3",i,!0,{})},sCbW:function(n,e,t){"use strict";t.r(e);t("5jIo");var i=Shopware,s=i.Mixin,a=i.Data.Criteria;e.default={template:'\n{% block sw_integration_list %}\n<sw-page class="sw-integration-list">\n    \n    {% block sw_integration_list_smart_bar_header %}\n    <template #smart-bar-header>\n        \n        {% block sw_integration_list_smart_bar_header_title %}\n        <h2>\n            \n            {% block sw_integration_list_smart_bar_header_title_text %}\n            {{ $tc(\'sw-settings.index.title\') }}\n            <sw-icon\n                name="regular-chevron-right-xs"\n                small\n            />\n            {{ $tc(\'sw-integration.general.headlineIntegrations\') }}\n            {% endblock %}\n        </h2>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <template #smart-bar-actions>\n        \n        {% block sw_integration_list_smart_bar_actions %}\n        <sw-button\n            v-tooltip.bottom="{\n                message: $tc(\'sw-privileges.tooltip.warning\'),\n                disabled: acl.can(\'integration.creator\'),\n                showOnDisabledElements: true\n            }"\n            class="sw-integration-list__add-integration-action"\n            variant="primary"\n            :disabled="!acl.can(\'integration.creator\')"\n            @click="onCreateIntegration"\n        >\n            {{ $tc(\'sw-integration.general.buttonCreateIntegration\') }}\n        </sw-button>\n        {% endblock %}\n    </template>\n\n    \n    {% block sw_integration_list_content %}\n    <template #content>\n        <sw-card-view class="sw-integration-list__content">\n\n            \n            {% block sw_integration_list_introduction %}\n            <sw-card\n                :hero="true"\n                position-identifier="sw-integration-list-introduction"\n            >\n                <h3 class="sw-integration-list__welcome-headline">\n                    {{ $tc(\'sw-integration.general.heroHeadlineIntegrations\') }}\n                </h3>\n                <p>{{ $tc(\'sw-integration.general.heroDescriptionIntegrations\') }}</p>\n            </sw-card>\n            {% endblock %}\n\n            \n            {% block sw_integration_list_overview %}\n            <sw-card\n                :is-loading="isLoading"\n                class="sw-integration-list__overview"\n                position-identifier="sw-integration-list-overview"\n            >\n                \n                {% block sw_integration_list_overview_inner %}\n                \n                {% block sw_integration_list_detail_modal %}\n                <sw-modal\n                    v-if="currentIntegration"\n                    size="550px"\n                    class="sw-integration-list__detail"\n                    :is-loading="isModalLoading"\n                    :title="showSecretAccessKey ? $tc(\'sw-integration.detail.detailModalTitle\') : $tc(\'sw-integration.detail.detailModalTitleEdit\') + \' \' + currentIntegration.label"\n                    @modal-close="onCloseDetailModal"\n                >\n                    \n                    {% block sw_integration_list_detail_modal_inner %}\n\n                    \n                    {% block sw_integration_list_detail_modal_inner_field_label %}\n                    <sw-container\n                        columns="2fr 1fr"\n                        gap="24px"\n                    >\n                        <sw-text-field\n                            {% if VUE3 %}\n                            v-model:value="currentIntegration.label"\n                            {% else %}\n                            v-model="currentIntegration.label"\n                            {% endif %}\n                            :label="$tc(\'sw-integration.detail.labelFieldLabel\')"\n                            :disabled="!acl.can(\'integration.editor\')"\n                        />\n\n                        \n                        {% block sw_integration_list_detail_modal_inner_acl_is_admin %}\n                        <sw-switch-field\n                            {% if VUE3 %}\n                            v-model:value="currentIntegration.admin"\n                            {% else %}\n                            v-model="currentIntegration.admin"\n                            {% endif %}\n                            class="sw-settings-user-detail__grid-is-admin"\n                            :label="$tc(\'sw-users-permissions.users.user-detail.labelAdministrator\')"\n                            :disabled="!acl.can(\'admin\')"\n                        />\n                        {% endblock %}\n                    </sw-container>\n                    {% endblock %}\n\n                    \n                    {% block sw_integration_list_detail_modal_inner_acl_roles %}\n                    <sw-entity-multi-select\n                        {% if VUE3 %}\n                        v-model:entityCollection="currentIntegration.aclRoles"\n                        {% else %}\n                        v-model="currentIntegration.aclRoles"\n                        {% endif %}\n                        v-tooltip="{\n                            showDelay: 300,\n                            message: $tc(\'sw-users-permissions.users.user-detail.disabledRoleSelectWarning\'),\n                            disabled: !currentIntegration.admin || !acl.can(\'integration.editor\')\n                        }"\n                        class="sw-settings-user-detail__grid-aclRoles"\n                        :label="$tc(\'sw-users-permissions.users.user-detail.labelRoles\')"\n                        :disabled="currentIntegration.admin || !acl.can(\'integration.editor\')"\n                        label-property="name"\n                    />\n                    {% endblock %}\n\n                    \n                    {% block sw_integration_list_detail_modal_inner_field_accesskey %}\n                    <sw-text-field\n                        {% if VUE3 %}\n                        v-model:value="currentIntegration.accessKey"\n                        {% else %}\n                        v-model="currentIntegration.accessKey"\n                        {% endif %}\n                        :label="$tc(\'sw-integration.detail.idFieldLabel\')"\n                        :disabled="true"\n                        :copyable="true"\n                        :copyable-tooltip="true"\n                    />\n                    {% endblock %}\n\n                    \n                    {% block sw_integration_list_detail_modal_inner_field_secretaccesskey %}\n                    <template v-if="showSecretAccessKey">\n                        <sw-text-field\n                            v-if="secretAccessKeyFieldTypeIsText"\n                            {% if VUE3 %}\n                            v-model:value="currentIntegration.secretAccessKey"\n                            {% else %}\n                            v-model="currentIntegration.secretAccessKey"\n                            {% endif %}\n                            :type="secretAccessKeyFieldType"\n                            :label="$tc(\'sw-integration.detail.secretFieldLabel\')"\n                            :disabled="true"\n                            :password-toggle-able="false"\n                            :copyable="showSecretAccessKey"\n                            :copyable-tooltip="true"\n                        />\n\n                        <sw-password-field\n                            v-if="secretAccessKeyFieldTypeIsPassword"\n                            {% if VUE3 %}\n                            v-model:value="currentIntegration.secretAccessKey"\n                            {% else %}\n                            v-model="currentIntegration.secretAccessKey"\n                            {% endif %}\n                            :type="secretAccessKeyFieldType"\n                            :label="$tc(\'sw-integration.detail.secretFieldLabel\')"\n                            :disabled="true"\n                            :password-toggle-able="false"\n                            :copyable="showSecretAccessKey"\n                            :copyable-tooltip="true"\n                        />\n                    </template>\n\n                    <sw-button\n                        v-if="!showSecretAccessKey"\n                        variant="danger"\n                        :disabled="!acl.can(\'integration.editor\')"\n                        :block="true"\n                        @click="onGenerateKeys"\n                    >\n                        {{ $tc(\'sw-integration.detail.buttonCreateNewApiKeys\') }}\n                    </sw-button>\n\n                    \n                    {% block sw_integration_list_detail_modal_inner_field_helpText %}\n                    <div\n                        v-if="!showSecretAccessKey"\n                        class="sw-integration-list__help-text"\n                    >\n                        {{ $tc(\'sw-integration.detail.hintCreateNewApiKeys\') }}\n                    </div>\n                    {% endblock %}\n                    {% endblock %}\n\n                    \n                    {% block sw_integration_list_detail_modal_inner_helptext %}\n                    <sw-alert\n                        v-if="showSecretAccessKey"\n                        variant="warning"\n                        class="sw-integration-list__secret-help-text-alert"\n                    >\n                        {{ $tc(\'sw-integration.detail.secretHelpText\') }}\n                    </sw-alert>\n                    {% endblock %}\n\n                    \n                    {% block sw_integration_list_detail_modal_inner_footer %}\n                    <template #modal-footer>\n                        \n                        {% block sw_integration_list_detail_modal_inner_footer_cancel %}\n                        <sw-button\n                            size="small"\n                            :disabled="isModalLoading"\n                            @click="onCloseDetailModal"\n                        >\n                            {{ $tc(\'sw-integration.detail.buttonCancel\') }}\n                        </sw-button>\n                        {% endblock %}\n\n                        \n                        {% block sw_integration_list_detail_modal_inner_footer_apply %}\n                        <sw-button\n                            size="small"\n                            class="sw-integration-detail-modal__save-action"\n                            :disabled="(isModalLoading && !!currentIntegration.label) || !acl.can(\'integration.editor\')"\n                            variant="primary"\n                            @click="onSaveIntegration"\n                        >\n                            {{ showSecretAccessKey ? $tc(\'sw-integration.detail.buttonApply\') : $tc(\'sw-integration.detail.buttonApplyEdit\') }}\n                        </sw-button>\n                        {% endblock %}\n                    </template>\n                    {% endblock %}\n                    {% endblock %}\n                </sw-modal>\n                {% endblock %}\n\n                \n                {% block sw_integration_list_grid %}\n                <sw-entity-listing\n                    v-if="integrations && integrations.length > 0"\n                    :items="integrations"\n                    :columns="integrationColumns"\n                    :repository="integrationRepository"\n                    :full-page="false"\n                    :compact-mode="false"\n                    :allow-column-edit="false"\n                    :show-selection="false"\n                    :show-settings="false"\n                    :allow-view="acl.can(\'integration.viewer\')"\n                    :is-loading="isLoading"\n                >\n\n                    \n                    {% block sw_integration_list_grid_inner_slot_columns_label %}\n                    <template #column-label="{ item }">\n                        <span class="sw-integration-list__app-icon">\n                            <sw-icon name="regular-share" />\n                        </span>\n                        <a\n                            href="#"\n                            @click.prevent="onShowDetailModal(item)"\n                        >\n                            {{ item.label }}\n                        </a>\n                    </template>\n                    {% endblock %}\n\n                    \n                    {% block sw_integration_list_grid_inner_slot_columns_writeAccess %}\n                    <template #column-writeAccess="{ item }">\n                        <sw-label\n                            v-if="item.admin"\n                            size="medium"\n                            ghost\n                            caps\n                            light\n                        >\n                            {{ $tc(\'sw-users-permissions.users.user-detail.labelAdministrator\') }}\n                        </sw-label>\n\n                        <span v-if="!item.admin && item.aclRoles && item.aclRoles.length">\n                            <sw-label\n                                v-for="role in item.aclRoles"\n                                :key="role.name"\n                                size="medium"\n                                ghost\n                                caps\n                                light\n                            >\n                                {{ role.name }}\n                            </sw-label>\n                        </span>\n                    </template>\n                    {% endblock %}\n\n                    <template #actions="{ item }">\n                        \n                        {% block sw_integration_list_grid_inner_slot_columns_actions_edit %}\n                        <sw-context-menu-item\n                            class="sw_integration_list__edit-action"\n                            :disabled="!acl.can(\'integration.editor\')"\n                            @click="onShowDetailModal(item)"\n                        >\n                            {{ $tc(\'sw-integration.list.contextMenuEdit\') }}\n                        </sw-context-menu-item>\n                        {% endblock %}\n\n                        \n                        {% block sw_integration_list_grid_inner_slot_columns_actions_delete %}\n                        <sw-context-menu-item\n                            class="sw_integration_list__delete-action"\n                            variant="danger"\n                            :disabled="!acl.can(\'integration.deleter\')"\n                            @click="showDeleteModal = item.id"\n                        >\n                            {{ $tc(\'sw-integration.list.contextMenuDelete\') }}\n                        </sw-context-menu-item>\n                        {% endblock %}\n                    </template>\n\n                    <template #action-modals="{ item }">\n                        \n                        {% block sw_integration_list_grid_inner_slot_delete_modal %}\n                        <sw-modal\n                            v-if="showDeleteModal === item.id"\n                            :title="$tc(\'sw-integration.detail.deleteModalTitle\')"\n                            @modal-close="onCloseDeleteModal"\n                        >\n                            \n                            {% block sw_integration_list_grid_inner_slot_delete_modal_confirmtext %}\n                            <p>\n                                {{ $tc(\'sw-integration.detail.confirmDelete\') }}\n                                <strong>"{{ item.label }}"</strong>\n                            </p>\n                            {% endblock %}\n\n                            \n                            {% block sw_integration_list_grid_inner_slot_delete_modal_footer %}\n                            <template #modal-footer>\n                                <sw-button\n                                    size="small"\n                                    @click="onCloseDeleteModal"\n                                >\n                                    {{ $tc(\'sw-integration.detail.buttonCancel\') }}\n                                </sw-button>\n\n                                <sw-button\n                                    size="small"\n                                    variant="primary"\n                                    @click="onConfirmDelete(item.id)"\n                                >\n                                    {{ $tc(\'sw-integration.detail.buttonDelete\') }}\n                                </sw-button>\n                            </template>\n                            {% endblock %}\n                        </sw-modal>\n                        {% endblock %}\n                    </template>\n                </sw-entity-listing>\n                {% endblock %}\n\n                \n                {% block sw_product_list_empty_state %}\n                <sw-empty-state\n                    v-else\n                    :title="$tc(\'sw-integration.list.messageEmpty\')"\n                    :subline="$tc(\'sw-integration.list.sublineEmpty\')"\n                />\n                {% endblock %}\n                {% endblock %}\n            </sw-card>\n        {% endblock %}\n        </sw-card-view>\n        {% endblock %}\n    </template>\n</sw-page>\n{% endblock %}\n',inject:["integrationService","repositoryFactory","acl"],mixins:[s.getByName("notification")],data:function(){return{integrations:null,isLoading:!1,isModalLoading:!1,showDeleteModal:null,currentIntegration:null,showSecretAccessKey:!1}},metaInfo:function(){return{title:this.$createTitle()}},computed:{integrationRepository:function(){return this.repositoryFactory.create("integration")},integrationCriteria:function(){var n=new a(1,25);return n.addFilter(a.equals("deletedAt",null)),n.addFilter(a.equals("app.id",null)),n.addSorting(a.sort("label","ASC")),n.addAssociation("aclRoles"),n},secretAccessKeyFieldType:function(){return this.showSecretAccessKey?"text":"password"},secretAccessKeyFieldTypeIsText:function(){return"text"===this.secretAccessKeyFieldType},secretAccessKeyFieldTypeIsPassword:function(){return"password"===this.secretAccessKeyFieldType},integrationColumns:function(){return[{property:"label",label:this.$tc("sw-integration.list.integrationName"),primary:!0},{property:"writeAccess",label:this.$tc("sw-integration.list.permissions")}]}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.getList()},getList:function(){var n=this;this.isLoading=!0,this.integrationRepository.search(this.integrationCriteria).then((function(e){n.integrations=e})).finally((function(){n.isLoading=!1}))},onSaveIntegration:function(){var n=this;if(this.currentIntegration){var e=this.integrations.find((function(e){return e.id===n.currentIntegration.id}));void 0===e?this.createIntegration():this.updateIntegration(e)}},updateIntegration:function(n){var e=this;this.isModalLoading=!0,this.integrationRepository.save(n).then((function(){e.createSavedSuccessNotification(),e.onCloseDetailModal()})).catch((function(){e.createSavedErrorNotification(),e.onCloseDetailModal()}))},createIntegration:function(){var n=this;this.currentIntegration.label&&this.currentIntegration.label.length?(this.isModalLoading=!0,this.integrationRepository.save(this.currentIntegration).then((function(){n.createSavedSuccessNotification(),n.getList()})).catch((function(){n.createSavedErrorNotification()})).finally((function(){n.$nextTick((function(){n.onCloseDetailModal()}))}))):this.createSavedErrorNotification()},createSavedSuccessNotification:function(){this.createNotificationSuccess({message:this.$tc("sw-integration.detail.messageSaveSuccess")})},createSavedErrorNotification:function(){this.createNotificationError({message:this.$tc("sw-integration.detail.messageSaveError")})},onGenerateKeys:function(){var n=this;this.currentIntegration&&(this.isModalLoading=!0,this.integrationService.generateKey().then((function(e){n.currentIntegration=n.currentIntegration||n.integrationRepository.create(),n.currentIntegration.accessKey=e.accessKey,n.currentIntegration.secretAccessKey=e.secretAccessKey,n.showSecretAccessKey=!0,n.isModalLoading=!1})).catch((function(){n.createNotificationError({message:n.$tc("sw-integration.detail.messageCreateNewError")})})))},onShowDetailModal:function(n){this.currentIntegration=n},onCreateIntegration:function(){this.currentIntegration=this.integrationRepository.create(),this.onGenerateKeys()},onCloseDetailModal:function(){this.currentIntegration=null,this.showSecretAccessKey=!1,this.isModalLoading=!1},onCloseDeleteModal:function(){this.showDeleteModal=null},onConfirmDelete:function(n){var e=this;n&&(this.onCloseDeleteModal(),this.integrationRepository.delete(n).then((function(){e.getList()})))}}}}}]);
//# sourceMappingURL=b9d2389ed1e1ab14cdd0.js.map