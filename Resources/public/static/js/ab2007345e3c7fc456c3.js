(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[293],{BLEQ:function(e,n,a){var t=a("mHM6");t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,a("P8hj").default)("cd76b000",t,!0,{})},kYVh:function(e,n,a){"use strict";a.r(n);var t=a("c1oF"),r=a.n(t),i=a("7yzw"),o=a.n(i),c=a("CsSd"),u=a.n(c),s=a("92Mt"),l=a.n(s);a("BLEQ");function d(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}var m=Shopware,f=m.Mixin,p=m.Data.Criteria,b=Shopware.Component.getComponentHelper().mapPropertyErrors;n.default={template:'\n{% block sw_manufacturer_detail %}\n<sw-page class="sw-manufacturer-detail">\n\n    \n    {% block sw_manufacturer_detail_header %}\n    <template #smart-bar-header>\n        <h2>{{ placeholder(manufacturer, \'name\', $tc(\'sw-manufacturer.detail.textHeadline\')) }}</h2>\n    </template>\n\n    {% endblock %}\n\n    \n    {% block sw_manufacturer_detail_actions %}\n    <template #smart-bar-actions>\n\n        \n        {% block sw_manufacturer_detail_actions_abort %}\n        <sw-button\n            v-tooltip.bottom="tooltipCancel"\n            :disabled="manufacturerIsLoading"\n            @click="onCancel"\n        >\n            {{ $tc(\'sw-manufacturer.detail.buttonCancel\') }}\n        </sw-button>\n        {% endblock %}\n\n        \n        {% block sw_manufacturer_detail_actions_save %}\n        <sw-button-process\n            {% if VUE3 %}\n            v-model:processSuccess="isSaveSuccessful"\n            {% else %}\n            v-model="isSaveSuccessful"\n            {% endif %}\n            v-tooltip.bottom="tooltipSave"\n            class="sw-manufacturer-detail__save-action"\n            :is-loading="isLoading"\n            :disabled="isLoading || !acl.can(\'product_manufacturer.editor\')"\n            variant="primary"\n            @click.prevent="onSave"\n        >\n            {{ $tc(\'sw-manufacturer.detail.buttonSave\') }}\n        </sw-button-process>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_manufacturer_detail_language_switch %}\n    <template #language-switch>\n        <sw-language-switch\n            :disabled="manufacturerId == null"\n            :save-changes-function="saveOnLanguageChange"\n            :abort-change-function="abortOnLanguageChange"\n            @on-change="onChangeLanguage"\n        />\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_manufacturer_detail_content %}\n    <template #content>\n        <sw-card-view>\n            <template v-if="manufacturerIsLoading">\n                <sw-skeleton variant="detail-bold" />\n                <sw-skeleton />\n            </template>\n\n            <template v-else>\n\n                \n                {% block sw_manufacturer_detail_content_language_info %}\n                <sw-language-info\n                    :entity-description="placeholder(manufacturer, \'name\', $tc(\'sw-manufacturer.detail.textHeadline\'))"\n                />\n                {% endblock %}\n\n                \n                {% block sw_manufacturer_detail_base_basic_info_card %}\n                <sw-card\n                    position-identifier="sw-manufacturer-detail-basic-info"\n                    :title="$tc(\'sw-manufacturer.detail.cardTitleManufacturerInfo\')"\n                >\n                    <sw-container\n                        class="sw-manufacturer-detail__container"\n                        columns="repeat(auto-fit, minmax(250px, 1fr))"\n                        gap="0 30px"\n                    >\n                        <div class="sw-manufacturer-detail__base-info-wrapper">\n\n                            \n                            {% block sw_manufacturer_detail_base_info_field_name %}\n                            <sw-text-field\n                                {% if VUE3 %}\n                                v-model:value="manufacturer.name"\n                                {% else %}\n                                v-model="manufacturer.name"\n                                {% endif %}\n                                :label="$tc(\'sw-manufacturer.detail.labelName\')"\n                                :placeholder="placeholder(manufacturer, \'name\', $tc(\'sw-manufacturer.detail.placeholderName\'))"\n                                name="name"\n                                validation="required"\n                                required\n                                :error="manufacturerNameError"\n                                :disabled="!acl.can(\'product_manufacturer.editor\')"\n                            />\n                            {% endblock %}\n\n                            \n                            {% block sw_manufacturer_detail_base_info_field_link %}\n                            <sw-text-field\n                                {% if VUE3 %}\n                                v-model:value="manufacturer.link"\n                                {% else %}\n                                v-model="manufacturer.link"\n                                {% endif %}\n                                :label="$tc(\'sw-manufacturer.detail.labelLink\')"\n                                :placeholder="$tc(\'sw-manufacturer.detail.placeholderLink\')"\n                                name="link"\n                                :disabled="!acl.can(\'product_manufacturer.editor\')"\n                            />\n                            {% endblock %}\n                        </div>\n\n                        \n                        {% block sw_manufacturer_detail_logo_upload %}\n                        <sw-upload-listener\n                            :upload-tag="mediaUploadTag"\n                            auto-upload\n                            @media-upload-finish="setMediaItem"\n                        />\n                        <sw-media-upload-v2\n                            class="sw-manufacturer-detail__logo-upload"\n                            :source="manufacturer.mediaId"\n                            :allow-multi-select="false"\n                            variant="regular"\n                            :upload-tag="mediaUploadTag"\n                            :label="$tc(\'sw-manufacturer.detail.labelLogo\')"\n                            :default-folder="manufacturerRepository.entityName"\n                            :disabled="!acl.can(\'product_manufacturer.editor\')"\n                            @sw-media-upload-v2-media-upload-success="setMediaItem"\n                            @media-drop="onDropMedia"\n                            @media-upload-sidebar-open="openMediaSidebar"\n                            @media-upload-remove-image="onUnlinkLogo"\n                        />\n                        {% endblock %}\n                    </sw-container>\n\n                    \n                    {% block sw_manufacturer_detail_base_info_field_description %}\n                    <sw-text-editor\n                        v-model="manufacturer.description"\n                        :label="$tc(\'sw-manufacturer.detail.labelDescription\')"\n                        :placeholder="placeholder(manufacturer, \'description\', $tc(\'sw-manufacturer.detail.placeholderDescription\'))"\n                        name="description"\n                        sanitize-input\n                        sanitize-field-name="product_manufacturer_translation.description"\n                        :disabled="!acl.can(\'product_manufacturer.editor\')"\n                    />\n                    {% endblock %}\n                </sw-card>\n                {% endblock %}\n\n                \n                {% block sw_manufacturer_detail_custom_field_sets %}\n                <sw-card\n                    v-if="customFieldSets.length > 0"\n                    position-identifier="sw-manufacturer-detail-custom-field-sets"\n                    :title="$tc(\'sw-settings-custom-field.general.mainMenuItemGeneral\')"\n                    :is-loading="manufacturerIsLoading"\n                >\n                    <sw-custom-field-set-renderer\n                        v-if="manufacturer"\n                        :entity="manufacturer"\n                        :sets="customFieldSets"\n                        :disabled="!acl.can(\'product_manufacturer.editor\')"\n                    />\n                </sw-card>\n                {% endblock %}\n            </template>\n        </sw-card-view>\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_manufacturer_detail_sidebar %}\n    <template #sidebar>\n        <sw-sidebar :propagate-width="true">\n            <sw-sidebar-media-item\n                ref="mediaSidebarItem"\n                :disabled="!acl.can(\'product_manufacturer.editor\')"\n            >\n                <template\n                    #context-menu-items="media"\n                >\n                    <sw-context-menu-item @click="setMediaFromSidebar(media.mediaItem)">\n                        {{ $tc(\'sw-manufacturer.detail.labelUseAsLogo\') }}\n                    </sw-context-menu-item>\n                </template>\n            </sw-sidebar-media-item>\n        </sw-sidebar>\n    </template>\n    {% endblock %}\n\n</sw-page>\n{% endblock %}\n',inject:["repositoryFactory","acl"],mixins:[f.getByName("placeholder"),f.getByName("notification"),f.getByName("discard-detail-page-changes")("manufacturer")],shortcuts:{"SYSTEMKEY+S":"onSave",ESCAPE:"onCancel"},props:{manufacturerId:{type:String,required:!1,default:null}},data:function(){return{manufacturer:null,customFieldSets:[],isLoading:!1,isSaveSuccessful:!1}},metaInfo:function(){return{title:this.$createTitle(this.identifier)}},computed:function(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?d(Object(a),!0).forEach((function(n){u()(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}({identifier:function(){return this.placeholder(this.manufacturer,"name")},manufacturerIsLoading:function(){return this.isLoading||null==this.manufacturer},manufacturerRepository:function(){return this.repositoryFactory.create("product_manufacturer")},mediaRepository:function(){return this.repositoryFactory.create("media")},customFieldSetRepository:function(){return this.repositoryFactory.create("custom_field_set")},customFieldSetCriteria:function(){var e=new p(1,null);return e.addFilter(p.equals("relations.entityName","product_manufacturer")),e},mediaUploadTag:function(){return"sw-manufacturer-detail--".concat(this.manufacturer.id)},tooltipSave:function(){if(this.acl.can("product_manufacturer.editor")){var e=this.$device.getSystemKey();return{message:"".concat(e," + S"),appearance:"light"}}return{showDelay:300,message:this.$tc("sw-privileges.tooltip.warning"),disabled:this.acl.can("order.editor"),showOnDisabledElements:!0}},tooltipCancel:function(){return{message:"ESC",appearance:"light"}}},b("manufacturer",["name"])),watch:{manufacturerId:function(){this.createdComponent()}},created:function(){this.createdComponent()},methods:{createdComponent:function(){Shopware.ExtensionAPI.publishData({id:"sw-manufacturer-detail__manufacturer",path:"manufacturer",scope:this}),this.manufacturerId?this.loadEntityData():(Shopware.State.commit("context/resetLanguageToDefault"),this.manufacturer=this.manufacturerRepository.create())},loadEntityData:function(){var e=this;return o()(l.a.mark((function n(){var a,t,i,o;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isLoading=!0,n.next=3,Promise.allSettled([e.manufacturerRepository.get(e.manufacturerId),e.customFieldSetRepository.search(e.customFieldSetCriteria)]);case 3:a=n.sent,t=r()(a,2),i=t[0],o=t[1],"fulfilled"===i.status&&(e.manufacturer=i.value),"fulfilled"===o.status&&(e.customFieldSets=o.value),"rejected"!==i.status&&"rejected"!==o.status||e.createNotificationError({message:e.$tc("global.notification.notificationLoadingDataErrorMessage")}),e.isLoading=!1;case 11:case"end":return n.stop()}}),n)})))()},abortOnLanguageChange:function(){return this.manufacturerRepository.hasChanges(this.manufacturer)},saveOnLanguageChange:function(){return this.onSave()},onChangeLanguage:function(){this.loadEntityData()},setMediaItem:function(e){var n=e.targetId;this.manufacturer.mediaId=n},setMediaFromSidebar:function(e){this.manufacturer.mediaId=e.id},onUnlinkLogo:function(){this.manufacturer.mediaId=null},openMediaSidebar:function(){this.$refs.mediaSidebarItem.openContent()},onDropMedia:function(e){this.setMediaItem({targetId:e.id})},onSave:function(){var e=this;this.acl.can("product_manufacturer.editor")&&(this.isLoading=!0,this.manufacturerRepository.save(this.manufacturer).then((function(){e.isLoading=!1,e.isSaveSuccessful=!0,null!==e.manufacturerId?e.loadEntityData():e.$router.push({name:"sw.manufacturer.detail",params:{id:e.manufacturer.id}})})).catch((function(n){throw e.isLoading=!1,e.createNotificationError({message:e.$tc("global.notification.notificationSaveErrorMessageRequiredFieldsInvalid")}),n})))},onCancel:function(){this.$router.push({name:"sw.manufacturer.index"})}}}},mHM6:function(e,n,a){}}]);
//# sourceMappingURL=ab2007345e3c7fc456c3.js.map