{"version":3,"sources":["webpack:///./src/module/sw-first-run-wizard/view/sw-first-run-wizard-store/index.js","webpack:///./src/module/sw-first-run-wizard/view/sw-first-run-wizard-store/sw-first-run-wizard-store.html.twig","webpack:///./src/module/sw-first-run-wizard/view/sw-first-run-wizard-store/sw-first-run-wizard-store.scss"],"names":["template","inject","data","loadStatus","isActivating","activationError","extensionStatus","error","computed","edition","activeDomain","this","licenceDomains","find","domain","active","buttonConfig","backButton","key","label","$tc","position","variant","action","disabled","activateStore","bind","assetFilter","Shopware","Filter","getByName","watch","handler","updateButtons","deep","created","createdComponent","methods","setTitle","updateExtensionStatus","$emit","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","extensionHelperService","getStatusOfExtension","sent","t0","Utils","debug","finish","stop","_this2","Promise","all","installExtensionStore","then","catch","_error$response","response","Array","isArray","errors","finally","_this3","_callee2","_context2","downloadAndActivateExtension","abrupt","content","__esModule","default","module","i","locals","exports","add"],"mappings":"oLAOe,WACXA,SCRW,qsEDUXC,OAAQ,CAAC,0BAETC,KAAI,WACA,MAAO,CACHC,YAAY,EACZC,cAAc,EACdC,gBAAiB,KACjBC,gBAAiB,KACjBC,MAAO,OAIfC,SAAU,CACNC,QAAO,WACH,IAAMC,EAAeC,KAAKC,eAAeC,MAAK,SAACC,GAAM,OAAKA,EAAOC,UAEjE,OAAKL,EAIEA,EAAaD,QAHT,IAMfO,aAAY,WACR,IAAMC,EAAa,CACfC,IAAK,OACLC,MAAOR,KAAKS,IAAI,0CAChBC,SAAU,OACVC,QAAS,KACTC,OAAQ,6CACRC,SAAUb,KAAKP,cAAgBO,KAAKR,YAGxC,OAAIQ,KAAKL,iBAAmBK,KAAKL,gBAAgBS,OACtC,CACHE,EACA,CACIC,IAAK,OACLC,MAAOR,KAAKS,IAAI,0CAChBC,SAAU,QACVC,QAAS,UACTC,OAAQ,mCACRC,UAAU,IAKf,CACHP,EACA,CACIC,IAAK,OACLC,MAAOR,KAAKS,IAAI,0CAChBC,SAAU,QACVC,QAAS,KACTC,OAAQ,mCACRC,SAAUb,KAAKP,cAAgBO,KAAKR,YAExC,CACIe,IAAK,WACLC,MAAOR,KAAKS,IAAI,8CAChBC,SAAU,QACVC,QAAS,UACTC,OAAQZ,KAAKc,cAAcC,KAAKf,MAChCa,SAAUb,KAAKP,cAAgBO,KAAKR,cAKhDwB,YAAW,WACP,OAAOC,SAASC,OAAOC,UAAU,WAIzCC,MAAO,CACHf,aAAc,CACVgB,QAAO,WACHrB,KAAKsB,iBAETC,MAAM,IAIdC,QAAO,WACHxB,KAAKyB,oBAGTC,QAAS,CACLD,iBAAgB,WACZzB,KAAKsB,gBACLtB,KAAK2B,WACL3B,KAAK4B,yBAGTD,SAAQ,WACJ3B,KAAK6B,MAAM,gBAAiB7B,KAAKS,IAAI,0CAGnCmB,sBAAqB,WAAI,IAADE,EAAA,YAAAC,IAAAC,IAAAC,MAAA,SAAAC,IAAA,OAAAF,IAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACH,OAAvBR,EAAKtC,YAAa,EAAK4C,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGUR,EAAKS,uBAAuBC,qBAAqB,sBAAsB,KAAD,EAAnGV,EAAKnC,gBAAeyC,EAAAK,KAAAL,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAM,GAAAN,EAAA,SAEpBnB,SAAS0B,MAAMC,MAAMhD,MAAKwC,EAAAM,IAAQ,QAEV,OAFUN,EAAAC,KAAA,GAElCP,EAAKtC,YAAa,EAAM4C,EAAAS,OAAA,6BAAAT,EAAAU,UAAAZ,EAAA,uBARFH,IAY9BjB,cAAa,WAAI,IAADiC,EAAA,KACZ/C,KAAKP,cAAe,EACpBO,KAAKN,gBAAkB,KAEvBsD,QAAQC,IAAI,CAACjD,KAAKkD,0BACbC,MAAK,WACFJ,EAAKlB,MAAM,eAAgB,uCAE9BuB,OAAM,SAACxD,GAAW,IAADyD,EACdN,EAAKrD,iBAAkB,EAEnBE,SAAe,QAAVyD,EAALzD,EAAO0D,gBAAQ,IAAAD,GAAfA,EAAiB9D,MACjBgE,MAAMC,QAAQ5D,EAAM0D,SAAS/D,KAAKkE,SAClC7D,EAAM0D,SAAS/D,KAAKkE,OAAO,KAE3BV,EAAKnD,MAAQA,EAAM0D,SAAS/D,KAAKkE,OAAO,IAG5CxC,SAAS0B,MAAMC,MAAMhD,MAAMA,MAE9B8D,SAAQ,WACLX,EAAKtD,cAAe,MAI1ByD,sBAAqB,WAAI,IAADS,EAAA,YAAA5B,IAAAC,IAAAC,MAAA,SAAA2B,IAAA,IAAAN,EAAA,OAAAtB,IAAAG,MAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,cAAAuB,EAAAvB,KAAA,EACHqB,EAAKpB,uBAAuBuB,6BAA6B,sBAAsB,KAAD,EAEnE,OAF5BR,EAAQO,EAAApB,KAEdkB,EAAK9B,MAAM,uBAAuBgC,EAAAE,OAAA,SAE3BT,GAAQ,wBAAAO,EAAAf,UAAAc,MALW7B,IAQ9BT,cAAa,WACTtB,KAAK6B,MAAM,iBAAkB7B,KAAKK,kB,qBEtJ9C,IAAI2D,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQE,SACnB,iBAAZF,IAAsBA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAC7DA,EAAQK,SAAQF,EAAOG,QAAUN,EAAQK,SAG/BE,EADH,EAAQ,QAAwEL,SACzE,WAAYF,GAAS,EAAM,K","file":"static/js/fe78a850e1932125c394.js","sourcesContent":["import template from './sw-first-run-wizard-store.html.twig';\nimport './sw-first-run-wizard-store.scss';\n\n/**\n * @package services-settings\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: ['extensionHelperService'],\n\n    data() {\n        return {\n            loadStatus: false,\n            isActivating: false,\n            activationError: null,\n            extensionStatus: null,\n            error: null,\n        };\n    },\n\n    computed: {\n        edition() {\n            const activeDomain = this.licenceDomains.find((domain) => domain.active);\n\n            if (!activeDomain) {\n                return '';\n            }\n\n            return activeDomain.edition;\n        },\n\n        buttonConfig() {\n            const backButton = {\n                key: 'back',\n                label: this.$tc('sw-first-run-wizard.general.buttonBack'),\n                position: 'left',\n                variant: null,\n                action: 'sw.first.run.wizard.index.shopware.account',\n                disabled: this.isActivating || this.loadStatus,\n            };\n\n            if (this.extensionStatus && this.extensionStatus.active) {\n                return [\n                    backButton,\n                    {\n                        key: 'next',\n                        label: this.$tc('sw-first-run-wizard.general.buttonNext'),\n                        position: 'right',\n                        variant: 'primary',\n                        action: 'sw.first.run.wizard.index.finish',\n                        disabled: false,\n                    },\n                ];\n            }\n\n            return [\n                backButton,\n                {\n                    key: 'skip',\n                    label: this.$tc('sw-first-run-wizard.general.buttonSkip'),\n                    position: 'right',\n                    variant: null,\n                    action: 'sw.first.run.wizard.index.finish',\n                    disabled: this.isActivating || this.loadStatus,\n                },\n                {\n                    key: 'activate',\n                    label: this.$tc('sw-first-run-wizard.general.buttonActivate'),\n                    position: 'right',\n                    variant: 'primary',\n                    action: this.activateStore.bind(this),\n                    disabled: this.isActivating || this.loadStatus,\n                },\n            ];\n        },\n\n        assetFilter() {\n            return Shopware.Filter.getByName('asset');\n        },\n    },\n\n    watch: {\n        buttonConfig: {\n            handler() {\n                this.updateButtons();\n            },\n            deep: true,\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.updateButtons();\n            this.setTitle();\n            this.updateExtensionStatus();\n        },\n\n        setTitle() {\n            this.$emit('frw-set-title', this.$tc('sw-first-run-wizard.store.modalTitle'));\n        },\n\n        async updateExtensionStatus() {\n            this.loadStatus = true;\n\n            try {\n                this.extensionStatus = await this.extensionHelperService.getStatusOfExtension('SwagExtensionStore');\n            } catch (error) {\n                Shopware.Utils.debug.error(error);\n            } finally {\n                this.loadStatus = false;\n            }\n        },\n\n        activateStore() {\n            this.isActivating = true;\n            this.activationError = null;\n\n            Promise.all([this.installExtensionStore()])\n                .then(() => {\n                    this.$emit('frw-redirect', 'sw.first.run.wizard.index.finish');\n                })\n                .catch((error) => {\n                    this.activationError = true;\n\n                    if (error?.response?.data &&\n                        Array.isArray(error.response.data.errors) &&\n                        error.response.data.errors[0]\n                    ) {\n                        this.error = error.response.data.errors[0];\n                    }\n\n                    Shopware.Utils.debug.error(error);\n                })\n                .finally(() => {\n                    this.isActivating = false;\n                });\n        },\n\n        async installExtensionStore() {\n            const response = await this.extensionHelperService.downloadAndActivateExtension('SwagExtensionStore');\n\n            this.$emit('extension-activated');\n\n            return response;\n        },\n\n        updateButtons() {\n            this.$emit('buttons-update', this.buttonConfig);\n        },\n    },\n};\n","export default \"\\n{% block sw_first_run_wizard_store %}\\n<div class=\\\"sw-first-run-wizard-store\\\">\\n    <template v-if=\\\"loadStatus\\\">\\n        <sw-loader />\\n\\n        <p class=\\\"message\\\">\\n            {{ $tc('sw-first-run-wizard.store.loadStatusCollect') }}\\n            <br>\\n            {{ $tc('sw-first-run-wizard.store.takeMinutes') }}\\n        </p>\\n    </template>\\n\\n    <template v-else-if=\\\"extensionStatus && extensionStatus.active\\\">\\n        <sw-label\\n            class=\\\"sw-first-run-wizard-store__label\\\"\\n            appearance=\\\"pill\\\"\\n            variant=\\\"success\\\"\\n        >\\n            <sw-icon\\n                name=\\\"regular-check-circle\\\"\\n                size=\\\"30px\\\"\\n            />\\n        </sw-label>\\n\\n        <h2>\\n            {{ $tc('sw-first-run-wizard.store.alreadyActivated') }}\\n        </h2>\\n    </template>\\n\\n    <template v-else-if=\\\"isActivating\\\">\\n        <sw-loader />\\n\\n        <p class=\\\"message\\\">\\n            {{ $tc('sw-first-run-wizard.store.enablingStore') }}\\n            <br>\\n            {{ $tc('sw-first-run-wizard.store.takeMinutes') }}\\n        </p>\\n    </template>\\n\\n    <template v-else-if=\\\"activationError\\\">\\n        <sw-label\\n            class=\\\"sw-first-run-wizard-store__label\\\"\\n            appearance=\\\"pill\\\"\\n            variant=\\\"danger\\\"\\n        >\\n            <sw-icon\\n                name=\\\"regular-times-circle\\\"\\n                size=\\\"30px\\\"\\n            />\\n        </sw-label>\\n\\n        <h2>\\n            {{ error && error.title || $tc('sw-first-run-wizard.store.activationErrorTitle') }}\\n        </h2>\\n        <p>\\n            {{ error && error.detail || $tc('sw-first-run-wizard.store.activationErrorDescription') }}\\n        </p>\\n    </template>\\n\\n    <template v-else>\\n        <img\\n            :src=\\\"assetFilter('/administration/static/img/extension-store/store_illustration.svg')\\\"\\n            alt=\\\"\\\"\\n        >\\n\\n        <h2 class=\\\"sw-first-run-wizard-store__heading\\\">\\n            {{ $tc('sw-first-run-wizard.store.headingOne') }}\\n            <br>\\n            {{ $tc('sw-first-run-wizard.store.headingTwo') }}\\n        </h2>\\n\\n        <p>\\n            {{ $tc('sw-first-run-wizard.store.description') }}\\n        </p>\\n    </template>\\n</div>\\n{% endblock %}\\n\";","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-first-run-wizard-store.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"20c5a46a\", content, true, {});"],"sourceRoot":""}