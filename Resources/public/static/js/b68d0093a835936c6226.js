(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[384],{"9LYq":function(e,t,n){"use strict";n.r(t);var i=n("CsSd"),o=n.n(i);n("xLVb");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=Shopware,s=l.Component,d=l.Data,c=l.Context,w=d.Criteria,p=s.getComponentHelper(),u=p.mapState,m=p.mapGetters;t.default={template:'<div class="sw-product-detail-reviews">\n    \n    {% block sw_product_detail_reviews %}\n    <div v-if="isLoading">\n        <sw-skeleton />\n        <sw-skeleton />\n    </div>\n\n    <sw-card\n        v-if="!isLoading"\n        class="sw-product-detail-reviews__list"\n        position-identifier="sw-product-detail-reviews"\n        :title="cardTitle"\n    >\n        \n        {% block sw_product_detail_reviews_data %}\n        <template\n            v-if="total"\n            #grid\n        >\n            <sw-data-grid\n                ref="gridReview"\n                :data-source="dataSource"\n                :columns="reviewColumns"\n                :is-loading="isLoading"\n                :show-selection="false"\n                :show-actions="true"\n            >\n                \n                {% block sw_product_detail_reviews_data_stars %}\n                <template #column-points="{ item }">\n                    \n                    {% block sw_product_detail_reviews_data_stars_content %}\n\n                    <sw-rating-stars v-model="item.points" />\n\n                    {# @deprecated tag:v6.6.0 - Block will removed because it will be replaced by `sw-rating-stars` component. Use upper block `sw_product_detail_reviews_data_stars_content` instead.  #}\n                    \n                    {% block sw_product_detail_reviews_data_stars_filled %}{% endblock %}\n\n                    {# @deprecated tag:v6.6.0 - Block will removed because it will be replaced by `sw-rating-stars` component. Use upper block `sw_product_detail_reviews_data_stars_content` instead.  #}\n                    \n                    {% block sw_product_detail_reviews_data_stars_empty %}{% endblock %}\n\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n                \n                {% block sw_product_detail_reviews_data_status %}\n                <template #column-status="{ item }">\n                    <sw-data-grid-column-boolean\n                        v-model="item.status"\n                        :is-inline-edit="false"\n                    />\n                </template>\n                {% endblock %}\n\n                \n                {% block sw_product_detail_reviews_data_created_at %}\n                <template #column-createdAt="{ item }">\n                    {{ dateFilter(item.createdAt, { hour: \'2-digit\', minute: \'2-digit\', second: \'2-digit\' }) }}\n                </template>\n                {% endblock %}\n\n                \n                {% block sw_product_detail_reviews_data_action %}\n                <template #actions="{ item }">\n                    \n                    {% block sw_product_detail_reviews_data_action_edit %}\n                    <sw-context-menu-item\n                        class="sw-product-detail-reviews__action-edit"\n                        :disabled="!acl.can(\'product.editor\')"\n                        :router-link="{ name: \'sw.review.detail\', params: { id: item.id } }"\n                    >\n                        {{ $tc(\'sw-product.reviewForm.contextMenuEdit\') }}\n                    </sw-context-menu-item>\n                    {% endblock %}\n\n                    \n                    {% block sw_product_detail_reviews_data_action_delete %}\n                    <sw-context-menu-item\n                        class="sw-product-detail-reviews__action-delete"\n                        variant="danger"\n                        :disabled="!acl.can(\'product.editor\')"\n                        @click="onStartReviewDelete(item)"\n                    >\n                        {{ $tc(\'sw-product.reviewForm.contextMenuDelete\') }}\n                    </sw-context-menu-item>\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n                \n                {% block sw_product_detail_reviews_data_pagination %}\n                <template #pagination>\n                    <sw-pagination\n                        :total="total"\n                        :limit="limit"\n                        :page="page"\n                        :total-visible="7"\n                        :steps="[10]"\n                        @page-change="onChangePage"\n                    />\n                </template>\n                {% endblock %}\n            </sw-data-grid>\n        </template>\n        {% endblock %}\n\n        \n        {% block sw_product_detail_reviews_empty_state %}\n\n        <sw-empty-state\n            v-if="!total"\n            :title="$tc(\'sw-product.reviewForm.messageEmptyTitle\')"\n            :subline="$tc(\'sw-product.reviewForm.messageEmptySubline\')"\n            :absolute="false"\n            empty-module\n        >\n            <template #icon>\n                <img\n                    :src="assetFilter(\'/administration/static/img/empty-states/products-empty-state.svg\')"\n                    :alt="$tc(\'sw-product.reviewForm.messageEmptyTitle\')"\n                >\n            </template>\n\n            <template #actions>\n                \n                {% block sw_product_detail_reviews_empty_state_button %}\n                <sw-button\n                    variant="ghost"\n                    :router-link="{ name: \'sw.review.index\' }"\n                >\n                    {{ $tc(\'sw-product.reviewForm.emptyStateButton\') }}\n                </sw-button>\n                {% endblock %}\n            </template>\n        </sw-empty-state>\n        {% endblock %}\n\n        \n        {% block sw_product_detail_reviews_modal_delete %}\n        <sw-modal\n            v-if="showReviewDeleteModal"\n            variant="small"\n            :title="$tc(\'sw-product.reviewForm.modal.confirmTitle\')"\n            @modal-close="onCancelReviewDelete"\n        >\n            \n            {% block sw_product_detail_reviews_modal_delete_body %}\n            <p>{{ $tc(\'sw-product.reviewForm.modal.confirmText\') }}</p>\n            {% endblock %}\n\n            \n            {% block sw_product_detail_reviews_modal_delete_footer %}\n            <template #modal-footer>\n                \n                {% block sw_product_detail_reviews_modal_delete_button_cancel %}\n                <sw-button\n                    size="small"\n                    @click="onCancelReviewDelete"\n                >\n                    {{ $tc(\'sw-product.reviewForm.modal.buttonCancel\') }}\n                </sw-button>\n                {% endblock %}\n\n                \n                {% block sw_product_detail_reviews_modal_delete_button_confirm %}\n                <sw-button\n                    size="small"\n                    variant="danger"\n                    @click="onConfirmReviewDelete"\n                >\n                    {{ $tc(\'sw-product.reviewForm.modal.buttonDelete\') }}\n                </sw-button>\n                {% endblock %}\n            </template>\n            {% endblock %}\n        </sw-modal>\n        {% endblock %}\n    </sw-card>\n    {% endblock %}\n</div>\n',inject:["repositoryFactory","acl"],data:function(){return{showReviewDeleteModal:!1,deleteReviewId:null,dataSource:[],page:1,limit:10,total:0}},computed:r(r(r({},u("swProductDetail",["product"])),m("swProductDetail",["isLoading"])),{},{cardTitle:function(){return this.total?this.$tc("sw-product.reviews.cardTitleReviews"):null},reviewRepository:function(){return this.repositoryFactory.create("product_review")},reviewCriteria:function(){var e=new w(this.page,this.limit);return e.addFilter(w.equals("productId",this.product.id)),e.setTotalCountMode(1),e},reviewColumns:function(){return[{property:"points",dataIndex:"points",label:this.$tc("sw-product.reviewForm.labelPoints")},{property:"status",dataIndex:"status",label:this.$tc("sw-product.reviewForm.labelStatus"),align:"center"},{property:"createdAt",dataIndex:"createdAt",label:this.$tc("sw-product.reviewForm.labelCreatedAt")},{property:"title",dataIndex:"title",label:this.$tc("sw-product.reviewForm.labelTitle"),routerLink:"sw.review.detail"}]},assetFilter:function(){return Shopware.Filter.getByName("asset")},dateFilter:function(){return Shopware.Filter.getByName("date")}}),watch:{"product.id":{immediate:!0,handler:function(e){e&&this.getReviews()}}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.getReviews()},getReviews:function(){var e=this;this.product&&this.product.id&&this.reviewRepository.search(this.reviewCriteria,c.api).then((function(t){e.total=t.total,e.dataSource=t,e.total>0&&e.dataSource.length<=0&&(e.page=1===e.page?1:e.page-1,e.getReviews())}))},onStartReviewDelete:function(e){this.deleteReviewId=e.id,this.onShowReviewDeleteModal()},onCancelReviewDelete:function(){this.deleteReviewId=null,this.onCloseReviewDeleteModal()},onShowReviewDeleteModal:function(){this.showReviewDeleteModal=!0},onCloseReviewDeleteModal:function(){this.showReviewDeleteModal=!1},onConfirmReviewDelete:function(){var e=this;this.onCloseReviewDeleteModal(),this.reviewRepository.delete(this.deleteReviewId,c.api).then((function(){e.deleteReviewId=null,e.getReviews()}))},onChangePage:function(e){this.page=e.page,this.limit=e.limit,this.getReviews()}}}},pgyL:function(e,t,n){},xLVb:function(e,t,n){var i=n("pgyL");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("P8hj").default)("e66e0c74",i,!0,{})}}]);
//# sourceMappingURL=b68d0093a835936c6226.js.map