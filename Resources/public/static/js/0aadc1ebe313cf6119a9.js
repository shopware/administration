(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[29],{MGaX:function(e,t,n){var i=n("udQ5");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("P8hj").default)("29b0e46c",i,!0,{})},qy03:function(e,t,n){"use strict";n.r(t);var i=n("CsSd"),a=n.n(i),r=n("dov8"),o=(n("kD65"),n("f/Wi"));n("jiv9"),n("MGaX");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=Shopware.Mixin,u=["onChange","onClose","onDestroy","onMonthChange","onOpen","onYearChange","onValueUpdate","onDayCreate","onParseConfig","onReady","onPreCalendarPosition","onKeyDown"];t.default={template:'\n{% block sw_datepicker %}\n<sw-contextual-field\n    class="sw-field--datepicker"\n    :class="{ \'has--focus\': isDatepickerOpen }"\n    v-bind="$attrs"\n    :required="required"\n    :name="formFieldName"\n    :disabled="disabled"\n    @sw-contextual-field-suffix-clicked="openDatepicker"\n    @inheritance-restore="$emit(\'inheritance-restore\', $event)"\n    @inheritance-remove="$emit(\'inheritance-remove\', $event)"\n    @base-field-mounted="createFlatpickrInstance"\n    v-on="additionalEventListeners"\n>\n\n    <template #sw-field-input="{ identification, disabled }">\n        \n        <input\n            :id="identification"\n            ref="flatpickrInput"\n            type="text"\n            :name="identification"\n            :disabled="disabled"\n            :placeholder="placeholder"\n        >\n        <sw-icon\n            v-if="!required && timezoneFormattedValue && !disabled"\n            class="sw-field--datepicker__button-reset-value"\n            name="regular-times-xs"\n            @click="unsetValue"\n        />\n    </template>\n\n    <template\n        v-if="showTimeZoneHint"\n        #hint\n    >\n        <sw-icon\n            name="solid-clock"\n            size="12px"\n        />\n        {{ userTimeZone }}\n    </template>\n\n    <template #sw-contextual-field-suffix>\n        <sw-icon\n            :name="suffixName"\n            @click.stop="openDatepicker"\n        />\n    </template>\n\n    <template #label>\n        <slot name="label"></slot>\n    </template>\n</sw-contextual-field>\n{% endblock %}\n',inheritAttrs:!1,inject:["feature"],mixins:[c.getByName("sw-form-field"),c.getByName("remove-api-error")],props:{value:{type:String,required:!1,default:null},config:{type:Object,default:function(){return{}}},dateType:{type:String,default:"date",validValues:["time","date","datetime"],validator:function(e){return["time","date","datetime"].includes(e)}},placeholderText:{type:String,default:"",required:!1},required:{type:Boolean,default:!1,required:!1},disabled:{type:Boolean,default:!1,required:!1},hideHint:{type:Boolean,default:!1,required:!1}},data:function(){return{flatpickrInstance:null,isDatepickerOpen:!1,defaultConfig:{}}},computed:{flatpickrInputRef:function(){return this.$refs.flatpickrInput},locale:function(){return Shopware.State.getters.adminLocaleLanguage||"en"},currentFlatpickrConfig:function(){return null===this.flatpickrInstance?{}:this.flatpickrInstance.config},placeholder:function(){return this.placeholderText.length>0?this.placeholderText:null===this.flatpickrInstance?this.defaultConfig.altFormat:this.flatpickrInstance.config.altFormat},suffixName:function(){return this.noCalendar?"regular-clock":"regular-calendar"},noCalendar:function(){return"time"===this.dateType},enableTime:function(){return this.noCalendar||"datetime"===this.dateType},additionalEventListeners:function(){var e=this,t={};return Object.keys(this.$listeners).forEach((function(n){["change","input"].includes(n)||(t[n]=e.$listeners[n])})),t},userTimeZone:function(){var e,t,n,i,a;return null!==(e=null===(t=Shopware)||void 0===t||null===(n=t.State)||void 0===n||null===(i=n.get("session"))||void 0===i||null===(a=i.currentUser)||void 0===a?void 0:a.timeZone)&&void 0!==e?e:"UTC"},timezoneFormattedValue:{get:function(){return this.value?["time","date"].includes(this.dateType)?this.value:Object(o.a)(this.value,this.userTimeZone).toISOString():null},set:function(e){if(null===e)return this.feature.isActive("VUE3")?void this.$emit("update:value",null):void this.$emit("input",null);if(["time","date"].includes(this.dateType))return this.feature.isActive("VUE3")?void this.$emit("update:value",e):void this.$emit("input",e);var t=Object(o.b)(new Date(e),this.userTimeZone);this.feature.isActive("VUE3")?this.$emit("update:value",t.toISOString()):this.$emit("input",t.toISOString())}},showTimeZoneHint:function(){return["datetime","datetime-local"].includes(this.dateType)&&!this.hideHint}},watch:{config:{deep:!0,handler:function(){this.updateFlatpickrInstance()}},dateType:function(){this.createConfig(),this.updateFlatpickrInstance()},locale:{immediate:!0,handler:function(){this.defaultConfig.locale=this.locale,this.updateFlatpickrInstance(this.config)}},timezoneFormattedValue:function(e){this.setDatepickerValue(e)},disabled:function(e){this.flatpickrInstance._input.disabled=e}},created:function(){this.createdComponent()},mounted:function(){this.mountedComponent()},methods:{createdComponent:function(){this.createConfig()},mountedComponent:function(){null!==this.flatpickrInstance&&this.updateFlatpickrInstance()},beforeDestroyComponent:function(){var e=this;this.$nextTick((function(){null!==e.flatpickrInstance&&(e.flatpickrInstance.destroy(),e.flatpickrInstance=null)}))},setDatepickerValue:function(e){null!==this.flatpickrInstance&&this.flatpickrInstance.setDate(e,!1)},getMergedConfig:function(e){return void 0!==e.mode&&console.warn("[sw-datepicker] The only allowed mode is the default 'single' mode (the specified mode will be ignored!). The modes 'multiple' or 'range' are currently not supported"),s(s(s({},this.defaultConfig),{},{enableTime:this.enableTime,noCalendar:this.noCalendar},e),{},{mode:"single"})},updateFlatpickrInstance:function(){var e=this;if(null!==this.flatpickrInstance){var t=this.getMergedConfig(this.config);void 0===t.enableTime||t.enableTime===this.currentFlatpickrConfig.enableTime?(u.forEach((function(e){delete t[e]})),this.flatpickrInstance.set(t),["locale","showMonths"].forEach((function(n){void 0!==t[n]&&e.flatpickrInstance.set(n,t[n])}))):this.createFlatpickrInstance(this.config)}},createFlatpickrInstance:function(){var e=this;null!==this.flatpickrInstance&&(this.flatpickrInstance.destroy(),this.flatpickrInstance=null);var t=this.getMergedConfig(this.config);this.getEventNames().forEach((function(n){var i=n.kebabCase,a=n.camelCase;t[a]=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];e.$emit.apply(e,[i].concat(n))}})),this.flatpickrInstance=new r.a(this.$refs.flatpickrInput,t),this.flatpickrInstance.config.onOpen.push((function(){e.isDatepickerOpen=!0})),this.flatpickrInstance.config.onClose.push((function(){e.isDatepickerOpen=!1})),this.flatpickrInstance.config.onChange.push((function(){e.emitValue(arguments.length<=1?void 0:arguments[1])})),this.setDatepickerValue(this.timezoneFormattedValue)},getEventNames:function(){var e=this,t=[];return Object.keys(this.additionalEventListeners).forEach((function(n){t.push({kebabCase:n,camelCase:e.kebabToCamel(n)})})),t},openDatepicker:function(){var e=this;this.$nextTick((function(){e.flatpickrInstance.open()}))},kebabToCamel:function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},unsetValue:function(){var e=this;this.$nextTick((function(){e.emitValue(null)}))},emitValue:function(e){""===e&&(e=null),e!==this.timezoneFormattedValue&&(this.timezoneFormattedValue=e)},createConfig:function(){var e="Y-m-dTH:i:S",t="Y-m-d H:i";"time"===this.dateType&&(e="H:i:S",t="H:i"),"date"===this.dateType&&(t="Y-m-d"),this.defaultConfig={time_24hr:!0,locale:this.locale,dateFormat:e,altInput:!0,altFormat:t,allowInput:!0}}}}},udQ5:function(e,t,n){}}]);