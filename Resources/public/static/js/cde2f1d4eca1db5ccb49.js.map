{"version":3,"sources":["webpack:///./src/module/sw-extension/component/sw-self-maintained-extension-card/index.js","webpack:///./src/module/sw-extension/component/sw-extension-permissions-details-modal/sw-extension-permissions-details-modal.html.twig"],"names":["template","mixins","props","extension","type","Object","required","computed","extensionCardClasses","_objectSpread","this","$super","permissions","keys","length","isInstalled","installedAt","methods","changeExtensionStatus","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","isActive","activateExtension","abrupt","deactivateExtension","stop","installExtension","_this2","_callee2","_context2","isLoading","shopwareExtensionService","name","clearCacheAndReloadPage","t0","showExtensionErrors","finish","_this3","_callee3","_context3","active","_this4","_callee4","_context4","removeExtension","_this5","_callee5","_context5","showRemovalModal"],"mappings":"yaAMe,WACXA,aAEAC,OAAQ,CAAC,sBAETC,MAAO,CACHC,UAAW,CACPC,KAAMC,OACNC,UAAU,IAIlBC,SAAU,CACNC,qBAAoB,WAChB,O,iWAAAC,CAAA,CACI,qCAAqC,GAClCC,KAAKC,OAAO,0BAIvBC,YAAW,WACP,OAAOP,OAAOQ,KAAKH,KAAKP,UAAUS,aAAaE,OAC3CJ,KAAKP,UAAUS,YAAc,MAGrCG,YAAW,WACP,OAAsC,OAA/BL,KAAKP,UAAUa,cAI9BC,QAAS,CACCC,sBAAqB,WAAI,IAADC,EAAA,YAAAC,IAAAC,IAAAC,MAAA,SAAAC,IAAA,OAAAF,IAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,WAEtBR,EAAKS,SAAS,CAADH,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EACPR,EAAKU,oBAAoB,KAAD,SAAAJ,EAAAK,OAAA,wBAAAL,EAAAE,KAAA,EAI5BR,EAAKY,sBAAsB,KAAD,mBAAAN,EAAAO,UAAAT,MAPNH,IAUxBa,iBAAgB,WAAI,IAADC,EAAA,YAAAd,IAAAC,IAAAC,MAAA,SAAAa,IAAA,OAAAd,IAAAG,MAAA,SAAAY,GAAA,cAAAA,EAAAV,KAAAU,EAAAT,MAAA,OACC,OAAtBO,EAAKG,WAAY,EAAKD,EAAAV,KAAA,EAAAU,EAAAT,KAAA,EAGZO,EAAKI,yBAAyBL,iBAChCC,EAAK/B,UAAUoC,KACfL,EAAK/B,UAAUC,MACjB,KAAD,SAAAgC,EAAAT,KAAA,EAEKO,EAAKM,0BAA0B,KAAD,EAAAJ,EAAAT,KAAA,gBAAAS,EAAAV,KAAA,EAAAU,EAAAK,GAAAL,EAAA,SAEpCF,EAAKQ,oBAAmBN,EAAAK,IAAI,QAEL,OAFKL,EAAAV,KAAA,GAE5BQ,EAAKG,WAAY,EAAMD,EAAAO,OAAA,6BAAAP,EAAAJ,UAAAG,EAAA,uBAbNf,IAiBnBS,kBAAiB,WAAI,IAADe,EAAA,YAAAxB,IAAAC,IAAAC,MAAA,SAAAuB,IAAA,OAAAxB,IAAAG,MAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAnB,MAAA,OAEI,OAFJmB,EAAApB,KAAA,EAElBkB,EAAKP,WAAY,EAAKS,EAAAnB,KAAA,EAEhBiB,EAAKN,yBAAyBT,kBAChCe,EAAKzC,UAAUoC,KACfK,EAAKzC,UAAUC,MACjB,KAAD,EAC4B,OAA7BwC,EAAKzC,UAAU4C,QAAS,EAAKD,EAAAnB,KAAA,EAEvBiB,EAAKJ,0BAA0B,KAAD,EAAAM,EAAAnB,KAAA,gBAAAmB,EAAApB,KAAA,EAAAoB,EAAAL,GAAAK,EAAA,SAEpCF,EAAKzC,UAAU4C,QAAS,EACxBH,EAAKF,oBAAmBI,EAAAL,IAAI,QAEL,OAFKK,EAAApB,KAAA,GAE5BkB,EAAKP,WAAY,EAAMS,EAAAH,OAAA,6BAAAG,EAAAd,UAAAa,EAAA,uBAfLzB,IAmBpBW,oBAAmB,WAAI,IAADiB,EAAA,YAAA5B,IAAAC,IAAAC,MAAA,SAAA2B,IAAA,OAAA5B,IAAAG,MAAA,SAAA0B,GAAA,cAAAA,EAAAxB,KAAAwB,EAAAvB,MAAA,OAEE,OAFFuB,EAAAxB,KAAA,EAEpBsB,EAAKX,WAAY,EAAKa,EAAAvB,KAAA,EAEhBqB,EAAKV,yBAAyBP,oBAChCiB,EAAK7C,UAAUoC,KACfS,EAAK7C,UAAUC,MACjB,KAAD,EAC6B,OAA9B4C,EAAK7C,UAAU4C,QAAS,EAAMG,EAAAvB,KAAA,EAExBqB,EAAKR,0BAA0B,KAAD,EAAAU,EAAAvB,KAAA,gBAAAuB,EAAAxB,KAAA,EAAAwB,EAAAT,GAAAS,EAAA,SAEpCF,EAAK7C,UAAU4C,QAAS,EAExBC,EAAKN,oBAAmBQ,EAAAT,IAAI,QAEL,OAFKS,EAAAxB,KAAA,GAE5BsB,EAAKX,WAAY,EAAMa,EAAAP,OAAA,6BAAAO,EAAAlB,UAAAiB,EAAA,uBAhBH7B,IAoBtB+B,gBAAe,WAAI,IAADC,EAAA,YAAAhC,IAAAC,IAAAC,MAAA,SAAA+B,IAAA,OAAAhC,IAAAG,MAAA,SAAA8B,GAAA,cAAAA,EAAA5B,KAAA4B,EAAA3B,MAAA,OAGM,OAHN2B,EAAA5B,KAAA,EAEhB0B,EAAKG,kBAAmB,EACxBH,EAAKf,WAAY,EAAKiB,EAAA3B,KAAA,EAEhByB,EAAKd,yBAAyBa,gBAChCC,EAAKjD,UAAUoC,KACfa,EAAKjD,UAAUC,MACjB,KAAD,EAC6B,OAA9BgD,EAAKjD,UAAU4C,QAAS,EAAMO,EAAA3B,KAAA,EACxByB,EAAKZ,0BAA0B,KAAD,EAAAc,EAAA3B,KAAA,iBAAA2B,EAAA5B,KAAA,GAAA4B,EAAAb,GAAAa,EAAA,SAEpCF,EAAKV,oBAAmBY,EAAAb,IAAI,QAEL,OAFKa,EAAA5B,KAAA,GAE5B0B,EAAKf,WAAY,EAAMiB,EAAAX,OAAA,6BAAAW,EAAAtB,UAAAqB,EAAA,wBAdPjC,O,kCCvGjB","file":"static/js/cde2f1d4eca1db5ccb49.js","sourcesContent":["import template from '../sw-extension-permissions-details-modal/sw-extension-permissions-details-modal.html.twig';\n\n/**\n * @package services-settings\n * @private\n */\nexport default {\n    template,\n\n    mixins: ['sw-extension-error'],\n\n    props: {\n        extension: {\n            type: Object,\n            required: true,\n        },\n    },\n\n    computed: {\n        extensionCardClasses() {\n            return {\n                'sw-self-maintained-extension-card': true,\n                ...this.$super('extensionCardClasses'),\n            };\n        },\n\n        permissions() {\n            return Object.keys(this.extension.permissions).length ?\n                this.extension.permissions : null;\n        },\n\n        isInstalled() {\n            return this.extension.installedAt !== null;\n        },\n    },\n\n    methods: {\n        async changeExtensionStatus() {\n            // State in checkbox has already changed so we have to treat extension.active as the state to change to\n            if (this.isActive) {\n                await this.activateExtension();\n                return;\n            }\n\n            await this.deactivateExtension();\n        },\n\n        async installExtension() {\n            this.isLoading = true;\n\n            try {\n                await this.shopwareExtensionService.installExtension(\n                    this.extension.name,\n                    this.extension.type,\n                );\n\n                await this.clearCacheAndReloadPage();\n            } catch (e) {\n                this.showExtensionErrors(e);\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        async activateExtension() {\n            try {\n                this.isLoading = true;\n\n                await this.shopwareExtensionService.activateExtension(\n                    this.extension.name,\n                    this.extension.type,\n                );\n                this.extension.active = true;\n\n                await this.clearCacheAndReloadPage();\n            } catch (e) {\n                this.extension.active = false;\n                this.showExtensionErrors(e);\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        async deactivateExtension() {\n            try {\n                this.isLoading = true;\n\n                await this.shopwareExtensionService.deactivateExtension(\n                    this.extension.name,\n                    this.extension.type,\n                );\n                this.extension.active = false;\n\n                await this.clearCacheAndReloadPage();\n            } catch (e) {\n                this.extension.active = true;\n\n                this.showExtensionErrors(e);\n            } finally {\n                this.isLoading = false;\n            }\n        },\n\n        async removeExtension() {\n            try {\n                this.showRemovalModal = false;\n                this.isLoading = true;\n\n                await this.shopwareExtensionService.removeExtension(\n                    this.extension.name,\n                    this.extension.type,\n                );\n                this.extension.active = false;\n                await this.clearCacheAndReloadPage();\n            } catch (e) {\n                this.showExtensionErrors(e);\n            } finally {\n                this.isLoading = false;\n            }\n        },\n    },\n};\n","export default \"\\n{% block sw_extension_permissions_details_modal %}\\n<sw-modal\\n    class=\\\"sw-extension-permissions-details-modal\\\"\\n    :title=\\\"modalTitle\\\"\\n    v-on=\\\"$listeners\\\"\\n>\\n    \\n    {% block sw_extension_permissions_details_modal_content %}\\n    \\n    {% block sw_extension_permissions_details_modal_table %}\\n    <table class=\\\"sw-extension-permissions-details-modal__table\\\">\\n        \\n        {% block sw_extension_permissions_details_modal_table_head %}\\n        <thead class=\\\"sw-extension-permissions-details-modal__operations\\\">\\n            \\n            {% block sw_extension_permissions_details_modal_table_head_row %}\\n            <tr class=\\\"sw-extension-permissions-details-modal__grid-columns\\\">\\n                <td></td>\\n                <td\\n                    v-for=\\\"operation in operations\\\"\\n                    :key=\\\"operation.label\\\"\\n                    class=\\\"sw-extension-permissions-details-modal__operation-header\\\"\\n                >\\n                    {{ operation.label }}\\n                </td>\\n            </tr>\\n            {% endblock %}\\n        </thead>\\n        {% endblock %}\\n\\n        \\n        {% block sw_extension_permissions_details_modal_table_body %}\\n        <tbody>\\n            \\n            {% block sw_extension_permissions_details_modal_table_permissions %}\\n            <template\\n                v-for=\\\"(permissionCategory, category) in permissions\\\"\\n                {% if VUE3 %}\\n                :key=\\\"`permission-${category}`\\\"\\n                {% endif %}\\n            >\\n                \\n                {% block sw_extension_permissions_details_modal_permissions_category %}\\n                <tr\\n                    :id=\\\"`permission-${category}`\\\"\\n                    {% if VUE2 %}\\n                    :key=\\\"`permission-${category}`\\\"\\n                    {% endif %}\\n                    class=\\\"sw-extension-permissions-details-modal__category\\\"\\n                >\\n                    <td>{{ categoryLabel(category) }}</td>\\n                </tr>\\n                {% endblock %}\\n\\n                \\n                {% block sw_extension_permissions_details_modal_permission_row %}\\n                <tr\\n                    v-for=\\\"(permissions, entity) in permissionCategory\\\"\\n                    :key=\\\"entity\\\"\\n                    class=\\\"sw-extension-permissions-details-modal__grid-columns\\\"\\n                >\\n                    \\n                    {% block sw_extension_permissions_details_modal_permission_entity %}\\n                    <td class=\\\"sw-extension-permissions-details-modal__entity-label\\\">\\n                        {{ entityLabel(category, entity) }}\\n                    </td>\\n                    {% endblock %}\\n\\n                    \\n                    {% block sw_extension_permissions_details_modal_permission_operation %}\\n                    <td\\n                        v-for=\\\"operation in operations\\\"\\n                        :key=\\\"operation.operation\\\"\\n                        class=\\\"sw-extension-permissions-details-modal__operation\\\"\\n                    >\\n                        <sw-icon\\n                            v-if=\\\"permissions.includes(operation.operation)\\\"\\n                            name=\\\"regular-checkmark-xs\\\"\\n                            size=\\\"12px\\\"\\n                            color=\\\"#37D046\\\"\\n                        />\\n\\n                        <sw-icon\\n                            v-else-if=\\\"category !== 'additional_privileges'\\\"\\n                            name=\\\"regular-times-s\\\"\\n                            size=\\\"12px\\\"\\n                            color=\\\"#DE294C\\\"\\n                        />\\n                    </td>\\n                    {% endblock %}\\n                </tr>\\n                {% endblock %}\\n            </template>\\n            {% endblock %}\\n        </tbody>\\n        {% endblock %}\\n    </table>\\n    {% endblock %}\\n    {% endblock %}\\n\\n    \\n    {% block sw_extension_permissions_details_modal_footer %}\\n    <template #modal-footer>\\n        \\n        {% block sw_extension_permissions_details_modal_footer_inner %}\\n        <sw-button\\n            variant=\\\"primary\\\"\\n            size=\\\"small\\\"\\n            @click=\\\"close\\\"\\n        >\\n            {{ $tc('global.sw-modal.labelClose') }}\\n        </sw-button>\\n        {% endblock %}\\n    </template>\\n    {% endblock %}\\n</sw-modal>\\n{% endblock %}\\n\";"],"sourceRoot":""}