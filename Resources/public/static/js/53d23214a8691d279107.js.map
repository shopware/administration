{"version":3,"sources":["webpack:///./src/module/sw-flow/component/modals/sw-flow-change-customer-group-modal/index.js","webpack:///./src/module/sw-flow/component/modals/sw-flow-change-customer-group-modal/sw-flow-change-customer-group-modal.html.twig"],"names":["Component","Shopware","Criteria","Data","mapState","getComponentHelper","ShopwareError","Classes","template","inject","props","sequence","type","Object","required","data","customerGroupId","fieldError","computed","_objectSpread","customerGroupRepository","this","repositoryFactory","create","customerGroupCriteria","criteria","addSorting","sort","watch","value","created","createdComponent","methods","_this$sequence","_this$sequence$config","config","customerGroups","length","search","then","State","commit","onClose","$emit","onAddAction","code"],"mappings":"stBAEA,IAAQA,EAAcC,SAAdD,UACAE,EAAaD,SAASE,KAAtBD,SACAE,EAAaJ,EAAUK,qBAAvBD,SACAE,EAAkBL,SAASM,QAA3BD,cAMO,WACXE,SCZW,w7DDcXC,OAAQ,CAAC,qBAETC,MAAO,CACHC,SAAU,CACNC,KAAMC,OACNC,UAAU,IAIlBC,KAAI,WACA,MAAO,CACHC,gBAAiB,GACjBC,WAAY,OAIpBC,SAAQC,EAAA,CACJC,wBAAuB,WACnB,OAAOC,KAAKC,kBAAkBC,OAAO,mBAGzCC,sBAAqB,WACjB,IAAMC,EAAW,IAAIvB,EAAS,EAAG,KAGjC,OAFAuB,EAASC,WAAWxB,EAASyB,KAAK,OAAQ,QAEnCF,IAGRrB,EAAS,cAAe,CAAC,oBAGhCwB,MAAO,CACHZ,gBAAe,SAACa,GACRA,GAASR,KAAKJ,aACdI,KAAKJ,WAAa,QAK9Ba,QAAO,WACHT,KAAKU,oBAGTC,QAAS,CACLD,iBAAgB,WAAI,IAADE,EAAAC,EACfb,KAAKL,iBAA+B,QAAbiB,EAAAZ,KAAKV,gBAAQ,IAAAsB,GAAQ,QAARC,EAAbD,EAAeE,cAAM,IAAAD,OAAR,EAAbA,EAAuBlB,kBAAmB,GAE5DK,KAAKe,eAAeC,QACrBhB,KAAKD,wBAAwBkB,OAAOjB,KAAKG,uBAAuBe,MAAK,SAACxB,GAClEd,SAASuC,MAAMC,OAAO,gCAAiC1B,OAKnE2B,QAAO,WACHrB,KAAKsB,MAAM,gBAGfC,YAAW,WACP,GAAKvB,KAAKL,gBAAV,CAQA,IAAML,EAAQQ,IAAA,GACPE,KAAKV,UAAQ,IAChBwB,OAAQ,CACJnB,gBAAiBK,KAAKL,mBAI9BK,KAAKsB,MAAM,iBAAkBhC,QAdzBU,KAAKJ,WAAa,IAAIX,EAAc,CAChCuC,KAAM","file":"static/js/53d23214a8691d279107.js","sourcesContent":["import template from './sw-flow-change-customer-group-modal.html.twig';\n\nconst { Component } = Shopware;\nconst { Criteria } = Shopware.Data;\nconst { mapState } = Component.getComponentHelper();\nconst { ShopwareError } = Shopware.Classes;\n\n/**\n * @private\n * @package services-settings\n */\nexport default {\n    template,\n\n    inject: ['repositoryFactory'],\n\n    props: {\n        sequence: {\n            type: Object,\n            required: true,\n        },\n    },\n\n    data() {\n        return {\n            customerGroupId: '',\n            fieldError: null,\n        };\n    },\n\n    computed: {\n        customerGroupRepository() {\n            return this.repositoryFactory.create('customer_group');\n        },\n\n        customerGroupCriteria() {\n            const criteria = new Criteria(1, 100);\n            criteria.addSorting(Criteria.sort('name', 'ASC'));\n\n            return criteria;\n        },\n\n        ...mapState('swFlowState', ['customerGroups']),\n    },\n\n    watch: {\n        customerGroupId(value) {\n            if (value && this.fieldError) {\n                this.fieldError = null;\n            }\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.customerGroupId = this.sequence?.config?.customerGroupId || '';\n\n            if (!this.customerGroups.length) {\n                this.customerGroupRepository.search(this.customerGroupCriteria).then((data) => {\n                    Shopware.State.commit('swFlowState/setCustomerGroups', data);\n                });\n            }\n        },\n\n        onClose() {\n            this.$emit('modal-close');\n        },\n\n        onAddAction() {\n            if (!this.customerGroupId) {\n                this.fieldError = new ShopwareError({\n                    code: 'c1051bb4-d103-4f74-8988-acbcafc7fdc3',\n                });\n\n                return;\n            }\n\n            const sequence = {\n                ...this.sequence,\n                config: {\n                    customerGroupId: this.customerGroupId,\n                },\n            };\n\n            this.$emit('process-finish', sequence);\n        },\n    },\n};\n","export default \"\\n{% block sw_flow_change_customer_group_modal %}\\n<sw-modal\\n    class=\\\"sw-flow-change-customer-group-modal\\\"\\n    :title=\\\"$tc('sw-flow.modals.customerGroup.titleChangeCustomerGroup')\\\"\\n    :closable=\\\"false\\\"\\n    @modal-close=\\\"onClose\\\"\\n>\\n    \\n    {% block sw_flow_change_customer_group_modal_select %}\\n    <sw-entity-single-select\\n        {% if VUE3 %}\\n        v-model:value=\\\"customerGroupId\\\"\\n        {% else %}\\n        v-model=\\\"customerGroupId\\\"\\n        {% endif %}\\n        required\\n        class=\\\"sw-flow-change-customer-group-modal__type-select\\\"\\n        entity=\\\"customer_group\\\"\\n        label-property=\\\"translated.name\\\"\\n        value-property=\\\"id\\\"\\n        :criteria=\\\"customerGroupCriteria\\\"\\n        :label=\\\"$tc('sw-flow.modals.customerGroup.labelCustomerGroup')\\\"\\n        :placeholder=\\\"$tc('sw-flow.modals.customerGroup.placeholderCustomerGroup')\\\"\\n        :error=\\\"fieldError\\\"\\n    />\\n    {% endblock %}\\n\\n    \\n    {% block sw_flow_change_customer_group_modal_content_custom %}\\n    {% endblock %}\\n\\n    \\n    {% block sw_flow_change_customer_group_modal_footer %}\\n    <template #modal-footer>\\n        \\n        {% block sw_flow_change_customer_group_modal_footer_cancel_button %}\\n        <sw-button\\n            class=\\\"sw-flow-change-customer-group-modal__cancel-button\\\"\\n            size=\\\"small\\\"\\n            @click=\\\"onClose\\\"\\n        >\\n            {{ $tc('global.default.cancel') }}\\n        </sw-button>\\n        {% endblock %}\\n\\n        \\n        {% block sw_flow_change_customer_group_modal_footer_save_button %}\\n        <sw-button\\n            class=\\\"sw-flow-change-customer-group-modal__save-button\\\"\\n            variant=\\\"primary\\\"\\n            size=\\\"small\\\"\\n            @click=\\\"onAddAction\\\"\\n        >\\n            {{ sequence.id ? $tc('sw-flow.modals.buttonSaveAction') : $tc('sw-flow.modals.buttonAddAction') }}\\n        </sw-button>\\n        {% endblock %}\\n    </template>\\n    {% endblock %}\\n</sw-modal>\\n{% endblock %}\\n\";"],"sourceRoot":""}