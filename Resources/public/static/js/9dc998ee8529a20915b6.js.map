{"version":3,"sources":["webpack:///./src/module/sw-cms/component/sw-cms-page-form/sw-cms-page-form.html.twig","webpack:///./src/module/sw-cms/component/sw-cms-page-form/index.js","webpack:///./src/module/sw-cms/component/sw-cms-page-form/sw-cms-page-form.scss"],"names":["template","inject","props","page","type","Object","required","elementUpdate","Function","default","computed","cmsBlocks","this","cmsService","getCmsBlockRegistry","cmsElements","getCmsElementRegistry","slotPositions","CMS","SLOT_POSITIONS","created","createdComponent","methods","_this","sections","forEach","section","blocks","block","slots","sort","a","b","_this$slotPositions$a","_this$slotPositions$b","slot","visibility","mobile","tablet","desktop","getBlockTitle","name","length","label","displaySectionType","blocksInSameSection","find","id","sectionId","filter","sectionPosition","reduce","firstBlock","actualBlock","position","getSectionName","$tc","getSectionPosition","getDeviceActive","viewport","_section$visibility","_block$visibility","_section$visibility2","arguments","undefined","isActive","concat","displayNotification","isSectionDisplay","values","indexOf","isBlockDisplay","content","__esModule","module","i","locals","exports","add"],"mappings":"sIAAe,I,YCQA,WACXA,SDTW,29MCWXC,OAAQ,CAAC,cAETC,MAAO,CACHC,KAAM,CACFC,KAAMC,OACNC,UAAU,GAEdC,cAAe,CACXH,KAAMI,SACNF,UAAU,EACVG,QAAS,eAIjBC,SAAU,CACNC,UAAS,WACL,OAAOC,KAAKC,WAAWC,uBAG3BC,YAAW,WACP,OAAOH,KAAKC,WAAWG,yBAG3BC,cAAa,WACT,OAAOC,IAAIC,iBAInBC,QAAO,WACHR,KAAKS,oBAGTC,QAAS,CACLD,iBAAgB,WAAI,IAADE,EAAA,KACfX,KAAKT,KAAKqB,SAASC,SAAQ,SAACC,GACxBA,EAAQC,OAAOF,SAAQ,SAACG,GACpBA,EAAMC,MAAMC,MAAK,SAACC,EAAGC,GAAO,IAADC,EAAAC,EAIvB,OAH4C,QAA7BD,EAAGV,EAAKN,cAAcc,EAAEI,aAAK,IAAAF,IAAIV,EAAKN,cAAcR,UACvB,QAA7ByB,EAAGX,EAAKN,cAAce,EAAEG,aAAK,IAAAD,IAAIX,EAAKN,cAAcR,YAKlEmB,EAAMQ,aACPR,EAAMQ,WAAa,CAAEC,QAAQ,EAAMC,QAAQ,EAAMC,SAAS,OAI7Db,EAAQU,aACTV,EAAQU,WAAa,CAAEC,QAAQ,EAAMC,QAAQ,EAAMC,SAAS,QAKxEC,cAAa,SAACZ,GACV,MAA0B,iBAAfA,EAAMa,MAA2C,IAAtBb,EAAMa,KAAKC,OACtCd,EAAMa,UAGyB,IAA/B7B,KAAKD,UAAUiB,EAAMxB,MACrBQ,KAAKD,UAAUiB,EAAMxB,MAAMuC,MAG/B,IAGXC,mBAAkB,SAAChB,GACf,IAAMiB,EAAsBjC,KAAKT,KAAKqB,SAASsB,MAAK,SAACpB,GAAO,OAAKA,EAAQqB,KAAOnB,EAAMoB,aAAWrB,OAKjG,OAAgC,IAJAkB,EAAoBI,QAAO,SAACjB,GACxD,OAAOA,EAAEkB,kBAAoBtB,EAAMsB,mBACpCR,QAM0BG,EAAoBI,QAAO,SAACjB,GAAC,OAAKA,EAAEkB,kBAAoBtB,EAAMsB,mBAEzCC,QAAO,SAACC,EAAYC,GAClE,OAAOA,EAAYC,SAAWF,EAAWE,SAAWD,EAAcD,IACnExB,GAEyBmB,KAAOnB,EAAMmB,IAG7CQ,eAAc,SAAC7B,GACX,OAAIA,EAAQe,KACDf,EAAQe,KAGK,YAAjBf,EAAQtB,KACXQ,KAAK4C,IAAI,4BACT5C,KAAK4C,IAAI,6BAGjBC,mBAAkB,SAAC7B,GACf,MAAiC,SAA1BA,EAAMsB,gBACTtC,KAAK4C,IAAI,gCACT5C,KAAK4C,IAAI,gCAGjBE,gBAAe,SAACC,EAAUjC,GAAwB,IAADkC,EAAAC,EAAAC,EAAdlC,EAAKmC,UAAArB,OAAA,QAAAsB,IAAAD,UAAA,GAAAA,UAAA,GAAG,KACjCE,EAAWrC,GACXF,SAAmB,QAAZkC,EAAPlC,EAASU,kBAAU,IAAAwB,OAAZ,EAAPA,EAAsBD,MAAa/B,SAAiB,QAAZiC,EAALjC,EAAOQ,kBAAU,IAAAyB,OAAZ,EAALA,EAAoBF,IACvDjC,SAAmB,QAAZoC,EAAPpC,EAASU,kBAAU,IAAA0B,OAAZ,EAAPA,EAAsBH,GAE5B,OAAOM,EAAQ,WAAAC,OACEP,GAAQ,WAAAO,OACRP,EAAQ,WAG7BQ,oBAAmB,SAACzC,EAASE,GACzB,IAAMwC,IAAqB/D,OAAOgE,OAAO3C,aAAO,EAAPA,EAASU,YAAYkC,SAAQ,IAAS,GACzEC,IAAmBlE,OAAOgE,OAAOzC,aAAK,EAALA,EAAOQ,YAAYkC,SAAQ,IAAS,GAE3E,OAAOF,GAAoBG,M,qBC3HvC,IAAIC,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQ/D,SACnB,iBAAZ+D,IAAsBA,EAAU,CAAC,CAACE,EAAOC,EAAIH,EAAS,MAC7DA,EAAQI,SAAQF,EAAOG,QAAUL,EAAQI,SAG/BE,EADH,EAAQ,QAAwErE,SACzE,WAAY+D,GAAS,EAAM,K","file":"static/js/9dc998ee8529a20915b6.js","sourcesContent":["export default \"\\n{% block sw_cms_page_form %}\\n<div\\n    v-responsive=\\\"{ 'is--compact': el => el.width <= 1620, timeout: 100 }\\\"\\n    class=\\\"sw-cms-page-form\\\"\\n>\\n\\n    \\n    {% block sw_cms_page_form_content %}\\n    <template\\n        v-for=\\\"section in page.sections\\\"\\n        {% if VUE3 %}\\n        :key=\\\"section.id\\\"\\n        {% endif %}\\n    >\\n\\n        \\n        {% block sw_cms_page_form_section %}\\n        <div\\n            {% if VUE2 %}\\n            :key=\\\"section.id\\\"\\n            {% endif %}\\n            class=\\\"sw-cms-page-form__section\\\"\\n        >\\n            <div class=\\\"sw-cms-page-form__section-actions\\\">\\n\\n                \\n                {% block sw_cms_page_form_section_name_wrapper %}\\n                <div class=\\\"sw-cms-page-form__section-action sw-cms-page-form__section-name\\\">\\n\\n                    \\n                    {% block sw_cms_page_form_section_name_icon %}\\n                    <sw-icon\\n                        name=\\\"regular-layout\\\"\\n                        size=\\\"20\\\"\\n                        class=\\\"sw-cms-page-form__section-action-icon sw-cms-page-form__section-name-icon\\\"\\n                    />\\n                    {% endblock %}\\n\\n                    \\n                    {% block sw_cms_page_form__section_name %}\\n                    <span class=\\\"sw-cms-page-form__section-action-label sw-cms-page-form__section-name-label\\\">\\n                        {{ getSectionName(section) }}\\n                    </span>\\n                    {% endblock %}\\n\\n                    <div class=\\\"sw-cms-page-form__device-actions\\\">\\n                        <sw-icon :name=\\\"getDeviceActive('mobile', section)\\\" />\\n\\n                        <sw-icon :name=\\\"getDeviceActive('tablet', section)\\\" />\\n\\n                        <sw-icon :name=\\\"getDeviceActive('desktop', section)\\\" />\\n                    </div>\\n                </div>\\n                {% endblock %}\\n            </div>\\n\\n            \\n            {% block sw_cms_page_form_section_empty_state_block %}\\n            <sw-card\\n                v-if=\\\"section.blocks.length === 0\\\"\\n                position-identifier=\\\"sw-cms-page-form-empty\\\"\\n                class=\\\"sw-cms-page-form__block-card is--empty\\\"\\n            >\\n\\n                \\n                {% block sw_cms_page_form_section_empty_state_block_text %}\\n                <p class=\\\"sw-cms-page-form__empty-state-text\\\">\\n                    {{ $tc('sw-cms.section.sectionEmptyState') }}\\n                </p>\\n                {% endblock %}\\n            </sw-card>\\n            {% endblock %}\\n\\n            <template\\n                v-for=\\\"(block, index) in section.blocks\\\"\\n                v-else\\n                {% if VUE3 %}\\n                :key=\\\"block.id\\\"\\n                {% endif %}\\n            >\\n\\n                \\n                {% block sw_cms_page_form_section_type_label_wrapper %}\\n                <div\\n                    v-if=\\\"displaySectionType(block)\\\"\\n                    {% if VUE2 %}\\n                    :key=\\\"index\\\"\\n                    {% endif %}\\n                    class=\\\"sw-cms-page-form__section-type\\\"\\n                >\\n\\n                    \\n                    {% block sw_cms_page_form_section_type_label %}\\n                    <div class=\\\"sw-cms-page-form__section-type-label\\\">\\n\\n                        \\n                        {% block sw_cms_page_form_section_type_label_icon %}\\n                        <sw-icon\\n                            v-if=\\\"block.sectionPosition !== 'main'\\\"\\n                            size=\\\"20\\\"\\n                            name=\\\"default-sidebar-align-left\\\"\\n                            class=\\\"sw-cms-page-form__section-type-icon\\\"\\n                        />\\n\\n                        <sw-icon\\n                            v-else\\n                            size=\\\"20\\\"\\n                            name=\\\"default-sidebar-align-right\\\"\\n                            class=\\\"sw-cms-page-form__section-type-icon\\\"\\n                        />\\n                        {% endblock %}\\n\\n                        \\n                        {% block sw_cms_page_form_section_type %}\\n                        <span class=\\\"sw-cms-page-form__section-type-name\\\">\\n                            {{ getSectionPosition(block) }}\\n                        </span>\\n                        {% endblock %}\\n                    </div>\\n                    {% endblock %}\\n\\n                    <hr class=\\\"sw-cms-page-form__section-divider\\\">\\n                </div>\\n                {% endblock %}\\n\\n                \\n                {% block sw_cms_page_form_card %}\\n                <sw-card\\n                    {% if VUE2 %}\\n                    :key=\\\"block.id\\\"\\n                    {% endif %}\\n                    position-identifier=\\\"sw-cms-page-form-block\\\"\\n                    class=\\\"sw-cms-page-form__block-card\\\"\\n                    :title=\\\"$tc(getBlockTitle(block))\\\"\\n                >\\n                    <template #header-right>\\n                        <div class=\\\"sw-cms-page-form__block-device-actions\\\">\\n                            <sw-icon :name=\\\"getDeviceActive('mobile', section, block)\\\" />\\n\\n                            <sw-icon :name=\\\"getDeviceActive('tablet', section, block)\\\" />\\n\\n                            <sw-icon :name=\\\"getDeviceActive('desktop', section, block)\\\" />\\n                        </div>\\n                    </template>\\n\\n                    \\n                    {% block sw_cms_page_form_card_content %}\\n                    <div\\n                        v-for=\\\"(element, blockIndex) in block.slots\\\"\\n                        :key=\\\"blockIndex\\\"\\n                        class=\\\"sw-cms-page-form__element-config\\\"\\n                    >\\n\\n                        <template v-if=\\\"displayNotification(section, block)\\\">\\n                            <sw-alert variant=\\\"info\\\">\\n                                {{ $tc('sw-cms.blocks.blockDisableState') }}\\n                            </sw-alert>\\n                        </template>\\n\\n                        \\n                        {% block sw_cms_page_form_element_config %}\\n                        <component\\n                            :is=\\\"cmsElements[element.type].configComponent\\\"\\n                            :element=\\\"element\\\"\\n                            @element-update=\\\"elementUpdate\\\"\\n                        />\\n                        {% endblock %}\\n                    </div>\\n                    {% endblock %}\\n                </sw-card>\\n                {% endblock %}\\n            </template>\\n        </div>\\n        {% endblock %}\\n    </template>\\n    {% endblock %}\\n</div>\\n{% endblock %}\\n\";","import template from './sw-cms-page-form.html.twig';\nimport './sw-cms-page-form.scss';\nimport CMS from '../../constant/sw-cms.constant';\n\n/**\n * @private\n * @package buyers-experience\n */\nexport default {\n    template,\n\n    inject: ['cmsService'],\n\n    props: {\n        page: {\n            type: Object,\n            required: true,\n        },\n        elementUpdate: {\n            type: Function,\n            required: false,\n            default: () => {},\n        },\n    },\n\n    computed: {\n        cmsBlocks() {\n            return this.cmsService.getCmsBlockRegistry();\n        },\n\n        cmsElements() {\n            return this.cmsService.getCmsElementRegistry();\n        },\n\n        slotPositions() {\n            return CMS.SLOT_POSITIONS;\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.page.sections.forEach((section) => {\n                section.blocks.forEach((block) => {\n                    block.slots.sort((a, b) => {\n                        const positionA = this.slotPositions[a.slot] ?? this.slotPositions.default;\n                        const positionB = this.slotPositions[b.slot] ?? this.slotPositions.default;\n\n                        return positionA - positionB;\n                    });\n\n                    if (!block.visibility) {\n                        block.visibility = { mobile: true, tablet: true, desktop: true };\n                    }\n                });\n\n                if (!section.visibility) {\n                    section.visibility = { mobile: true, tablet: true, desktop: true };\n                }\n            });\n        },\n\n        getBlockTitle(block) {\n            if (typeof block.name === 'string' && block.name.length !== 0) {\n                return block.name;\n            }\n\n            if (typeof this.cmsBlocks[block.type] !== 'undefined') {\n                return this.cmsBlocks[block.type].label;\n            }\n\n            return '';\n        },\n\n        displaySectionType(block) {\n            const blocksInSameSection = this.page.sections.find((section) => section.id === block.sectionId).blocks;\n            const blocksNotInSamePosition = blocksInSameSection.filter((b) => {\n                return b.sectionPosition !== block.sectionPosition;\n            }).length;\n\n            if (blocksNotInSamePosition === 0) {\n                return false;\n            }\n\n            const blocksInSamePosition = blocksInSameSection.filter((b) => b.sectionPosition === block.sectionPosition);\n\n            const firstBlockInPosition = blocksInSamePosition.reduce((firstBlock, actualBlock) => {\n                return actualBlock.position < firstBlock.position ? actualBlock : firstBlock;\n            }, block);\n\n            return firstBlockInPosition.id === block.id;\n        },\n\n        getSectionName(section) {\n            if (section.name) {\n                return section.name;\n            }\n\n            return section.type === 'sidebar' ?\n                this.$tc('sw-cms.section.isSidebar') :\n                this.$tc('sw-cms.section.isDefault');\n        },\n\n        getSectionPosition(block) {\n            return block.sectionPosition === 'main' ?\n                this.$tc('sw-cms.section.positionRight') :\n                this.$tc('sw-cms.section.positionLeft');\n        },\n\n        getDeviceActive(viewport, section, block = null) {\n            const isActive = block\n                ? section?.visibility?.[viewport] && block?.visibility?.[viewport]\n                : section?.visibility?.[viewport];\n\n            return isActive\n                ? `regular-${viewport}`\n                : `regular-${viewport}-slash`;\n        },\n\n        displayNotification(section, block) {\n            const isSectionDisplay = !(Object.values(section?.visibility).indexOf(true) > -1);\n            const isBlockDisplay = !(Object.values(block?.visibility).indexOf(true) > -1);\n\n            return isSectionDisplay || isBlockDisplay;\n        },\n    },\n};\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-cms-page-form.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"c54e80b2\", content, true, {});"],"sourceRoot":""}