(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[417],{EotV:function(n,e,t){},IW67:function(n,e,t){var r=t("EotV");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);(0,t("P8hj").default)("332022b3",r,!0,{})},ZcLZ:function(n,e,t){"use strict";t.r(e);var r=t("6lmj"),o=t.n(r),c=t("CsSd"),s=t.n(c);t("IW67");function a(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}var i=Shopware,l=i.Component,u=i.Mixin,d=l.getComponentHelper().mapPropertyErrors,y=Shopware.Data.Criteria;e.default={template:'\n{% block sw_settings_country_general %}\n<div>\n    \n    {% block sw_settings_country_general_card %}\n    <sw-card\n        position-identifier="sw-settings-country-detail-general"\n        :title="$tc(\'sw-settings-country.detail.titleCard\')"\n        :is-loading="isLoading"\n    >\n        <sw-container\n            columns="repeat(auto-fit, minmax(250px, 1fr))"\n            gap="0px 30px"\n        >\n\n            \n            {% block sw_settings_country_general_content_field_name %}\n            <sw-text-field\n                {% if VUE3 %}\n                v-model:value="country.name"\n                name="sw-field--country-name"\n                {% else %}\n                v-model="country.name"\n                {% endif %}\n                required\n                :disabled="!acl.can(\'country.editor\')"\n                :label="$tc(\'sw-settings-country.detail.labelName\')"\n                :placeholder="placeholder(country, \'name\', $tc(\'sw-settings-country.detail.placeholderName\'))"\n                :error="countryNameError"\n            />\n            {% endblock %}\n\n            \n            {% block sw_settings_country_general_content_field_position %}\n            <sw-number-field\n                {% if VUE3 %}\n                v-model:value="country.position"\n                name="sw-field--country-position"\n                {% else %}\n                v-model="country.position"\n                {% endif %}\n                number-type="int"\n                :disabled="!acl.can(\'country.editor\')"\n                :label="$tc(\'sw-settings-country.detail.labelPosition\')"\n                :placeholder="placeholder(country, \'position\', $tc(\'sw-settings-country.detail.placeholderPosition\'))"\n            />\n            {% endblock %}\n\n            \n            {% block sw_settings_country_general_content_field_iso %}\n            <sw-text-field\n                {% if VUE3 %}\n                v-model:value="country.iso"\n                name="sw-field--country-iso"\n                {% else %}\n                v-model="country.iso"\n                {% endif %}\n                :disabled="!acl.can(\'country.editor\')"\n                :label="$tc(\'sw-settings-country.detail.labelIso\')"\n                :placeholder="placeholder(country, \'iso\', $tc(\'sw-settings-country.detail.placeholderIso\'))"\n            />\n            {% endblock %}\n\n            \n            {% block sw_settings_country_general_content_field_iso3 %}\n            <sw-text-field\n                {% if VUE3 %}\n                v-model:value="country.iso3"\n                name="sw-field--country-iso3"\n                {% else %}\n                v-model="country.iso3"\n                {% endif %}\n                :disabled="!acl.can(\'country.editor\')"\n                :label="$tc(\'sw-settings-country.detail.labelIso3\')"\n                :placeholder="placeholder(country, \'iso3\', $tc(\'sw-settings-country.detail.placeholderIso3\'))"\n            />\n            {% endblock %}\n        </sw-container>\n    </sw-card>\n    {% endblock %}\n\n    \n    {% block sw_settings_country_general_options_card %}\n    <sw-card\n        position-identifier="sw-settings-country-general"\n        :title="$tc(\'sw-settings-country.detail.titleOptions\')"\n        :is-loading="isLoading"\n    >\n        <sw-container class="sw-settings-country-general__options-container">\n\n            \n            {% block sw_settings_country_general_content_field_active %}\n            <sw-switch-field\n                {% if VUE3 %}\n                v-model:value="country.active"\n                name="sw-field--country-active"\n                {% else %}\n                v-model="country.active"\n                {% endif %}\n                class="sw-settings-country-general__option-items"\n                bordered\n                :disabled="!acl.can(\'country.editor\')"\n                :label="$tc(\'sw-settings-country.detail.labelActive\')"\n            />\n            {% endblock %}\n\n            \n            {% block sw_settings_country_general_content_field_shipping_available %}\n            <sw-switch-field\n                {% if VUE3 %}\n                v-model:value="country.shippingAvailable"\n                name="sw-field--country-shippingAvailable"\n                {% else %}\n                v-model="country.shippingAvailable"\n                {% endif %}\n                class="sw-settings-country-general__option-items"\n                bordered\n                :disabled="!acl.can(\'country.editor\')"\n                :label="$tc(\'sw-settings-country.detail.labelShippingAvailable\')"\n            />\n            {% endblock %}\n\n            \n            {% block sw_settings_country_general_content_field_tax_free %}\n            <sw-switch-field\n                {% if VUE3 %}\n                v-model:value="country.customerTax.enabled"\n                name="sw-field--country-customerTax-enabled"\n                {% else %}\n                v-model="country.customerTax.enabled"\n                {% endif %}\n                class="sw-settings-country-general__option-items switch-field-customer-tax-free"\n                bordered\n                :disabled="!acl.can(\'country.editor\')"\n                :label="$tc(\'sw-settings-country.detail.labelTaxFree\')"\n            />\n            {% endblock %}\n\n            <sw-container\n                v-if="country.customerTax.enabled"\n                class="sw-settings-country-general-customer-tax"\n            >\n\n                \n                {% block sw_settings_country_general_content_field_tax_free_from_customer %}\n                \n                {% block sw_settings_country_general_content_field_tax_free_from_customer_value %}\n                <sw-number-field\n                    {% if VUE3 %}\n                    v-model:value="country.customerTax.amount"\n                    name="sw-field--country-customerTax-amount"\n                    {% else %}\n                    v-model="country.customerTax.amount"\n                    {% endif %}\n                    class="sw-settings-country-general__input-amount customer-tax-amount"\n                    :min="0"\n                    :label="$tc(\'sw-settings-country.detail.taxFreeFrom\')"\n                    :help-text="$tc(\'sw-settings-country.detail.taxFreeFromHelpText\')"\n                    :disabled="!acl.can(\'country.editor\')"\n                >\n                    <template #suffix>\n                        <sw-entity-single-select\n                            {% if VUE3 %}\n                            v-model:value="country.customerTax.currencyId"\n                            name="sw-field--country-customerTax-currencyId"\n                            {% else %}\n                            v-model="country.customerTax.currencyId"\n                            {% endif %}\n                            class="sw-settings-country-general__customer-select-currency sw-settings-country-general__select"\n                            entity="currency"\n                            bordered\n                            show-clearable-button\n                            :disabled="!acl.can(\'country.editor\')"\n                        />\n                    </template>\n                </sw-number-field>\n                {% endblock %}\n                {% endblock %}\n\n                \n                {% block sw_settings_country_general_content_show_tax_free_currency_dependent_values %}\n                <sw-container\n                    columns="1fr"\n                    justify="end"\n                >\n                    <a\n                        class="sw-settings-country-general__currency-dependent-modal"\n                        role="button"\n                        tabindex="0"\n                        @click="openCustomerTaxModal"\n                        @keydown.enter="openCustomerTaxModal"\n                    >\n                        {{ $tc(\'sw-settings-country.detail.currencyDependentValues\') }}\n                        <sw-icon\n                            name="regular-long-arrow-right"\n                            small\n                        />\n                    </a>\n                </sw-container>\n                {% endblock %}\n\n            </sw-container>\n\n            \n            {% block sw_settings_country_general_content_field_tax_free_companies %}\n            <sw-switch-field\n                {% if VUE3 %}\n                v-model:value="country.companyTax.enabled"\n                name="sw-field--country-companyTax-enabled"\n                {% else %}\n                v-model="country.companyTax.enabled"\n                {% endif %}\n                class="sw-settings-country-general__option-items switch-field-company-tax-free"\n                bordered\n                :disabled="!acl.can(\'country.editor\')"\n                :label="$tc(\'sw-settings-country.detail.labelCompanyTaxFree\')"\n                :help-text="$tc(\'sw-settings-country.detail.helpTextCompanyTaxFree\')"\n            />\n            {% endblock %}\n\n            <sw-container\n                v-if="country.companyTax.enabled"\n                class="sw-settings-country-general-company-tax"\n            >\n\n                \n                {% block sw_settings_country_general_content_field_tax_free_from_companies %}\n                \n                {% block sw_settings_country_general_content_field_tax_free_from_companies_value %}\n                <sw-number-field\n                    {% if VUE3 %}\n                    v-model:value="country.companyTax.amount"\n                    name="sw-field--country-companyTax-amount"\n                    {% else %}\n                    v-model="country.companyTax.amount"\n                    {% endif %}\n                    class="sw-settings-country-general__input-amount"\n                    :min="0"\n                    :label="$tc(\'sw-settings-country.detail.taxFreeFrom\')"\n                    :help-text="$tc(\'sw-settings-country.detail.taxFreeFromHelpText\')"\n                    :disabled="!acl.can(\'country.editor\')"\n                >\n                    <template #suffix>\n                        <sw-entity-single-select\n                            {% if VUE3 %}\n                            v-model:value="country.companyTax.currencyId"\n                            name="sw-field--country-companyTax-currencyId"\n                            {% else %}\n                            v-model="country.companyTax.currencyId"\n                            {% endif %}\n                            class="sw-settings-country-general__company-select-currency sw-settings-country-general__select"\n                            entity="currency"\n                            show-clearable-button\n                            :disabled="!acl.can(\'country.editor\')"\n                        />\n                    </template>\n                </sw-number-field>\n                {% endblock %}\n                {% endblock %}\n\n                \n                {% block sw_settings_country_general_content_show_company_tax_free_currency_dependent_values %}\n                <sw-container\n                    columns="1fr"\n                    justify="end"\n                >\n                    <a\n                        class="sw-settings-country-general__currency-dependent-modal"\n                        role="button"\n                        tabindex="0"\n                        @click="openCompanyTaxModal"\n                        @keydown.enter="openCompanyTaxModal"\n                    >\n                        {{ $tc(\'sw-settings-country.detail.currencyDependentValues\') }}\n                        <sw-icon\n                            name="regular-long-arrow-right"\n                            small\n                        />\n                    </a>\n                </sw-container>\n                {% endblock %}\n            </sw-container>\n\n            \n            {% block sw_settings_country_general_content_show_currency_dependent_modal %}\n            <sw-settings-country-currency-dependent-modal\n                v-if="showCurrencyModal"\n                :currency-depends-value="currencyDependsValue"\n                :country-id="countryId"\n                :is-loading="isLoading"\n                :menu-options="menuOptions"\n                :user-config="userConfig"\n                :user-config-values="userConfigValues"\n                :tax-free-type="taxFreeType"\n                @modal-close="onToggleCurrencyModal"\n                @modal-save="saveCountryCurrencyDependent"\n                @base-item-change="changeBaseItem"\n            />\n            {% endblock %}\n\n            \n            {% block sw_settings_country_general_content_field_check_vat_id_format %}\n            <sw-switch-field\n                {% if VUE3 %}\n                v-model:value="country.checkVatIdPattern"\n                name="sw-field--country-checkVatIdPattern"\n                {% else %}\n                v-model="country.checkVatIdPattern"\n                {% endif %}\n                class="sw-settings-country-general__field-check-vatid-format sw-settings-country-general__option-items"\n                bordered\n                :disabled="!acl.can(\'country.editor\')"\n                :label="$tc(\'sw-settings-country.detail.labelCheckVatIdFormat\')"\n                :help-text="$tc(\'sw-settings-country.detail.helpTextCheckVatIdFormat\')"\n            />\n            {% endblock %}\n\n            \n            {% block sw_settings_country_general_content_field_vat_id_required %}\n            <sw-switch-field\n                {% if VUE3 %}\n                v-model:value="country.vatIdRequired"\n                name="sw-field--country-vatIdRequired"\n                {% else %}\n                v-model="country.vatIdRequired"\n                {% endif %}\n                class="sw-settings-country-general__vat-id-required sw-settings-country-general__option-items"\n                bordered\n                :disabled="!acl.can(\'country.editor\')"\n                :label="$tc(\'sw-settings-country.detail.labelVatIdRequired\')"\n                :help-text="$tc(\'sw-settings-country.detail.helpTextLabelVatIdRequired\')"\n            />\n            {% endblock %}\n        </sw-container>\n    </sw-card>\n    {% endblock %}\n\n</div>\n{% endblock %}\n',inject:["repositoryFactory","acl"],mixins:[u.getByName("notification"),u.getByName("placeholder"),u.getByName("discard-detail-page-changes")("country")],props:{country:{type:Object,required:!0},isLoading:{type:Boolean,required:!0},userConfig:{type:Object,required:!0},userConfigValues:{type:Object,required:!0}},data:function(){return{showCurrencyModal:!1,currencyDependsValue:[],currencies:[],menuOptions:[],taxFreeType:"",countryId:"",baseCurrencyId:""}},computed:function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?a(Object(t),!0).forEach((function(e){s()(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({countryRepository:function(){return this.repositoryFactory.create("country")},currencyRepository:function(){return this.repositoryFactory.create("currency")}},d("country",["name"])),created:function(){this.createdComponent()},methods:{createdComponent:function(){this.$route.params.id&&(this.countryId=this.$route.params.id,this.loadCurrencies())},loadCurrencies:function(){var n=this;return this.currencyRepository.search(new y(1,25),Shopware.Context.api).then((function(e){n.currencies=e}))},openCustomerTaxModal:function(){this.onToggleCurrencyModal("customerTax")},openCompanyTaxModal:function(){this.onToggleCurrencyModal("companyTax")},onToggleCurrencyModal:function(n){this.taxFreeType=n,this.showCurrencyModal=!this.showCurrencyModal,this.showCurrencyModal?this.createDataModal():this.clearMenuOptions()},changeBaseItem:function(n){["customerTax","companyTax"].includes(this.taxFreeType)&&(this.country[this.taxFreeType]=n)},createDataModal:function(){"companyTax"!==this.taxFreeType&&"customerTax"!==this.taxFreeType||(this.currencyDependsValue=[this.country[this.taxFreeType]]),this.baseCurrencyId=this.currencyDependsValue[0].currencyId,Object.keys(this.userConfigValues).length>0&&this.pushDataFromUserConfig(),this.addCheckedHamburgerMenu(),this.addDisabledBaseCurrencyCheckBox(),this.sortCurrencyCheckBox()},clearMenuOptions:function(){this.menuOptions.forEach((function(n){delete n.checked,delete n.disabled}))},addCheckedHamburgerMenu:function(){var n=this;this.menuOptions=o()(this.currencies),this.menuOptions.forEach((function(e){var t=n.currencyDependsValue.find((function(n){return e.id===n.currencyId}));e.checked=!!t}))},addDisabledBaseCurrencyCheckBox:function(){var n=this;this.menuOptions.forEach((function(e){e.disabled=e.id===n.baseCurrencyId}))},sortCurrencyCheckBox:function(){this.menuOptions.sort((function(n,e){return e.checked-n.checked||e.disabled-n.disabled}))},pushDataFromUserConfig:function(){var n=this;this.userConfigValues[this.taxFreeType]&&this.userConfigValues[this.taxFreeType].forEach((function(e){var t={};t.amount=n.calculateInheritedPrice(e),t.currencyId=e,t.enabled=!1,n.currencyDependsValue.find((function(n){return n.currencyId===e}))||n.currencyDependsValue.push(t)}))},calculateInheritedPrice:function(n){var e=this.currencyDependsValue.find((function(n){return!0===n.enabled}));return e?this.getPriceByCurrency(e,n):0},getPriceByCurrency:function(n,e){var t=this.getCurrencyById(e),r=this.getCurrencyById(n.currencyId);return r.factor&&t.factor?n.amount/r.factor*t.factor:0},getCurrencyById:function(n){return this.currencies.find((function(e){return e.id===n}))||{}},saveCountryCurrencyDependent:function(){this.$emit("modal-save")}}}}}]);