(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[2660],{84229:function(){},2660:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return o}});var i=n(10418);n(30920);let{Mixin:l}=Shopware,{Criteria:r}=Shopware.Data,{cloneDeep:s}=Shopware.Utils.object;var o={template:'\n{% block sw_product_list %}\n<sw-page class="sw-product-list">\n\n    \n    {% block sw_product_list_search_bar %}\n    <template #search-bar>\n        <sw-search-bar\n            initial-search-type="product"\n            :initial-search="term"\n            @search="onSearch"\n        />\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_product_list_smart_bar_header %}\n    <template #smart-bar-header>\n        \n        {% block sw_product_list_smart_bar_header_title %}\n        <h2>\n            \n            {% block sw_product_list_smart_bar_header_title_text %}\n            {{ $tc(\'sw-product.list.textProductOverview\') }}\n            {% endblock %}\n\n            \n            {% block sw_product_list_smart_bar_header_amount %}\n            <span\n                v-if="!isLoading"\n                class="sw-page__smart-bar-amount"\n            >\n                ({{ total }})\n            </span>\n            {% endblock %}\n        </h2>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_product_list_smart_bar_actions %}\n    <template #smart-bar-actions>\n        <sw-button-group\n            v-tooltip.bottom="{\n                message: $tc(\'sw-privileges.tooltip.warning\'),\n                disabled: acl.can(\'product.creator\'),\n                showOnDisabledElements: true\n            }"\n            class="sw-product-list__add-button-group"\n            split-button\n        >\n            \n            {% block sw_product_list_smart_bar_actions_add %}\n            <sw-button\n                v-tooltip="{\n                    message: $tc(\'sw-privileges.tooltip.warning\'),\n                    disabled: acl.can(\'product.creator\'),\n                    showOnDisabledElements: true\n                }"\n                class="sw-product-list__add-physical-button"\n                :router-link="{ name: \'sw.product.create\', query: { creationStates: [\'is-physical\'] } }"\n                variant="primary"\n                :disabled="!acl.can(\'product.creator\')"\n            >\n                {{ $tc(\'sw-product.list.buttonAddProduct\') }}\n            </sw-button>\n            {% endblock %}\n            \n            {% block sw_product_list_smart_bar_actions_add_download %}\n            <sw-context-button class="sw-product-list__add-other-context-button">\n                <template #button>\n                    \n                    {% block sw_product_list_smart_bar_actions_add_download_button %}\n                    <sw-button\n                        class="sw-product-list__button-context-menu"\n                        square\n                        variant="primary"\n                        :disabled="!acl.can(\'product.editor\')"\n                    >\n                        <sw-icon\n                            name="regular-chevron-down-xs"\n                            size="16"\n                        />\n                    </sw-button>\n                    {% endblock %}\n                </template>\n\n                \n                {% block sw_product_list_smart_bar_actions_add_download_context_menu_item_downloadable_product %}\n                <sw-context-menu-item\n                    v-tooltip="{\n                        message: $tc(\'sw-privileges.tooltip.warning\'),\n                        disabled: acl.can(\'product.creator\'),\n                        showOnDisabledElements: true\n                    }"\n                    :router-link="{ name: \'sw.product.create\', query: { creationStates: [\'is-download\'] } }"\n                    :disabled="!acl.can(\'product.creator\')"\n                >\n                    {{ $tc(\'sw-product.list.buttonAddDownloadableProduct\') }}\n                </sw-context-menu-item>\n                {% endblock %}\n            </sw-context-button>\n            {% endblock %}\n        </sw-button-group>\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_product_list_language_switch %}\n    <template #language-switch>\n        <sw-language-switch @on-change="onChangeLanguage" />\n    </template>\n    {% endblock %}\n\n    <template #content>\n        \n        {% block sw_product_list_content %}\n        <div class="sw-product-list__content">\n\n            \n            {% block sw_product_list_grid %}\n            <sw-entity-listing\n                v-if="entitySearchable"\n                ref="swProductGrid"\n                class="sw-product-list-grid"\n                :items="products"\n                :columns="productColumns"\n                :repository="productRepository"\n                detail-route="sw.product.detail"\n                :show-selection="true"\n                :is-loading="isLoading"\n                identifier="sw-product-list"\n                :allow-edit="acl.can(\'product.editor\')"\n                :allow-delete="acl.can(\'product.deleter\')"\n                :allow-inline-edit="acl.can(\'product.editor\')"\n                :sort-by="currentSortBy"\n                :sort-direction="sortDirection"\n                :natural-sorting="naturalSorting"\n                :criteria-limit="limit"\n                :disable-data-fetching="true"\n                :allow-bulk-edit="acl.can(\'product.editor\')"\n                @column-sort="onColumnSort"\n                @page-change="onPageChange"\n                @inline-edit-save="onInlineEditSave"\n                @selection-change="updateSelection"\n                @update-records="updateTotal"\n                @bulk-edit-modal-open="onBulkEditModalOpen"\n            >\n                \n                {% block sw_product_list_grid_columns %}\n                \n                {% block sw_product_list_grid_columns_name_preview %}\n                <template #preview-name="{ item }">\n                    <sw-media-preview-v2 :source="item.cover ? item.cover.media : null" />\n                </template>\n                {% endblock %}\n\n                \n                {% block sw_product_list_grid_columns_name %}\n                <template #column-name="{ item, isInlineEdit }">\n                    \n                    {% block sw_product_list_grid_columns_name_inline_edit %}\n                    <sw-text-field\n                        v-if="isInlineEdit"\n                        v-model:value="item.name"\n                        size="small"\n                    />\n                    {% endblock %}\n\n                    \n                    {% block sw_product_list_grid_columns_name_content %}\n                    <div v-else>\n                        \n                        {% block sw_product_list_grid_columns_name_content_variant_button %}\n                        <sw-button\n                            v-if="productHasVariants(item)"\n                            v-tooltip="{ message: $tc(\'sw-product.list.variantIndicatorTooltip\') }"\n                            class="sw-product-list__variant-indicator"\n                            size="x-small"\n                            @click="openVariantModal(item)"\n                        >\n                            <sw-icon\n                                name="regular-variants"\n                                size="14px"\n                            />\n                        </sw-button>\n                        {% endblock %}\n\n                        \n                        {% block sw_product_list_grid_columns_name_content_link %}\n                        <router-link :to="{ name: \'sw.product.detail\', params: { id: item.id } }">\n                            {{ item.translated ? item.translated.name : item.name }}\n                        </router-link>\n                        {% endblock %}\n\n                        <sw-label\n                            v-if="productIsDigital(item)"\n                            class="sw-product-list__digital-indicator"\n                        >\n                            {{ $tc(\'sw-product.variations.generatedListColumnContentProductState.is-download\') }}\n                        </sw-label>\n                    </div>\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n                \n                {% block sw_product_list_grid_columns_active %}\n                <template #column-active="{ item, isInlineEdit }">\n                    \n                    {% block sw_product_list_grid_columns_active_inline_edit %}\n                    <template v-if="isInlineEdit">\n                        <sw-checkbox-field\n                            v-model:value="item.active"\n                        />\n                    </template>\n                    {% endblock %}\n\n                    \n                    {% block sw_product_list_grid_columns_active_content %}\n                    <template v-else>\n                        <sw-icon\n                            v-if="item.active"\n                            name="regular-checkmark-xs"\n                            small\n                            class="is--active"\n                        />\n                        <sw-icon\n                            v-else\n                            name="regular-times-s"\n                            small\n                            class="is--inactive"\n                        />\n                    </template>\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n                \n                {% block sw_product_list_grid_columns_sales %}\n                <template #column-sales="{ item }">\n                    \n                    {% block sw_product_list_grid_columns_sales_content %}\n                    <template v-if="productHasVariants(item)">\n                        -\n                    </template>\n                    <template v-else>\n                        {{ item.sales }}\n                    </template>\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n                \n                {% block sw_product_list_grid_columns_price %}\n                <template\n                    v-for="currency in currencies"\n                    #[`column-price-${currency.isoCode}`]="{ item }"\n                >\n                    {{ currencyFilter(getCurrencyPriceByCurrencyId(currency.id, item.price).gross, currency.isoCode) }}\n                </template>\n                {% endblock %}\n\n                \n                {% block sw_product_list_grid_columns_stock %}\n                <template #column-stock="{ item, isInlineEdit, compact }">\n                    \n                    {% block sw_product_list_grid_columns_stock_inline_edit %}\n                    <template v-if="isInlineEdit">\n                        <sw-number-field\n                            v-model:value="item.stock"\n                            :size="compact ? \'small\' : \'default\'"\n                        />\n                    </template>\n                    {% endblock %}\n\n                    \n                    {% block sw_product_list_grid_columns_stock_content %}\n                    <template v-else>\n                        {{ item.stock }}\n                        <sw-color-badge :variant="stockColorVariantFilter(item.stock)" />\n                    </template>\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n                <template #column-createdAt="{ item }">\n                    {{ dateFilter(item.createdAt) }}\n                </template>\n\n                <template #column-updatedAt="{ item }">\n                    {{ dateFilter(item.updatedAt) }}\n                </template>\n\n                \n                {% block sw_product_list_grid_columns_actions %}\n                <template #more-actions="{ item }">\n                    \n                    {% block sw_product_list_grid_columns_actions_duplicate %}\n                    <sw-context-menu-item\n                        class="sw-product-list-grid__duplicate-action"\n                        :disabled="item.parentId != null || !acl.can(\'product.creator\')"\n                        @click="onDuplicate(item)"\n                    >\n                        {{ $tc(\'sw-product.list.buttonDuplicate\') }}\n                    </sw-context-menu-item>\n                    {% endblock %}\n\n                    \n                    {% block sw_product_list_grid_columns_actions_open_variant %}\n                    <sw-context-menu-item\n                        v-if="productHasVariants(item)"\n                        @click="openVariantModal(item)"\n                    >\n                        {{ $tc(\'sw-product.list.contextMenuShowVariants\') }}\n                    </sw-context-menu-item>\n                    {% endblock %}\n                </template>\n                {% endblock %}\n                {% endblock %}\n\n                \n                {% block sw_product_list_bulk_edit_modal %}\n                <template #bulk-edit-modal="{ selection }">\n                    <sw-bulk-edit-modal\n                        v-if="showBulkEditModal"\n                        class="sw-product-bulk-edit-modal"\n                        :selection="selection"\n                        :bulk-grid-edit-columns="productBulkEditColumns"\n                        @edit-items="onBulkEditItems"\n                        @modal-close="showBulkEditModal = false"\n                    >\n                        \n                        {% block sw_product_list_bulk_edit_grid_columns_name %}\n                        <template #column-name="{ item }">\n                            <router-link\n                                :to="{ name: \'sw.product.detail\', params: { id: item.id } }"\n                                target="_blank"\n                                rel="noreferrer noopener"\n                            >\n                                {{ item.translated ? item.translated.name : item.name }}\n                            </router-link>\n                        </template>\n                        {% endblock %}\n\n                        \n                        {% block sw_product_list_bulk_edit_grid_columns_active %}\n                        <template #column-active="{ item }">\n                            <sw-icon\n                                small\n                                :name="item.active ? \'regular-checkmark-xs\' : \'regular-times-s\'"\n                                :color="item.active ? \'#37d046\' : \'#de294c\'"\n                            />\n                        </template>\n                        {% endblock %}\n\n                        \n                        {% block sw_product_list_bulk_edit_grid_columns_price %}\n                        <template\n                            v-for="currency in currencies"\n                            #[`column-price-${currency.isoCode}`]="{ item }"\n                        >\n                            {{ currencyFilter(getCurrencyPriceByCurrencyId(currency.id, item.price).gross, currency.isoCode) }}\n                        </template>\n                        {% endblock %}\n\n                        \n                        {% block sw_product_list_bulk_edit_grid_columns_stock %}\n                        <template #column-stock="{ item }">\n                            {{ item.stock }}\n                            <sw-color-badge :variant="stockColorVariantFilter(item.stock)" />\n                        </template>\n                        {% endblock %}\n                    </sw-bulk-edit-modal>\n                </template>\n                {% endblock %}\n            </sw-entity-listing>\n\n            {% endblock %}\n\n            \n            {% block sw_product_list_empty_state %}\n            <template v-if="!isLoading && !total">\n                <sw-empty-state\n                    v-if="filterCriteria.length || isValidTerm(term)"\n                    :title="$tc(\'sw-empty-state.messageNoResultTitle\')"\n                >\n                    <template #icon>\n                        <img\n                            :src="assetFilter(\'/administration/static/img/empty-states/products-empty-state.svg\')"\n                            :alt="$tc(\'sw-empty-state.messageNoResultTitle\')"\n                        >\n                    </template>\n\n                    <template #default>\n                        {{ $tc(\'sw-empty-state.messageNoResultSublineBefore\') }}\n                        <router-link\n                            class="sw-empty-state__description-link"\n                            :to="{ name: \'sw.profile.index.searchPreferences\' }"\n                        >\n                            {{ $tc(\'sw-empty-state.messageNoResultSublineLink\') }}\n                        </router-link>\n                        {{ $tc(\'sw-empty-state.messageNoResultSublineAfter\') }}\n                    </template>\n                </sw-empty-state>\n                <sw-empty-state\n                    v-else\n                    :title="$tc(\'sw-product.list.messageEmpty\')"\n                >\n                    <template #icon>\n                        <img\n                            :src="assetFilter(\'/administration/static/img/empty-states/products-empty-state.svg\')"\n                            :alt="$tc(\'sw-product.list.messageEmpty\')"\n                        >\n                    </template>\n                </sw-empty-state>\n            </template>\n            {% endblock %}\n\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_product_list_content_clone_modal %}\n        <sw-product-clone-modal\n            v-if="cloning"\n            :product="product"\n            @clone-finish="onDuplicateFinish"\n        />\n        {% endblock %}\n\n        \n        {% block sw_product_list_content_variant_modal %}\n        <sw-product-variant-modal\n            v-if="showVariantModal"\n            :product-entity="productEntityVariantModal"\n            @modal-close="closeVariantModal"\n        />\n        {% endblock %}\n    </template>\n\n    \n    {% block sw_product_list_sidebar %}\n    <template #sidebar>\n        <sw-sidebar>\n            \n            {% block sw_product_list_sidebar_refresh %}\n            <sw-sidebar-item\n                icon="regular-undo"\n                :title="$tc(\'sw-product.list.titleSidebarItemRefresh\')"\n                @click="onRefresh"\n            />\n            {% endblock %}\n\n            <sw-sidebar-filter-panel\n                entity="product"\n                :store-key="storeKey"\n                :active-filter-number="activeFilterNumber"\n                :filters="listFilters"\n                :defaults="defaultFilters"\n                @criteria-changed="updateCriteria"\n            />\n        </sw-sidebar>\n    </template>\n    {% endblock %}\n</sw-page>\n{% endblock %}\n',inject:["repositoryFactory","numberRangeService","acl","filterFactory"],mixins:[l.getByName("notification"),l.getByName("listing"),l.getByName("placeholder")],data(){return{products:null,currencies:[],sortBy:"productNumber",sortDirection:"DESC",naturalSorting:!1,isLoading:!1,isBulkLoading:!1,total:0,product:null,cloning:!1,productEntityVariantModal:!1,filterCriteria:[],defaultFilters:["active-filter","product-without-images-filter","release-date-filter","stock-filter","price-filter","manufacturer-filter","visibilities-filter","categories-filter","sales-filter","tags-filter","product-states-filter"],storeKey:"grid.filter.product",activeFilterNumber:0,showBulkEditModal:!1,searchConfigEntity:"product"}},metaInfo(){return{title:this.$createTitle()}},computed:{productRepository(){return this.repositoryFactory.create("product")},productColumns(){return this.getProductColumns()},currencyRepository(){return this.repositoryFactory.create("currency")},currenciesColumns(){return this.currencies.sort((t,e)=>e.isSystemDefault?1:-1).map(t=>({property:`price-${t.isoCode}`,dataIndex:`price.${t.id}`,label:`${t.name}`,routerLink:"sw.product.detail",allowResize:!0,currencyId:t.id,visible:t.isSystemDefault,align:"right",useCustomSort:!0}))},productCriteria(){let t=new r(this.page,this.limit);return t.setTerm(this.term),t.addSorting(r.sort(this.sortBy,this.sortDirection,this.naturalSorting)),t.addAssociation("cover"),t.addAssociation("manufacturer"),this.filterCriteria.forEach(e=>{t.addFilter(e)}),t},currencyCriteria(){return new r(1,500)},showVariantModal(){return!!this.productEntityVariantModal},listFilterOptions(){return{"active-filter":{property:"active",label:this.$tc("sw-product.filters.activeFilter.label"),placeholder:this.$tc("sw-product.filters.activeFilter.placeholder")},"stock-filter":{property:"stock",label:this.$tc("sw-product.filters.stockFilter.label"),numberType:"int",step:1,min:0,fromPlaceholder:this.$tc("sw-product.filters.fromPlaceholder"),toPlaceholder:this.$tc("sw-product.filters.toPlaceholder")},"product-without-images-filter":{property:"media",label:this.$tc("sw-product.filters.imagesFilter.label"),placeholder:this.$tc("sw-product.filters.imagesFilter.placeholder"),optionHasCriteria:this.$tc("sw-product.filters.imagesFilter.textHasCriteria"),optionNoCriteria:this.$tc("sw-product.filters.imagesFilter.textNoCriteria")},"manufacturer-filter":{property:"manufacturer",label:this.$tc("sw-product.filters.manufacturerFilter.label"),placeholder:this.$tc("sw-product.filters.manufacturerFilter.placeholder")},"visibilities-filter":{property:"visibilities.salesChannel",label:this.$tc("sw-product.filters.salesChannelsFilter.label"),placeholder:this.$tc("sw-product.filters.salesChannelsFilter.placeholder")},"categories-filter":{property:"categories",label:this.$tc("sw-product.filters.categoriesFilter.label"),placeholder:this.$tc("sw-product.filters.categoriesFilter.placeholder"),displayPath:!0},"sales-filter":{property:"sales",label:this.$tc("sw-product.filters.salesFilter.label"),digits:20,min:0,fromPlaceholder:this.$tc("sw-product.filters.fromPlaceholder"),toPlaceholder:this.$tc("sw-product.filters.toPlaceholder")},"price-filter":{property:"price",label:this.$tc("sw-product.filters.priceFilter.label"),digits:20,min:0,fromPlaceholder:this.$tc("sw-product.filters.fromPlaceholder"),toPlaceholder:this.$tc("sw-product.filters.toPlaceholder")},"tags-filter":{property:"tags",label:this.$tc("sw-product.filters.tagsFilter.label"),placeholder:this.$tc("sw-product.filters.tagsFilter.placeholder")},"product-states-filter":{property:"states",label:this.$tc("sw-product.filters.productStatesFilter.label"),placeholder:this.$tc("sw-product.filters.productStatesFilter.placeholder"),type:"multi-select-filter",options:[{label:this.$tc("sw-product.filters.productStatesFilter.options.physical"),value:"is-physical"},{label:this.$tc("sw-product.filters.productStatesFilter.options.digital"),value:"is-download"}]},"release-date-filter":{property:"releaseDate",label:this.$tc("sw-product.filters.releaseDateFilter.label"),dateType:"datetime-local",fromFieldLabel:null,toFieldLabel:null,showTimeframe:!0}}},listFilters(){return this.filterFactory.create("product",this.listFilterOptions)},productBulkEditColumns(){return this.productColumns.map(t=>{let{inlineEdit:e,...n}=t;return n})},assetFilter(){return Shopware.Filter.getByName("asset")},currencyFilter(){return Shopware.Filter.getByName("currency")},dateFilter(){return Shopware.Filter.getByName("date")},stockColorVariantFilter(){return Shopware.Filter.getByName("stockColorVariant")}},watch:{productCriteria:{handler(){this.getList()},deep:!0}},beforeRouteLeave(t,e,n){"sw.product.detail.base"===t.name&&this.showVariantModal&&this.closeVariantModal(),this.$nextTick(()=>{n()})},methods:{async getList(){this.isLoading=!0;let t=await Shopware.Service("filterService").mergeWithStoredFilters(this.storeKey,this.productCriteria),e=s(t=await this.addQueryScores(this.term,t));if(t.addFilter(r.equals("product.parentId",null)),e.addFilter(r.not("AND",[r.equals("product.parentId",null)])),this.activeFilterNumber=t.filters.length-1,!this.entitySearchable){this.isLoading=!1,this.total=0;return}this.freshSearchTerm&&t.resetSorting();try{if(this.term){let n=await this.productRepository.search(e);if(n.length>0){let e=[];n.forEach(t=>{e.push(t.parentId)}),t.addQuery(r.equalsAny("id",e),i.pp.HIGH_SEARCH_RANKING)}}let n=await Promise.all([this.productRepository.search(t),this.currencyRepository.search(this.currencyCriteria)]),l=n[0],s=n[1];this.total=l.total,this.products=l,this.currencies=s,this.isLoading=!1,this.selection={}}catch{this.isLoading=!1}},onInlineEditSave(t,e){let n=e.name||this.placeholder(e,"name");return t.then(()=>{this.createNotificationSuccess({message:this.$tc("sw-product.list.messageSaveSuccess",0,{name:n})})}).catch(()=>{this.getList(),this.createNotificationError({message:this.$tc("global.notification.notificationSaveErrorMessageRequiredFieldsInvalid")})})},onInlineEditCancel(t){t.discardChanges()},updateTotal({total:t}){this.total=t},onChangeLanguage(t){Shopware.State.commit("context/setApiLanguageId",t),this.getList()},updateCriteria(t){this.page=1,this.filterCriteria=t},getCurrencyPriceByCurrencyId(t,e){return e.find(e=>e.currencyId===t)||{currencyId:null,gross:null,linked:!0,net:null}},getProductColumns(){return[{property:"name",label:this.$tc("sw-product.list.columnName"),routerLink:"sw.product.detail",inlineEdit:"string",allowResize:!0,primary:!0},{property:"productNumber",naturalSorting:!0,label:this.$tc("sw-product.list.columnProductNumber"),align:"right",allowResize:!0},{property:"manufacturer.name",label:this.$tc("sw-product.list.columnManufacturer"),allowResize:!0},{property:"active",label:this.$tc("sw-product.list.columnActive"),inlineEdit:"boolean",allowResize:!0,align:"center"},{property:"sales",label:this.$tc("sw-product.list.columnSales"),allowResize:!0,align:"right"},...this.currenciesColumns,{property:"stock",label:this.$tc("sw-product.list.columnInStock"),inlineEdit:"number",allowResize:!0,align:"right"},{property:"availableStock",label:this.$tc("sw-product.list.columnAvailableStock"),allowResize:!0,align:"right"},{property:"createdAt",label:this.$tc("sw-product.list.columnCreatedAt"),allowResize:!0,visible:!1},{property:"updatedAt",label:this.$tc("sw-product.list.columnUpdatedAt"),allowResize:!0,visible:!1}]},onDuplicate(t){this.product=t,this.cloning=!0},onDuplicateFinish(t){this.cloning=!1,this.product=null,this.$nextTick(()=>{this.$router.push({name:"sw.product.detail",params:{id:t.id}})})},onColumnSort(t){this.onSortColumn(t)},productHasVariants(t){let e=t.childCount;return null!==e&&e>0},productIsDigital(t){return t.states&&t.states.includes("is-download")},openVariantModal(t){this.productEntityVariantModal=t},closeVariantModal(){this.productEntityVariantModal=null},onBulkEditItems(){let t="0",e=Object.values(this.selection).filter(t=>t.states.includes("is-download"));e.length>0&&(t=e.filter(t=>t.isCloseout).length!==e.length?"1":"2"),this.$router.push({name:"sw.bulk.edit.product",params:{parentId:"null",includesDigital:t}})},onBulkEditModalOpen(){this.showBulkEditModal=!0},onBulkEditModalClose(){this.showBulkEditModal=!1}}}},30920:function(t,e,n){var i=n(84229);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals),n(45346).Z("1e0fc769",i,!0,{})}}]);