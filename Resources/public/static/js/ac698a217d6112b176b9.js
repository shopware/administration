(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[47477],{130367:function(){},847477:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return d}}),s(618989);let{Criteria:t}=Shopware.Data,{Component:o,Mixin:l}=Shopware,{mapPropertyErrors:r,mapGetters:i,mapState:c}=o.getComponentHelper();var d={template:'\n{% block sw_product_cross_selling_form %}\n<div class="product-detail-cross-selling-form">\n    \n    {% block sw_prduct_cross_selling_form_card %}\n    <sw-card\n        :title="crossSelling.name"\n        position-identifier="sw-product-cross-selling-form"\n    >\n        <div\n            v-if="!isLoading && crossSelling"\n            class="product-detail-cross-selling-form__card-container"\n        >\n            \n            {% block sw_prduct_cross_selling_form_context_menu %}\n            <div class="sw-product-detail-cross-selling__context-button">\n                <sw-context-button>\n                    \n                    {% block sw_product_cross_selling_form_context_button_delete %}\n                    <sw-context-menu-item\n                        variant="danger"\n                        class="sw-product-cross_selling-context-item__delete-action"\n                        :disabled="!allowEdit"\n                        @click="onShowDeleteModal"\n                    >\n                        {{ $tc(\'sw-product.crossselling.buttonDeleteCrossSelling\') }}\n                    </sw-context-menu-item>\n                    {% endblock %}\n                </sw-context-button>\n            </div>\n            {% endblock %}\n\n            <sw-container\n                columns="2fr 1fr"\n                gap="0px 30px"\n                align="start"\n            >\n                \n                {% block sw_prduct_cross_selling_form_title_field %}\n                <sw-text-field\n                    v-model:value="crossSelling.name"\n                    name="sw-field--crossSelling-name"\n                    :label="$tc(\'sw-product.crossselling.inputCrossSellingTitle\')"\n                    required\n                    :placeholder="placeholder(crossSelling, \'name\', $tc(\'sw-product.crossselling.inputCrossSellingTitlePlaceholder\'))"\n                    :error="crossSellingNameError"\n                    :disabled="!allowEdit"\n                />\n                {% endblock %}\n                \n                {% block sw_prduct_cross_selling_form_active_field %}\n                <sw-switch-field\n                    v-model:value="crossSelling.active"\n                    class="sw-product-detail-cross-selling__active-switch"\n                    :label="$tc(\'sw-product.crossselling.inputCrossSellingActive\')"\n                    :disabled="!allowEdit"\n                    name="sw-field--crossSelling-active"\n                />\n                {% endblock %}\n            </sw-container>\n\n            <sw-container\n                columns="2fr 1fr"\n                gap="0px 30px"\n            >\n                \n                {% block sw_prduct_cross_selling_form_type %}\n                <sw-select-field\n                    v-model:value="crossSelling.type"\n                    :label="$tc(\'sw-product.crossselling.inputCrossSellingType\')"\n                    :error="crossSellingTypeError"\n                    :disabled="!allowEdit"\n                    @update:value="onTypeChanged"\n                >\n                    <option\n                        v-for="option in crossSellingTypes"\n                        :key="option.value"\n                        :value="option.value"\n                    >\n                        {{ option.label }}\n                    </option>\n                </sw-select-field>\n                {% endblock %}\n                \n                {% block sw_prduct_cross_selling_form_position_field %}\n                <sw-number-field\n                    v-model:value="crossSelling.position"\n                    number-type="int"\n                    :min="1"\n                    :label="$tc(\'sw-product.crossselling.inputCrossSellingPosition\')"\n                    :error="crossSellingPositionError"\n                    :placeholder="$tc(\'sw-product.crossselling.inputCrossSellingPositionPlaceholder\')"\n                    :disabled="!allowEdit"\n                />\n                {% endblock %}\n            </sw-container>\n\n            <div v-if="!useManualAssignment">\n                \n                {% block sw_prduct_cross_selling_form_product_stream_field %}\n                <sw-entity-single-select\n                    id="sw-field--crossSelling-product-group"\n                    v-model:value="crossSelling.productStreamId"\n                    entity="product_stream"\n                    class="sw-select-cross-selling__select-product-stream"\n                    :label="$tc(\'sw-product.crossselling.inputCrossSellingProductStream\')"\n                    :placeholder="$tc(\'sw-product.crossselling.inputCrossSellingProductStreamPlaceholder\')"\n                    :disabled="!allowEdit"\n                    show-clearable-button\n                />\n                {% endblock %}\n\n                <sw-container\n                    columns="1fr 1fr"\n                    gap="0px 30px"\n                >\n                    \n                    {% block sw_prduct_cross_selling_form_sort_field %}\n                    <sw-select-field\n                        :label="$tc(\'sw-product.crossselling.inputCrossSellingSorting\')"\n                        :value="sortingConCat"\n                        :disabled="!allowEdit"\n                        @update:value="onSortingChanged"\n                    >\n                        <option\n                            v-for="option in sortingTypes"\n                            :key="option.value"\n                            :value="option.value"\n                        >\n                            {{ option.label }}\n                        </option>\n                    </sw-select-field>\n                    {% endblock %}\n\n                    \n                    {% block sw_prduct_cross_selling_form_limit_field %}\n                    <sw-number-field\n                        v-model:value="crossSelling.limit"\n                        number-type="int"\n                        :label="$tc(\'sw-product.crossselling.inputCrossSellingLimit\')"\n                        :disabled="!allowEdit"\n                    />\n                    {% endblock %}\n                </sw-container>\n\n                \n                {% block sw_prduct_cross_selling_form_preview_link %}\n                <sw-container\n                    columns="1fr"\n                    justify="end"\n                    class="sw-product-cross-selling-form__links"\n                >\n                    <a\n                        class="sw-card__quick-link"\n                        :class="{ \'is--disabled\': previewDisabled }"\n                        role="button"\n                        tabindex="0"\n                        @click="openModalPreview"\n                        @keydown.enter="openModalPreview"\n                    >\n                        {{ $tc(\'sw-product.crossselling.linkOpenStreamPreview\') }}\n                        <sw-icon\n                            name="regular-long-arrow-right"\n                            small\n                        />\n                    </a>\n                </sw-container>\n                {% endblock %}\n            </div>\n\n            \n            {% block sw_product_detail_cross_selling_assignment %}\n            <sw-product-cross-selling-assignment\n                v-else\n                :assigned-products="crossSelling.assignedProducts"\n                :cross-selling-id="crossSelling.id"\n                :searchable-fields="[\'name\', \'productNumber\']"\n                :allow-edit="allowEdit"\n            />\n            {% endblock %}\n\n            \n            {% block sw_product_detail_cross_selling_modal_preview_modal %}\n            <sw-product-stream-modal-preview\n                v-if="showModalPreview"\n                ref="modalPreview"\n                :filters="productStreamFilterTree"\n                @modal-close="closeModalPreview"\n            />\n            {% endblock %}\n        </div>\n    </sw-card>\n    {% endblock %}\n\n    \n    {% block sw_product_detail_cross_selling_form_modal_delete %}\n    <sw-modal\n        v-if="showDeleteModal"\n        variant="small"\n        :title="$tc(\'sw-product.crossselling.deleteConfirmTitle\')"\n        class="sw-product-detail-cross-selling__delete-modal"\n        @modal-close="onCloseDeleteModal"\n    >\n        \n        {% block sw_product_detail_cross_selling_form_delete_text %}\n        <p>\n            {{ $tc(\'sw-product.crossselling.deleteConfirmText\') }}\n        </p>\n        {% endblock %}\n\n        \n        {% block sw_product_detail_cross_selling_form_modal_delete_footer %}\n        <template #modal-footer>\n            \n            {% block sw_product_detail_cross_selling_modal_delete_action_cancel %}\n            <sw-button\n                size="small"\n                @click="onCloseDeleteModal"\n            >\n                {{ $tc(\'sw-product.crossselling.deleteButtonCancel\') }}\n            </sw-button>\n            {% endblock %}\n\n            \n            {% block sw_product_detail_cross_selling_form_modal_delete_action_delete %}\n            <sw-button\n                class="sw-product-detail-cross-selling__delete-button"\n                size="small"\n                variant="danger"\n                @click="onConfirmDelete"\n            >\n                {{ $tc(\'sw-product.crossselling.deleteButtonDelete\') }}\n            </sw-button>\n            {% endblock %}\n        </template>\n        {% endblock %}\n    </sw-modal>\n    {% endblock %}\n\n    \n    {% block sw_product_cross_selling_form_condition_tree_invisibly %}\n    <sw-condition-tree\n        v-if="productStreamFilterRepository"\n        v-show="false"\n        association-field="productStreamId"\n        child-association-field="queries"\n        :initial-conditions="productStreamFilter"\n        :condition-repository="productStreamFilterRepository"\n        :condition-data-provider-service="productStreamConditionService"\n        :association-value="associationValue"\n        :root-condition="null"\n        @conditions-changed="updateProductStreamFilterTree"\n    />\n    {% endblock %}\n</div>\n{% endblock %}\n',compatConfig:Shopware.compatConfig,inject:["repositoryFactory","productStreamConditionService"],provide(){return{productCustomFields:{}}},mixins:[l.getByName("placeholder")],props:{crossSelling:{type:Object,required:!0},allowEdit:{type:Boolean,required:!1,default:!0}},data(){return{showDeleteModal:!1,showModalPreview:!1,productStream:null,productStreamFilter:[],productStreamFilterTree:null,optionSearchTerm:"",useManualAssignment:!1,sortBy:"name",sortDirection:"ASC",assignmentKey:0}},computed:{...r("crossSelling",["name","type","position"]),...c("swProductDetail",["product"]),...i("swProductDetail",["isLoading"]),productCrossSellingRepository(){return this.repositoryFactory.create("product_cross_selling")},productStreamRepository(){return this.repositoryFactory.create("product_stream")},productStreamFilterRepository(){if(!this.productStream||!this.productStream.filters)return null;let{entity:e,source:n}=this.productStream.filters;return this.repositoryFactory.create(e,n)},productStreamFilterCriteria(){let e=new t(1,25);return e.addFilter(t.equals("productStreamId",this.crossSelling.productStreamId)),e},crossSellingAssigmentRepository(){return this.repositoryFactory.create("product_cross_selling_assigned_products")},sortingTypes(){return[{label:this.$tc("sw-product.crossselling.priceDescendingSortingType"),value:"cheapestPrice:DESC"},{label:this.$tc("sw-product.crossselling.priceAscendingSortingType"),value:"cheapestPrice:ASC"},{label:this.$tc("sw-product.crossselling.nameSortingType"),value:"name:ASC"},{label:this.$tc("sw-product.crossselling.releaseDateDescendingSortingType"),value:"releaseDate:DESC"},{label:this.$tc("sw-product.crossselling.releaseDateAscendingSortingType"),value:"releaseDate:ASC"}]},crossSellingTypes(){return[{label:this.$tc("sw-product.crossselling.productStreamType"),value:"productStream"},{label:this.$tc("sw-product.crossselling.productListType"),value:"productList"}]},previewDisabled(){return!this.productStream},sortingConCat(){return`${this.crossSelling.sortBy}:${this.crossSelling.sortDirection}`},disablePositioning(){return!!this.term||"position"!==this.sortBy},associationValue(){return this.crossSelling?.productStreamId||""}},watch:{"crossSelling.productStreamId"(){this.useManualAssignment||this.loadStreamPreview()}},created(){this.createdComponent()},methods:{createdComponent(){this.useManualAssignment="productList"===this.crossSelling.type,this.useManualAssignment||null===this.crossSelling.productStreamId||this.loadStreamPreview()},onShowDeleteModal(){this.showDeleteModal=!0},onCloseDeleteModal(){this.showDeleteModal=!1},onConfirmDelete(){this.onCloseDeleteModal(),this.$nextTick(()=>{this.product.crossSellings.remove(this.crossSelling.id)})},openModalPreview(){this.previewDisabled||(this.showModalPreview=!0)},closeModalPreview(){this.showModalPreview=!1},loadStreamPreview(){this.productStreamRepository.get(this.crossSelling.productStreamId).then(e=>{this.productStream=e,this.getProductStreamFilter()})},getProductStreamFilter(){return null===this.productStreamFilterRepository?[]:this.productStreamFilterRepository.search(this.productStreamFilterCriteria).then(e=>{this.productStreamFilter=e})},updateProductStreamFilterTree({conditions:e}){this.productStreamFilterTree=e},onSortingChanged(e){[this.crossSelling.sortBy,this.crossSelling.sortDirection]=e.split(":")},onTypeChanged(e){this.useManualAssignment="productList"===e}}}},618989:function(e,n,s){var t=s(130367);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.id,t,""]]),t.locals&&(e.exports=t.locals),s(745346).Z("2b1c8724",t,!0,{})}}]);