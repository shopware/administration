(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[386],{"+MuI":function(e,n,r){},"2m9a":function(e,n,r){"use strict";r.r(n);var s=r("7yzw"),c=r.n(s),a=r("92Mt"),t=r.n(a),i=(r("hUeX"),Shopware),l=i.Module,o=i.State,f=i.Mixin;n.default={template:'\n{% block sw_profile_index_search_preferences %}\n<div class="sw-profile-index-search-preferences">\n    <sw-card\n        v-if="adminEsEnable"\n        class="sw-card-elasticsearch-enabled"\n        position-identifier="sw-card-elasticsearch-enabled"\n    >\n        <sw-alert\n            class="sw-card-elasticsearch-enabled__alert"\n            variant="info"\n            :title="$tc(\'sw-profile.tabSearchPreferences.alert_elasticsearch.title\')"\n        >\n            {{ $tc(\'sw-profile.tabSearchPreferences.alert_elasticsearch.text\') }}\n        </sw-alert>\n    </sw-card>\n\n    \n    {% block sw_profile_index_search_preferences_searchable_elements %}\n    <sw-card\n        class="sw-profile-index-search-preferences-searchable-elements"\n        position-identifier="sw-profile-index-search-preferences"\n        :title="$tc(\'sw-profile.tabSearchPreferences.cardSearchableElements.title\')"\n        :is-loading="isLoading"\n    >\n        \n        {% block sw_profile_index_search_preferences_searchable_elements_content %}\n        <sw-container\n            v-if="searchPreferences.length > 0"\n            rows="auto auto auto"\n            gap="24px"\n        >\n            \n            {% block sw_profile_index_search_preferences_searchable_elements_header %}\n            <p>{{ $tc(\'sw-profile.tabSearchPreferences.cardSearchableElements.description\') }}</p>\n\n            <sw-container\n                columns="auto auto auto 1fr"\n                gap="8px"\n            >\n                \n                {% block sw_profile_index_search_preferences_searchable_elements_button_select %}\n                <sw-button\n                    class="sw-profile-index-search-preferences-searchable-elements__button-select-all"\n                    @click="onSelect(true)"\n                >\n                    {{ $tc(\'sw-profile.tabSearchPreferences.cardSearchableElements.buttonSelect\') }}\n                </sw-button>\n                {% endblock %}\n\n                \n                {% block sw_profile_index_search_preferences_searchable_elements_button_deselect %}\n                <sw-button\n                    class="sw-profile-index-search-preferences-searchable-elements__button-deselect-all"\n                    @click="onSelect(false)"\n                >\n                    {{ $tc(\'sw-profile.tabSearchPreferences.cardSearchableElements.buttonDeselect\') }}\n                </sw-button>\n                {% endblock %}\n\n                \n                {% block sw_profile_index_search_preferences_searchable_elements_button_reset %}\n                <sw-button\n                    class="sw-profile-index-search-preferences-searchable-elements__button-reset-to-default"\n                    @click="onReset"\n                >\n                    {{ $tc(\'sw-profile.tabSearchPreferences.cardSearchableElements.buttonReset\') }}\n                </sw-button>\n                {% endblock %}\n            </sw-container>\n            {% endblock %}\n\n            \n            {% block sw_profile_index_search_preferences_searchable_elements_body %}\n            <div class="sw-profile-index-search-preferences-searchable-elements__entity-container">\n                <ul\n                    v-for="searchPreference in searchPreferences"\n                    :key="searchPreference.entityName"\n                    class="sw-profile-index-search-preferences-searchable-elements__entity"\n                >\n                    <li class="sw-profile-index-search-preferences-searchable-elements__entity-field">\n                        \n                        <sw-checkbox-field\n                            {% if VUE3 %}\n                            v-model:value="searchPreference._searchable"\n                            {% else %}\n                            v-model="searchPreference._searchable"\n                            {% endif %}\n                            :label="getModuleTitle(searchPreference.entityName)"\n                            {% if VUE3 %}\n                            @update:value="onChangeSearchPreference(searchPreference)"\n                            {% else %}\n                            @change="onChangeSearchPreference(searchPreference)"\n                            {% endif %}\n                            name="sw-field--searchPreference-_searchable"\n                        />\n                        <ul class="sw-profile-index-search-preferences-searchable-elements__entity">\n                            <li\n                                v-for="field in searchPreference.fields"\n                                :key="field.fieldName"\n                                class="sw-profile-index-search-preferences-searchable-elements__entity-field"\n                            >\n                                <sw-checkbox-field\n                                    {% if VUE3 %}\n                                    v-model:value="field._searchable"\n                                    {% else %}\n                                    v-model="field._searchable"\n                                    {% endif %}\n                                    name="sw-field--field-_searchable"\n                                    :label="$tc(`sw-profile.tabSearchPreferences.modules.${searchPreference.entityName}.${field.fieldName}`)"\n                                    :disabled="adminEsEnable || !searchPreference._searchable"\n                                />\n                            </li>\n                        </ul>\n                    </li>\n                </ul>\n            </div>\n            {% endblock %}\n        </sw-container>\n        {% endblock %}\n    </sw-card>\n    {% endblock %}\n</div>\n{% endblock %}\n',inject:["searchPreferencesService"],mixins:[f.getByName("notification")],data:function(){return{isLoading:!1}},computed:{searchPreferences:{get:function(){return o.get("swProfile").searchPreferences},set:function(e){o.commit("swProfile/setSearchPreferences",e)}},userSearchPreferences:{get:function(){return o.get("swProfile").userSearchPreferences},set:function(e){o.commit("swProfile/setUserSearchPreferences",e)}},defaultSearchPreferences:function(){var e=this,n=this.searchPreferencesService.getDefaultSearchPreferences();return null===this.userSearchPreferences?n:n.reduce((function(n,r){var s=e.userSearchPreferences.find((function(e){return Object.keys(e)[0]===Object.keys(r)[0]}));return n.push(s||r),n}),[])},adminEsEnable:function(){var e;return null!==(e=Shopware.Context.app.adminEsEnable)&&void 0!==e&&e}},created:function(){this.createdComponent()},beforeDestroy:function(){this.beforeDestroyComponent()},methods:{createdComponent:function(){var e=this;return c()(t.a.mark((function n(){return t.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getDataSource();case 2:e.updateDataSource(),e.addEventListeners();case 4:case"end":return n.stop()}}),n)})))()},beforeDestroyComponent:function(){this.removeEventListeners()},getDataSource:function(){var e=this;return c()(t.a.mark((function n(){return t.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isLoading=!0,n.prev=1,n.next=4,e.searchPreferencesService.getUserSearchPreferences();case 4:e.userSearchPreferences=n.sent,e.searchPreferences=e.searchPreferencesService.processSearchPreferences(e.defaultSearchPreferences),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(1),e.createNotificationError({message:n.t0.message}),e.searchPreferences=[],e.userSearchPreferences=null;case 13:return n.prev=13,e.isLoading=!1,n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,8,13,16]])})))()},addEventListeners:function(){this.$root.$on("sw-search-preferences-modal-close",this.getDataSource)},removeEventListeners:function(){this.$root.$off("sw-search-preferences-modal-close",this.getDataSource)},updateDataSource:function(){this.adminEsEnable&&this.searchPreferences.forEach((function(e){e.fields.forEach((function(e){e._searchable=!0}))}))},getModuleTitle:function(e){var n=l.getModuleByEntityName(e);return this.$tc(null==n?void 0:n.manifest.title)},onChangeSearchPreference:function(e){e._searchable&&e.fields.every((function(e){return!e._searchable}))&&e.fields.forEach((function(e){e._searchable=!0}))},onSelect:function(e){var n=this;this.searchPreferences.forEach((function(r){r._searchable=e,n.adminEsEnable||r.fields.forEach((function(n){n._searchable=e}))}))},onReset:function(){var e=this,n=this.searchPreferencesService.getDefaultSearchPreferences(),r=this.searchPreferencesService.processSearchPreferences(n);this.searchPreferences.forEach((function(n,s){r.forEach((function(r){r.entityName===n.entityName&&e.resetSearchPreference(r,e.searchPreferences[s])}))}))},resetSearchPreference:function(e,n){n._searchable=e._searchable,this.adminEsEnable||(n.fields=n.fields.map((function(n){return e.fields.find((function(e){return e.fieldName===n.fieldName}))||n})))}}}},hUeX:function(e,n,r){var s=r("+MuI");s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,r("P8hj").default)("8499b33e",s,!0,{})}}]);
//# sourceMappingURL=66058a50fa35b6a80e0a.js.map