(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[548],{"6t7H":function(t,e,n){"use strict";n.r(e);var o=n("J58c"),s=n.n(o);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var i=Shopware,l=i.Component,c=i.Mixin,d=Shopware.Data.Criteria,f=l.getComponentHelper().mapState;e.default={template:'\n{% block sw_flow_set_order_state_modal %}\n<sw-modal\n    class="sw-flow-set-order-state-modal"\n    :title="$tc(\'sw-flow.modals.status.titleSetStatus\')"\n    :closable="false"\n    @modal-close="onClose"\n>\n    \n    {% block sw_flow_set_order_state_modal_content %}\n    \n    {% block sw_flow_set_order_state_modal_payment_status %}\n    <sw-select-field\n        v-model="config.order_transaction"\n        class="sw-flow-set-order-state-modal__payment-status"\n        :options="paymentOptions"\n        :label="$tc(\'sw-flow.modals.status.labelPaymentStatus\')"\n        :placeholder="$tc(\'sw-flow.modals.status.placeholderPaymentStatus\')"\n    />\n    {% endblock %}\n\n    \n    {% block sw_flow_set_order_state_modal_delivery_status %}\n    <sw-select-field\n        v-model="config.order_delivery"\n        class="sw-flow-set-order-state-modal__delivery-status"\n        :options="deliveryOptions"\n        :label="$tc(\'sw-flow.modals.status.labelDeliveryStatus\')"\n        :placeholder="$tc(\'sw-flow.modals.status.placeholderDeliveryStatus\')"\n    />\n    {% endblock %}\n\n    \n    {% block sw_flow_set_order_state_modal_order_status %}\n    <sw-select-field\n        v-model="config.order"\n        class="sw-flow-set-order-state-modal__order-status"\n        :options="orderOptions"\n        :label="$tc(\'sw-flow.modals.status.labelOrderStatus\')"\n        :placeholder="$tc(\'sw-flow.modals.status.placeholderOrderStatus\')"\n    />\n    {% endblock %}\n\n    \n    {% block sw_flow_set_order_state_modal_force_transition %}\n    <sw-checkbox-field\n        v-model="config.force_transition"\n        class="sw-flow-set-order-state-modal__force-transition"\n        :label="$tc(\'sw-flow.modals.status.forceTransition\')"\n        :help-text="$tc(\'sw-flow.modals.status.forceTransitionHelpText\')"\n    />\n    {% endblock %}\n    {% endblock %}\n\n    \n    {% block sw_flow_set_order_state_modal_footer %}\n    <template #modal-footer>\n        \n        {% block sw_flow_set_order_state_modal_footer_cancel_button %}\n        <sw-button\n            class="sw-flow-set-order-state-modal__cancel-button"\n            size="small"\n            @click="onClose"\n        >\n            {{ $tc(\'global.default.cancel\') }}\n        </sw-button>\n        {% endblock %}\n\n        \n        {% block sw_flow_set_order_state_modal_footer_save_button %}\n        <sw-button\n            class="sw-flow-set-order-state-modal__save-button"\n            variant="primary"\n            size="small"\n            @click="onAddAction"\n        >\n            {{ sequence.id\n                ? $tc(\'sw-flow.modals.buttonSaveAction\')\n                : $tc(\'sw-flow.modals.buttonAddAction\') }}\n        </sw-button>\n        {% endblock %}\n    </template>\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n',inject:["repositoryFactory"],mixins:[c.getByName("notification")],props:{sequence:{type:Object,required:!0}},data:function(){return{paymentOptions:[],deliveryOptions:[],orderOptions:[],config:{order:"",order_delivery:"",order_transaction:"",force_transition:!1}}},computed:r({stateMachineStateRepository:function(){return this.repositoryFactory.create("state_machine_state")},stateMachineStateCriteria:function(){var t=new d(1,null);return t.addSorting({field:"name",order:"ASC"}),t.addAssociation("stateMachine"),t.addFilter(d.equalsAny("state_machine_state.stateMachine.technicalName",["order.state","order_transaction.state","order_delivery.state"])),t}},f("swFlowState",["stateMachineState"])),created:function(){this.createdComponent()},methods:{createdComponent:function(){var t,e;this.config=null!==(t=this.sequence)&&void 0!==t&&t.config?r({},null===(e=this.sequence)||void 0===e?void 0:e.config):this.config,this.stateMachineState.length?this.generateOptions(this.stateMachineState):this.getAllStates()},getAllStates:function(){var t=this;return this.stateMachineStateRepository.search(this.stateMachineStateCriteria).then((function(e){t.generateOptions(e),Shopware.State.commit("swFlowState/setStateMachineState",e)}))},generateOptions:function(t){this.paymentOptions=this.buildTransitionOptions("order_transaction.state",t),this.deliveryOptions=this.buildTransitionOptions("order_delivery.state",t),this.orderOptions=this.buildTransitionOptions("order.state",t)},buildTransitionOptions:function(t,e){return e.filter((function(e){return e.stateMachine.technicalName===t})).map((function(t){return{id:t.technicalName,name:t.translated.name}}))},onClose:function(){this.$emit("modal-close")},onAddAction:function(){if(this.config.order||this.config.order_delivery||this.config.order_transaction){var t=r(r({},this.sequence),{},{config:this.config});this.$emit("process-finish",t)}else this.createNotificationError({message:this.$tc("sw-flow.modals.status.messageNoStatusError")})}}}}}]);