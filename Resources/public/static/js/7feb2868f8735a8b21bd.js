(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[435],{"2UPB":function(n,i,e){"use strict";e.r(i);var t=e("6lmj"),l=e.n(t),s=e("CsSd"),a=e.n(s);e("7OKR");function o(n,i){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);i&&(t=t.filter((function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),e.push.apply(e,t)}return e}var c=Shopware.Data.EntityCollection,r=Shopware.Utils.types.isEmpty,d=Shopware.Utils.object.cloneDeep;i.default={template:'\n{% block sw_settings_listing_default_sales_channel %}\n<div class="sw-settings-listing-default-sales-channel">\n    \n    {% block sw_settings_listing_default_sales_channel_loader %}\n    <sw-loader v-if="isLoading || isDefaultSalesChannelLoading" />\n    {% endblock %}\n\n    <template v-else>\n        \n        {% block sw_settings_listing_default_sales_channel_description %}\n        <p class="sw-settings-listing-default-sales-channel__description">\n            {{ $tc(\'sw-settings-listing.index.defaultSalesChannel.description\') }}\n        </p>\n        {% endblock %}\n\n        \n        {% block sw_settings_listing_default_sales_channel_select %}\n        <sw-entity-multi-id-select\n            {% if VUE3 %}\n            v-model:ids="configData[null][\'core.defaultSalesChannel.salesChannel\']"\n            {% else %}\n            v-model="configData[null][\'core.defaultSalesChannel.salesChannel\']"\n            {% endif %}\n            :repository="salesChannelRepository"\n            :label="$tc(\'sw-settings.system-config.labelSalesChannelSelect\')"\n            :placeholder="$tc(\'sw-product.visibility.placeholderVisibility\')"\n            {% if VUE3 %}\n            @update:ids="updateSalesChannel"\n            {% else %}\n            @change="updateSalesChannel"\n            {% endif %}\n        />\n        {% endblock %}\n\n        \n        {% block sw_settings_listing_default_sales_channeld_setting %}\n        <div class="sw-settings-listing-default-sales-channel__options-container">\n            \n            {% block sw_settings_listing_default_sales_channel_setting_active %}\n            <sw-switch-field\n                {% if VUE3 %}\n                v-model:value="configData[null][\'core.defaultSalesChannel.active\']"\n                {% else %}\n                v-model="configData[null][\'core.defaultSalesChannel.active\']"\n                {% endif %}\n                class="sw-settings-listing-default-sales-channel__active-switch"\n                :label="$tc(\'sw-product.settingsForm.labelActive\')"\n            />\n            {% endblock %}\n\n            \n            {% block sw_settings_listing_default_sales_channel_setting_visibility %}\n            <a\n                v-if="salesChannel.length > 0"\n                class="sw-settings-listing-default-sales-channel__quick-link"\n                role="button"\n                tabindex="0"\n                @click="displayAdvancedVisibility"\n                @keydown.enter="displayAdvancedVisibility"\n            >\n                {{ $tc(\'sw-settings-listing.index.defaultSalesChannel.linkAdvancedVisibility\') }}\n                <sw-icon\n                    class="sw-settings-listing-default-sales-channel__link-icon"\n                    name="regular-long-arrow-right"\n                    small\n                />\n            </a>\n            {% endblock %}\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_settings_listing_default_sales_channel_select_visibiliy_modal %}\n        <sw-modal\n            v-if="displayVisibilityDetail"\n            class="sw-settings-listing-default-sales-channel__visibility-modal"\n            :title="$tc(\'sw-product.visibility.textHeadline\')"\n            @modal-close="closeAdvancedVisibility"\n        >\n            <p>{{ $tc(\'sw-product.visibility.visibilityModalDescription\') }}</p>\n\n            <sw-settings-listing-visibility-detail\n                ref="visibilityConfig"\n                :config="visibilityConfig"\n            />\n\n            <template #modal-footer>\n                <sw-button\n                    variant="primary"\n                    size="small"\n                    @click="closeAdvancedVisibility"\n                >\n                    {{ $tc(\'sw-product.visibility.closeModal\') }}\n                </sw-button>\n            </template>\n        </sw-modal>\n        {% endblock %}\n    </template>\n</div>\n{% endblock %}\n',inject:["repositoryFactory","systemConfigApiService"],props:{isLoading:{type:Boolean,required:!1,default:function(){return!1}}},data:function(){return{isDefaultSalesChannelLoading:!1,displayVisibilityDetail:!1,configData:{null:{"core.defaultSalesChannel.active":!0,"core.defaultSalesChannel.salesChannel":[],"core.defaultSalesChannel.visibility":{}}},visibilityConfig:[]}},computed:{salesChannelRepository:function(){return this.repositoryFactory.create("sales_channel")},salesChannel:{get:function(){var n,i;return null===(n=this.configData)||void 0===n||null===(i=n.null)||void 0===i?void 0:i["core.defaultSalesChannel.salesChannel"]},set:function(n){this.configData.null["core.defaultSalesChannel.salesChannel"]=n}}},watch:{salesChannel:{handler:function(){var n=this;if(this.salesChannel.length){var i=this.salesChannel.map((function(n){return n.id}));this.visibilityConfig=this.visibilityConfig.filter((function(n){return i.includes(n.id)}));var e=new Map;this.visibilityConfig.forEach((function(n){return e.set(n.id,function(n){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?o(Object(e),!0).forEach((function(i){a()(n,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))}))}return n}({},n))})),this.salesChannel.forEach((function(i){var t;e.set(i,{id:i,visibility:(null===(t=n.configData.null)||void 0===t?void 0:t["core.defaultSalesChannel.visibility"][i])||30})})),this.visibilityConfig=l()(e.values())}else this.visibilityConfig=[]},deep:!0}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.fetchSalesChannelsSystemConfig()},fetchSalesChannelsSystemConfig:function(){var n=this;this.isDefaultSalesChannelLoading=!0;var i=new c(this.salesChannelRepository.route,this.salesChannelRepository.entityName,Shopware.Context.api);this.systemConfigApiService.getValues("core.defaultSalesChannel").then((function(e){if(n.isDefaultSalesChannelLoading=!1,!r(e))return n.configData.null=e,n.salesChannel.forEach((function(n){return i.add(n)})),void(n.salesChannel=i);n.salesChannel=i}))},displayAdvancedVisibility:function(){this.displayVisibilityDetail=!0},closeAdvancedVisibility:function(){var n=this;this.displayVisibilityDetail=!1,this.visibilityConfig=d(this.$refs.visibilityConfig.items),this.configData.null["core.defaultSalesChannel.visibility"]={},this.visibilityConfig.forEach((function(i){n.configData.null["core.defaultSalesChannel.visibility"][i.id]=i.visibility}))},saveSalesChannelVisibilityConfig:function(){return this.systemConfigApiService.batchSave(this.configData)},updateSalesChannel:function(n){this.salesChannel=n}}}},"7OKR":function(n,i,e){var t=e("aLtX");t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);(0,e("P8hj").default)("49c7ce11",t,!0,{})},aLtX:function(n,i,e){}}]);