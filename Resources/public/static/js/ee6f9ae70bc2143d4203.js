(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[83417],{905815:function(){},383417:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return t}}),o(262842);var t={template:'\n{% block sw_promotion_v2_generate_codes_modal %}\n<sw-modal\n    class="sw-promotion-v2-generate-codes-modal"\n    :title="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.title\')"\n    @modal-close="onClose"\n>\n\n    \n    {% block sw_promotion_v2_generate_codes_modal_content %}\n    <div class="sw-promotion-v2-generate-codes-modal__content">\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_warning %}\n        <sw-alert\n            v-if="promotion.individualCodes && promotion.individualCodes.length > 0"\n            class="sw-promotion-v2-generate-codes-modal__warning"\n            variant="warning"\n        >\n            {{ $tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.warning\') }}\n        </sw-alert>\n        {% endblock %}\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_description %}\n        <p class="sw-promotion-v2-generate-codes-modal__description">\n            {{ $tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.description\') }}\n        </p>\n        {% endblock %}\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_container_pattern %}\n        \n        {% block sw_promotion_v2_generate_codes_modal_container_pattern_simple %}\n        <sw-container\n            v-if="!customPatternMode"\n            class="sw-promotion-v2-generate-codes-modal__container-pattern"\n            columns="1fr 1fr 1fr"\n            gap="0px 32px"\n        >\n\n            \n            {% block sw_promotion_v2_generate_codes_modal_prefix %}\n            <sw-text-field\n                v-model:value="pattern.prefix"\n                class="sw-promotion-v2-generate-codes-modal__prefix"\n                :label="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.labelPrefix\')"\n                :placeholder="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.placeholderPrefix\')"\n            />\n            {% endblock %}\n\n            \n            {% block sw_promotion_v2_generate_codes_modal_replacement %}\n            <sw-number-field\n                v-model:value="pattern.codeLength"\n                class="sw-promotion-v2-generate-codes-modal__replacement"\n                :label="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.labelCodeLength\')"\n                :min="1"\n                :max="20"\n            />\n            {% endblock %}\n\n            \n            {% block sw_promotion_v2_generate_codes_modal_suffix %}\n            <sw-text-field\n                v-model:value="pattern.suffix"\n                class="sw-promotion-v2-generate-codes-modal__suffix"\n                :label="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.labelSuffix\')"\n                :placeholder="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.placeholderSuffix\')"\n            />\n            {% endblock %}\n\n        </sw-container>\n        {% endblock %}\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_container_pattern_custom %}\n        <sw-text-field\n            v-else\n            v-model:value="promotion.individualCodePattern"\n            class="sw-promotion-v2-generate-codes-modal__custom-pattern"\n            :label="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.labelCustomPattern\')"\n            :placeholder="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.placeholderCustomPattern\')"\n            :help-text="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.helpTextCustomPattern\')"\n        />\n        {% endblock %}\n        {% endblock %}\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_custom_pattern_switch %}\n        <sw-switch-field\n            v-model:value="customPatternMode"\n            class="sw-promotion-v2-generate-codes-modal__custom-pattern"\n            :label="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.labelUseCustomPattern\')"\n            bordered\n        />\n        {% endblock %}\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_container_generate %}\n        <sw-container\n            class="sw-promotion-v2-generate-codes-modal__container-generate"\n            columns="1fr 1fr"\n            gap="0px 32px"\n        >\n\n            \n            {% block sw_promotion_v2_generate_codes_modal_preview %}\n            <sw-text-field\n                v-model:value="preview"\n                class="sw-promotion-v2-generate-codes-modal__preview"\n                :label="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.labelPreview\')"\n                disabled\n            />\n            {% endblock %}\n\n            \n            {% block sw_promotion_v2_generate_codes_modal_code_amount %}\n            <sw-number-field\n                v-model:value="codeAmount"\n                class="sw-promotion-v2-generate-codes-modal__code-amount"\n                :label="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.labelCodeAmount\')"\n                :min="1"\n            />\n            {% endblock %}\n\n        </sw-container>\n        {% endblock %}\n\n    </div>\n    {% endblock %}\n\n    \n    {% block sw_promotion_v2_generate_codes_modal_footer %}\n    <template #modal-footer>\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_cancel %}\n        <sw-button\n            class="sw-promotion-v2-generate-codes-modal__button-cancel"\n            size="small"\n            @click="onClose"\n        >\n            {{ $tc(\'global.default.cancel\') }}\n        </sw-button>\n        {% endblock %}\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_generate %}\n        <sw-button-process\n            class="sw-promotion-v2-generate-codes-modal__button-generate"\n            variant="primary"\n            size="small"\n            :is-loading="isGenerating"\n            :process-success="false"\n            @click="onGenerate"\n        >\n            {{ $tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.buttonGenerate\') }}\n        </sw-button-process>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n',compatConfig:Shopware.compatConfig,inject:["promotionCodeApiService"],emits:["generate-finish","close"],mixins:["notification"],props:{promotion:{type:Object,required:!0}},data(){return{isGenerating:!1,customPatternMode:!1,codeAmount:10,preview:"",pattern:{prefix:"",suffix:"",codeLength:5}}},watch:{pattern:{deep:!0,handler(){this.customPatternMode||this.updatePattern(),this.updatePreview()}},"promotion.individualCodePattern"(){this.updatePreview()},customPatternMode(){this.customPatternMode||this.updatePattern(),this.updatePreview()}},created(){this.createdComponent()},methods:{createdComponent(){let e=this.promotion.individualCodePattern;if(!e||!e.length>0){this.pattern={prefix:"",suffix:"",codeLength:5};return}let n=/(?<prefix>[^%]*)(?<replacement>(%[sd])+)(?<suffix>.*)/g.exec(e).groups;this.customPatternMode=n.replacement.includes("d"),this.pattern={...n,codeLength:n.replacement.length/2||1},this.updatePreview()},updatePattern(){let e=Array(Number(this.pattern.codeLength)+1).join("%s");this.promotion.individualCodePattern=`${this.pattern.prefix}${e}${this.pattern.suffix}`},updatePreview:Shopware.Utils.debounce(function(){this.isGenerating=!0,this.promotionCodeApiService.generatePreview(this.promotion.individualCodePattern).then(e=>{this.isGenerating=!1,this.preview=e})},500),onGenerate(){this.isGenerating=!0,this.promotionCodeApiService.replaceIndividualCodes(this.promotion.id,this.promotion.individualCodePattern,this.codeAmount).then(()=>{this.isGenerating=!1,this.$emit("generate-finish")}).catch(e=>{this.isGenerating=!1,e.response.data.errors.forEach(e=>{let n;switch(e.code){case"PROMOTION__INDIVIDUAL_CODES_PATTERN_INSUFFICIENTLY_COMPLEX":n="notComplexEnoughException";break;case"PROMOTION__INDIVIDUAL_CODES_PATTERN_ALREADY_IN_USE":n="alreadyInUseException";break;default:n="unknownErrorCode"}this.createNotificationError({autoClose:!1,message:this.$tc(`sw-promotion-v2.detail.base.codes.individual.generateModal.${n}`)})})})},onClose(){this.$emit("close")}}}},262842:function(e,n,o){var t=o(905815);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.id,t,""]]),t.locals&&(e.exports=t.locals),o(745346).Z("fbcbb936",t,!0,{})}}]);