{"version":3,"sources":["webpack:///./src/module/sw-settings-mailer/page/sw-settings-mailer/sw-settings-mailer.scss","webpack:///./src/module/sw-settings-mailer/page/sw-settings-mailer/index.js","webpack:///./src/module/sw-settings-mailer/page/sw-settings-mailer/sw-settings-mailer.html.twig"],"names":["content","__esModule","default","module","i","locals","exports","add","template","inject","mixins","data","isLoading","isSaveSuccessful","isFirstConfiguration","mailerSettings","smtpHostError","smtpPortError","metaInfo","title","this","$createTitle","computed","emailSendmailOptions","value","name","$tc","isSmtpMode","created","createdComponent","methods","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","loadPageContent","stop","_this2","_callee2","_context2","loadMailerSettings","checkFirstConfiguration","_this3","_callee3","_context3","systemConfigApiService","getValues","sent","Object","keys","length","saveMailerSettings","_this4","_callee4","_context4","validateSmtpConfiguration","createNotificationError","message","abrupt","saveValues","onSaveFinish","_this5","_callee5","_context5","detail","resetSmtpHostError","resetSmtpPortError"],"mappings":"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","file":"static/js/7665ebb623885f6c1c17.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-settings-mailer.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6fe4a57e\", content, true, {});","/**\n * @package services-settings\n */\nimport template from './sw-settings-mailer.html.twig';\nimport './sw-settings-mailer.scss';\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: ['systemConfigApiService'],\n\n    mixins: ['notification'],\n\n    data() {\n        return {\n            isLoading: true,\n            isSaveSuccessful: false,\n            isFirstConfiguration: false,\n            mailerSettings: {\n                'core.mailerSettings.emailAgent': null,\n                'core.mailerSettings.host': null,\n                'core.mailerSettings.port': null,\n                'core.mailerSettings.username': null,\n                'core.mailerSettings.password': null,\n                'core.mailerSettings.encryption': 'null',\n                'core.mailerSettings.senderAddress': null,\n                'core.mailerSettings.deliveryAddress': null,\n                'core.mailerSettings.disableDelivery': false,\n            },\n            smtpHostError: null,\n            smtpPortError: null,\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(),\n        };\n    },\n\n    computed: {\n        emailSendmailOptions() {\n            return [\n                {\n                    value: '-bs',\n                    name: this.$tc('sw-settings-mailer.sendmail.sync'),\n                },\n                {\n                    value: '-t -i',\n                    name: this.$tc('sw-settings-mailer.sendmail.async'),\n                },\n            ];\n        },\n\n        isSmtpMode() {\n            return this.mailerSettings['core.mailerSettings.emailAgent'] === 'smtp';\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        async createdComponent() {\n            await this.loadPageContent();\n        },\n\n        async loadPageContent() {\n            await this.loadMailerSettings();\n            this.checkFirstConfiguration();\n        },\n\n        async loadMailerSettings() {\n            this.isLoading = true;\n            this.mailerSettings = await this.systemConfigApiService.getValues('core.mailerSettings');\n\n            // Default when config is empty\n            if (Object.keys(this.mailerSettings).length === 0) {\n                this.mailerSettings = {\n                    'core.mailerSettings.emailAgent': '',\n                    'core.mailerSettings.sendMailOptions': '-t -i',\n                };\n            }\n\n            this.isLoading = false;\n        },\n\n        async saveMailerSettings() {\n            this.isLoading = true;\n\n            // Inputs cannot return null\n            if (this.mailerSettings['core.mailerSettings.emailAgent'] === '') {\n                this.mailerSettings['core.mailerSettings.emailAgent'] = null;\n            }\n\n            // Validate smtp configuration\n            if (this.isSmtpMode) {\n                this.validateSmtpConfiguration();\n            }\n\n            // SMTP configuration invalid stop save and propagate error notification\n            if (this.smtpHostError !== null || this.smtpPortError !== null) {\n                this.createNotificationError({\n                    title: this.$tc('global.default.error'),\n                    message: this.$tc('sw-settings-mailer.card-smtp.error.notificationMessage'),\n                });\n\n                this.isLoading = false;\n\n                return;\n            }\n\n            await this.systemConfigApiService.saveValues(this.mailerSettings);\n            this.isLoading = false;\n        },\n\n        async onSaveFinish() {\n            await this.loadPageContent();\n        },\n\n        checkFirstConfiguration() {\n            this.isFirstConfiguration = !this.mailerSettings['core.mailerSettings.emailAgent'];\n        },\n\n        validateSmtpConfiguration() {\n            this.smtpHostError = !this.mailerSettings['core.mailerSettings.host'] ? {\n                detail: this.$tc('global.error-codes.c1051bb4-d103-4f74-8988-acbcafc7fdc3'),\n            } : null;\n\n            this.smtpPortError = typeof this.mailerSettings['core.mailerSettings.port'] !== 'number' ? {\n                detail: this.$tc('global.error-codes.c1051bb4-d103-4f74-8988-acbcafc7fdc3'),\n            } : null;\n        },\n\n        resetSmtpHostError() {\n            this.smtpHostError = null;\n        },\n\n        resetSmtpPortError() {\n            this.smtpPortError = null;\n        },\n    },\n};\n","export default \"\\n{% block sw_settings_mailer_index %}\\n<sw-page class=\\\"sw-settings-mailer\\\">\\n\\n    \\n    {% block sw_settings_mailer_smart_bar_header %}\\n    <template #smart-bar-header>\\n        \\n        {% block sw_settings_mailer_smart_bar_header_title %}\\n        <h2>\\n            \\n            {% block sw_settings_mailer_smart_bar_header_title_text %}\\n            {{ $tc('sw-settings.index.title') }}\\n            <sw-icon\\n                name=\\\"regular-chevron-right-xs\\\"\\n                small\\n            />\\n            {{ $tc('sw-settings-mailer.general.textHeadline') }}\\n            {% endblock %}\\n        </h2>\\n        {% endblock %}\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_settings_mailer_smart_bar_actions %}\\n    <template #smart-bar-actions>\\n        \\n        {% block sw_settings_mailer_actions_save %}\\n        <sw-button-process\\n            :is-loading=\\\"isLoading\\\"\\n            :process-success=\\\"isSaveSuccessful\\\"\\n            variant=\\\"primary\\\"\\n            {% if VUE3 %}\\n            @update:process-success=\\\"onSaveFinish\\\"\\n            {% else %}\\n            @process-finish=\\\"onSaveFinish\\\"\\n            {% endif %}\\n            @click=\\\"saveMailerSettings\\\"\\n        >\\n            {{ $tc('sw-settings-mailer.general.buttonSave') }}\\n        </sw-button-process>\\n        {% endblock %}\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_settings_mailer_content %}\\n    <template #content>\\n        <sw-card-view>\\n            <sw-skeleton v-if=\\\"isLoading\\\" />\\n\\n            <sw-card\\n                v-else\\n                position-identifier=\\\"sw-settings-mailer-configuration\\\"\\n                :is-loading=\\\"isLoading\\\"\\n                :title=\\\"$tc('sw-settings-mailer.mailer-configuration.card-title')\\\"\\n            >\\n\\n                \\n                {% block sw_settings_mailer_first_configuration %}\\n                <div\\n                    v-if=\\\"isFirstConfiguration\\\"\\n                    class=\\\"sw-settings-mailer__first-configuration\\\"\\n                >\\n                    \\n                    {% block sw_settings_mailer_first_configuration_headline %}\\n                    <h4 class=\\\"sw-settings-mailer__headline\\\">\\n                        <strong>\\n                            {{ $tc('sw-settings-mailer.first-configuration.headline') }}\\n                        </strong>\\n                    </h4>\\n                    {% endblock %}\\n\\n                    \\n                    {% block sw_settings_mailer_first_configuration_description %}\\n                    <p>\\n                        {{ $tc('sw-settings-mailer.first-configuration.description') }}\\n                    </p>\\n                    {% endblock %}\\n                </div>\\n                {% endblock %}\\n\\n                \\n                {% block sw_settings_mailer_headline_agent %}\\n                <p class=\\\"sw-settings-mailer__headline\\\">\\n                    {{ $tc('sw-settings-mailer.mailer-configuration.agent') }}\\n                </p>\\n                {% endblock %}\\n\\n                <div class=\\\"sw-settings-mailer__radio-selection\\\">\\n                    \\n                    {% block sw_settings_mailer_agent_options %}\\n                    <sw-select-field\\n                        {% if VUE3 %}\\n                        v-model:value=\\\"mailerSettings['core.mailerSettings.emailAgent']\\\"\\n                        {% else %}\\n                        v-model=\\\"mailerSettings['core.mailerSettings.emailAgent']\\\"\\n                        {% endif %}\\n                    >\\n                        <option value=\\\"local\\\">\\n                            {{ $tc('sw-settings-mailer.mailer-configuration.local-agent') }}\\n                        </option>\\n                        <option value=\\\"smtp\\\">\\n                            {{ $tc('sw-settings-mailer.mailer-configuration.smtp-server') }}\\n                        </option>\\n                        <option value=\\\"\\\">\\n                            {{ $tc('sw-settings-mailer.mailer-configuration.env-file') }}\\n                        </option>\\n                    </sw-select-field>\\n\\n                    <sw-radio-field\\n                        v-if=\\\"mailerSettings['core.mailerSettings.emailAgent'] === 'local'\\\"\\n                        {% if VUE3 %}\\n                        v-model:value=\\\"mailerSettings['core.mailerSettings.sendMailOptions']\\\"\\n                        {% else %}\\n                        v-model=\\\"mailerSettings['core.mailerSettings.sendMailOptions']\\\"\\n                        {% endif %}\\n                        :options=\\\"emailSendmailOptions\\\"\\n                    />\\n                    {% endblock %}\\n                </div>\\n\\n                <p v-html=\\\"$tc('sw-settings-mailer.helpText')\\\"></p>\\n                <sw-switch-field\\n                    v-if=\\\"!isSmtpMode\\\"\\n                    {% if VUE3 %}\\n                    v-model:value=\\\"mailerSettings['core.mailerSettings.disableDelivery']\\\"\\n                    {% else %}\\n                    v-model=\\\"mailerSettings['core.mailerSettings.disableDelivery']\\\"\\n                    {% endif %}\\n                    size=\\\"small\\\"\\n                    :label=\\\"$tc('sw-settings-mailer.card-smtp.disable-delivery')\\\"\\n                />\\n            </sw-card>\\n\\n            \\n            {% block sw_settings_mailer_smtp %}\\n            <sw-card\\n                v-if=\\\"isSmtpMode\\\"\\n                position-identifier=\\\"sw-settings-mailer-smtp-settings\\\"\\n                :is-loading=\\\"isLoading\\\"\\n                title=\\\"SMTP server\\\"\\n                class=\\\"sw-settings-mailer__input-fields\\\"\\n            >\\n\\n                \\n                {% block sw_settings_mailer_smtp_settings %}\\n                <sw-settings-mailer-smtp\\n                    :mailer-settings=\\\"mailerSettings\\\"\\n                    :host-error=\\\"smtpHostError\\\"\\n                    :port-error=\\\"smtpPortError\\\"\\n                    @host-changed=\\\"resetSmtpHostError\\\"\\n                    @port-changed=\\\"resetSmtpPortError\\\"\\n                />\\n                {% endblock %}\\n\\n            </sw-card>\\n            {% endblock %}\\n        </sw-card-view>\\n    </template>\\n    {% endblock %}\\n</sw-page>\\n{% endblock %}\\n\";"],"sourceRoot":""}