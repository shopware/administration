{"version":3,"sources":["webpack:///./src/module/sw-settings-shipping/page/sw-settings-shipping-detail/state.js","webpack:///./src/module/sw-settings-shipping/page/sw-settings-shipping-detail/index.js","webpack:///./src/module/sw-settings-shipping/page/sw-settings-shipping-detail/sw-settings-shipping-detail.html.twig","webpack:///./src/module/sw-settings-shipping/page/sw-settings-shipping-detail/sw-settings-shipping-detail.scss"],"names":["namespaced","state","shippingMethod","currencies","mutations","setShippingMethod","setCurrencies","getters","shippingPriceGroups","prices","forEach","shippingPrice","key","ruleId","_inNewMatrix","isNew","rule","calculation","push","Object","values","sort","a","b","quantityStart","defaultCurrency","find","currency","isSystemDefault","usedRules","keys","unrestrictedPriceMatrixExists","some","newPriceMatrixExists","hasOwnProperty","_Shopware","Shopware","Mixin","Context","mapState","Component","getComponentHelper","Criteria","Data","warn","Utils","debug","template","inject","mixins","getByName","shortcuts","ESCAPE","props","shippingMethodId","type","String","required","default","data","logoMediaItem","uploadTag","isSaveSuccessful","isProcessLoading","isLoading","currenciesLoading","customFieldSets","metaInfo","title","this","$createTitle","identifier","computed","_objectSpread","mapPropertyErrors","placeholder","shippingMethodRepository","repositoryFactory","create","shippingMethodPricesRepository","currencyRepository","isNewShippingMethod","length","mediaRepository","deliveryTimeRepository","deliveryTimeCriteria","criteria","addSorting","tooltipSave","systemKey","$device","getSystemKey","message","concat","appearance","tooltipCancel","ruleFilter","addFilter","multi","contains","equals","addAssociation","shippingMethodCriteria","getAssociation","showCustomFields","watch","mediaId","setMediaItem","targetId","createdComponent","beforeCreate","State","registerModule","swShippingDetailState","created","beforeDestroy","unregisterModule","methods","loadEntityData","commit","shippingMethodPrice","id","add","loadCurrencies","onSaveRule","availabilityRuleId","_this","search","api","then","currencyResponse","sortCurrencies","_this2","get","res","loadCustomFieldSets","_this3","customFieldDataProviderService","getCustomFieldSets","sets","abortOnLanguageChange","hasChanges","saveOnLanguageChange","onSave","onChangeLanguage","_this4","technicalName","filterIncompletePrices","save","$router","name","params","$refs","mediaSidebarItem","getList","catch","exception","onError","_name","response","finally","dispatch","expression","error","Classes","ShopwareError","code","errorDetails","errors","detail","e","createNotificationError","$tc","_this5","getIncompletePrices","incompletePrice","remove","filter","price","calculationRuleId","onCancel","_ref","_this6","updatedMedia","onDropMedia","mediaItem","setMediaFromSidebar","mediaEntity","onUnlinkLogo","openMediaSidebar","openContent","translated","content","__esModule","module","i","locals","exports"],"mappings":"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","file":"static/js/276e92825b00c060207e.js","sourcesContent":["/**\n * @package checkout\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    namespaced: true,\n\n    state() {\n        return {\n            shippingMethod: {},\n            currencies: [],\n        };\n    },\n\n    mutations: {\n        setShippingMethod(state, shippingMethod) {\n            state.shippingMethod = shippingMethod;\n        },\n        setCurrencies(state, currencies) {\n            state.currencies = currencies;\n        },\n    },\n\n    getters: {\n        shippingPriceGroups(state) {\n            if (!state.shippingMethod.prices) {\n                return {};\n            }\n\n            const shippingPriceGroups = {};\n\n            state.shippingMethod.prices.forEach((shippingPrice) => {\n                let key = shippingPrice.ruleId;\n                if (shippingPrice._inNewMatrix) {\n                    key = 'new';\n                }\n                if (!shippingPriceGroups[key]) {\n                    shippingPriceGroups[key] = {\n                        isNew: key === 'new',\n                        ruleId: shippingPrice.ruleId,\n                        rule: shippingPrice.rule,\n                        calculation: shippingPrice.calculation,\n                        prices: [],\n                    };\n                }\n\n                shippingPriceGroups[key].prices.push(shippingPrice);\n            });\n\n            // Sort prices\n            Object.values(shippingPriceGroups).forEach((shippingPrice) => {\n                shippingPrice.prices.sort((a, b) => {\n                    return a.quantityStart - b.quantityStart;\n                });\n            });\n\n            return shippingPriceGroups;\n        },\n\n        defaultCurrency(state) {\n            return state.currencies.find(currency => currency.isSystemDefault);\n        },\n\n        usedRules(state, getters) {\n            return Object.keys(getters.shippingPriceGroups);\n        },\n\n        unrestrictedPriceMatrixExists(state) {\n            return state.shippingMethod.prices.some(shippingPrice => {\n                return shippingPrice.ruleId === null;\n            });\n        },\n\n        newPriceMatrixExists(state, getters) {\n            return getters.shippingPriceGroups.hasOwnProperty('new');\n        },\n    },\n};\n","import { mapPropertyErrors } from 'src/app/service/map-errors.service';\nimport template from './sw-settings-shipping-detail.html.twig';\nimport './sw-settings-shipping-detail.scss';\nimport swShippingDetailState from './state';\n\nconst { Mixin, Context } = Shopware;\nconst { mapState } = Shopware.Component.getComponentHelper();\nconst { Criteria } = Shopware.Data;\nconst { warn } = Shopware.Utils.debug;\n\n/**\n * @package checkout\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: [\n        'ruleConditionDataProviderService',\n        'repositoryFactory',\n        'acl',\n        'customFieldDataProviderService',\n        'feature',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n        Mixin.getByName('placeholder'),\n    ],\n\n    shortcuts: {\n        'SYSTEMKEY+S': 'onSave',\n        ESCAPE: 'onCancel',\n    },\n\n    props: {\n        shippingMethodId: {\n            type: String,\n            required: false,\n            default: null,\n        },\n    },\n\n    data() {\n        return {\n            logoMediaItem: null,\n            uploadTag: 'sw-shipping-method-upload-tag',\n            isSaveSuccessful: false,\n            isProcessLoading: false,\n            isLoading: false,\n            currenciesLoading: false,\n            customFieldSets: [],\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(this.identifier),\n        };\n    },\n\n    computed: {\n        ...mapState('swShippingDetail', [\n            'shippingMethod',\n            'currencies',\n        ]),\n        ...mapPropertyErrors('shippingMethod', [\n            'name',\n            'technicalName',\n            'deliveryTimeId',\n            'availabilityRuleId',\n        ]),\n\n        identifier() {\n            return this.placeholder(this.shippingMethod, 'name');\n        },\n\n        shippingMethodRepository() {\n            return this.repositoryFactory.create('shipping_method');\n        },\n\n        shippingMethodPricesRepository() {\n            return this.repositoryFactory.create('shipping_method_price');\n        },\n\n        currencyRepository() {\n            return this.repositoryFactory.create('currency');\n        },\n\n        isNewShippingMethod() {\n            return Object.keys(this.shippingMethod).length > 0 && this.shippingMethod.isNew();\n        },\n\n        mediaRepository() {\n            return this.repositoryFactory.create('media');\n        },\n\n        deliveryTimeRepository() {\n            return this.repositoryFactory.create('delivery_time');\n        },\n\n        deliveryTimeCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addSorting(Criteria.sort('unit'));\n            criteria.addSorting(Criteria.sort('name'));\n            return criteria;\n        },\n\n        tooltipSave() {\n            const systemKey = this.$device.getSystemKey();\n\n            return {\n                message: `${systemKey} + S`,\n                appearance: 'light',\n            };\n        },\n\n        tooltipCancel() {\n            return {\n                message: 'ESC',\n                appearance: 'light',\n            };\n        },\n\n        ruleFilter() {\n            const criteria = new Criteria(1, 25);\n            criteria.addFilter(Criteria.multi(\n                'OR',\n                [\n                    Criteria.contains('rule.moduleTypes.types', 'shipping'),\n                    Criteria.equals('rule.moduleTypes', null),\n                ],\n            ));\n\n            criteria.addAssociation('conditions');\n\n            return criteria;\n        },\n\n        shippingMethodCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addAssociation('prices');\n            criteria.addAssociation('tags');\n            criteria.getAssociation('prices').addAssociation('calculationRule');\n            criteria.getAssociation('prices').addAssociation('rule');\n\n            return criteria;\n        },\n\n        showCustomFields() {\n            return this.customFieldSets && this.customFieldSets.length > 0;\n        },\n    },\n\n    watch: {\n        'shippingMethod.mediaId'() {\n            if (this.shippingMethod.mediaId) {\n                this.setMediaItem({ targetId: this.shippingMethod.mediaId });\n            }\n        },\n\n        shippingMethodId() {\n            // We must reset the page if the user clicks his browsers back button and navigates back to create\n            if (this.shippingMethodId === null) {\n                this.createdComponent();\n            }\n        },\n    },\n\n    beforeCreate() {\n        Shopware.State.registerModule('swShippingDetail', swShippingDetailState);\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    beforeDestroy() {\n        Shopware.State.unregisterModule('swShippingDetail');\n    },\n\n    methods: {\n        createdComponent() {\n            if (!this.shippingMethodId) {\n                Shopware.State.commit('context/resetLanguageToDefault');\n\n                const shippingMethod = this.shippingMethodRepository.create();\n                const shippingMethodPrice = this.shippingMethodPricesRepository.create();\n                shippingMethodPrice.calculation = 1;\n                shippingMethodPrice.quantityStart = 1;\n                shippingMethodPrice.shippingMethodId = shippingMethod.id;\n                shippingMethodPrice.ruleId = null;\n                shippingMethod.prices.add(shippingMethodPrice);\n                Shopware.State.commit('swShippingDetail/setShippingMethod', shippingMethod);\n            } else {\n                this.loadEntityData();\n            }\n            this.loadCurrencies();\n        },\n\n        onSaveRule(ruleId) {\n            this.shippingMethod.availabilityRuleId = ruleId;\n        },\n\n        loadCurrencies() {\n            this.currenciesLoading = true;\n            this.currencyRepository.search(new Criteria(1, 500), Context.api).then((currencyResponse) => {\n                Shopware.State.commit('swShippingDetail/setCurrencies', this.sortCurrencies(currencyResponse));\n                this.currenciesLoading = false;\n            });\n        },\n\n        loadEntityData() {\n            this.isLoading = true;\n\n            this.shippingMethodRepository.get(\n                this.shippingMethodId,\n                Shopware.Context.api,\n                this.shippingMethodCriteria,\n            ).then(res => {\n                Shopware.State.commit('swShippingDetail/setShippingMethod', res);\n                this.loadCustomFieldSets().then(() => {\n                    this.isLoading = false;\n                });\n            });\n        },\n\n        loadCustomFieldSets() {\n            return this.customFieldDataProviderService.getCustomFieldSets('shipping_method').then((sets) => {\n                this.customFieldSets = sets;\n            });\n        },\n\n        abortOnLanguageChange() {\n            return this.shippingMethodRepository.hasChanges(this.shippingMethod);\n        },\n\n        saveOnLanguageChange() {\n            return this.onSave();\n        },\n\n        onChangeLanguage() {\n            this.loadEntityData();\n        },\n\n        onSave() {\n            /**\n             * @deprecated tag:v6.7.0 - Can be removed: technical names are now required\n             */\n            if (!this.shippingMethod.technicalName) {\n                return Shopware.State.dispatch('error/addApiError', {\n                    expression: `shipping_method.${this.shippingMethod.id}.technicalName`,\n                    error: new Shopware.Classes.ShopwareError(\n                        {\n                            code: 'c1051bb4-d103-4f74-8988-acbcafc7fdc3',\n                        },\n                    ),\n                });\n            }\n\n            this.filterIncompletePrices();\n\n            this.isSaveSuccessful = false;\n            this.isProcessLoading = true;\n\n            return this.shippingMethodRepository.save(this.shippingMethod, Context.api).then(() => {\n                this.isSaveSuccessful = true;\n                if (!this.shippingMethodId) {\n                    this.$router.push({ name: 'sw.settings.shipping.detail', params: { id: this.shippingMethod.id } });\n                }\n                this.$refs.mediaSidebarItem.getList();\n                this.loadEntityData();\n            }).catch((exception) => {\n                this.onError(exception);\n                warn(this._name, exception.message, exception.response);\n                this.isProcessLoading = false;\n                throw exception;\n            }).finally(() => {\n                this.isProcessLoading = false;\n            });\n        },\n\n        onError(error) {\n            let errorDetails = null;\n\n            try {\n                errorDetails = error.response.data.errors[0].detail;\n            } catch (e) {\n                errorDetails = '';\n            }\n\n            this.createNotificationError({\n                title: this.$tc('global.default.error'),\n                // eslint-disable-next-line max-len\n                message: `${this.$tc('sw-settings-shipping.detail.messageSaveError', 0, { name: this.shippingMethod.name })} ${errorDetails}`,\n            });\n        },\n\n        filterIncompletePrices() {\n            this.getIncompletePrices().forEach(incompletePrice => {\n                this.shippingMethod.prices.remove(incompletePrice.id);\n            });\n        },\n\n        getIncompletePrices() {\n            return this.shippingMethod.prices.filter(price => {\n                return (!price.calculation && !price.calculationRuleId) || price._inNewMatrix;\n            });\n        },\n\n        onCancel() {\n            this.$router.push({ name: 'sw.settings.shipping.index' });\n        },\n\n        setMediaItem({ targetId }) {\n            this.mediaRepository.get(targetId, Context.api).then((updatedMedia) => {\n                this.logoMediaItem = updatedMedia;\n            });\n            this.shippingMethod.mediaId = targetId;\n        },\n\n        onDropMedia(mediaItem) {\n            this.setMediaItem({ targetId: mediaItem.id });\n        },\n\n        setMediaFromSidebar(mediaEntity) {\n            this.logoMediaItem = mediaEntity;\n            this.shippingMethod.mediaId = mediaEntity.id;\n        },\n\n        onUnlinkLogo() {\n            this.logoMediaItem = null;\n            this.shippingMethod.mediaId = null;\n        },\n\n        openMediaSidebar() {\n            this.$refs.mediaSidebarItem.openContent();\n        },\n\n        sortCurrencies(currencies) {\n            currencies.sort((a, b) => {\n                if (a.isSystemDefault) {\n                    return -1;\n                }\n                if (b.isSystemDefault) {\n                    return 1;\n                }\n                if (a.translated.name < b.translated.name) {\n                    return -1;\n                }\n                if (a.translated.name > b.translated.name) {\n                    return 1;\n                }\n                return 0;\n            });\n\n            return currencies;\n        },\n    },\n};\n","export default \"\\n\\n{% block sw_settings_shipping_detail %}\\n<sw-page class=\\\"sw-settings-shipping-detail\\\">\\n\\n    \\n    {% block sw_settings_shipping_detail_header %}\\n    <template #smart-bar-header>\\n        <h2>{{ placeholder(shippingMethod, 'name', $tc('sw-settings-shipping.detail.textHeadline')) }}</h2>\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_settings_shipping_detail_actions %}\\n    <template #smart-bar-actions>\\n        \\n        {% block sw_settings_shipping_detail_actions_abort %}\\n        <sw-button\\n            v-tooltip.bottom=\\\"tooltipCancel\\\"\\n            :disabled=\\\"isLoading\\\"\\n            @click=\\\"onCancel\\\"\\n        >\\n            {{ $tc('sw-settings-shipping.detail.buttonCancel') }}\\n        </sw-button>\\n        {% endblock %}\\n\\n        \\n        {% block sw_settings_shipping_detail_actions_save %}\\n        <sw-button-process\\n            {% if VUE3 %}\\n            v-model:processSuccess=\\\"isSaveSuccessful\\\"\\n            {% else %}\\n            v-model=\\\"isSaveSuccessful\\\"\\n            {% endif %}\\n            v-tooltip.bottom=\\\"tooltipSave\\\"\\n            class=\\\"sw-settings-shipping-method-detail__save-action\\\"\\n            :is-loading=\\\"isProcessLoading\\\"\\n            :disabled=\\\"isProcessLoading || !acl.can('shipping.editor')\\\"\\n            variant=\\\"primary\\\"\\n            @click.prevent=\\\"onSave\\\"\\n        >\\n            {{ $tc('sw-settings-shipping.detail.buttonSave') }}\\n        </sw-button-process>\\n        {% endblock %}\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_settings_shipping_detail_language_switch %}\\n    <template #language-switch>\\n        <sw-language-switch\\n            :disabled=\\\"isNewShippingMethod\\\"\\n            :save-changes-function=\\\"saveOnLanguageChange\\\"\\n            :abort-change-function=\\\"abortOnLanguageChange\\\"\\n            @on-change=\\\"onChangeLanguage\\\"\\n        />\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_settings_shipping_detail_content %}\\n    <template #content>\\n        <sw-card-view>\\n            <template v-if=\\\"isLoading\\\">\\n                <sw-skeleton variant=\\\"detail-bold\\\" />\\n                <sw-skeleton />\\n            </template>\\n\\n            <template v-else>\\n                \\n                {% block sw_settings_shipping_detail_content_language_info %}\\n                <sw-language-info\\n                    :is-new-entity=\\\"isNewShippingMethod\\\"\\n                    :entity-description=\\\"placeholder(shippingMethod, 'name', $tc('sw-settings-shipping.detail.textHeadline'))\\\"\\n                />\\n                {% endblock %}\\n\\n                \\n                {% block sw_settings_shipping_detail_base %}\\n                <sw-card\\n                    position-identifier=\\\"sw-settings-shipping-detail-base\\\"\\n                    :title=\\\"$tc('sw-settings-shipping.detail.labelBasicInfo')\\\"\\n                    :is-loading=\\\"isLoading\\\"\\n                >\\n                    <sw-container\\n                        columns=\\\"3fr 3fr 1fr\\\"\\n                        gap=\\\"0px 30px\\\"\\n                    >\\n                        \\n                        {% block sw_settings_shipping_detail_base_content_field_name %}\\n                        <sw-text-field\\n                            {% if VUE3 %}\\n                            v-model:value=\\\"shippingMethod.name\\\"\\n                            {% else %}\\n                            v-model=\\\"shippingMethod.name\\\"\\n                            {% endif %}\\n                            name=\\\"sw-field--shippingMethod-name\\\"\\n                            required\\n                            :disabled=\\\"!acl.can('shipping.editor')\\\"\\n                            :error=\\\"shippingMethodNameError\\\"\\n                            :label=\\\"$tc('sw-settings-shipping.detail.labelName')\\\"\\n                            :placeholder=\\\"placeholder(shippingMethod, 'name', $tc('sw-settings-shipping.detail.placeholderName'))\\\"\\n                        />\\n                        {% endblock %}\\n\\n                        \\n                        {% block sw_settings_shipping_detail_content_field_technical_name %}\\n                        <sw-text-field\\n                            {% if VUE3 %}\\n                            v-model:value=\\\"shippingMethod.technicalName\\\"\\n                            {% else %}\\n                            v-model=\\\"shippingMethod.technicalName\\\"\\n                            {% endif %}\\n                            name=\\\"sw-field--shippingMethod-technicalName\\\"\\n                            class=\\\"sw-settings-shipping-detail__field-technical-name\\\"\\n                            :required=\\\"feature.isActive('v6.7.0.0')\\\"\\n                            :disabled=\\\"!acl.can('shipping.editor')\\\"\\n                            :label=\\\"$tc('sw-settings-shipping.detail.labelTechnicalName')\\\"\\n                            :placeholder=\\\"placeholder(shippingMethod, 'technicalName', $tc('sw-settings-shipping.detail.placeholderTechnicalName'))\\\"\\n                            :error=\\\"shippingMethodTechnicalNameError\\\"\\n                            :help-text=\\\"$tc('sw-settings-shipping.detail.helpTextTechnicalName')\\\"\\n                        />\\n                        {% endblock %}\\n\\n                        \\n                        {% block sw_settings_shipping_detail_base_content_field_position %}\\n                        <sw-number-field\\n                            {% if VUE3 %}\\n                            v-model:value=\\\"shippingMethod.position\\\"\\n                            {% else %}\\n                            v-model=\\\"shippingMethod.position\\\"\\n                            {% endif %}\\n                            name=\\\"sw-field--shippingMethod-position\\\"\\n                            class=\\\"sw-settings-shipping-detail__field-position\\\"\\n                            :disabled=\\\"!acl.can('shipping.editor')\\\"\\n                            :label=\\\"$tc('sw-settings-shipping.detail.labelPosition')\\\"\\n                            :placeholder=\\\"$tc('sw-settings-shipping.detail.placeholderPosition')\\\"\\n                        />\\n                        {% endblock %}\\n                        \\n                        {% block sw_settings_shipping_detail_base_content_field_active %}\\n                        <sw-switch-field\\n                            {% if VUE3 %}\\n                            v-model:value=\\\"shippingMethod.active\\\"\\n                            {% else %}\\n                            v-model=\\\"shippingMethod.active\\\"\\n                            {% endif %}\\n                            name=\\\"sw-field--shippingMethod-active\\\"\\n                            bordered\\n                            :disabled=\\\"!acl.can('shipping.editor')\\\"\\n                            :label=\\\"$tc('sw-settings-shipping.detail.labelActive')\\\"\\n                        />\\n                        {% endblock %}\\n                    </sw-container>\\n                    <sw-container\\n                        columns=\\\"repeat(auto-fit, minmax(250px, 1fr))\\\"\\n                        gap=\\\"0px 30px\\\"\\n                    >\\n                        \\n                        {% block sw_settings_shipping_detail_base_content_field_description %}\\n                        <sw-textarea-field\\n                            {% if VUE3 %}\\n                            v-model:value=\\\"shippingMethod.description\\\"\\n                            {% else %}\\n                            v-model=\\\"shippingMethod.description\\\"\\n                            {% endif %}\\n                            name=\\\"sw-field--shippingMethod-description\\\"\\n                            :value=\\\"shippingMethod.description\\\"\\n                            class=\\\"sw-settings-shipping-detail__description\\\"\\n                            :disabled=\\\"!acl.can('shipping.editor')\\\"\\n                            :label=\\\"$tc('sw-settings-shipping.detail.labelDescription')\\\"\\n                            :placeholder=\\\"placeholder(shippingMethod, 'description', $tc('sw-settings-shipping.detail.placeholderDescription'))\\\"\\n                        />\\n                        {% endblock %}\\n\\n                        \\n                        {% block sw_settings_shipping_detail_base_content_media_upload %}\\n                        <sw-upload-listener\\n                            :upload-tag=\\\"uploadTag\\\"\\n                            auto-upload\\n                            @media-upload-finish=\\\"setMediaItem\\\"\\n                        />\\n                        <sw-media-upload-v2\\n                            v-if=\\\"!isLoading\\\"\\n                            :upload-tag=\\\"uploadTag\\\"\\n                            :source=\\\"logoMediaItem\\\"\\n                            class=\\\"sw-settings-shipping-detail__logo-image-upload\\\"\\n                            :allow-multi-select=\\\"false\\\"\\n                            variant=\\\"regular\\\"\\n                            :disabled=\\\"!acl.can('shipping.editor')\\\"\\n                            :label=\\\"$tc('sw-settings-shipping.detail.labelLogoUpload')\\\"\\n                            :default-folder=\\\"shippingMethod.getEntityName()\\\"\\n                            @media-drop=\\\"onDropMedia\\\"\\n                            @media-upload-sidebar-open=\\\"openMediaSidebar\\\"\\n                            @media-upload-remove-image=\\\"onUnlinkLogo\\\"\\n                        />\\n                        {% endblock %}\\n                    </sw-container>\\n\\n                    \\n                    {% block sw_settings_shipping_detail_base_content_field_delivery_time %}\\n                    <sw-entity-single-select\\n                        {% if VUE3 %}\\n                        v-model:value=\\\"shippingMethod.deliveryTimeId\\\"\\n                        {% else %}\\n                        v-model=\\\"shippingMethod.deliveryTimeId\\\"\\n                        {% endif %}\\n                        name=\\\"sw-field--shippingMethod-deliveryTimeId\\\"\\n                        class=\\\"sw-settings-shipping-detail__delivery-time\\\"\\n                        entity=\\\"delivery_time\\\"\\n                        :disabled=\\\"!acl.can('shipping.editor')\\\"\\n                        :criteria=\\\"deliveryTimeCriteria\\\"\\n                        :label=\\\"$tc('sw-settings-shipping.detail.labelDeliveryTime')\\\"\\n                        :placeholder=\\\"$tc('sw-settings-shipping.detail.placeholderDeliveryTime')\\\"\\n                        :error=\\\"shippingMethodDeliveryTimeIdError\\\"\\n                        show-clearable-button\\n                        required\\n                    />\\n                    {% endblock %}\\n\\n                    \\n                    {% block sw_settings_shipping_detail_base_content_tracking_url_field %}\\n                    <sw-text-field\\n                        {% if VUE3 %}\\n                        v-model:value=\\\"shippingMethod.trackingUrl\\\"\\n                        {% else %}\\n                        v-model=\\\"shippingMethod.trackingUrl\\\"\\n                        {% endif %}\\n                        name=\\\"sw-field--shippingMethod-trackingUrl\\\"\\n                        :disabled=\\\"!acl.can('shipping.editor')\\\"\\n                        :label=\\\"$tc('sw-settings-shipping.detail.labelTrackingUrl')\\\"\\n                        :placeholder=\\\"placeholder(shippingMethod, 'trackingUrl', $tc('sw-settings-shipping.detail.placeholderTrackingUrl'))\\\"\\n                        :help-text=\\\"$tc('sw-settings-shipping.detail.helpTextTrackingUrl')\\\"\\n                    />\\n                    {% endblock %}\\n\\n                    \\n                    {% block sw_settings_shipping_detail_base_content_tags_field %}\\n                    <sw-entity-tag-select\\n                        v-if=\\\"!isLoading\\\"\\n                        v-model=\\\"shippingMethod.tags\\\"\\n                        :disabled=\\\"!acl.can('shipping.editor')\\\"\\n                        :placeholder=\\\"$tc('sw-product.categoryForm.placeholderTags')\\\"\\n                    />\\n                    {% endblock %}\\n                </sw-card>\\n                {% endblock %}\\n\\n                \\n                {% block sw_settings_shipping_detail_top_ruleshippingPriceStore %}\\n                <sw-card\\n                    position-identifier=\\\"sw-settings-shipping-detail-condition-container\\\"\\n                    class=\\\"sw-settings-shipping-detail__condition_container\\\"\\n                    :title=\\\"$tc('sw-settings-shipping.detail.topRule')\\\"\\n                >\\n                    \\n                    \\n                    {% block sw_settings_shipping_detail_top_rule_select %}\\n                    <sw-select-rule-create\\n                        :rule-id=\\\"shippingMethod.availabilityRuleId\\\"\\n                        :rule-filter=\\\"ruleFilter\\\"\\n                        :disabled=\\\"!acl.can('shipping.editor')\\\"\\n                        required\\n                        :error=\\\"shippingMethodAvailabilityRuleIdError\\\"\\n                        :label=\\\"$tc('sw-settings-shipping.detail.topRule')\\\"\\n                        class=\\\"sw-settings-shipping-detail__top-rule\\\"\\n                        rule-aware-group-key=\\\"shippingMethods\\\"\\n                        @save-rule=\\\"onSaveRule\\\"\\n                    />\\n                    {% endblock %}\\n                </sw-card>\\n                {% endblock %}\\n\\n                \\n                {% block sw_settings_shipping_detail_tax_cost %}\\n                <sw-settings-shipping-tax-cost\\n                    v-if=\\\"!isLoading\\\"\\n                    :disabled=\\\"!acl.can('shipping.editor')\\\"\\n                />\\n                {% endblock %}\\n\\n                \\n                {% block sw_settings_shipping_detail_price_matrices %}\\n                <sw-settings-shipping-price-matrices\\n                    v-if=\\\"!isLoading\\\"\\n                    ref=\\\"priceMatrices\\\"\\n                    :disabled=\\\"!acl.can('shipping.editor')\\\"\\n                />\\n                {% endblock %}\\n\\n                \\n                {% block sw_settings_shipping_detail_custom_field_sets %}\\n                <sw-card\\n                    v-if=\\\"showCustomFields\\\"\\n                    position-identifier=\\\"sw-settings-shipping-detail-custom-fields\\\"\\n                    :title=\\\"$tc('sw-settings-custom-field.general.mainMenuItemGeneral')\\\"\\n                    :is-loading=\\\"isLoading\\\"\\n                >\\n                    <sw-custom-field-set-renderer\\n                        :entity=\\\"shippingMethod\\\"\\n                        :disabled=\\\"!acl.can('shipping.editor')\\\"\\n                        :sets=\\\"customFieldSets\\\"\\n                    />\\n                </sw-card>\\n                {% endblock %}\\n            </template>\\n        </sw-card-view>\\n    </template>\\n    {% endblock %}\\n\\n    <template #sidebar>\\n        \\n        {% block sw_settings_shipping_detail_sidebar %}\\n        <sw-sidebar :propagate-width=\\\"true\\\">\\n            \\n            {% block sw_setting_shipping_detail_sidebar_media_item %}\\n            <sw-sidebar-media-item ref=\\\"mediaSidebarItem\\\">\\n                <template\\n                    #context-menu-items=\\\"media\\\"\\n                >\\n                    <sw-context-menu-item @click=\\\"setMediaFromSidebar(media.mediaItem)\\\">\\n                        {{ $tc('sw-settings-shipping.sidebar.labelUseAsLogo') }}\\n                    </sw-context-menu-item>\\n                </template>\\n            </sw-sidebar-media-item>\\n            {% endblock %}\\n        </sw-sidebar>\\n        {% endblock %}\\n    </template>\\n\\n</sw-page>\\n{% endblock %}\\n\";","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-settings-shipping-detail.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7f7b19ea\", content, true, {});"],"sourceRoot":""}