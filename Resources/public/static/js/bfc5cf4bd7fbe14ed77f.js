(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[58912],{680752:function(){},858912:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return s}}),n(572587);let{Mixin:t}=Shopware,{mapPropertyErrors:i,mapState:c,mapGetters:a}=Shopware.Component.getComponentHelper();var s={template:'\n{% block sw_product_price_form %}\n<div class="sw-product-price-form">\n    \n    {% block sw_product_price_form_fields %}\n    <sw-container\n        columns="1fr 2fr"\n        gap="0px 30px"\n        class="sw-product-price-form__prices"\n    >\n\n        \n        {% block sw_product_price_form_tax_field %}\n        <sw-inherit-wrapper\n            ref="taxIdInheritation"\n            v-model:value="product.taxId"\n            :inherited-value="parentProduct.taxId"\n            :has-parent="!!parentProduct.taxId"\n            :help-text="taxRateHelpText"\n            :label="$tc(\'sw-product.priceForm.labelTaxRate\')"\n            class="sw-product-price-form__tax-rate"\n            required\n        >\n            <template #content="{ currentValue, updateCurrentValue, isInherited }">\n\n                <sw-select-field\n                    name="sw-field--product-taxId"\n                    :placeholder="$tc(\'sw-product.priceForm.placeholderTaxRate\')"\n                    validation="required"\n                    :disabled="isInherited || !allowEdit || undefined"\n                    :value="currentValue"\n                    :error="productTaxIdError"\n                    @update:value="updateCurrentValue"\n                >\n                    <option\n                        v-for="tax in taxes"\n                        :key="tax.id"\n                        :value="tax.id"\n                        :selected="currentValue === tax.id"\n                    >\n                        {{ getTaxLabel(tax) }}\n                    </option>\n                </sw-select-field>\n\n            </template>\n        </sw-inherit-wrapper>\n        {% endblock %}\n\n        \n        {% block sw_product_price_form_price_field %}\n        <sw-inherit-wrapper\n            v-if="!isLoading"\n            v-model:value="prices"\n            label=" "\n            class="sw-product-price-form__price-list"\n            :has-parent="!!parentProduct.id"\n            :inherited-value="parentPrices"\n            :custom-remove-inheritance-function="removePriceInheritation"\n            :custom-inheritation-check-function="inheritationCheckFunction"\n        >\n            <template #content="{ currentValue, isInherited }">\n                <sw-list-price-field\n                    vertical\n                    :price="currentValue.price"\n                    :purchase-prices="currentValue.purchasePrices"\n                    :tax-rate="productTaxRate"\n                    :disabled="isInherited || !allowEdit || undefined"\n                    :error="productPriceError ? productPriceError[0] : null"\n                    :currency="defaultCurrency"\n                    :show-setting-price="showModeSetting"\n                />\n            </template>\n        </sw-inherit-wrapper>\n        {% endblock %}\n\n    </sw-container>\n    {% endblock %}\n\n    \n    {% block sw_product_price_form_link %}\n    <sw-container\n        columns="1fr"\n        justify="end"\n        class="sw-product-price-form__links"\n    >\n        \n        {% block sw_product_price_form_advanced_prices_link %}\n        <router-link\n            v-if="!product._isNew"\n            :to="{ name: \'sw.product.detail.prices\', params: { id: $route.params.id } }"\n            class="sw-card__quick-link"\n        >\n            {{ $tc(\'sw-product.detailBase.linkAdvancedPrices\') }} <sw-icon\n                name="regular-long-arrow-right"\n                small\n            />\n        </router-link>\n        {% endblock %}\n\n        \n        {% block sw_product_price_form_maintain_currencies_link %}\n        <a\n            v-if="product.price"\n            class="sw-card__quick-link"\n            role="button"\n            tabindex="0"\n            @click.prevent="displayMaintainCurrencies = true"\n            @keydown.enter.prevent="displayMaintainCurrencies = true"\n        >\n            {{ $tc(\'sw-product.detailBase.linkMaintainCurrencyPrices\') }} <sw-icon\n                name="regular-long-arrow-right"\n                small\n            />\n        </a>\n        {% endblock %}\n    </sw-container>\n    {% endblock %}\n\n    \n    {% block sw_product_price_form_maintain_currencies_modal %}\n    <sw-maintain-currencies-modal\n        v-if="displayMaintainCurrencies"\n        :currencies="currencies"\n        :prices="product.price"\n        :default-price="defaultPrice"\n        :tax-rate="productTaxRate"\n        :disabled="!allowEdit || undefined"\n        @modal-close="onMaintainCurrenciesClose"\n        @update-prices="updatePrices"\n    />\n    {% endblock %}\n</div>\n{% endblock %}\n',compatConfig:Shopware.compatConfig,mixins:[t.getByName("placeholder")],props:{allowEdit:{type:Boolean,required:!1,default:!0}},data(){return{displayMaintainCurrencies:!1}},computed:{...a("swProductDetail",["isLoading","defaultPrice","defaultCurrency","productTaxRate","showModeSetting"]),...c("swProductDetail",["product","parentProduct","taxes","currencies"]),...i("product",["taxId","price","purchasePrices"]),taxRateHelpText(){return this.$tc("sw-product.priceForm.taxRateHelpText.label",0,{link:`<sw-internal-link
                           :router-link=${JSON.stringify({name:"sw.settings.tax.index"})}
                           :inline="true">
                           ${this.$tc("sw-product.priceForm.taxRateHelpText.linkText")}
                      </sw-internal-link>`})},prices:{get(){let e={price:[],purchasePrices:[]};return this.product&&Array.isArray(this.product.price)&&(e.price=[...this.product.price]),this.product&&Array.isArray(this.product.purchasePrices)&&(e.purchasePrices=[...this.product.purchasePrices]),e},set(e){this.product.price=e?.price||null,this.product.purchasePrices=e?.purchasePrices||null}},parentPrices(){return{price:this.product.price||this.parentProduct.price,purchasePrices:this.product.purchasePrices||this.parentProduct.purchasePrices}}},methods:{removePriceInheritation(e){let r=e.price?.find(e=>e.currencyId===this.defaultCurrency.id),n=e.purchasePrices?.find(e=>e.currencyId===this.defaultCurrency.id),t={price:[],purchasePrices:[]};return r&&t.price.push({currencyId:r.currencyId,gross:r.gross,net:r.net,linked:r.linked,listPrice:r.listPrice?r.listPrice:null,regulationPrice:r.regulationPrice?r.regulationPrice:null}),n&&t.purchasePrices.push({currencyId:n.currencyId,gross:n.gross,net:n.net,linked:n.linked}),t},inheritationCheckFunction(){return!this.prices.price.length&&!this.prices.purchasePrices.length},onMaintainCurrenciesClose(e){this.product.price=e,this.displayMaintainCurrencies=!1},keymonitor(e){if(","===e.key){let r=e.currentTarget.value;e.currentTarget.value=r.replace(/.$/,".")}},getTaxLabel(e){return this.$te(`global.tax-rates.${e.name}`)?this.$tc(`global.tax-rates.${e.name}`):e.name},updatePrices(e){this.product.price.splice(e,1)}}}},572587:function(e,r,n){var t=n(680752);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.id,t,""]]),t.locals&&(e.exports=t.locals),n(745346).Z("9aa6b076",t,!0,{})}}]);