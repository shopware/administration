(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[340],{"3XLC":function(e,n,r){"use strict";r.r(n);r("glXj");var d=Shopware.Mixin,s=Shopware.Data.Criteria,t=Shopware.Classes.ApiService,i=Shopware.Utils.format;n.default={template:'\n{% block sw_order_detail_base_order_overview %}\n<sw-card\n    class="sw-order-user-card"\n    position-identifier="sw-order-user-card"\n    :title="$tc(\'sw-order.detailBase.cardTitleDetails\')"\n    :is-loading="isLoading"\n>\n\n    \n    {% block sw_order_detail_base_address_modal %}\n    <sw-order-address-modal\n        v-if="addressBeingEdited"\n        :countries="countries"\n        :address="addressBeingEdited"\n        :order="currentOrder"\n        :version-context="versionContext"\n        @address-select="onAddressModalAddressSelected"\n        @reset="onResetOrder"\n        @save="onAddressModalSave"\n        @error="$emit(\'error\')"\n    />\n    {% endblock %}\n\n    <template #grid>\n        <sw-container rows="auto auto">\n\n            \n            {% block sw_order_user_card_row_primary %}\n            <sw-card-section divider="bottom">\n\n                \n                {% block sw_order_user_card_metadata_container %}\n                <sw-container\n                    columns="80px 1fr max-content"\n                    gap="0px 30px"\n                    align="center"\n                    class="sw-order-user-card__container"\n                >\n\n                    \n                    {% block sw_order_user_card_avatar %}\n                    <sw-avatar\n                        size="80px"\n                        color="$route.meta.$module.color"\n                        :first-name="currentOrder.orderCustomer.firstName"\n                        :last-name="currentOrder.orderCustomer.lastName"\n                    />\n                    {% endblock %}\n\n                    \n                    {% block sw_order_user_card_metadata %}\n                    <div class="sw-order-user-card__metadata">\n                        \n                        {% block sw_order_user_card_metadata_user_name %}\n                        <div\n                            v-if="currentOrder.orderCustomer"\n                            class="sw-order-user-card__metadata-user-name"\n                        >\n                            {{ fullName }}\n                        </div>\n                        {% endblock %}\n                        \n                        {% block sw_order_user_card_metadata_tags %}\n\n                        <sw-entity-tag-select\n                            v-if="isEditing || hasTags"\n                            class="sw-order-user-card__tag-select"\n                            :placeholder="$tc(\'sw-order.detailBase.placeholderTagSelect\')"\n                            :size="!isEditing ? \'default\' : \'medium\'"\n                            :disabled="!isEditing"\n                            :entity-collection="currentOrder.tags"\n                            @item-add="onAddTag"\n                            @item-remove="onRemoveTag"\n                        />\n                        {% endblock %}\n                    </div>\n                    {% endblock %}\n\n                    \n                    {% block sw_order_detail_base_info_summary %}\n                    <div class="sw-order-user-card__info-summary">\n                        \n                        {% block  sw_order_detail_base_info_summary_entries %}\n                        <div class="sw-order-user-card__metadata-price">\n                            {{ currentOrder.amountTotal | currency(currentOrder.currency.translated.shortName) }}\n                        </div>\n\n                        <div class="sw-order-user-card__metadata-item">\n                            {{ orderDate }}\n                        </div>\n                        {% endblock %}\n                    </div>\n                    {% endblock %}\n\n                </sw-container>\n                {% endblock %}\n\n                <slot name="additional-actions">\n                    \n                    {% block sw_order_user_card_slot_additional_actions %}{% endblock %}\n                </slot>\n\n                \n                {% block sw_order_detail_base_order_overview_columns %}\n                <sw-container\n                    columns="repeat(auto-fit, minmax(250px, 1fr))"\n                    gap="30px 30px"\n                >\n\n                    \n                    {% block sw_order_detail_base_order_overview_left_column %}\n                    <sw-description-list\n                        columns="1fr"\n                        grid="1fr"\n                        class="sw-order-user-card__summary-vertical"\n                    >\n\n                        \n                        {% block sw_order_detail_base_order_overview_email %}\n                        <dt>{{ $tc(\'sw-order.detailBase.labelCustomerEmail\') }}*</dt>\n                        <dd>\n                            <sw-order-inline-field\n                                v-model="currentOrder.orderCustomer.email"\n                                :display-value="currentOrder.orderCustomer.email ? currentOrder.orderCustomer.email : $tc(\'sw-order.detailBase.labelNoEmail\')"\n                                required\n                                :value="currentOrder.orderCustomer.email"\n                                :editable="isEditing"\n                                @input="$emit(\'order-change\')"\n                            />\n                        </dd>\n                        {% endblock %}\n\n                        \n                        {% block sw_order_detail_base_order_overview_billing_address %}\n                        <dt>\n                            {{ $tc(\'sw-order.detailBase.headlineBillingAddress\') }}\n                            <sw-button\n                                v-if="isEditing"\n                                class="sw-order-user-card__address-edit-button"\n                                size="small"\n                                @click="onEditBillingAddress"\n                            >\n                                {{ $tc(\'sw-order.detailBase.buttonEditAddress\') }}\n                            </sw-button>\n                        </dt>\n                        \n                        <dd @click="onEditBillingAddress">\n                            <sw-address\n                                :address="billingAddress"\n                                :formatting-address="formattingAddress"\n                            />\n                        </dd>\n                        {% endblock %}\n\n                        \n                        {% block sw_order_detail_base_order_overview_left_column_slot %}\n                        {% endblock %}\n\n                    </sw-description-list>\n                    {% endblock %}\n\n                    \n                    {% block sw_order_detail_base_order_overview_right_column %}\n                    <sw-description-list\n                        columns="1fr"\n                        grid="1fr"\n                        class="sw-order-user-card__summary-vertical"\n                    >\n\n                        \n                        {% block sw_order_detail_base_order_overview_phone_number %}\n                        <dt>\n                            {{ $tc(\'sw-order.detailBase.labelCustomerPhoneNumber\') }}\n                            <sw-label\n                                v-if="hasDifferentBillingAndShippingAddress"\n                                size="small"\n                                appearance="pill"\n                                class="sw-order-user-card__address-phone-label"\n                            >\n                                {{ $tc(\'sw-order.detailBase.headlineBillingAddress\') }}\n                            </sw-label>\n                        </dt>\n                        <dd>\n                            <sw-order-inline-field\n                                v-model="billingAddress.phoneNumber"\n                                :display-value="billingAddress.phoneNumber? billingAddress.phoneNumber : $tc(\'sw-order.detailBase.labelNoPhoneNumber\')"\n                                :value="billingAddress.phoneNumber"\n                                :editable="isEditing"\n                                class="sw-order-inline-field__truncateable"\n                                @input="$emit(\'order-change\')"\n                            />\n                        </dd>\n                        {% endblock %}\n\n                        \n                        {% block sw_order_detail_base_order_overview_shipping_address %}\n                        <dt>\n                            {{ $tc(\'sw-order.detailBase.headlineDeliveryAddress\') }}\n                            <sw-button\n                                v-show="hasDifferentBillingAndShippingAddress && isEditing"\n                                class="sw-order-user-card__address-edit-button"\n                                size="small"\n                                @click="onEditDeliveryAddress"\n                            >\n                                {{ $tc(\'sw-order.detailBase.buttonEditAddress\') }}\n                            </sw-button>\n                        </dt>\n\n                        <dd v-if="!hasDifferentBillingAndShippingAddress && hasDeliveries">\n                            <span>\n                                {{ $tc(\'sw-order.detailBase.labelSameDeliveryAndBillingAddress\') }}\n                            </span>\n                            <sw-button\n                                v-show="!hasDifferentBillingAndShippingAddress && isEditing"\n                                class="sw-order-user-card__address-add-button"\n                                size="small"\n                                block\n                                @click="onAddNewDeliveryAddress"\n                            >\n                                {{ $tc(\'sw-order.detailBase.buttonAddDeliveryAddress\') }}\n                            </sw-button>\n                        </dd>\n\n                        \n                        <dd\n                            v-else-if="hasDeliveries"\n                            @click="$emit(\'onEditDeliveryAddress\',$event)"\n                        >\n                            <sw-address\n                                :address="delivery.shippingOrderAddress"\n                                :formatting-address="formattingAddress"\n                            />\n                        </dd>\n\n                        <dd v-else>\n                            {{ $tc(\'sw-order.detailBase.labelNoDeliveriesYet\') }}\n                        </dd>\n                        {% endblock %}\n\n                        \n                        {% block sw_order_detail_base_order_overview_right_column_slot %}\n                        {% endblock %}\n\n                    </sw-description-list>\n                    {% endblock %}\n\n                </sw-container>\n                {% endblock %}\n\n            </sw-card-section>\n            {% endblock %}\n\n            \n            {% block sw_order_user_card_row_secondary %}\n            <sw-card-section\n                secondary\n                slim\n            >\n\n                \n                {% block sw_order_detail_base_secondary_info_order_overview %}\n                <sw-container\n                    columns="repeat(auto-fit, minmax(250px, 1fr))"\n                    gap="30px 30px"\n                >\n\n                    \n                    {% block sw_order_detail_base_secondary_info_order_overview_contents %}\n                    <sw-description-list\n                        columns="1fr"\n                        grid="1fr"\n                        class="sw-order-user-card__summary-vertical"\n                    >\n\n                        \n                        {% block sw_order_detail_base_secondary_info_order_overview_left_column %}\n\n                        \n                        {% block sw_order_detail_base_secondary_info_sales_channel %}\n                        <dt>{{ $tc(\'sw-order.detailBase.labelSalesChannel\') }}</dt>\n                        <dd class="sw-order-base__label-sales-channel">\n                            {{ currentOrder.salesChannel.translated.name }}\n                        </dd>\n                        {% endblock %}\n\n                        \n                        {% block sw_order_detail_base_secondary_info_payment %}\n                        <template v-if="currentOrder.transactions.length > 0">\n                            <dt>{{ $tc(\'sw-order.detailBase.labelPaymentMethod\') }}</dt>\n                            <dd>\n                                {{ currentOrder.transactions.last().paymentMethod.translated.distinguishableName }}\n                            </dd>\n                        </template>\n                        {% endblock %}\n\n                        \n                        {% block sw_order_detail_base_secondary_info_delivery %}\n                        <dt>{{ $tc(\'sw-order.detailBase.labelShippingMethod\') }}</dt>\n                        <dd>{{ hasDeliveries ? delivery.shippingMethod.translated.name :$tc(\'sw-order.detailBase.labelNoDeliveriesYet\') }}</dd>\n                        {% endblock %}\n\n                        \n                        {% block sw_order_detail_base_secondary_info_affiliate %}\n                        <dt>{{ $tc(\'sw-order.detailBase.labelAffiliateCode\') }}</dt>\n                        <dd>{{ currentOrder.affiliateCode || \'-\' }}</dd>\n                        {% endblock %}\n\n                        \n                        {% block sw_order_detail_base_secondary_info_order_overview_left_column_slot %}\n                        {% endblock %}\n\n                        {% endblock %}\n                    </sw-description-list>\n\n                    <sw-description-list\n                        columns="1fr"\n                        grid="1fr"\n                        class="sw-order-user-card__summary-vertical"\n                    >\n                        {%  block sw_order_detail_base_secondary_info_order_overview_right_column %}\n\n                        \n                        {% block sw_order_detail_base_secondary_info_order_language %}\n                        <dt>{{ $tc(\'sw-order.detailBase.labelLanguage\') }}</dt>\n                        <dd>{{ currentOrder.language.name }}</dd>\n                        {% endblock %}\n\n                        \n                        {% block sw_order_detail_base_secondary_info_last_change %}\n                        <dt>{{ $tc(\'sw-order.detailBase.labelLastChange\') }}</dt>\n                        <dd>{{ lastChangedDate }}</dd>\n                        {% endblock %}\n\n                        \n                        {% block sw_order_detail_base_secondary_info_tracking_codes %}\n                        <template v-if="isEditing && delivery">\n                            \n                            {% block sw_order_detail_base_secondary_info_tracking_codes_input %}\n                            <dt>\n                                \n                                {% block sw_order_detail_base_secondary_info_tracking_codes_input_label %}\n                                {{ $tc(\'sw-order.detailBase.labelTrackingCodes\') }}\n                                {% endblock %}\n                            </dt>\n                            <dd>\n                                \n                                {% block sw_order_detail_base_secondary_info_tracking_codes_input_content %}\n                                <sw-multi-tag-select\n                                    v-model="delivery.trackingCodes"\n                                    class="sw-order-user-card__tracking-code-select"\n                                    :placeholder="$tc(\'sw-order.detailBase.placeholderTrackingCodeSelect\')"\n                                    @change="emitChange"\n                                >\n                                    <template #message-add-data>\n                                        <span>{{ $tc(\'sw-order.detailBase.addTrackingCode\') }}</span>\n                                    </template>\n                                    <template #message-enter-valid-data>\n                                        <span>{{ $tc(\'sw-order.detailBase.enterValidTrackingCode\') }}</span>\n                                    </template>\n                                </sw-multi-tag-select>\n                                {% endblock %}\n                            </dd>\n                            {% endblock %}\n                        </template>\n                        <template v-else-if="delivery">\n                            \n                            {% block sw_order_detail_base_secondary_info_tracking_codes_display %}\n                            <dt>\n                                \n                                {% block sw_order_detail_base_secondary_info_tracking_codes_display_label %}\n                                {{ $tc(\'sw-order.detailBase.labelTrackingCodes\') }}\n                                {% endblock %}\n                            </dt>\n                            <dd>\n                                \n                                {% block sw_order_detail_base_secondary_info_tracking_codes_display_content %}\n                                <sw-button\n                                    v-for="trackingCode in delivery.trackingCodes"\n                                    :key="trackingCode"\n                                    class="sw-order-user-card__tracking-code-link"\n                                    size="x-small"\n                                    :link="renderTrackingUrl(trackingCode, delivery.shippingMethod)"\n                                    :disabled="!renderTrackingUrl(trackingCode, delivery.shippingMethod)"\n                                >{{ trackingCode }}</sw-button>\n                                {% endblock %}\n                            </dd>\n                            {% endblock %}\n                        </template>\n                        <template v-else>\n                            \n                            {% block sw_order_detail_base_secondary_info_tracking_codes_empty %}\n                            <dt>\n                                \n                                {% block sw_order_detail_base_secondary_info_tracking_codes_empty_label %}\n                                {{ $tc(\'sw-order.detailBase.labelTrackingCodes\') }}\n                                {% endblock %}\n                            </dt>\n                            <dd>\n                                \n                                {% block sw_order_detail_base_secondary_info_tracking_codes_empty_content %}\n                                <span>-</span>\n                                {% endblock %}\n                            </dd>\n                            {% endblock %}\n                        </template>\n                        {% endblock %}\n\n                        \n                        {% block sw_order_detail_base_secondary_info_campaign %}\n                        <template v-if="currentOrder.campaignCode">\n                            <dt>{{ $tc(\'sw-order.detailBase.labelCampaignCode\') }}</dt>\n                            <dd>{{ currentOrder.campaignCode || \'-\' }}</dd>\n                        </template>\n                        {% endblock %}\n\n                        \n                        {% block sw_order_detail_base_secondary_info_order_overview_right_column_slot %}\n                        {% endblock %}\n\n                        {% endblock %}\n\n                    </sw-description-list>\n                    {% endblock %}\n\n                </sw-container>\n                {% endblock %}\n\n            </sw-card-section>\n            {% endblock %}\n\n        </sw-container>\n    </template>\n</sw-card>\n\n{% endblock %}\n',inject:["customSnippetApiService","orderService","repositoryFactory","feature"],mixins:[d.getByName("salutation")],props:{currentOrder:{type:Object,required:!0},versionContext:{type:Object,required:!0},isLoading:{type:Boolean,required:!0},isEditing:{type:Boolean,required:!0}},data:function(){return{addressBeingEdited:null,countries:null,formattingAddress:""}},computed:{countryRepository:function(){return this.repositoryFactory.create("country")},orderAddressRepository:function(){return this.repositoryFactory.create("order_address")},OrderTagRepository:function(){return this.repositoryFactory.create(this.currentOrder.tags.entity,this.currentOrder.tags.source)},billingAddress:function(){var e=this;return this.currentOrder.addresses.find((function(n){return n.id===e.currentOrder.billingAddressId}))},delivery:function(){return this.currentOrder.deliveries[0]},orderDate:function(){return this.currentOrder&&!this.currentOrder.isLoading?i.date(this.currentOrder.orderDateTime):""},hasDeliveries:function(){return this.currentOrder.deliveries.length>0},hasDeliveryTrackingCode:function(){return this.hasDeliveries&&this.delivery.trackingCodes.length},hasDifferentBillingAndShippingAddress:function(){return this.hasDeliveries&&this.billingAddress.id!==this.delivery.shippingOrderAddressId},lastChangedDate:function(){return this.currentOrder?this.currentOrder.updatedAt?i.date(this.currentOrder.updatedAt):i.date(this.currentOrder.orderDateTime):""},hasTags:function(){return 0!==this.currentOrder.tags.length},fullName:function(){var e={name:this.salutation(this.currentOrder.orderCustomer),company:this.currentOrder.orderCustomer.company};return Object.values(e).filter((function(e){return null!==e})).join(" - ").trim()}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.reload(),this.renderFormattingAddress()},renderFormattingAddress:function(){var e,n=this;this.customSnippetApiService.render(this.billingAddress,null===(e=this.billingAddress.country)||void 0===e?void 0:e.addressFormat).then((function(e){n.formattingAddress=e.rendered}))},reload:function(){var e=this;this.countryRepository.search(this.countryCriteria()).then((function(n){e.countries=n}))},countryCriteria:function(){var e=new s(1,100);return e.addSorting(s.sort("name","ASC")),e},onEditBillingAddress:function(){this.isEditing&&(this.addressBeingEdited=this.billingAddress)},onEditDeliveryAddress:function(){this.isEditing&&(this.addressBeingEdited=this.delivery.shippingOrderAddress)},onAddressModalSave:function(){var e=this;this.addressBeingEdited=null,this.$nextTick((function(){e.emitChange()}))},onResetOrder:function(){var e=this;this.addressBeingEdited=null,this.$nextTick((function(){e.$emit("order-reset")}))},onAddressModalAddressSelected:function(e){var n=this,r=this.addressBeingEdited.id;this.addressBeingEdited=null,this.$nextTick((function(){return n.orderService.changeOrderAddress(r,e.id,{},t.getVersionHeader(n.currentOrder.versionId)).then((function(){n.emitChange()})).catch((function(e){n.$emit("error",e)}))}))},onAddNewDeliveryAddress:function(){var e=this;this.isEditing&&this.orderAddressRepository.clone(this.delivery.shippingOrderAddressId,this.versionContext).then((function(n){e.delivery.shippingOrderAddressId=n.id,e.emitChange()})).catch((function(n){e.$emit("error",n)}))},emitChange:function(){this.$emit("order-change")},onAddTag:function(e){var n=this;this.OrderTagRepository.assign(e.id,Shopware.Context.api).then((function(){n.emitChange()}))},onRemoveTag:function(e){var n=this;this.OrderTagRepository.delete(e.id).then((function(){n.emitChange()}))},renderTrackingUrl:function(e,n){var r=n?n.trackingUrl:null;return r?r.replace("%s",encodeURIComponent(e)):""}}}},U0zx:function(e,n,r){},glXj:function(e,n,r){var d=r("U0zx");d.__esModule&&(d=d.default),"string"==typeof d&&(d=[[e.i,d,""]]),d.locals&&(e.exports=d.locals);(0,r("ydqr").default)("7a1b12d6",d,!0,{})}}]);