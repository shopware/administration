(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[357],{EBF5:function(e,n,t){var o=t("JmAe");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,t("P8hj").default)("a9d0d1ae",o,!0,{})},JmAe:function(e,n,t){},hweA:function(e,n,t){"use strict";t.r(n);var o=t("c1oF"),s=t.n(o),l=t("CsSd"),r=t.n(l);t("EBF5");function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var a=Shopware.Data.Criteria,d=Shopware,u=d.Component,p=d.Mixin,g=u.getComponentHelper(),m=g.mapPropertyErrors,_=g.mapGetters,w=g.mapState;n.default={template:'\n{% block sw_product_cross_selling_form %}\n<div class="product-detail-cross-selling-form">\n    \n    {% block sw_prduct_cross_selling_form_card %}\n    <sw-card\n        :title="crossSelling.name"\n        position-identifier="sw-product-cross-selling-form"\n    >\n        <div\n            v-if="!isLoading && crossSelling"\n            class="product-detail-cross-selling-form__card-container"\n        >\n            \n            {% block sw_prduct_cross_selling_form_context_menu %}\n            <div class="sw-product-detail-cross-selling__context-button">\n                <sw-context-button>\n                    \n                    {% block sw_product_cross_selling_form_context_button_delete %}\n                    <sw-context-menu-item\n                        variant="danger"\n                        class="sw-product-cross_selling-context-item__delete-action"\n                        :disabled="!allowEdit"\n                        @click="onShowDeleteModal"\n                    >\n                        {{ $tc(\'sw-product.crossselling.buttonDeleteCrossSelling\') }}\n                    </sw-context-menu-item>\n                    {% endblock %}\n                </sw-context-button>\n            </div>\n            {% endblock %}\n\n            <sw-container\n                columns="2fr 1fr"\n                gap="0px 30px"\n                align="start"\n            >\n                \n                {% block sw_prduct_cross_selling_form_title_field %}\n                <sw-text-field\n                    {% if VUE3 %}\n                    v-model:value="crossSelling.name"\n                    {% else %}\n                    v-model="crossSelling.name"\n                    {% endif %}\n                    {% if VUE3 %}\n                    name="sw-field--crossSelling-name"\n                    {% endif %}\n                    :label="$tc(\'sw-product.crossselling.inputCrossSellingTitle\')"\n                    required\n                    :placeholder="placeholder(crossSelling, \'name\', $tc(\'sw-product.crossselling.inputCrossSellingTitlePlaceholder\'))"\n                    :error="crossSellingNameError"\n                    :disabled="!allowEdit"\n                />\n                {% endblock %}\n                \n                {% block sw_prduct_cross_selling_form_active_field %}\n                <sw-switch-field\n                    {% if VUE3 %}\n                    v-model:value="crossSelling.active"\n                    {% else %}\n                    v-model="crossSelling.active"\n                    {% endif %}\n                    class="sw-product-detail-cross-selling__active-switch"\n                    :label="$tc(\'sw-product.crossselling.inputCrossSellingActive\')"\n                    :disabled="!allowEdit"\n                    {% if VUE3 %}\n                    name="sw-field--crossSelling-active"\n                    {% endif %}\n                />\n                {% endblock %}\n            </sw-container>\n\n            <sw-container\n                columns="2fr 1fr"\n                gap="0px 30px"\n            >\n                \n                {% block sw_prduct_cross_selling_form_type %}\n                <sw-select-field\n                    {% if VUE3 %}\n                    v-model:value="crossSelling.type"\n                    {% else %}\n                    v-model="crossSelling.type"\n                    {% endif %}\n                    :label="$tc(\'sw-product.crossselling.inputCrossSellingType\')"\n                    :error="crossSellingTypeError"\n                    :disabled="!allowEdit"\n                    {% if VUE3 %}\n                    @update:value="onTypeChanged"\n                    {% else %}\n                    @change="onTypeChanged"\n                    {% endif %}\n                >\n                    <option\n                        v-for="option in crossSellingTypes"\n                        :key="option.value"\n                        :value="option.value"\n                    >\n                        {{ option.label }}\n                    </option>\n                </sw-select-field>\n                {% endblock %}\n                \n                {% block sw_prduct_cross_selling_form_position_field %}\n                <sw-number-field\n                    {% if VUE3 %}\n                    v-model:value="crossSelling.position"\n                    {% else %}\n                    v-model="crossSelling.position"\n                    {% endif %}\n                    number-type="int"\n                    :min="1"\n                    :label="$tc(\'sw-product.crossselling.inputCrossSellingPosition\')"\n                    :error="crossSellingPositionError"\n                    :placeholder="$tc(\'sw-product.crossselling.inputCrossSellingPositionPlaceholder\')"\n                    :disabled="!allowEdit"\n                />\n                {% endblock %}\n            </sw-container>\n\n            <div v-if="!useManualAssignment">\n                \n                {% block sw_prduct_cross_selling_form_product_stream_field %}\n                <sw-entity-single-select\n                    id="sw-field--crossSelling-product-group"\n                    {% if VUE3 %}\n                    v-model:value="crossSelling.productStreamId"\n                    {% else %}\n                    v-model="crossSelling.productStreamId"\n                    {% endif %}\n                    entity="product_stream"\n                    class="sw-select-cross-selling__select-product-stream"\n                    :label="$tc(\'sw-product.crossselling.inputCrossSellingProductStream\')"\n                    :placeholder="$tc(\'sw-product.crossselling.inputCrossSellingProductStreamPlaceholder\')"\n                    :disabled="!allowEdit"\n                    show-clearable-button\n                />\n                {% endblock %}\n\n                <sw-container\n                    columns="1fr 1fr"\n                    gap="0px 30px"\n                >\n                    \n                    {% block sw_prduct_cross_selling_form_sort_field %}\n                    <sw-select-field\n                        :label="$tc(\'sw-product.crossselling.inputCrossSellingSorting\')"\n                        :value="sortingConCat"\n                        :disabled="!allowEdit"\n                        {% if VUE3 %}\n                        @update:value="onSortingChanged"\n                        {% else %}\n                        @change="onSortingChanged"\n                        {% endif %}\n                    >\n                        <option\n                            v-for="option in sortingTypes"\n                            :key="option.value"\n                            :value="option.value"\n                        >\n                            {{ option.label }}\n                        </option>\n                    </sw-select-field>\n                    {% endblock %}\n\n                    \n                    {% block sw_prduct_cross_selling_form_limit_field %}\n                    <sw-number-field\n                        {% if VUE3 %}\n                        v-model:value="crossSelling.limit"\n                        {% else %}\n                        v-model="crossSelling.limit"\n                        {% endif %}\n                        number-type="int"\n                        :label="$tc(\'sw-product.crossselling.inputCrossSellingLimit\')"\n                        :disabled="!allowEdit"\n                    />\n                    {% endblock %}\n                </sw-container>\n\n                \n                {% block sw_prduct_cross_selling_form_preview_link %}\n                <sw-container\n                    columns="1fr"\n                    justify="end"\n                    class="sw-product-cross-selling-form__links"\n                >\n                    <a\n                        class="sw-card__quick-link"\n                        :class="{ \'is--disabled\': previewDisabled }"\n                        role="button"\n                        tabindex="0"\n                        @click="openModalPreview"\n                        @keydown.enter="openModalPreview"\n                    >\n                        {{ $tc(\'sw-product.crossselling.linkOpenStreamPreview\') }}\n                        <sw-icon\n                            name="regular-long-arrow-right"\n                            small\n                        />\n                    </a>\n                </sw-container>\n                {% endblock %}\n            </div>\n\n            \n            {% block sw_product_detail_cross_selling_assignment %}\n            <sw-product-cross-selling-assignment\n                v-else\n                :assigned-products="crossSelling.assignedProducts"\n                :cross-selling-id="crossSelling.id"\n                :searchable-fields="[\'name\', \'productNumber\']"\n                :allow-edit="allowEdit"\n            />\n            {% endblock %}\n\n            \n            {% block sw_product_detail_cross_selling_modal_preview_modal %}\n            <sw-product-stream-modal-preview\n                v-if="showModalPreview"\n                ref="modalPreview"\n                :filters="productStreamFilterTree"\n                @modal-close="closeModalPreview"\n            />\n            {% endblock %}\n        </div>\n    </sw-card>\n    {% endblock %}\n\n    \n    {% block sw_product_detail_cross_selling_form_modal_delete %}\n    <sw-modal\n        v-if="showDeleteModal"\n        variant="small"\n        :title="$tc(\'sw-product.crossselling.deleteConfirmTitle\')"\n        class="sw-product-detail-cross-selling__delete-modal"\n        @modal-close="onCloseDeleteModal"\n    >\n        \n        {% block sw_product_detail_cross_selling_form_delete_text %}\n        <p>\n            {{ $tc(\'sw-product.crossselling.deleteConfirmText\') }}\n        </p>\n        {% endblock %}\n\n        \n        {% block sw_product_detail_cross_selling_form_modal_delete_footer %}\n        <template #modal-footer>\n            \n            {% block sw_product_detail_cross_selling_modal_delete_action_cancel %}\n            <sw-button\n                size="small"\n                @click="onCloseDeleteModal"\n            >\n                {{ $tc(\'sw-product.crossselling.deleteButtonCancel\') }}\n            </sw-button>\n            {% endblock %}\n\n            \n            {% block sw_product_detail_cross_selling_form_modal_delete_action_delete %}\n            <sw-button\n                class="sw-product-detail-cross-selling__delete-button"\n                size="small"\n                variant="danger"\n                @click="onConfirmDelete"\n            >\n                {{ $tc(\'sw-product.crossselling.deleteButtonDelete\') }}\n            </sw-button>\n            {% endblock %}\n        </template>\n        {% endblock %}\n    </sw-modal>\n    {% endblock %}\n\n    \n    {% block sw_product_cross_selling_form_condition_tree_invisibly %}\n    <sw-condition-tree\n        v-if="productStreamFilterRepository"\n        v-show="false"\n        association-field="productStreamId"\n        child-association-field="queries"\n        :initial-conditions="productStreamFilter"\n        :condition-repository="productStreamFilterRepository"\n        :condition-data-provider-service="productStreamConditionService"\n        :association-value="associationValue"\n        :root-condition="null"\n        @conditions-changed="updateProductStreamFilterTree"\n    />\n    {% endblock %}\n</div>\n{% endblock %}\n',inject:["repositoryFactory","productStreamConditionService"],provide:function(){return{productCustomFields:{}}},mixins:[p.getByName("placeholder")],props:{crossSelling:{type:Object,required:!0},allowEdit:{type:Boolean,required:!1,default:!0}},data:function(){return{showDeleteModal:!1,showModalPreview:!1,productStream:null,productStreamFilter:[],productStreamFilterTree:null,optionSearchTerm:"",useManualAssignment:!1,sortBy:"name",sortDirection:"ASC",assignmentKey:0}},computed:c(c(c(c({},m("crossSelling",["name","type","position"])),w("swProductDetail",["product"])),_("swProductDetail",["isLoading"])),{},{productCrossSellingRepository:function(){return this.repositoryFactory.create("product_cross_selling")},productStreamRepository:function(){return this.repositoryFactory.create("product_stream")},productStreamFilterRepository:function(){if(!this.productStream)return null;var e=this.productStream.filters,n=e.entity,t=e.source;return this.repositoryFactory.create(n,t)},productStreamFilterCriteria:function(){var e=new a(1,25);return e.addFilter(a.equals("productStreamId",this.crossSelling.productStreamId)),e},crossSellingAssigmentRepository:function(){return this.repositoryFactory.create("product_cross_selling_assigned_products")},sortingTypes:function(){return[{label:this.$tc("sw-product.crossselling.priceDescendingSortingType"),value:"price:DESC"},{label:this.$tc("sw-product.crossselling.priceAscendingSortingType"),value:"price:ASC"},{label:this.$tc("sw-product.crossselling.nameSortingType"),value:"name:ASC"},{label:this.$tc("sw-product.crossselling.releaseDateDescendingSortingType"),value:"releaseDate:DESC"},{label:this.$tc("sw-product.crossselling.releaseDateAscendingSortingType"),value:"releaseDate:ASC"}]},crossSellingTypes:function(){return[{label:this.$tc("sw-product.crossselling.productStreamType"),value:"productStream"},{label:this.$tc("sw-product.crossselling.productListType"),value:"productList"}]},previewDisabled:function(){return!this.productStream},sortingConCat:function(){return"".concat(this.crossSelling.sortBy,":").concat(this.crossSelling.sortDirection)},disablePositioning:function(){return!!this.term||"position"!==this.sortBy},associationValue:function(){var e;return(null===(e=this.crossSelling)||void 0===e?void 0:e.productStreamId)||""}}),watch:{"crossSelling.productStreamId":function(){this.useManualAssignment||this.loadStreamPreview()}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.useManualAssignment="productList"===this.crossSelling.type,this.useManualAssignment||null===this.crossSelling.productStreamId||this.loadStreamPreview()},onShowDeleteModal:function(){this.showDeleteModal=!0},onCloseDeleteModal:function(){this.showDeleteModal=!1},onConfirmDelete:function(){var e=this;this.onCloseDeleteModal(),this.$nextTick((function(){e.product.crossSellings.remove(e.crossSelling.id)}))},openModalPreview:function(){this.previewDisabled||(this.showModalPreview=!0)},closeModalPreview:function(){this.showModalPreview=!1},loadStreamPreview:function(){var e=this;this.productStreamRepository.get(this.crossSelling.productStreamId).then((function(n){e.productStream=n,e.getProductStreamFilter()}))},getProductStreamFilter:function(){var e=this;return null===this.productStreamFilterRepository?[]:this.productStreamFilterRepository.search(this.productStreamFilterCriteria).then((function(n){e.productStreamFilter=n}))},updateProductStreamFilterTree:function(e){var n=e.conditions;this.productStreamFilterTree=n},onSortingChanged:function(e){var n=e.split(":"),t=s()(n,2);this.crossSelling.sortBy=t[0],this.crossSelling.sortDirection=t[1]},onTypeChanged:function(e){this.useManualAssignment="productList"===e}}}}}]);