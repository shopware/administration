{"version":3,"sources":["webpack:///./src/module/sw-review/page/sw-review-detail/index.js","webpack:///./src/module/sw-review/page/sw-review-detail/sw-review-detail.html.twig","webpack:///./src/module/sw-review/page/sw-review-detail/sw-review-detail.scss"],"names":["Criteria","Shopware","Data","template","inject","mixins","shortcuts","active","this","acl","can","method","ESCAPE","data","isLoading","isSaveSuccessful","reviewId","review","customFieldSets","metaInfo","title","$createTitle","identifier","computed","repository","repositoryFactory","create","stars","points","languageCriteria","criteria","addSorting","sort","tooltipSave","message","$tc","disabled","showOnDisabledElements","systemKey","$device","getSystemKey","concat","appearance","tooltipCancel","showCustomFields","length","dateFilter","Filter","getByName","watch","createdComponent","created","methods","ExtensionAPI","publishData","id","path","scope","$route","params","loadEntityData","loadCustomFieldSets","_this","addAssociation","context","_objectSpread","Context","api","inheritance","get","then","_this2","customFieldDataProviderService","getCustomFieldSets","sets","onSave","_this3","messageSaveError","save","catch","createNotificationError","onSaveFinish","onCancel","$router","push","name","content","__esModule","default","module","i","locals","exports","add"],"mappings":"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","file":"static/js/38d0b7c4715cb464c8fd.js","sourcesContent":["import template from './sw-review-detail.html.twig';\nimport './sw-review-detail.scss';\n\nconst { Criteria } = Shopware.Data;\n\n/**\n * @package inventory\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: ['repositoryFactory', 'acl', 'customFieldDataProviderService'],\n\n    mixins: [\n        'placeholder',\n        'notification',\n        'salutation',\n    ],\n\n    shortcuts: {\n        'SYSTEMKEY+S': {\n            active() {\n                return this.acl.can('review.editor');\n            },\n            method: 'onSave',\n        },\n        ESCAPE: 'onCancel',\n    },\n\n    data() {\n        return {\n            isLoading: null,\n            isSaveSuccessful: false,\n            reviewId: null,\n            review: {},\n            customFieldSets: null,\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(this.identifier),\n        };\n    },\n\n    computed: {\n        identifier() {\n            return this.review.title;\n        },\n\n        repository() {\n            return this.repositoryFactory.create('product_review');\n        },\n\n        stars() {\n            if (this.review.points >= 0) {\n                return this.review.points;\n            }\n\n            return 0;\n        },\n\n        languageCriteria() {\n            const criteria = new Criteria(1, 25);\n\n            criteria.addSorting(Criteria.sort('name', 'ASC', false));\n\n            return criteria;\n        },\n\n        tooltipSave() {\n            if (!this.acl.can('review.editor')) {\n                return {\n                    message: this.$tc('sw-privileges.tooltip.warning'),\n                    disabled: true,\n                    showOnDisabledElements: true,\n                };\n            }\n\n            const systemKey = this.$device.getSystemKey();\n\n            return {\n                message: `${systemKey} + S`,\n                appearance: 'light',\n            };\n        },\n\n        tooltipCancel() {\n            return {\n                message: 'ESC',\n                appearance: 'light',\n            };\n        },\n\n        showCustomFields() {\n            return this.review && this.customFieldSets && this.customFieldSets.length > 0;\n        },\n\n        dateFilter() {\n            return Shopware.Filter.getByName('date');\n        },\n    },\n\n    watch: {\n        '$route.params.id'() {\n            this.createdComponent();\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            Shopware.ExtensionAPI.publishData({\n                id: 'sw-review-detail__review',\n                path: 'review',\n                scope: this,\n            });\n            if (this.$route.params.id) {\n                this.reviewId = this.$route.params.id;\n\n                this.loadEntityData();\n                this.loadCustomFieldSets();\n            }\n        },\n\n        loadEntityData() {\n            this.isLoading = true;\n            const criteria = new Criteria(1, 25);\n            criteria.addAssociation('customer');\n            criteria.addAssociation('salesChannel');\n            criteria.addAssociation('product');\n\n            const context = { ...Shopware.Context.api, inheritance: true };\n\n            this.repository.get(this.reviewId, context, criteria).then((review) => {\n                this.review = review;\n                this.isLoading = false;\n            });\n        },\n\n        loadCustomFieldSets() {\n            this.customFieldDataProviderService.getCustomFieldSets('product_review').then((sets) => {\n                this.customFieldSets = sets;\n            });\n        },\n\n        onSave() {\n            this.isSaveSuccessful = false;\n            const messageSaveError = this.$tc(\n                'global.notification.notificationSaveErrorMessageRequiredFieldsInvalid',\n            );\n\n            this.repository.save(this.review).then(() => {\n                this.isSaveSuccessful = true;\n            }).catch(() => {\n                this.createNotificationError({\n                    message: messageSaveError,\n                });\n            });\n        },\n\n        onSaveFinish() {\n            this.loadEntityData();\n            this.isSaveSuccessful = false;\n        },\n\n        onCancel() {\n            this.$router.push({ name: 'sw.review.index' });\n        },\n    },\n};\n","export default \"\\n{% block sw_review_detail %}\\n<sw-page class=\\\"sw-review-detail\\\">\\n\\n    \\n    {% block sw_review_detail_header %}\\n    <template #smart-bar-header>\\n        <h2>{{ placeholder(review, 'title', $tc('sw-review.detail.textHeadline')) }}</h2>\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_review_detail_actions %}\\n    <template #smart-bar-actions>\\n\\n        \\n        {% block sw_review_detail_actions_abort %}\\n        <sw-button\\n            v-tooltip.bottom=\\\"tooltipCancel\\\"\\n            @click=\\\"onCancel\\\"\\n        >\\n            {{ $tc('global.default.cancel') }}\\n        </sw-button>\\n        {% endblock %}\\n\\n        \\n        {% block sw_review_detail_actions_save %}\\n        <sw-button-process\\n            v-tooltip.bottom=\\\"tooltipSave\\\"\\n            class=\\\"sw-review-detail__save-action\\\"\\n            variant=\\\"primary\\\"\\n            :disabled=\\\"isLoading || !acl.can('review.editor')\\\"\\n            :process-success=\\\"isSaveSuccessful\\\"\\n            {% if VUE3 %}\\n            @update:process-success=\\\"onSaveFinish\\\"\\n            {% else %}\\n            @process-finish=\\\"onSaveFinish\\\"\\n            {% endif %}\\n            @click=\\\"onSave\\\"\\n        >\\n            {{ $tc('global.default.save') }}\\n        </sw-button-process>\\n        {% endblock %}\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_review_detail_content %}\\n    <template #content>\\n        <sw-card-view>\\n            <template v-if=\\\"isLoading\\\">\\n                <sw-skeleton />\\n                <sw-skeleton variant=\\\"detail-bold\\\" />\\n            </template>\\n\\n            <template v-else>\\n\\n                \\n                {% block sw_review_detail_basic_info_card %}\\n                <sw-card\\n                    v-if=\\\"review\\\"\\n                    position-identifier=\\\"sw-review-detail-basic-info\\\"\\n                    :title=\\\"$tc('sw-review.detail.cardTitleReviewInfo')\\\"\\n                >\\n\\n                    \\n                    {% block sw_customer_card_rows %}\\n                    <template #grid>\\n                        <sw-container rows=\\\"auto auto\\\">\\n\\n                            \\n                            {% block sw_customer_card_row_primary %}\\n                            <sw-card-section divider=\\\"bottom\\\">\\n\\n                                \\n                                {% block sw_customer_card_metadata_container %}\\n                                <sw-container>\\n\\n                                    \\n                                    {% block sw_customer_card_metadata %}\\n                                    <div class=\\\"sw-review-detail__metadata\\\">\\n\\n                                        \\n                                        {% block sw_customer_card_metadata_customer_name %}\\n                                        \\n                                        {% block sw_custsomer_card_metadata_customer_name_label %}\\n                                        <div class=\\\"sw-review-detail__metadata-review-headline\\\">\\n                                            <sw-container\\n                                                columns=\\\"auto 150px\\\"\\n                                                gap=\\\"0px 15px\\\"\\n                                            >\\n                                                <div class=\\\"sw-review-detail__metadata-review-title\\\">\\n                                                    {{ review.title }}\\n                                                </div>\\n                                                <div\\n                                                    v-if=\\\"stars\\\"\\n                                                    class=\\\"sw-review-detail__metadata-review-stars\\\"\\n                                                >\\n                                                    <sw-rating-stars\\n                                                        v-model=\\\"review.points\\\"\\n                                                        class=\\\"star-count-display\\\"\\n                                                    />\\n                                                    <div class=\\\"star-count-description\\\">\\n                                                        {{ $tc(`sw-review.detail.review${Math.round(stars)}PointRatingText`) }}\\n                                                    </div>\\n                                                </div>\\n                                            </sw-container>\\n                                        </div>\\n                                        <p class=\\\"sw-review-detail__metadata-review-content\\\">\\n                                            {{ review.content }}\\n                                        </p>\\n                                        {% endblock %}\\n                                        {% endblock %}\\n                                    </div>\\n                                    {% endblock %}\\n                                </sw-container>\\n                                {% endblock %}\\n                            </sw-card-section>\\n                            {% endblock %}\\n\\n                            \\n                            {% block sw_customer_card_row_secondary %}\\n                            <sw-card-section\\n                                secondary\\n                                slim\\n                            >\\n                                <slot name=\\\"default\\\">\\n\\n                                    <sw-container\\n                                        class=\\\"sw-review-base-info\\\"\\n                                        columns=\\\"repeat(auto-fit, minmax(250px, 1fr))\\\"\\n                                        gap=\\\"0px 15px\\\"\\n                                    >\\n                                        <div class=\\\"sw-review-base-info-columns\\\">\\n\\n                                            \\n                                            {% block sw_customer_base_metadata_created_at %}\\n                                            <sw-description-list>\\n\\n                                                \\n                                                {% block sw_customer_base_metadata_created_at_label %}\\n                                                <dt class=\\\"sw-review-base-info__label\\\">\\n                                                    {{ $tc('sw-review.detail.labelCreatedAt') }}\\n                                                </dt>\\n                                                {% endblock %}\\n\\n                                                \\n                                                {% block sw_customer_base_metadata_created_at_content %}\\n                                                <dd>\\n                                                    {{ dateFilter(review.createdAt, { hour: '2-digit', minute: '2-digit', second: '2-digit' }) }}\\n                                                </dd>\\n                                                {% endblock %}\\n                                            </sw-description-list>\\n                                            {% endblock %}\\n\\n                                            \\n                                            {% block sw_customer_base_metadata_sales_channel %}\\n                                            <sw-description-list>\\n\\n                                                \\n                                                {% block sw_customer_base_metadata_sales_channel_label %}\\n                                                <dt class=\\\"sw-review-base-info__label\\\">\\n                                                    {{ $tc('sw-review.detail.labelSalesChannel') }}\\n                                                </dt>\\n                                                {% endblock %}\\n\\n                                                \\n                                                {% block sw_customer_base_metadata_sales_channel_content %}\\n                                                <dd>\\n                                                    {{ review.salesChannel.name }}\\n                                                </dd>\\n                                                {% endblock %}\\n                                            </sw-description-list>\\n                                            {% endblock %}\\n\\n                                            \\n                                            {% block sw_customer_base_metadata_product %}\\n                                            <sw-description-list>\\n\\n                                                \\n                                                {% block sw_customer_base_metadata_product_label %}\\n                                                <dt class=\\\"sw-review-base-info__label\\\">\\n                                                    {{ $tc('sw-review.detail.labelProduct') }}\\n                                                </dt>\\n                                                {% endblock %}\\n\\n                                                \\n                                                {% block sw_customer_base_metadata_product_content %}\\n                                                <dd>{{ review.product.translated.name }}</dd>\\n                                                {% endblock %}\\n                                            </sw-description-list>\\n                                            {% endblock %}\\n                                        </div>\\n                                        <div class=\\\"sw-review-base-info-columns\\\">\\n\\n                                            \\n                                            {% block sw_customer_base_metadata_customer %}\\n                                            <sw-description-list>\\n\\n                                                \\n                                                {% block sw_customer_base_metadata_customer_label %}\\n                                                <dt class=\\\"sw-review-base-info__label\\\">\\n                                                    {{ $tc('sw-review.detail.labelCustomer') }}\\n                                                </dt>\\n                                                {% endblock %}\\n\\n                                                \\n                                                {% block sw_customer_base_metadata_customer_content %}\\n                                                <dd v-if=\\\"review.customer\\\">\\n                                                    {{ salutation(review.customer) }}\\n                                                </dd>\\n                                                <dd v-else>\\n                                                    {{ review.externalUser }}\\n                                                </dd>\\n                                                {% endblock %}\\n                                            </sw-description-list>\\n                                            {% endblock %}\\n\\n                                            \\n                                            {% block sw_customer_base_metadata_email %}\\n                                            <sw-description-list>\\n                                                \\n                                                {% block sw_customer_base_metadata_email_label %}\\n                                                <dt class=\\\"sw-review-base-info__label\\\">\\n                                                    {{ $tc('sw-review.detail.labelEmail') }}\\n                                                </dt>\\n                                                {% endblock %}\\n\\n                                                \\n                                                {% block sw_customer_base_metadata_email_content %}\\n                                                <dd v-if=\\\"review.customer\\\">\\n                                                    {{ review.customer.email }}\\n                                                </dd>\\n                                                <dd v-else>\\n                                                    {{ review.externalEmail }}\\n                                                </dd>\\n                                                {% endblock %}\\n                                            </sw-description-list>\\n                                            {% endblock %}\\n                                        </div>\\n                                    </sw-container>\\n                                </slot>\\n                            </sw-card-section>\\n                            {% endblock %}\\n                        </sw-container>\\n                    </template>\\n                    {% endblock %}\\n                </sw-card>\\n                {% endblock %}\\n\\n                <sw-card\\n                    v-if=\\\"review\\\"\\n                    position-identifier=\\\"sw-review-detail-properties\\\"\\n                    class=\\\"sw-review-properties\\\"\\n                    :title=\\\"$tc('sw-review.detail.cardTitleReviewProperties')\\\"\\n                >\\n\\n                    \\n                    {% block sw_review_detail_basic_info_card_description_list %}\\n                    <sw-container\\n                        columns=\\\"1fr 1fr\\\"\\n                        gap=\\\"16px\\\"\\n                    >\\n\\n                        \\n                        {% block sw_review_detail_description_list_language %}\\n                        <sw-entity-single-select\\n                            id=\\\"language\\\"\\n                            {% if VUE3 %}\\n                            v-model:value=\\\"review.languageId\\\"\\n                            {% else %}\\n                            v-model=\\\"review.languageId\\\"\\n                            {% endif %}\\n                            entity=\\\"language\\\"\\n                            class=\\\"sw-review__language-select\\\"\\n                            required\\n                            show-clearable-button\\n                            :disabled=\\\"!acl.can('review.editor')\\\"\\n                            :label=\\\"$tc('sw-review.detail.labelLanguage')\\\"\\n                            :criteria=\\\"languageCriteria\\\"\\n                        />\\n                        {% endblock %}\\n\\n                        \\n                        {% block sw_review_detail_description_list_status %}\\n                        <sw-switch-field\\n                            {% if VUE3 %}\\n                            v-model:value=\\\"review.status\\\"\\n                            {% else %}\\n                            v-model=\\\"review.status\\\"\\n                            {% endif %}\\n                            class=\\\"status-switch\\\"\\n                            :disabled=\\\"!acl.can('review.editor')\\\"\\n                            :label=\\\"$tc('sw-review.detail.labelStatus')\\\"\\n                            bordered\\n                        />\\n                        {% endblock %}\\n                    </sw-container>\\n                    {% endblock %}\\n                </sw-card>\\n\\n                <sw-card\\n                    v-if=\\\"review\\\"\\n                    position-identifier=\\\"sw-review-detail-comment\\\"\\n                    :title=\\\"$tc('sw-review.detail.labelComment')\\\"\\n                >\\n\\n                    \\n                    {% block sw_review_detail_basic_info_card_comment %}\\n                    <sw-textarea-field\\n                        {% if VUE3 %}\\n                        v-model:value=\\\"review.comment\\\"\\n                        {% else %}\\n                        v-model=\\\"review.comment\\\"\\n                        {% endif %}\\n                        class=\\\"sw-review__comment-field\\\"\\n                        :disabled=\\\"!acl.can('review.editor')\\\"\\n                        :label=\\\"$tc('sw-review.detail.titleCardComment')\\\"\\n                        :placeholder=\\\"$tc('sw-review.detail.placeholderComment')\\\"\\n                    />\\n                    {% endblock %}\\n                </sw-card>\\n\\n                \\n                {% block sw_review_detail_custom_field_sets %}\\n                <sw-card\\n                    v-if=\\\"showCustomFields\\\"\\n                    position-identifier=\\\"sw-review-detail-custom-field-sets\\\"\\n                    :title=\\\"$tc('sw-settings-custom-field.general.mainMenuItemGeneral')\\\"\\n                >\\n                    <sw-custom-field-set-renderer\\n                        :entity=\\\"review\\\"\\n                        :disabled=\\\"!acl.can('review.editor')\\\"\\n                        :sets=\\\"customFieldSets\\\"\\n                    />\\n                </sw-card>\\n                {% endblock %}\\n            </template>\\n        </sw-card-view>\\n    </template>\\n    {% endblock %}\\n</sw-page>\\n{% endblock %}\\n\";","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-review-detail.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"23688740\", content, true, {});"],"sourceRoot":""}