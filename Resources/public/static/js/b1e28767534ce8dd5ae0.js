(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[84535],{159387:function(){},484535:function(t,i,e){"use strict";e.r(i),e.d(i,{default:function(){return s}}),e(102604);let{Criteria:n}=Shopware.Data;var s={template:'<div class="sw-cms-el-config-product-listing-config-sorting-grid">\n\n    <sw-data-grid\n        class="sw-cms-el-config-product-listing-config-sorting-grid__grid"\n        :data-source="visibleProductSortings"\n        :columns="gridColumns"\n        :compact-mode="false"\n        :allow-inline-edit="true"\n        :show-selection="false"\n        plain-appearance\n    >\n\n        <template #actions="{ item }">\n            <sw-context-menu-item\n                v-if="!item.locked"\n                :class="\'sw-cms-el-config-product-listing-config-sorting-grid__grid_item_\' + item.id"\n                variant="danger"\n                :disabled="isDefaultSorting(item)"\n                @click="onDelete(item)"\n            >\n                {{ $tc(\'global.default.delete\') }}\n            </sw-context-menu-item>\n        </template>\n\n        <template #column-fields="{ item }">\n            <span\n                class="sw-cms-el-config-product-listing-config-sorting-grid__criteria"\n                :title="formatProductSortingFields(item.fields)"\n            >\n                {{ formatProductSortingFields(item.fields) }}\n            </span>\n        </template>\n\n        <template #pagination>\n            <sw-pagination\n                v-if="paginationVisible"\n                :page="page"\n                :limit="limit"\n                :total="total"\n                :steps="steps"\n                :auto-hide="false"\n                @page-change="onPageChange"\n            />\n        </template>\n    </sw-data-grid>\n</div>\n',inject:["repositoryFactory"],mixins:["sw-inline-snippet"],props:{productSortings:{type:Array,required:!0},defaultSorting:{type:Object,required:!0}},data(){return{limit:10,page:1,customFields:[]}},computed:{visibleProductSortings(){return this.productSortings.slice((this.page-1)*this.limit,(this.page-1)*this.limit+this.limit)},paginationVisible(){return this.total>this.limit},customFieldRepository(){return this.repositoryFactory.create("custom_field")},customFieldCriteria(){return new n(1,25)},total(){return this.productSortings.length},gridColumns(){return[{property:"label",label:"sw-cms.elements.productListing.config.sorting.gridHeaderName"},{property:"fields",label:"sw-cms.elements.productListing.config.sorting.gridHeaderFields",multiLine:!0},{property:"priority",label:"sw-cms.elements.productListing.config.sorting.gridHeaderPriority",inlineEdit:"number"}]}},created(){this.createdComponent()},methods:{createdComponent(){this.fetchCustomFields()},fetchCustomFields(){this.customFieldRepository.search(this.customFieldCriteria).then(t=>{this.customFields=t})},formatProductSortingFields(t){return Array.isArray(t)?t.map(t=>this.isItemACustomField(t.field)?this.getCustomFieldLabelByCriteriaName(t.field):this.$tc(`sw-settings-listing.general.productSortingCriteriaGrid.options.label.${t.field}`)).join(", "):""},isItemACustomField(t){let i=this.stripCustomFieldPath(t);return this.customFields.some(t=>t.name===i)},stripCustomFieldPath(t){return t.replace(/customFields\./,"")},getCustomFieldLabelByCriteriaName(t){let i=this.stripCustomFieldPath(t),e=this.getCustomFieldByName(i),n=this.getInlineSnippet(e.config.label);return null===n?i:n},getCustomFieldByName(t){return this.customFields.find(i=>i.name===t)},onDelete(t){this.productSortings.remove(t.id)},isDefaultSorting(t){return!!this.defaultSorting&&t.id===this.defaultSorting.id},onPageChange({page:t,limit:i}){this.page=t,this.limit=i}}}},102604:function(t,i,e){var n=e(159387);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.id,n,""]]),n.locals&&(t.exports=n.locals),e(745346).Z("216ab309",n,!0,{})}}]);