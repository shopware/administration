{"version":3,"sources":["webpack:///./src/module/sw-product/helper/sw-products-variants-generator.js","webpack:///./src/module/sw-product/component/sw-product-variants/sw-product-modal-variant-generation/index.js","webpack:///./src/module/sw-product/component/sw-product-variants/sw-product-modal-variant-generation/sw-product-modal-variant-generation.html.twig","webpack:///./node_modules/events/events.js","webpack:///./src/module/sw-product/component/sw-product-variants/sw-product-modal-variant-generation/sw-product-modal-variant-generation.scss"],"names":["deepCopyObject","Shopware","Utils","object","md5","format","VariantsGenerator","_EventEmitter","_inherits","_super","_createSuper","_this","_classCallCheck","call","product","syncService","Service","httpClient","languageId","_createClass","key","value","queues","_this2","Promise","resolveDelete","emit","type","progress","deleteQueue","length","mapped","map","id","processQueue","then","createQueue","resolve","currencies","_this3","this","configuratorSettings","variantListingConfig","displayParent","configuratorGroupConfig","mainVariantId","grouped","groupTheOptions","loadExisting","variantsOnServer","deleteArray","Object","keys","permutations","buildCombinations","filterVariations","newVariations","variationOnServer","_this4","hashed","numbers","numberMap","_i","_Object$entries","entries","_Object$entries$_i","_slicedToArray","variant","hash","JSON","stringify","options","sort","productNumber","newVariationsSorted","variation","priceChanges","reduce","result","element","push","option","price","increment","forEach","undefined","variations","optionId","variationPrice","variationObject","variationId","refCurrencyPrice","currencyId","refPrice","find","productPrice","defaultCurrency","currency","isSystemDefault","defaultCurrencyPrice","actualCurrency","net","factor","gross","grossPrice","netPrice","linked","generated","createNumber","variantObject","parentId","stock","number","values","filteredCreateQueue","filterRestrictions","prefix","exists","concat","hasOwnProperty","restrictionsOnly","variantRestrictions","restriction","filter","newVariation","restrictionArray","indexOf","get","headers","getBasicHeaders","response","data","configurators","groupedData","accumulator","configurator","groupId","_this5","group","arguments","index","all","entryValue","slice","nestedItem","queue","offset","limit","_this6","chunk","payload","action","entity","sync","EventEmitter","Criteria","Data","_Shopware","Mixin","Context","mapState","Component","getComponentHelper","template","inject","mixins","getByName","props","required","groups","Array","selectedGroups","actualStatus","String","default","activeTab","isLoading","actualProgress","maxProgress","progressType","variantsNumber","variantsGenerator","showUploadModal","variantGenerationQueue","term","paginatedVariantArray","disableRouteParams","downloadFilesForAllVariants","usageOfFiles","idToIndex","computed","_objectSpread","productRepository","repositoryFactory","create","optionRepository","mediaRepository","progressInPercentage","progressMessage","$tc","buttonVariant","buttonLabel","isGenerateButtonDisabled","some","item","downloads","productStates","includes","watch","getList","created","createdComponent","methods","on","optionIdsToSearch","criteria","addFilter","equalsAny","addAssociation","search","firstOption","secondOption","firstGroupName","name","secondGroupName","localeCompare","total","removeFile","fileName","download","fileExtension","removeFileForAllVariants","file","usage","use","filteredQueue","_option$entity$transl","translated","toUpperCase","start","page","end","handlePageChange","opts","onPageChange","generateVariants","maxPurchase","minPurchase","isCloseout","shippingFree","mediaIds","mediaId","saveVariants","save","$emit","$root","showNextStep","calcVariantsNumber","groupedDataValues","curr","onChangeAllVariantValues","checked","variants","_toConsumableArray","updateUsageForAllVariantFiles","onChangeVariantValue","isUploadDisabled","isExistingMedia","files","targetId","_ref","successfulUpload","event","_this7","api","media","pushFileToUsageList","currentItem","_this8","onTermChange","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","Number","isNaN","init","module","exports","once","emitter","reject","eventListener","errorListener","removeListener","err","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","prepend","m","events","existing","warning","newListener","unshift","warned","w","Error","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","i","unwrapListeners","arrayClone","listenerCount","n","copy","defineProperty","enumerable","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","context","handler","len","listeners","addListener","prependListener","prependOnceListener","list","position","originalListener","shift","pop","spliceOne","off","removeAllListeners","rawListeners","eventNames","content","__esModule","locals","add"],"mappings":"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","file":"static/js/18283f9b18864762bdbb.js","sourcesContent":["/*\n * @package inventory\n */\n\nimport EventEmitter from 'events';\n\nconst { deepCopyObject } = Shopware.Utils.object;\nconst { md5 } = Shopware.Utils.format;\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default class VariantsGenerator extends EventEmitter {\n    constructor() {\n        super();\n\n        this.product = null;\n\n        // set dependencies\n        this.syncService = Shopware.Service('syncService');\n        this.httpClient = this.syncService.httpClient;\n\n        // local data\n        this.languageId = null;\n    }\n\n    /*\n     * Saves the variants to the database via sync api.\n     */\n    saveVariants(queues) {\n        return new Promise((resolveDelete) => {\n            // notify view to refresh progress\n            this.emit('progress-max', { type: 'delete', progress: queues.deleteQueue.length });\n\n            // create mapping for api call\n            const mapped = queues.deleteQueue.map((id) => {\n                return { id };\n            });\n\n            // send api calls for delete\n            this.processQueue('delete', mapped, 0, 10, resolveDelete);\n        }).then(() => {\n            // notify view to refresh progress\n            this.emit('progress-max', { type: 'upsert', progress: queues.createQueue.length });\n\n            return new Promise((resolve) => {\n                // send api calls for create\n                this.processQueue('upsert', queues.createQueue, 0, 10, resolve);\n            });\n        });\n    }\n\n    generateVariants(\n        currencies,\n        product,\n    ) {\n        this.product = product;\n        const configuratorSettings = this.product.configuratorSettings;\n\n        // This check is done to set a default value for completely new generated variants\n        // without changing existing configuration\n        if (!this.product.variantListingConfig\n            || (!this.product.variantListingConfig.displayParent\n                && !this.product.variantListingConfig.configuratorGroupConfig\n                && !this.product.variantListingConfig.mainVariantId)) {\n            this.product.variantListingConfig = {};\n            this.product.variantListingConfig.displayParent = true;\n        }\n\n        return new Promise(() => {\n            const grouped = this.groupTheOptions(configuratorSettings);\n\n            // When nothing is selected\n            if (grouped.length <= 0) {\n                this.loadExisting(this.product.id).then((variantsOnServer) => {\n                    const deleteArray = Object.keys(variantsOnServer).map((id) => { return id; });\n                    this.emit('queues', { createQueue: [], deleteQueue: deleteArray });\n                });\n                return;\n            }\n\n            // create permutations of variants\n            const permutations = this.buildCombinations(grouped);\n\n            this.loadExisting(this.product.id).then((variantsOnServer) => {\n                // filter deletable and creatable variations\n                return this.filterVariations(permutations, variantsOnServer, currencies);\n            }).then((queues) => {\n                this.emit('queues', queues);\n            });\n        });\n    }\n\n    filterVariations(\n        newVariations,\n        variationOnServer,\n        currencies,\n    ) {\n        const configuratorSettings = this.product.configuratorSettings;\n\n        return new Promise((resolve) => {\n            const createQueue = [];\n\n            /*\n             * {\n             *      hash1: variantId\n             *      hash2: variantId2\n             *      hash3: variantId..\n             * }\n             *\n             */\n            const hashed = {};\n            const numbers = {};\n            const numberMap = {};\n\n            // eslint-disable-next-line\n            for (const [key, variant] of Object.entries(variationOnServer)) {\n                const hash = md5(JSON.stringify(variant.options.sort()));\n                hashed[hash] = key;\n                numberMap[hash] = variant.productNumber;\n                numbers[variant.productNumber] = true;\n            }\n\n            // Copy the hashed list with the sorted variations on the server.\n            let deleteQueue = deepCopyObject(hashed);\n            const newVariationsSorted = newVariations.map((variation) => variation.sort());\n\n            // Get price changes for all option ids\n            const priceChanges = configuratorSettings.reduce((result, element) => {\n                result.push({\n                    id: element.option.id,\n                    price: element.price,\n                });\n\n                return result;\n            }, []);\n\n            // notify page that the generation starts now\n            this.emit('progress-max', { type: 'calc', progress: newVariationsSorted.length });\n\n            let increment = 1;\n\n            // Check if the new variation exists on the server.\n            newVariationsSorted.forEach((variation) => {\n                const hash = md5(JSON.stringify(variation));\n                const exist = hashed[hash];\n\n                /*\n                When the variation exists on the server and in the user selection,\n                then remove it from the delete queue. Otherwise create a new variation\n                 */\n                if (exist !== undefined) {\n                    delete deleteQueue[hash];\n                }\n            });\n\n            Object.keys(deleteQueue).forEach((hash) => {\n                delete numbers[numberMap[hash]];\n            });\n\n            // Check if the new variation exists on the server.\n            newVariationsSorted.forEach((variation) => {\n                const hash = md5(JSON.stringify(variation));\n                const exist = hashed[hash];\n\n                // handled in above loop\n                if (exist !== undefined) {\n                    return;\n                }\n\n                const variations = variation.map((optionId) => {\n                    return { id: optionId };\n                });\n\n                // new variation price\n                let variationPrice = {};\n\n                // Go through each option and add price changes to main price of variation\n                variations.map((variationObject) => variationObject.id).forEach((variationId) => {\n                    priceChanges.forEach((option) => {\n                        if (!option.price) {\n                            return;\n                        }\n\n                        if (option.id !== variationId) {\n                            return;\n                        }\n\n                        // iterate through each currency\n                        option.price.forEach((price) => {\n                            const currencyId = price.currencyId;\n\n                            let refCurrencyPrice;\n\n                            if (variationPrice[currencyId]) {\n                                refCurrencyPrice = variationPrice[currencyId];\n                            } else {\n                                // get parent price for currency\n                                refCurrencyPrice = this.product.price.find((productPrice) => {\n                                    return productPrice.currencyId === price.currencyId;\n                                });\n                            }\n\n                            let refPrice = refCurrencyPrice;\n\n                            // use the default price as fallback when no custom price for the currency exists\n                            if (!refCurrencyPrice) {\n                                const defaultCurrency = currencies.find((currency) => {\n                                    return currency.isSystemDefault;\n                                });\n\n                                const defaultCurrencyPrice = this.product.price.find((productPrice) => {\n                                    return productPrice.currencyId === defaultCurrency.id;\n                                });\n\n                                const actualCurrency = currencies.find((currency) => {\n                                    return currency.id === price.currencyId;\n                                });\n\n                                // recalculate price for currency with conversion factor\n                                refPrice = {\n                                    net: defaultCurrencyPrice.net * actualCurrency.factor,\n                                    gross: defaultCurrencyPrice.gross * actualCurrency.factor,\n                                };\n                            }\n\n                            // calculate new price with surcharge\n                            const grossPrice = refPrice.gross + price.gross;\n                            const netPrice = refPrice.net + price.net;\n\n                            // push new currency price with surcharges to variation price\n                            variationPrice[currencyId] = {\n                                currencyId: price.currencyId,\n                                gross: grossPrice,\n                                linked: price.linked,\n                                net: netPrice,\n                            };\n                        });\n                    });\n                });\n\n                // get generated number and increment\n                const generated = this.createNumber(this.product.productNumber, increment, numbers);\n                increment = generated.increment;\n\n                // create new variant product\n                const variantObject = {\n                    parentId: this.product.id,\n                    options: variations,\n                    stock: 0,\n                    productNumber: generated.number,\n                };\n\n                variationPrice = Object.values(variationPrice);\n\n                // when variant has custom price then add it to price\n                if (variationPrice.length > 0) {\n                    variantObject.price = variationPrice;\n                }\n\n                // Add to create list\n                createQueue.push(variantObject);\n            });\n\n            // create an array with only the values\n            deleteQueue = Object.values(deleteQueue);\n\n            // filter the create queue with the new restrictions\n            const filteredCreateQueue = this.filterRestrictions(createQueue);\n\n            // return the delete and create queue\n            resolve({ deleteQueue, createQueue: filteredCreateQueue });\n        });\n    }\n\n    createNumber(prefix, increment, numbers) {\n        let exists = true;\n        let number = null;\n\n        // check for the first unused number\n        while (exists) {\n            number = `${prefix}.${increment}`;\n            exists = numbers.hasOwnProperty(number);\n            increment += 1;\n        }\n\n        return { number, increment };\n    }\n\n    filterRestrictions(createQueue) {\n        const variantRestriction = this.product.variantRestrictions || [];\n\n        // Filter to get an array with only the restrictions ids with the single option ids\n        const restrictionsOnly = variantRestriction.map((restriction) => {\n            return restriction.values.map((value) => {\n                return value.options;\n            });\n        });\n\n        // Return the normal create queue when the user does not create restrictions\n        if (restrictionsOnly.length <= 0) {\n            return createQueue;\n        }\n\n        /**\n         * Go through the whole createQueue and check for each variation,\n         * if the option combination matches one of the restrictions\n         */\n        return createQueue.filter((newVariation) => {\n            const variations = newVariation.options.map((variation) => variation.id);\n\n            return restrictionsOnly.reduce((result, restriction) => {\n                const hasRestriction = restriction.reduce((exists, restrictionArray) => {\n                    const restrictionExist = restrictionArray.find((optionId) => {\n                        return variations.indexOf(optionId) >= 0;\n                    });\n\n                    return restrictionExist ? exists : false;\n                }, true);\n\n                return hasRestriction ? false : result;\n            }, true);\n        });\n    }\n\n    loadExisting(id) {\n        // Return all existing variations from the server\n        return this.httpClient.get(\n            `/_action/product/${id}/combinations`,\n            { headers: this.syncService.getBasicHeaders() },\n        ).then((response) => {\n            return response.data;\n        });\n    }\n\n    groupTheOptions(configurators) {\n        // get all selected group id with the selected options\n        //\n        // {\n        //     groupId: [optionId, optionId, ...],\n        //     groupId: [optionId, optionId, ...],\n        //     ...\n        // }\n\n        const groupedData = configurators.reduce((accumulator, configurator) => {\n            const groupId = configurator.option.groupId;\n            const grouped = accumulator[groupId];\n\n            if (grouped) {\n                grouped.push(configurator.option.id);\n                return accumulator;\n            }\n\n            accumulator[groupId] = [configurator.option.id];\n\n            return accumulator;\n        }, {});\n\n        // Return only the grouped options\n        return Object.values(groupedData);\n    }\n\n    buildCombinations(data, group = [], value = null, index = 0) {\n        // Recursion which build the permutation of all options (sorted in groups)\n        const all = [];\n\n        if (value !== null) {\n            group.push(value);\n        }\n\n        if (index >= data.length) {\n            all.push(group);\n            return all;\n        }\n\n        data[index].forEach((entryValue) => {\n            const nested = this.buildCombinations(data, group.slice(), entryValue, index + 1);\n\n            nested.forEach((nestedItem) => {\n                all.push(nestedItem);\n            });\n        });\n\n        return all;\n    }\n\n    processQueue(type, queue, offset, limit, resolve) {\n        // Create a chunk\n        const chunk = queue.slice(offset, offset + limit);\n        if (chunk.length <= 0) {\n            resolve();\n            return;\n        }\n\n        // Emit the progress to the view\n        this.emit('progress-actual', { type: type, progress: offset });\n\n        const payload = [{\n            action: type,\n            entity: 'product',\n            payload: chunk,\n        }];\n\n        // Send the payload to the server\n        const header = { 'single-operation': 1 };\n\n        this.syncService.sync(payload, {}, header).then(() => {\n            this.processQueue(type, queue, offset + limit, limit, resolve);\n        });\n    }\n}\n","/*\n * @package inventory\n */\n\nimport template from './sw-product-modal-variant-generation.html.twig';\nimport VariantsGenerator from '../../../helper/sw-products-variants-generator';\nimport './sw-product-modal-variant-generation.scss';\n\nconst { Criteria } = Shopware.Data;\nconst { Mixin, Context } = Shopware;\nconst { mapState } = Shopware.Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: ['repositoryFactory'],\n\n    mixins: [\n        Mixin.getByName('listing'),\n    ],\n\n    props: {\n        product: {\n            type: Object,\n            required: true,\n        },\n\n        groups: {\n            type: Array,\n            required: true,\n        },\n\n        selectedGroups: {\n            type: Array,\n            required: true,\n        },\n\n        actualStatus: {\n            type: String,\n            default: 'is-physical',\n            required: false,\n        },\n    },\n\n    data() {\n        return {\n            activeTab: 'options',\n            isLoading: false,\n            actualProgress: 0,\n            maxProgress: 0,\n            progressType: '',\n            variantsNumber: 0,\n            variantsGenerator: null,\n            showUploadModal: false,\n            variantGenerationQueue: { createQueue: [], deleteQueue: [] },\n            term: '',\n            paginatedVariantArray: [],\n            disableRouteParams: true,\n            downloadFilesForAllVariants: [],\n            usageOfFiles: {},\n            idToIndex: {},\n        };\n    },\n\n    computed: {\n        ...mapState('swProductDetail', [\n            'currencies',\n        ]),\n\n        productRepository() {\n            return this.repositoryFactory.create('product');\n        },\n\n        optionRepository() {\n            return this.repositoryFactory.create('property_group_option');\n        },\n\n        mediaRepository() {\n            return this.repositoryFactory.create('media');\n        },\n\n        progressInPercentage() {\n            return this.actualProgress / (this.maxProgress * 100);\n        },\n\n        progressMessage() {\n            if (this.progressType === 'delete') {\n                return this.$tc('sw-product.variations.progressTypeDeleted');\n            }\n            if (this.progressType === 'upsert') {\n                return this.$tc('sw-product.variations.progressTypeGenerated');\n            }\n            if (this.progressType === 'calc') {\n                return this.$tc('sw-product.variations.progressTypeCalculated');\n            }\n            return '';\n        },\n\n        buttonVariant() {\n            if (this.variantsNumber <= 0) {\n                return 'danger';\n            }\n            return 'primary';\n        },\n\n        buttonLabel() {\n            if (this.variantsNumber <= 0) {\n                return this.$tc('sw-product.variations.deleteVariationsButton');\n            }\n\n            return this.$tc('sw-product.variations.generateVariationsButton');\n        },\n\n        isGenerateButtonDisabled() {\n            return this.variantGenerationQueue.createQueue.some((item) => {\n                return item.downloads.length === 0 && item.productStates.includes('is-download');\n            });\n        },\n\n    },\n\n    watch: {\n        variantGenerationQueue() {\n            this.getList();\n            this.showUploadModal = true;\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.variantsGenerator = new VariantsGenerator();\n            this.term = '';\n\n            this.variantsGenerator.on('queues', (queues) => {\n                const optionIdsToSearch = this.product.configuratorSettings.reduce((result, element) => {\n                    if (result.indexOf(element.option.id) < 0) {\n                        result.push(element.option.id);\n                    }\n\n                    return result;\n                }, []);\n\n                if (optionIdsToSearch.length > 0) {\n                    const criteria = new Criteria(1, 500);\n                    criteria.addFilter(Criteria.equalsAny('id', optionIdsToSearch));\n                    criteria.addAssociation('group');\n\n                    this.optionRepository.search(criteria).then((options) => {\n                        queues.createQueue.forEach((item, index) => {\n                            item.options.forEach((option) => {\n                                option.entity = options.get(option.id);\n                            });\n\n                            item.options.sort((firstOption, secondOption) => {\n                                const firstGroupName = firstOption.entity.group.name;\n                                const secondGroupName = secondOption.entity.group.name;\n\n                                return firstGroupName.localeCompare(secondGroupName);\n                            });\n\n                            item.downloads = [];\n                            item.productStates = [];\n                            item.id = item.productNumber;\n                            this.idToIndex[item.id] = index;\n                        });\n\n                        this.variantGenerationQueue = queues;\n                        this.total = queues.createQueue.length;\n                    });\n                } else {\n                    this.variantGenerationQueue = queues;\n                    this.total = queues.createQueue.length;\n                }\n                this.isLoading = false;\n            });\n\n            this.variantsGenerator.on('progress-max', (maxProgress) => {\n                this.maxProgress = maxProgress.progress;\n                this.progressType = maxProgress.type;\n            });\n\n            this.variantsGenerator.on('progress-actual', (actualProgress) => {\n                this.actualProgress = actualProgress.progress;\n                this.progressType = actualProgress.type;\n            });\n        },\n\n        /**\n         *\n         * @param fileName string must include filename and its extension: \"example.png\"\n         * @param variant\n         */\n        removeFile(fileName, variant) {\n            // keep all downloadable files expect the one that should be removed\n            variant.downloads = variant.downloads\n                .filter(download => `${download.fileName}.${download.fileExtension}` !== fileName);\n\n            // check if file is used in another place\n            this.usageOfFiles[fileName] = this.usageOfFiles[fileName].filter(id => id !== variant.id);\n            if (this.usageOfFiles[fileName].length === 0) {\n                delete this.usageOfFiles[fileName];\n            }\n            const fileUsedElsewhere = this.usageOfFiles[fileName];\n\n            if (!fileUsedElsewhere) {\n                // removes file from the array, so it won't be shown inside the top upload component\n                this.downloadFilesForAllVariants = this.downloadFilesForAllVariants\n                    .filter(download => `${download.fileName}.${download.fileExtension}` !== fileName);\n            }\n        },\n\n        removeFileForAllVariants(file) {\n            const fileName = `${file.fileName}.${file.fileExtension}`;\n            const usage = this.usageOfFiles[fileName];\n\n            if (usage) {\n                usage.forEach((use) => {\n                    const index = this.idToIndex[use];\n                    const variant = this.variantGenerationQueue.createQueue[index];\n                    variant.downloads = variant.downloads\n                        .filter(download => `${download.fileName}.${download.fileExtension}` !== fileName);\n                });\n                delete this.usageOfFiles[fileName];\n            }\n\n            this.downloadFilesForAllVariants = this.downloadFilesForAllVariants\n                .filter(download => download.id !== file.id);\n        },\n\n        getList() {\n            if (!this.variantGenerationQueue) {\n                this.paginatedVariantArray = [];\n\n                return;\n            }\n\n            const filteredQueue = [];\n            this.variantGenerationQueue.createQueue.forEach((item) => {\n                item.options.some((option) => {\n                    const name = option.entity.translated?.name || option.entity.name;\n                    if (name.toUpperCase().includes(this.term.toUpperCase()) || this.term === '') {\n                        filteredQueue.push(item);\n                        return true;\n                    }\n\n                    return false;\n                });\n            });\n\n            const start = this.page * this.limit - this.limit;\n            const end = start + this.limit;\n            this.total = filteredQueue.length;\n            this.paginatedVariantArray = filteredQueue.slice(start, end);\n        },\n\n        handlePageChange(opts) {\n            this.onPageChange(opts);\n            this.getList();\n        },\n\n        generateVariants() {\n            this.isLoading = true;\n\n            this.variantGenerationQueue.createQueue.forEach((item) => {\n                delete item.id;\n\n                if (item.productStates.includes('is-download')) {\n                    item.maxPurchase = 1;\n                    item.minPurchase = 1;\n                    item.isCloseout = false;\n                    item.shippingFree = false;\n                }\n\n                const mediaIds = [];\n                item.downloads.forEach((download) => {\n                    mediaIds.push({ mediaId: download.id });\n                });\n\n                item.downloads = mediaIds;\n            });\n\n            this.variantsGenerator.saveVariants(this.variantGenerationQueue).then(() => {\n                return this.productRepository.save(this.product);\n            }).then(() => {\n                this.$emit('variations-finish-generate');\n                this.$emit('modal-close');\n                this.isLoading = false;\n                this.actualProgress = 0;\n                this.maxProgress = 0;\n\n                this.$root.$emit('product-reload');\n            });\n        },\n\n        showNextStep() {\n            this.isLoading = true;\n            this.variantsGenerator.generateVariants(\n                this.currencies,\n                this.product,\n            );\n            this.isLoading = false;\n        },\n\n        calcVariantsNumber() {\n            // Group all option ids\n            const groupedData = this.product.configuratorSettings.reduce((accumulator, element) => {\n                const groupId = element.option.groupId;\n                const grouped = accumulator[groupId];\n\n                if (grouped) {\n                    grouped.push(element.option.id);\n                    return accumulator;\n                }\n\n                accumulator[groupId] = [element.option.id];\n                return accumulator;\n            }, {});\n\n            // Get only the values\n            const groupedDataValues = Object.values(groupedData);\n\n            // Multiply each group options when options are selected\n            this.variantsNumber = groupedDataValues.length > 0\n                ? groupedDataValues.map((group) => group.length)\n                    .reduce((curr, length) => curr * length)\n                : 0;\n        },\n\n        onChangeAllVariantValues(checked) {\n            let variants = this.variantGenerationQueue.createQueue;\n            if (this.term) {\n                variants = this.paginatedVariantArray;\n            }\n\n            if (!checked) {\n                this.usageOfFiles = {};\n                variants.forEach((item) => {\n                    item.downloads = [];\n                    item.productStates = [];\n                });\n                this.getList();\n                return;\n            }\n\n            variants.forEach((item) => {\n                item.downloads = [...this.downloadFilesForAllVariants];\n                this.updateUsageForAllVariantFiles(item.id);\n\n                item.productStates = ['is-download'];\n            });\n\n            this.getList();\n        },\n\n        onChangeVariantValue(checked, item) {\n            if (!checked) {\n                Object.keys(this.usageOfFiles).forEach((key) => {\n                    this.usageOfFiles[key] = this.usageOfFiles[key].filter(id => id !== item.id);\n                    if (this.usageOfFiles[key].length === 0) {\n                        delete this.usageOfFiles[key];\n                        this.downloadFilesForAllVariants = this.downloadFilesForAllVariants\n                            .filter(download => `${download.fileName}.${download.fileExtension}` !== key);\n                    }\n                });\n\n                item.downloads = [];\n                item.productStates = [];\n                return;\n            }\n\n            item.downloads = [...this.downloadFilesForAllVariants];\n            this.updateUsageForAllVariantFiles(item.id);\n\n            item.productStates = ['is-download'];\n        },\n\n        isUploadDisabled(item) {\n            return item.downloads.length === 0;\n        },\n\n        isExistingMedia(files, targetId) {\n            return files.some(({ id }) => {\n                return id === targetId;\n            });\n        },\n\n        successfulUpload(event, item) {\n            this.mediaRepository.get(event.targetId, Context.api).then((media) => {\n                if (item) {\n                    if (this.isExistingMedia(item.downloads, event.targetId)) {\n                        return;\n                    }\n\n                    item.downloads.push(media);\n                    this.pushFileToUsageList(`${media.fileName}.${media.fileExtension}`, item.id);\n                    return;\n                }\n\n                if (!this.isExistingMedia(this.downloadFilesForAllVariants, event.targetId)) {\n                    this.downloadFilesForAllVariants.push(media);\n                }\n\n                let variants = this.variantGenerationQueue.createQueue;\n                if (this.term) {\n                    variants = this.paginatedVariantArray;\n                }\n\n                variants.forEach((currentItem) => {\n                    if (currentItem.productStates.includes('is-download')) {\n                        if (this.isExistingMedia(currentItem.downloads, event.targetId)) {\n                            return;\n                        }\n\n                        currentItem.downloads.push(media);\n\n                        this.pushFileToUsageList(`${media.fileName}.${media.fileExtension}`, currentItem.id);\n                    }\n                });\n            });\n        },\n\n        updateUsageForAllVariantFiles(id) {\n            this.downloadFilesForAllVariants.forEach((download) => {\n                this.pushFileToUsageList(`${download.fileName}.${download.fileExtension}`, id);\n            });\n        },\n\n        pushFileToUsageList(fileName, id) {\n            if (!this.usageOfFiles[fileName]) {\n                this.usageOfFiles[fileName] = [];\n            }\n            this.usageOfFiles[fileName].push(id);\n        },\n\n        onTermChange(term) {\n            this.term = term;\n            this.getList();\n        },\n    },\n};\n","export default \"\\n{% block sw_product_modal_variant_generation %}\\n<sw-modal\\n    v-if=\\\"!showUploadModal\\\"\\n    :title=\\\"$tc('sw-product.variations.configuratorModal.title')\\\"\\n    class=\\\"sw-product-modal-variant-generation\\\"\\n    @modal-close=\\\"$emit('modal-close')\\\"\\n>\\n\\n    \\n    {% block sw_product_modal_variant_generation_sidebar %}\\n    <div class=\\\"sw-product-modal-variant-generation__sidebar\\\">\\n        \\n        {% block sw_product_modal_variant_generation_sidebar_tabs %}\\n        <sw-tabs\\n            is-vertical\\n            position-identifier=\\\"sw-product-modal-variant-generation\\\"\\n        >\\n            \\n            {% block sw_product_modal_variant_generation_sidebar_tabs_items %}\\n\\n            \\n            {% block sw_product_modal_variant_generation_sidebar_tabs_item_options %}\\n            <sw-tabs-item\\n                class=\\\"sw-variant-modal__option-selection\\\"\\n                :active=\\\"activeTab == 'options'\\\"\\n                @click=\\\"activeTab = 'options'\\\"\\n            >\\n                {{ $tc('sw-product.variations.configuratorModal.selectOptions') }}\\n            </sw-tabs-item>\\n            {% endblock %}\\n\\n            \\n            {% block sw_product_modal_variant_generation_sidebar_tabs_item_prices %}\\n            <sw-tabs-item\\n                v-show=\\\"variantsNumber\\\"\\n                class=\\\"sw-variant-modal__surcharge-configuration\\\"\\n                :active=\\\"activeTab == 'prices'\\\"\\n                @click=\\\"activeTab = 'prices'\\\"\\n            >\\n                {{ $tc('sw-product.variations.configuratorModal.priceSurcharges') }}\\n            </sw-tabs-item>\\n            {% endblock %}\\n\\n            \\n            {% block sw_product_modal_variant_generation_sidebar_tabs_item_restrictions %}\\n            <sw-tabs-item\\n                v-show=\\\"variantsNumber\\\"\\n                class=\\\"sw-variant-modal__restriction-configuration\\\"\\n                :active=\\\"activeTab == 'restrictions'\\\"\\n                @click=\\\"activeTab = 'restrictions'\\\"\\n            >\\n                {{ $tc('sw-product.variations.configuratorModal.defineRestrictions') }}\\n            </sw-tabs-item>\\n            {% endblock %}\\n\\n            {% endblock %}\\n        </sw-tabs>\\n        {% endblock %}\\n\\n        \\n        {% block sw_product_modal_variant_generation_sidebar_descriptions %}\\n        \\n        {% block sw_product_modal_variant_generation_sidebar_descriptions_options %}\\n        <p v-if=\\\"activeTab == 'options'\\\">\\n            {{ $tc('sw-product.variations.configuratorModal.selectOptionsExplanation') }}\\n        </p>\\n        {% endblock %}\\n\\n        \\n        {% block sw_product_modal_variant_generation_sidebar_descriptions_restrictions %}\\n        <p v-else-if=\\\"activeTab == 'restrictions'\\\">\\n            {{ $tc('sw-product.variations.configuratorModal.selectRestrictionsExplanation') }}\\n        </p>\\n        {% endblock %}\\n\\n        \\n        {% block sw_product_modal_variant_generation_sidebar_descriptions_prices %}\\n        <p v-else-if=\\\"activeTab == 'prices'\\\">\\n            {{ $tc('sw-product.variations.configuratorModal.selectPricesExplanation') }}\\n        </p>\\n        {% endblock %}\\n        {% endblock %}\\n\\n    </div>\\n    {% endblock %}\\n\\n    \\n    {% block sw_product_modal_variant_generation_main %}\\n    <div class=\\\"sw-product-modal-variant-generation__main\\\">\\n        \\n        {% block sw_product_modal_variant_generation_main_configurator_selection %}\\n        <sw-product-variants-configurator-selection\\n            v-show=\\\"activeTab == 'options'\\\"\\n            :product=\\\"product\\\"\\n            :options=\\\"product.configuratorSettings\\\"\\n            :overlay=\\\"false\\\"\\n            :collapsible=\\\"false\\\"\\n            @variations-finish-generate=\\\"$emit('variations-finish-generate')\\\"\\n            @option-select=\\\"calcVariantsNumber()\\\"\\n        />\\n        {% endblock %}\\n\\n        \\n        {% block sw_product_modal_variant_generation_main_configurator_prices %}\\n        <sw-product-variants-configurator-prices\\n            v-if=\\\"activeTab == 'prices'\\\"\\n            :product=\\\"product\\\"\\n            :selected-groups=\\\"selectedGroups\\\"\\n        />\\n        {% endblock %}\\n\\n        \\n        {% block sw_product_modal_variant_generation_main_configurator_restrictions %}\\n        <sw-product-variants-configurator-restrictions\\n            v-if=\\\"activeTab == 'restrictions'\\\"\\n            :product=\\\"product\\\"\\n            :selected-groups=\\\"selectedGroups\\\"\\n        />\\n        {% endblock %}\\n    </div>\\n    {% endblock %}\\n\\n    \\n    {% block sw_product_modal_variant_generation_footer %}\\n    <template #modal-footer>\\n        \\n        {% block sw_product_modal_variant_generation_footer_cancel %}\\n        <sw-button\\n            size=\\\"small\\\"\\n            @click=\\\"$emit('modal-close')\\\"\\n        >\\n            {{ $tc('sw-product.variations.cancelVariationsButton') }}\\n        </sw-button>\\n        {% endblock %}\\n        \\n        {% block sw_product_modal_variant_generation_footer_generate %}\\n        <sw-button\\n            class=\\\"sw-product-variant-generation__next-action\\\"\\n            variant=\\\"primary\\\"\\n            size=\\\"small\\\"\\n            @click=\\\"showNextStep\\\"\\n        >\\n            {{ $tc('sw-product.variations.nextModalButton') }}\\n        </sw-button>\\n        {% endblock %}\\n    </template>\\n    {% endblock %}\\n\\n</sw-modal>\\n\\n<sw-modal\\n    v-else\\n    :title=\\\"$tc('sw-product.variations.configuratorModal.title')\\\"\\n    class=\\\"sw-product-modal-variant-generation sw-product-modal-variant-generation__upload_files\\\"\\n    @modal-close=\\\"$emit('modal-close')\\\"\\n>\\n    <div class=\\\"sw-product-modal-variant-generation__infoBox\\\">\\n        {{ $tc('sw-product.variations.configuratorModal.uploadInfoBoxHeader') }}\\n        <div class=\\\"sw-product-modal-variant-generation__infoBoxContent\\\">\\n            <span class=\\\"sw-product-modal-variant-generation__variant-amount\\\">\\n                {{ $tc('sw-product.variations.configuratorModal.uploadInfoBoxCount', variantGenerationQueue.createQueue.length, { count: variantGenerationQueue.createQueue.length }) }}\\n            </span>\\n            {{ $tc('sw-product.variations.configuratorModal.uploadInfoBoxCreateLabel', variantGenerationQueue.createQueue.length, { count: variantGenerationQueue.createQueue.length }) }}\\n\\n            <span class=\\\"sw-product-modal-variant-generation__variant-amount\\\">\\n                {{ $tc('sw-product.variations.configuratorModal.uploadInfoBoxCount', variantGenerationQueue.deleteQueue.length, { count: variantGenerationQueue.deleteQueue.length }) }}\\n            </span>\\n            {{ $tc('sw-product.variations.configuratorModal.uploadInfoBoxDeleteLabel', variantGenerationQueue.deleteQueue.length, { count: variantGenerationQueue.deleteQueue.length }) }}\\n        </div>\\n    </div>\\n\\n    <template v-if=\\\"variantGenerationQueue.createQueue.length > 0\\\">\\n        <div class=\\\"sw-product-modal-variant-generation__upload-card\\\">\\n            <div class=\\\"sw-product-modal-variant-generation__card-title\\\">\\n                {{ $tc('sw-product.variations.configuratorModal.uploadCardDescription') }}\\n            </div>\\n\\n            <div class=\\\"sw-product-modal-variant-generation__upload-all-container\\\">\\n                <sw-switch-field\\n                    :label=\\\"$tc('sw-product.variations.configuratorModal.digitalVariantSwitch')\\\"\\n                    {% if VUE3 %}\\n                    @update:value=\\\"onChangeAllVariantValues\\\"\\n                    {% else %}\\n                    @change=\\\"onChangeAllVariantValues\\\"\\n                    {% endif %}\\n                />\\n                <div class=\\\"sw-product-modal-variant-generation__upload-all\\\">\\n                    <sw-upload-listener\\n                        upload-tag=\\\"upload_all\\\"\\n                        auto-upload\\n                        @media-upload-finish=\\\"successfulUpload\\\"\\n                    />\\n                    <sw-media-compact-upload-v2\\n                        :button-label=\\\"$tc('sw-product.variations.configuratorModal.uploadAllButton')\\\"\\n                        :remove-button-label=\\\"$tc('sw-product.variations.configuratorModal.removeAllButton')\\\"\\n                        upload-tag=\\\"upload_all\\\"\\n                        private-filesystem\\n                        :source-multiselect=\\\"downloadFilesForAllVariants.length > 0 ? downloadFilesForAllVariants : null\\\"\\n                        allow-multi-select\\n                        add-files-on-multiselect\\n                        default-folder=\\\"product_download\\\"\\n                        file-accept=\\\"*/*\\\"\\n                        @delete-item=\\\"(file) => removeFileForAllVariants(file)\\\"\\n                    />\\n                </div>\\n            </div>\\n\\n            <div class=\\\"sw-product-modal-variant-generation__toolbar\\\">\\n                <sw-card-filter\\n                    :placeholder=\\\"$tc('sw-product.variations.configuratorModal.uploadCardSearchPlaceholder')\\\"\\n                    @sw-card-filter-term-change=\\\"onTermChange\\\"\\n                />\\n            </div>\\n\\n            <sw-data-grid\\n                class=\\\"sw-product-modal-variant-generation__grid\\\"\\n                :data-source=\\\"paginatedVariantArray\\\"\\n                :show-selection=\\\"false\\\"\\n                :show-header=\\\"false\\\"\\n                :show-actions=\\\"false\\\"\\n                :compact-mode=\\\"false\\\"\\n                :plain-appearance=\\\"true\\\"\\n                :columns=\\\"[\\n                    { property: 'options', label: 'Optionen' },\\n                ]\\\"\\n            >\\n                <template #column-options=\\\"{ item }\\\">\\n                    <div>\\n                        <template\\n                            v-for=\\\"(option, index) in item.options\\\"\\n                            {% if VUE3 %}\\n                            :key=\\\"index\\\"\\n                            {% endif %}\\n                        >\\n                            <span\\n                                v-if=\\\"option.entity\\\"\\n                                {% if VUE2 %}\\n                                :key=\\\"index\\\"\\n                                {% endif %}\\n                            >\\n                                {{ option.entity.group.translated?.name || option.entity.group.name }}:\\n                                {{ option.entity.translated?.name || option.entity.name }}\\n                                <template v-if=\\\"index != Object.keys(item.options).length - 1\\\">|</template>\\n                            </span>\\n                        </template>\\n                    </div>\\n\\n                    <div\\n                        :key=\\\"item.id\\\"\\n                        class=\\\"sw-data-grid__item\\\"\\n                    >\\n                        <sw-switch-field\\n                            label=\\\"Digital\\\"\\n                            :value=\\\"item.productStates.includes('is-download')\\\"\\n                            {% if VUE3 %}\\n                            @update:value=\\\"(event) => onChangeVariantValue(event, item)\\\"\\n                            {% else %}\\n                            @change=\\\"(event) => onChangeVariantValue(event, item)\\\"\\n                            {% endif %}\\n                        />\\n                        <sw-upload-listener\\n                            :upload-tag=\\\"item.productNumber\\\"\\n                            auto-upload\\n                            @media-upload-finish=\\\"(event) => successfulUpload(event, item)\\\"\\n                        />\\n                        <sw-media-compact-upload-v2\\n                            :upload-tag=\\\"item.productNumber\\\"\\n                            :disabled=\\\"item.productStates.length === 0\\\"\\n                            private-filesystem\\n                            allow-multi-select\\n                            add-files-on-multiselect\\n                            :source-multiselect=\\\"item.downloads.length > 0 ? item.downloads : null\\\"\\n                            default-folder=\\\"product_download\\\"\\n                            file-accept=\\\"*/*\\\"\\n                            @delete-item=\\\"(file) => removeFile(`${file.fileName}.${file.fileExtension}`, item)\\\"\\n                        />\\n                    </div>\\n                </template>\\n\\n                <template #pagination>\\n                    <sw-pagination\\n                        :page=\\\"page\\\"\\n                        :limit=\\\"limit\\\"\\n                        :total=\\\"total\\\"\\n                        :total-visible=\\\"7\\\"\\n                        @page-change=\\\"handlePageChange\\\"\\n                    />\\n                </template>\\n            </sw-data-grid>\\n        </div>\\n    </template>\\n\\n    <template #modal-footer>\\n        <sw-button\\n            size=\\\"small\\\"\\n            @click=\\\"showUploadModal = false\\\"\\n        >\\n            {{ $tc('sw-product.variations.backVariationsButton') }}\\n        </sw-button>\\n\\n        <sw-button\\n            :disabled=\\\"isGenerateButtonDisabled\\\"\\n            class=\\\"sw-product-variant-generation__generate-action\\\"\\n            :variant=\\\"buttonVariant\\\"\\n            size=\\\"small\\\"\\n            @click=\\\"generateVariants()\\\"\\n        >\\n            {{ buttonLabel }}\\n        </sw-button>\\n    </template>\\n\\n    <template #modal-loader>\\n        <transition name=\\\"generate-variant-progress-bar-transition\\\">\\n            <div\\n                v-if=\\\"isLoading\\\"\\n                class=\\\"generate-variant-progress-bar__wrapper\\\"\\n            >\\n                <sw-progress-bar\\n                    class=\\\"generate-variant-progress-bar\\\"\\n                    :value=\\\"progressInPercentage\\\"\\n                />\\n\\n                <span class=\\\"generate-variant-progress-bar__description\\\">\\n                    {{ actualProgress }} {{ $tc('sw-product.variations.progressTypeOf') }} {{ maxProgress }} {{ $tc('sw-product.variations.progressTypeVariation') }} {{ progressMessage }}\\n                </span>\\n            </div>\\n        </transition>\\n    </template>\\n</sw-modal>\\n{% endblock %}\\n\";","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function eventListener() {\n      if (errorListener !== undefined) {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n    var errorListener;\n\n    // Adding an error listener is not optional because\n    // if an error is thrown on an event emitter we cannot\n    // guarantee that the actual event we are waiting will\n    // be fired. The result could be a silent way to create\n    // memory or file descriptor leaks, which is something\n    // we should avoid.\n    if (name !== 'error') {\n      errorListener = function errorListener(err) {\n        emitter.removeListener(name, eventListener);\n        reject(err);\n      };\n\n      emitter.once('error', errorListener);\n    }\n\n    emitter.once(name, eventListener);\n  });\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-product-modal-variant-generation.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5af93224\", content, true, {});"],"sourceRoot":""}