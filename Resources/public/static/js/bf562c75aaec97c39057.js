(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[568],{uIf8:function(e,n,o){"use strict";o.r(n);n.default={template:'\n{% block sw_order_document_settings_modal_form_first_row %}\n<sw-container\n    columns="1fr 1fr 1fr"\n    gap="0 14px"\n>\n    \n    {% block sw_order_document_settings_modal_form_cancellation_document_number %}\n    <sw-text-field\n        v-model="documentConfig.documentNumber"\n        :label="$tc(\'sw-order.documentModal.labelDocumentStornoNumber\')"\n    />\n    {% endblock %}\n\n    \n    {% block sw_order_document_settings_modal_form_document_select_invoice %}\n    <sw-select-field\n        v-model="documentConfig.custom.invoiceNumber"\n        class="sw-order-document-settings-storno-modal__invoice-select"\n        :label="$tc(\'sw-order.documentModal.labelInvoiceNumber\')"\n        :placeholder="$tc(\'sw-order.documentModal.selectInvoiceNumber\')"\n    >\n        <option\n            v-for="invoice in invoices"\n            :key="invoice.config.custom.invoiceNumber"\n            :value="invoice.config.custom.invoiceNumber"\n        >\n            {{ invoice.config.custom.invoiceNumber }}\n        </option>\n    </sw-select-field>\n    {% endblock %}\n\n    \n    {% block sw_order_document_settings_modal_form_cancellation_document_date %}\n    <sw-datepicker\n        v-model="documentConfig.documentDate"\n        date-type="date"\n        required\n        :label="$tc(\'sw-order.documentModal.labelDocumentDate\')"\n    />\n    {% endblock %}\n</sw-container>\n{% endblock %}\n',inject:["feature"],props:{order:{type:Object,required:!0},currentDocumentType:{type:Object,required:!0}},data:function(){return{documentConfig:{custom:{stornoNumber:"",invoiceNumber:""},documentNumber:0,documentComment:"",documentDate:""}}},computed:{documentPreconditionsFulfilled:function(){return!!this.documentConfig.custom.invoiceNumber},invoices:function(){return this.order.documents.filter((function(e){return"invoice"===e.documentType.technicalName}))}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var e=this;this.numberRangeService.reserve("document_".concat(this.currentDocumentType.technicalName),this.order.salesChannelId,!0).then((function(n){e.documentConfig.documentNumber=n.number,e.documentNumberPreview=e.documentConfig.documentNumber,e.documentConfig.documentDate=(new Date).toISOString()}))},onCreateDocument:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$emit("loading-document");var o=this.invoices.filter((function(n){return n.config.custom.invoiceNumber===e.documentConfig.custom.invoiceNumber}))[0];this.documentNumberPreview===this.documentConfig.documentNumber?this.numberRangeService.reserve("document_".concat(this.currentDocumentType.technicalName),this.order.salesChannelId,!1).then((function(t){e.documentConfig.custom.stornoNumber=t.number,t.number!==e.documentConfig.documentNumber&&e.createNotificationInfo({message:e.$tc("sw-order.documentCard.info.DOCUMENT__NUMBER_WAS_CHANGED")}),e.documentConfig.documentNumber=t.number,e.callDocumentCreate(n,o.id)})):(this.documentConfig.custom.stornoNumber=this.documentConfig.documentNumber,this.callDocumentCreate(n,o.id))},onPreview:function(){this.$emit("loading-preview"),this.documentConfig.custom.stornoNumber=this.documentConfig.documentNumber,this.$super("onPreview")}}}}}]);