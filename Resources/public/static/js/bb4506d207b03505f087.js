(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[75091],{747585:function(){},375091:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}}),i(5700);let{Context:n}=Shopware,{Criteria:a}=Shopware.Data;var d={template:'\n{% block sw_sidebar_media_item %}\n<sw-sidebar-item\n    ref="sidebarItem"\n    class="sw-sidebar-media-item"\n    icon="regular-image"\n    :title="$tc(\'global.sw-sidebar-media-item.title\')"\n    :disabled="disabled"\n    v-on="additionalEventListeners"\n>\n\n    \n    {% block sw_sidebar_media_item_content %}\n    <div class="sw-sidebar-media-item__content">\n        \n        {% block sw_sidebar_media_item_search_field %}\n        <sw-simple-search-field\n            v-model:value="term"\n            @search-term-change="onSearchTermChange"\n        />\n        {% endblock %}\n\n        \n        {% block sw_sidebar_media_item_folder_navigation %}\n        <sw-media-breadcrumbs\n            v-if="!term.length"\n            v-model:currentFolderId="mediaFolderId"\n            small\n        />\n        {% endblock %}\n\n        \n        {% block sw_sidebar_media_item_media_item_list %}\n        \n        {% block sw_sidebar_media_item_media_item_list_folder_item %}\n        \n        <sw-media-folder-item\n            v-for="folder in subFolders"\n            v-if="!term.length"\n            :key="folder.id"\n            :item="folder"\n            :show-selection-indicator="false"\n            :show-context-menu-button="true"\n            :selected="false"\n            :is-list="true"\n            @media-item-click="onNavigateToFolder(folder.id)"\n            @media-folder-delete="handleFolderGridItemDelete"\n        />\n        {% endblock %}\n\n        \n        {% block sw_sidebar_media_item_media_item_list_media_item %}\n        <sw-media-media-item\n            v-for="mediaItem in mediaItems"\n            :key="mediaItem.id"\n            v-draggable="{ dragGroup: \'media\', data: { mediaItem } }"\n            :item="mediaItem"\n            :show-selection-indicator="false"\n            :show-context-menu-button="true"\n            :selected="false"\n            :is-list="true"\n            @media-item-delete="handleMediaGridItemDelete"\n        >\n\n            \n            {% block sw_sidebar_media_item_context_items %}\n            <slot\n                name="context-menu-items"\n                :media-item="mediaItem"\n            ></slot>\n        {% endblock %}\n        </sw-media-media-item>\n        {% endblock %}\n\n        \n        {% block sw_sidebar_media_item_load_more_button %}\n        <sw-button\n            v-if="showMore"\n            size="small"\n            block\n            class="sw-sidebar-media-item__load-more-button"\n            @click="onLoadMore"\n        >\n\n            {{ $tc(\'global.sw-sidebar-media-item.labelLoadMore\') }}\n        </sw-button>\n        {% endblock %}\n        {% endblock %}\n\n        \n        {% block sw_sidebar_media_item_loader %}\n        <sw-loader v-if="isLoading" />\n        {% endblock %}\n    </div>\n    {% endblock %}\n</sw-sidebar-item>\n{% endblock %}\n',compatConfig:Shopware.compatConfig,inject:["repositoryFactory"],props:{initialFolderId:{type:String,required:!1,default:null},isParentLoading:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1}},data(){return{isLoading:!0,mediaFolderId:this.initialFolderId,mediaItems:[],subFolders:[],page:1,limit:25,total:0,term:""}},computed:{mediaRepository(){return this.repositoryFactory.create("media")},mediaFolderRepository(){return this.repositoryFactory.create("media_folder")},showMore(){return this.itemsLoaded<this.total},itemsLoaded(){return this.mediaItems.length},additionalEventListeners(){return this.isCompatEnabled("INSTANCE_LISTENERS")?this.$listeners:{}}},watch:{initialFolderId(){this.mediaFolderId=this.initialFolderId},mediaFolderId(){this.initializeContent()},isParentLoading(){this.getList()}},created(){this.createdComponent()},methods:{createdComponent(){this.initializeContent()},onSearchTermChange(e){this.term=e,this.page=1,this.getList()},initializeContent(){this.disabled||(this.page=1,this.term="",this.mediaItems=[],this.getSubFolders(),this.getList())},async getSubFolders(){let e=new a(1,50);e.addFilter(a.equals("parentId",this.mediaFolderId));let t=await this.mediaFolderRepository.search(e,n.api);return this.subFolders=t,t},handleFolderGridItemDelete(){this.getSubFolders()},handleMediaGridItemDelete(){let e=this.page;this.page=1,this.getList().then(()=>{for(;this.page<e;)this.page+=1,this.extendList()})},onLoadMore(){this.page+=1,this.extendList()},async extendList(){let e=this.getListingCriteria(),t=await this.mediaRepository.search(e,n.api);return this.mediaItems=this.mediaItems.concat(t),this.mediaItems},async getList(){if(!0===this.isParentLoading)return null;this.isLoading=!0;let e=this.getListingCriteria();return this.mediaItems=await this.mediaRepository.search(e,n.api),this.total=this.mediaItems.total,this.isLoading=!1,this.mediaItems},getListingCriteria(){let e=new a(this.page,this.limit);return this.term.length||e.addFilter(a.equals("mediaFolderId",this.mediaFolderId)),this.term&&(e.term=this.term),e.addSorting(a.sort("uploadedAt","DESC")),e},openContent(){this.$refs.sidebarItem.openContent()},onNavigateToFolder(e){this.mediaFolderId=e}}}},5700:function(e,t,i){var n=i(747585);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),i(745346).Z("69ea4b87",n,!0,{})}}]);