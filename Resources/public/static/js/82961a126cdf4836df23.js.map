{"version":3,"sources":["webpack:///./src/module/sw-users-permissions/components/sw-users-permissions-additional-permissions/sw-users-permissions-additional-permissions.scss","webpack:///./src/module/sw-users-permissions/components/sw-users-permissions-additional-permissions/index.js","webpack:///./src/module/sw-users-permissions/components/sw-users-permissions-additional-permissions/sw-users-permissions-additional-permissions.html.twig"],"names":["content","__esModule","default","module","i","locals","exports","add","template","inject","props","role","type","Object","required","disabled","Boolean","data","computed","additionalPermissions","this","privileges","getPrivilegesMappings","filter","privilege","category","key","appPermissions","methods","isPrivilegeSelected","privilegeKey","includes","onSelectPrivilege","isSelected","push","p","changeAllAppPermissionsForKey","permissionKey","_this","forEach","permission","keys","roles","identifier","concat"],"mappings":"iIAGA,IAAIA,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQE,SACnB,iBAAZF,IAAsBA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAC7DA,EAAQK,SAAQF,EAAOG,QAAUN,EAAQK,SAG/BE,EADH,EAAQ,QAAwEL,SACzE,WAAYF,GAAS,EAAM,K,mDCF7B,WACXQ,SCRW,y2MDUXC,OAAQ,CAAC,cAETC,MAAO,CACHC,KAAM,CACFC,KAAMC,OACNC,UAAU,GAEdC,SAAU,CACNH,KAAMI,QACNF,UAAU,EACVZ,SAAS,IAIjBe,KAAI,WACA,MAAO,IAGXC,SAAU,CACNC,sBAAqB,WAGjB,OAFmBC,KAAKC,WAAWC,wBAEjBC,QACd,SAAAC,GAAS,MAA2B,2BAAvBA,EAAUC,UAA2D,QAAlBD,EAAUE,QAIlFC,eAAc,WAGV,OAFmBP,KAAKC,WAAWC,wBAEjBC,QACd,SAAAC,GAAS,MAA2B,2BAAvBA,EAAUC,UAA2D,QAAlBD,EAAUE,SAKtFE,QAAS,CACLC,oBAAmB,SAACC,GAChB,QAAKV,KAAKT,KAAKU,YAIRD,KAAKT,KAAKU,WAAWU,SAASD,IAGzCE,kBAAiB,SAACF,EAAcG,GACxBA,EACAb,KAAKT,KAAKU,WAAWa,KAAKJ,GAE1BV,KAAKT,KAAKU,WAAaD,KAAKT,KAAKU,WAAWE,QAAO,SAAAY,GAAC,OAAIA,IAAML,MAItEM,8BAA6B,SAACC,EAAeJ,GAAa,IAADK,EAAA,KACrDlB,KAAKO,eAAeY,SAAQ,SAAAC,GACxB3B,OAAO4B,KAAKD,EAAWE,OAAOH,SAAQ,SAAA5B,GAClC,IAAMgC,EAAU,OAAAC,OAAUjC,GAE1B,GAAIsB,EAAY,CACZ,GAAIK,EAAK3B,KAAKU,WAAWU,SAASY,GAC9B,OAGJL,EAAK3B,KAAKU,WAAWa,KAAKS,QAE1BL,EAAK3B,KAAKU,WAAaiB,EAAK3B,KAAKU,WAAWE,QAAO,SAAAY,GAAC,OAAIA,IAAMQ","file":"static/js/82961a126cdf4836df23.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-users-permissions-additional-permissions.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0b3583d8\", content, true, {});","/**\n * @package services-settings\n */\nimport template from './sw-users-permissions-additional-permissions.html.twig';\nimport './sw-users-permissions-additional-permissions.scss';\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: ['privileges'],\n\n    props: {\n        role: {\n            type: Object,\n            required: true,\n        },\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    data() {\n        return {};\n    },\n\n    computed: {\n        additionalPermissions() {\n            const privileges = this.privileges.getPrivilegesMappings();\n\n            return privileges.filter(\n                privilege => privilege.category === 'additional_permissions' && privilege.key !== 'app',\n            );\n        },\n\n        appPermissions() {\n            const privileges = this.privileges.getPrivilegesMappings();\n\n            return privileges.filter(\n                privilege => privilege.category === 'additional_permissions' && privilege.key === 'app',\n            );\n        },\n    },\n\n    methods: {\n        isPrivilegeSelected(privilegeKey) {\n            if (!this.role.privileges) {\n                return false;\n            }\n\n            return this.role.privileges.includes(privilegeKey);\n        },\n\n        onSelectPrivilege(privilegeKey, isSelected) {\n            if (isSelected) {\n                this.role.privileges.push(privilegeKey);\n            } else {\n                this.role.privileges = this.role.privileges.filter(p => p !== privilegeKey);\n            }\n        },\n\n        changeAllAppPermissionsForKey(permissionKey, isSelected) {\n            this.appPermissions.forEach(permission => {\n                Object.keys(permission.roles).forEach(role => {\n                    const identifier = `app.${role}`;\n\n                    if (isSelected) {\n                        if (this.role.privileges.includes(identifier)) {\n                            return;\n                        }\n\n                        this.role.privileges.push(identifier);\n                    } else {\n                        this.role.privileges = this.role.privileges.filter(p => p !== identifier);\n                    }\n                });\n            });\n        },\n    },\n};\n","export default \"\\n{% block sw_users_permissions_additional_permissions %}\\n<sw-card\\n    class=\\\"sw-users-permissions-additional-permissions\\\"\\n    position-identifier=\\\"sw-users-permissions-additional-permissions\\\"\\n    :title=\\\"$tc('sw-users-permissions.roles.additional-permissions.title')\\\"\\n>\\n    \\n    {% block sw_users_permissions_additional_permissions_additional_privileges %}\\n    <template\\n        v-for=\\\"privilege in additionalPermissions\\\"\\n        {% if VUE3 %}\\n        :key=\\\"`head-${privilege.key}`\\\"\\n        {% endif %}\\n    >\\n        \\n        {% block sw_users_permissions_additional_permissions_additional_privileges_headline %}\\n        <h4\\n            {% if VUE2 %}\\n            :key=\\\"`head-${privilege.key}`\\\"\\n            {% endif %}\\n            :class=\\\"'sw-users-permissions-additional-permissions_' + privilege.key\\\"\\n        >\\n            \\n            {% block sw_users_permissions_additional_permissions_additional_privileges_headline_content %}\\n            <strong>\\n                {{ $tc('sw-privileges.additional_permissions.' + privilege.key + '.label') }}\\n            </strong>\\n            {% endblock %}\\n        </h4>\\n        {% endblock %}\\n\\n        \\n        {% block sw_users_permissions_additional_permissions_additional_privileges_switches %}\\n        <div\\n            {% if VUE2 %}\\n            :key=\\\"`body-${privilege.key}`\\\"\\n            {% endif %}\\n            class=\\\"sw-users-permissions-additional-permissions__switches\\\"\\n        >\\n            \\n            {% block sw_users_permissions_additional_permissions_additional_privileges_switches_content %}\\n            <template\\n                v-for=\\\"(value, roleName) in privilege.roles\\\"\\n                {% if VUE3 %}\\n                :key=\\\"roleName\\\"\\n                {% endif %}\\n            >\\n                \\n                {% block sw_users_permissions_additional_permissions_additional_privileges_switches_content_switch %}\\n                <sw-switch-field\\n                    {% if VUE2 %}\\n                    :key=\\\"roleName\\\"\\n                    {% endif %}\\n                    :disabled=\\\"disabled\\\"\\n                    :class=\\\"'sw_users_permissions_additional_permissions_' + privilege.key + '_' + roleName\\\"\\n                    :value=\\\"isPrivilegeSelected(privilege.key + '.' + roleName)\\\"\\n                    :label=\\\"$tc('sw-privileges.additional_permissions.' + privilege.key + '.' + roleName)\\\"\\n                    :bordered=\\\"true\\\"\\n                    {% if VUE3 %}\\n                    @update:value=\\\"onSelectPrivilege(privilege.key + '.' + roleName, $event)\\\"\\n                    {% else %}\\n                    @change=\\\"onSelectPrivilege(privilege.key + '.' + roleName, $event)\\\"\\n                    {% endif %}\\n                />\\n                {% endblock %}\\n            </template>\\n            {% endblock %}\\n        </div>\\n        {% endblock %}\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_users_permissions_additional_permissions_app_privileges %}\\n    <template\\n        v-for=\\\"privilege in appPermissions\\\"\\n        {% if VUE3 %}\\n        :key=\\\"privilege.key\\\"\\n        {% endif %}\\n    >\\n        \\n        {% block sw_users_permissions_additional_permissions_app_privileges_headline %}\\n        <h4\\n            :key=\\\"`head-${privilege.key}`\\\"\\n            class=\\\"sw-users-permissions-additional-permissions-app\\\"\\n        >\\n            \\n            {% block sw_users_permissions_additional_permissions_app_privileges_headline_content %}\\n            <strong>\\n                {{ $tc('sw-privileges.additional_permissions.app.label') }}\\n            </strong>\\n            {% endblock %}\\n        </h4>\\n        {% endblock %}\\n\\n        \\n        {% block sw_users_permissions_additional_permissions_app_privileges_switches %}\\n        <div\\n            {% if VUE2 %}\\n            :key=\\\"`body-${privilege.key}`\\\"\\n            {% endif %}\\n            class=\\\"sw-users-permissions-additional-permissions__switches\\\"\\n        >\\n            \\n            {% block sw_users_permissions_additional_permissions_app_privileges_switches_content %}\\n            <template\\n                v-for=\\\"(key, roleName) in privilege.roles\\\"\\n                {% if VUE3 %}\\n                :key=\\\"roleName\\\"\\n                {% endif %}\\n            >\\n                \\n                {% block sw_users_permissions_additional_permissions_app_privileges_switches_content_switch %}\\n                <sw-switch-field\\n                    v-if=\\\"roleName === 'all'\\\"\\n                    {% if VUE2 %}\\n                    :key=\\\"roleName\\\"\\n                    {% endif %}\\n                    :disabled=\\\"disabled\\\"\\n                    class=\\\"sw_users_permissions_additional_permissions_app_all\\\"\\n                    :value=\\\"isPrivilegeSelected('app.' + roleName)\\\"\\n                    :label=\\\"$tc('sw-privileges.additional_permissions.app.all')\\\"\\n                    :bordered=\\\"true\\\"\\n                    {% if VUE3 %}\\n                    @update:value=\\\"changeAllAppPermissionsForKey('app.' + roleName, $event)\\\"\\n                    {% else %}\\n                    @change=\\\"changeAllAppPermissionsForKey('app.' + roleName, $event)\\\"\\n                    {% endif %}\\n                />\\n\\n                <sw-switch-field\\n                    v-else\\n                    {% if VUE2 %}\\n                    :key=\\\"roleName\\\"\\n                    {% endif %}\\n                    v-tooltip=\\\"{\\n                        message: $tc('sw-privileges.additional_permissions.app.disabledCheckboxMessage'),\\n                        disabled: !isPrivilegeSelected('app.all') || disabled,\\n                        showOnDisabledElements: false\\n                    }\\\"\\n                    :disabled=\\\"isPrivilegeSelected('app.all') || disabled\\\"\\n                    :class=\\\"'sw_users_permissions_additional_permissions_app_' + roleName\\\"\\n                    :value=\\\"isPrivilegeSelected('app.' + roleName)\\\"\\n                    :label=\\\"roleName\\\"\\n                    :bordered=\\\"true\\\"\\n                    {% if VUE3 %}\\n                    @update:value=\\\"onSelectPrivilege('app.' + roleName, $event)\\\"\\n                    {% else %}\\n                    @change=\\\"onSelectPrivilege('app.' + roleName, $event)\\\"\\n                    {% endif %}\\n                />\\n                {% endblock %}\\n            </template>\\n            {% endblock %}\\n        </div>\\n        {% endblock %}\\n    </template>\\n    {% endblock %}\\n</sw-card>\\n{% endblock %}\\n\";"],"sourceRoot":""}