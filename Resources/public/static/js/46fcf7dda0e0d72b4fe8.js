(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[167],{"+xIg":function(e,n,i){var t=i("tCJK");t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,i("ydqr").default)("aa2d18b2",t,!0,{})},sdd8:function(e,n,i){"use strict";i.r(n);var t=i("QGb3"),l=i.n(t),a=i("HZZ/"),s=i.n(a),o=i("hJxD"),m=i.n(o),c=(i("+xIg"),Shopware.Mixin),d=Shopware.Utils,g=d.moveItem,r=d.object.cloneDeep,_=Shopware.Data.Criteria;n.default={template:'\n{% block sw_cms_element_image_gallery_config %}\n<div class="sw-cms-el-config-image-gallery">\n    \n    {% block sw_cms_element_image_gallery_config_tabs %}\n    <sw-tabs\n        position-identifier="sw-cms-element-config-image-gallery"\n        class="sw-cms-el-config-image-gallery__tabs"\n        default-item="content"\n    >\n        <template #default="{ active }">\n            \n            {% block sw_cms_element_image_gallery_config_tab_content %}\n            <sw-tabs-item\n                :title="$tc(\'sw-cms.elements.general.config.tab.content\')"\n                name="content"\n                :active-tab="active"\n            >\n                {{ $tc(\'sw-cms.elements.general.config.tab.content\') }}\n            </sw-tabs-item>\n            {% endblock %}\n            \n            {% block sw_cms_element_image_gallery_config_tab_options %}\n            <sw-tabs-item\n                :title="$tc(\'sw-cms.elements.general.config.tab.settings\')"\n                name="settings"\n                :active-tab="active"\n            >\n                {{ $tc(\'sw-cms.elements.general.config.tab.settings\') }}\n            </sw-tabs-item>\n            {% endblock %}\n        </template>\n\n        <template\n            #content="{ active }"\n        >\n            \n            {% block sw_cms_element_image_gallery_config_content %}\n            <sw-container\n                v-if="active === \'content\'"\n                class="sw-cms-el-config-image-gallery__tab-content"\n            >\n\n                \n                {% block sw_cms_element_image_gallery_config_media_selection %}\n                <sw-cms-mapping-field\n                    v-model="element.config.sliderItems"\n                    entity="product_media"\n                    value-types="entity"\n                    :label="$tc(\'sw-cms.elements.imageGallery.label\')"\n                >\n\n                    \n                    {% block sw_cms_element_image_gallery_config_media_list_selection %}\n                    <sw-media-list-selection-v2\n                        :entity-media-items="mediaItems"\n                        :entity="enitiy"\n                        :upload-tag="uploadTag"\n                        :default-folder="defaultFolderName"\n                        @upload-finish="onImageUpload"\n                        @item-remove="onItemRemove"\n                        @open-sidebar="onOpenMediaModal"\n                        @item-sort="onItemSort"\n                    />\n                    {% endblock %}\n\n                    \n                    {% block sw_cms_element_image_gallery_config_media_mapping_preview %}\n                    <template #preview="{ demoValue }">\n\n                        \n                        {% block sw_cms_element_image_gallery_config_media_preview_list %}\n                        <div\n                            v-if="demoValue && demoValue.length"\n                            ref="demoMediaGrid"\n                            class="sw-cms-el-config-image-gallery__mapping-preview"\n                            :style="gridAutoRows"\n                        >\n\n                            \n                            {% block sw_cms_element_image_gallery_config_media_preview_item %}\n                            <div\n                                v-for="demo in demoValue"\n                                :key="demo.id"\n                                class="sw-cms-el-config-image-gallery__preview-image"\n                            >\n                                <img\n                                    :src="demo.media.url"\n                                    alt=""\n                                >\n                            </div>\n                            {% endblock %}\n                        </div>\n                        {% endblock %}\n\n                        \n                        {% block sw_cms_element_image_gallery_config_media_preview_info %}\n                        <sw-alert\n                            v-else\n                            class="sw-cms-el-config-image__preview-info"\n                            variant="info"\n                        >\n                            {{ $tc(\'sw-cms.detail.label.mappingEmptyPreview\') }}\n                        </sw-alert>\n                        {% endblock %}\n                    </template>\n                    {% endblock %}\n                </sw-cms-mapping-field>\n                {% endblock %}\n\n                \n                {% block sw_cms_element_image_gallery_config_media_modal %}\n                <sw-media-modal-v2\n                    v-if="mediaModalIsOpen"\n                    variant="regular"\n                    :caption="$tc(\'sw-cms.elements.general.config.caption.mediaUpload\')"\n                    :entity-context="cmsPageState.entityName"\n                    :initial-folder-id="cmsPageState.defaultMediaFolderId"\n                    @media-upload-remove-image="onItemRemove"\n                    @media-modal-selection-change="onMediaSelectionChange"\n                    @modal-close="onCloseMediaModal"\n                />\n                {% endblock %}\n            </sw-container>\n            {% endblock %}\n\n            \n            {% block sw_cms_element_image_gallery_config_settings %}\n            <sw-container\n                v-if="active === \'settings\'"\n                class="sw-cms-el-config-image-gallery__tab-settings"\n            >\n                <div class="sw-cms-el-config-image-gallery__settings-options">\n\n                    \n                    {% block sw_cms_element_image_gallery_config_settings_display_mode %}\n                    <div class="sw-cms-el-config-image-gallery__setting-option">\n\n                        \n                        {% block sw_cms_element_image_gallery_config_settings_display_mode_select %}\n                        <sw-select-field\n                            v-model="element.config.displayMode.value"\n                            :label="$tc(\'sw-cms.elements.general.config.label.displayMode\')"\n                            class="sw-cms-el-config-image-gallery__setting-display-mode"\n                            @change="onChangeDisplayMode"\n                        >\n                            <option value="standard">\n                                {{ $tc(\'sw-cms.elements.general.config.label.displayModeStandard\') }}\n                            </option>\n                            <option value="cover">\n                                {{ $tc(\'sw-cms.elements.general.config.label.displayModeCover\') }}\n                            </option>\n                            <option value="contain">\n                                {{ $tc(\'sw-cms.elements.general.config.label.displayModeContain\') }}\n                            </option>\n                        </sw-select-field>\n                        {% endblock %}\n\n                        \n                        {% block sw_cms_element_image_gallery_config_settings_min_height %}\n                        <sw-text-field\n                            v-model="element.config.minHeight.value"\n                            :label="$tc(\'sw-cms.elements.image.config.label.minHeight\')"\n                            :placeholder="$tc(\'sw-cms.elements.image.config.placeholder.enterMinHeight\')"\n                            :help-text="$tc(\'sw-cms.elements.image.config.label.minHeightHelpText\')"\n                            :disabled="![\'cover\', \'contain\'].includes(element.config.displayMode.value)"\n                            @input="onChangeMinHeight"\n                        />\n                        {% endblock %}\n\n                        \n                        {% block sw_cms_element_image_gallery_config_settings_vertical_align %}\n                        <sw-select-field\n                            v-model="element.config.verticalAlign.value"\n                            :label="$tc(\'sw-cms.elements.general.config.label.verticalAlign\')"\n                            :placeholder="$tc(\'sw-cms.elements.general.config.label.verticalAlign\')"\n                            :disabled="[\'cover\', \'contain\'].includes(element.config.displayMode.value)"\n                        >\n                            <option value="flex-start">\n                                {{ $tc(\'sw-cms.elements.general.config.label.verticalAlignTop\') }}\n                            </option>\n                            <option value="center">\n                                {{ $tc(\'sw-cms.elements.general.config.label.verticalAlignCenter\') }}\n                            </option>\n                            <option value="flex-end">\n                                {{ $tc(\'sw-cms.elements.general.config.label.verticalAlignBottom\') }}\n                            </option>\n                        </sw-select-field>\n                        {% endblock %}\n                    </div>\n                    {% endblock %}\n\n                    \n                    {% block sw_cms_element_image_gallery_config_settings_navigation %}\n                    <div class="sw-cms-el-config-image-gallery__setting-navigations sw-cms-el-config-image-gallery__setting-option">\n                        <div class="sw-cms-el-config-image-gallery__settings-navigation">\n\n                            \n                            {% block sw_cms_element_image_gallery_config_settings_navigation_arrow_position %}\n                            <sw-field\n                                v-model="element.config.navigationArrows.value"\n                                type="select"\n                                :label="$tc(\'sw-cms.elements.imageSlider.config.label.navigationArrows\')"\n                                @change="emitUpdateEl"\n                            >\n\n                                <option :value="null">\n                                    {{ $tc(\'sw-cms.elements.imageSlider.config.label.navigationPositionNone\') }}\n                                </option>\n                                <option value="inside">\n                                    {{ $tc(\'sw-cms.elements.imageSlider.config.label.navigationPositionInside\') }}\n                                </option>\n                                <option value="outside">\n                                    {{ $tc(\'sw-cms.elements.imageSlider.config.label.navigationPositionOutside\') }}\n                                </option>\n                            </sw-field>\n                            {% endblock %}\n                        </div>\n\n                        <div class="sw-cms-el-config-image-gallery__settings-navigation">\n\n                            \n                            {% block sw_cms_element_image_gallery_config_settings_navigation_dots_position %}\n                            <sw-field\n                                v-model="element.config.navigationDots.value"\n                                type="select"\n                                :label="$tc(\'sw-cms.elements.imageSlider.config.label.navigationDots\')"\n                                @change="emitUpdateEl"\n                            >\n\n                                <option :value="null">\n                                    {{ $tc(\'sw-cms.elements.imageSlider.config.label.navigationPositionNone\') }}\n                                </option>\n                                <option value="inside">\n                                    {{ $tc(\'sw-cms.elements.imageSlider.config.label.navigationPositionInside\') }}\n                                </option>\n                                <option value="outside">\n                                    {{ $tc(\'sw-cms.elements.imageSlider.config.label.navigationPositionOutside\') }}\n                                </option>\n                            </sw-field>\n                            {% endblock %}\n                        </div>\n\n                        <div class="sw-cms-el-config-image-gallery__settings-navigation">\n\n                            \n                            {% block sw_cms_element_image_gallery_config_settings_navigation_preview_position %}\n                            <sw-field\n                                v-model="element.config.galleryPosition.value"\n                                type="select"\n                                :label="$tc(\'sw-cms.elements.imageGallery.config.label.navigationPreview\')"\n                                @change="emitUpdateEl"\n                            >\n\n                                <option value="left">\n                                    {{ $tc(\'sw-cms.elements.imageGallery.config.label.navigationPreviewPositionLeft\') }}\n                                </option>\n                                <option value="underneath">\n                                    {{ $tc(\'sw-cms.elements.imageGallery.config.label.navigationPreviewPositionUnderneath\') }}\n                                </option>\n                            </sw-field>\n                            {% endblock %}\n                        </div>\n                    </div>\n                    {% endblock %}\n\n                    \n                    {% block sw_cms_element_image_gallery_config_settings_zoom_toggles %}\n                    <div class="sw-cms-el-config-image-gallery__setting-option">\n\n                        \n                        {% block sw_cms_element_image_gallery_config_settings_toggle_zoom %}\n                        <sw-switch-field\n                            v-model="element.config.zoom.value"\n                            bordered\n                            :label="$tc(\'sw-cms.elements.imageGallery.config.label.zoom\')"\n                        />\n                        {% endblock %}\n\n                        \n                        {% block sw_cms_element_image_gallery_config_settings_toggle_fullscreen %}\n                        <sw-switch-field\n                            v-model="element.config.fullScreen.value"\n                            bordered\n                            :label="$tc(\'sw-cms.elements.imageGallery.config.label.fullscreen\')"\n                        />\n                        {% endblock %}\n                    </div>\n                    {% endblock %}\n\n                    \n                    {% block sw_cms_element_image_gallery_config_settings_aspect_ratio_magnifier_over_gallery_toggles %}\n                    <div class="sw-cms-el-config-image-gallery__setting-option">\n\n                        \n                        {% block sw_cms_element_image_gallery_config_settings_toggle_keep_aspect_ratio_on_zoom %}\n                        <sw-switch-field\n                            v-model="element.config.keepAspectRatioOnZoom.value"\n                            bordered\n                            :label="$tc(\'sw-cms.elements.imageGallery.config.label.keepAspectRatioOnZoom\')"\n                        />\n                        {% endblock %}\n\n                        \n                        {% block sw_cms_element_image_gallery_config_settings_toggle_magnifier_over_gallery %}\n                        <sw-switch-field\n                            v-model="element.config.magnifierOverGallery.value"\n                            bordered\n                            :label="$tc(\'sw-cms.elements.imageGallery.config.label.magnifierOverGallery\')"\n                            :help-text="$tc(\'sw-cms.elements.imageGallery.config.label.magnifierOverGalleryHelpText\')"\n                        />\n                        {% endblock %}\n                    </div>\n                    {% endblock %}\n                </div>\n            </sw-container>\n            {% endblock %}\n        </template>\n    </sw-tabs>\n    {% endblock %}\n</div>\n{% endblock %}\n',inject:["repositoryFactory","feature"],mixins:[c.getByName("cms-element")],data:function(){return{mediaModalIsOpen:!1,initialFolderId:null,enitiy:this.element,mediaItems:[],columnWidth:"100px"}},computed:{mediaRepository:function(){return this.repositoryFactory.create("media")},uploadTag:function(){return"cms-element-media-config-".concat(this.element.id)},defaultFolderName:function(){return this.cmsPageState._entityName},sliderItems:function(){return this.element.data&&this.element.data.sliderItems&&this.element.data.sliderItems.length>0?this.element.data.sliderItems:[]},sliderItemsConfigValue:function(){var e,n,i;return null===(e=this.element)||void 0===e||null===(n=e.config)||void 0===n||null===(i=n.sliderItems)||void 0===i?void 0:i.value},gridAutoRows:function(){return"grid-auto-rows: ".concat(this.columnWidth)},isProductPage:function(){var e,n,i;return"product_detail"===(null!==(e=null===(n=this.cmsPageState)||void 0===n||null===(i=n.currentPage)||void 0===i?void 0:i.type)&&void 0!==e?e:"")}},watch:{sliderItems:function(){this.updateColumnWidth()},sliderItemsConfigValue:function(e){var n,i,t;if(e){var l="mapped"===(null===(n=this.element)||void 0===n||null===(i=n.config)||void 0===i||null===(t=i.sliderItems)||void 0===t?void 0:t.source),a=e&&e.length===this.sliderItems.length;l||a||!this.sliderItems.length||(this.mediaItems=this.sliderItems.map((function(e){return e.media})),this.element.config.sliderItems.value=this.sliderItems.map((function(e){return{mediaId:e.media.id,mediaUrl:e.media.url,newTab:e.newTab,url:e.url}})))}else this.element.config.sliderItems.value=[]}},created:function(){this.createdComponent()},mounted:function(){this.mountedComponent()},methods:{createdComponent:function(){var e=this;return s()(m.a.mark((function n(){var i,t,l,a,s,o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.initElementConfig("image-gallery"),i=e.element.config.sliderItems,t=i.source,l=i.value,!("static"===t&&l&&l.length>0)){n.next=10;break}return a=l.map((function(e){return e.mediaId})),(s=new _(1,25)).setIds(a),n.next=8,e.mediaRepository.search(s);case 8:o=n.sent,e.mediaItems=a.map((function(e){return o.get(e)}));case 10:e.initConfig();case 11:case"end":return n.stop()}}),n)})))()},mountedComponent:function(){this.updateColumnWidth()},initConfig:function(){var e,n,i,t;!this.isProductPage||null!==(e=this.element)&&void 0!==e&&null!==(n=e.translated)&&void 0!==n&&n.config||null!==(i=this.element)&&void 0!==i&&null!==(t=i.data)&&void 0!==t&&t.sliderItems||(this.element.config.sliderItems.source="mapped",this.element.config.sliderItems.value="product.media",this.element.config.navigationDots.value="inside",this.element.config.zoom.value=!0,this.element.config.fullScreen.value=!0,this.element.config.keepAspectRatioOnZoom.value=!0,this.element.config.magnifierOverGallery.value=!1,this.element.config.displayMode.value="contain",this.element.config.minHeight.value="430px")},updateColumnWidth:function(){var e=this;this.$refs.demoMediaGrid&&this.$nextTick((function(){var n=window.getComputedStyle(e.$refs.demoMediaGrid,null).getPropertyValue("grid-template-columns").split(" ");e.columnWidth=n[0]}))},onOpenMediaModal:function(){this.mediaModalIsOpen=!0},onCloseMediaModal:function(){this.mediaModalIsOpen=!1},onImageUpload:function(e){var n=this.element.config.sliderItems;"default"===n.source&&(n.value=[],n.source="static",this.mediaItems=[]),n.value.push({mediaUrl:e.url,mediaId:e.id,url:null,newTab:!1}),this.mediaItems.push(e),this.updateMediaDataValue(),this.emitUpdateEl()},onItemRemove:function(e,n){var i=e.id;this.element.config.sliderItems.value=this.element.config.sliderItems.value.filter((function(e,t){return e.mediaId!==i||t!==n})),this.mediaItems=this.mediaItems.filter((function(e,t){return e.id!==i||t!==n})),this.updateMediaDataValue(),this.emitUpdateEl()},onMediaSelectionChange:function(e){var n,i=this,t=this.element.config.sliderItems;"default"===t.source&&(t.value=[],t.source="static",this.mediaItems=[]),e.forEach((function(e){i.element.config.sliderItems.value.push({mediaUrl:e.url,mediaId:e.id,url:null,newTab:!1})})),(n=this.mediaItems).push.apply(n,l()(e)),this.updateMediaDataValue(),this.emitUpdateEl()},updateMediaDataValue:function(){var e=this;if(this.element.config.sliderItems.value){var n=r(this.element.config.sliderItems.value);n.forEach((function(n){e.mediaItems.forEach((function(e){n.mediaId===e.id&&(n.media=e)}))})),this.element.data?this.$set(this.element.data,"sliderItems",n):this.$set(this.element,"data",{sliderItems:n})}},onItemSort:function(e,n){g(this.mediaItems,e.position,n.position),g(this.element.config.sliderItems.value,e.position,n.position),this.updateMediaDataValue(),this.emitUpdateEl()},onChangeMinHeight:function(e){this.element.config.minHeight.value=null===e?"":e,this.$emit("element-update",this.element)},onChangeDisplayMode:function(e){["cover","contain"].includes(e)&&(this.element.config.verticalAlign.value=null),this.$emit("element-update",this.element)},emitUpdateEl:function(){this.$emit("element-update",this.element)}}}},tCJK:function(e,n,i){}}]);