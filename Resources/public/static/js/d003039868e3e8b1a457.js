(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[54],{CL3M:function(e,t,n){},lnIX:function(e,t,n){"use strict";n.r(t);var r=n("7yzw"),a=n.n(r),c=n("CsSd"),s=n.n(c),o=n("92Mt"),i=n.n(o);n("mEa5");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=Shopware.Utils.array.chunk;t.default={template:'\n{% block sw_bulk_edit_save_modal_process %}\n<div class="sw-bulk-edit-save-modal-process">\n    \n    {% block sw_bulk_edit_save_modal_process_icon %}\n    <sw-label\n        class="sw-bulk-edit-save-modal__icon"\n        appearance="pill"\n        variant="info"\n    >\n        <sw-loader\n            class="sw-bulk-edit-save-modal__loading-icon"\n            size="30px"\n        />\n    </sw-label>\n    {% endblock %}\n\n    \n    {% block sw_bulk_edit_save_modal_process_generate_document %}\n    <ul\n        v-if="selectedDocumentTypes.length > 0"\n        class="sw-bulk-edit-save-modal-process__generate-document-container"\n    >\n        <li\n            v-for="selectedDocumentType in selectedDocumentTypes"\n            :key="selectedDocumentType.id"\n            class="sw-bulk-edit-save-modal-process__generate-document"\n            :class="`is--${selectedDocumentType.technicalName}`"\n        >\n            <div class="progress">\n                <div class="progress__label">\n                    <span>{{ selectedDocumentType.translated.name }}</span>\n                    <span>{{ `${document[selectedDocumentType.technicalName].isReached}%` }}</span>\n                </div>\n                <div class="progress__bar">\n                    <div\n                        class="progress__bar-fill"\n                        :style="{ width: `${document[selectedDocumentType.technicalName].isReached}%` }"\n                    >\n                    </div>\n                </div>\n            </div>\n        </li>\n    </ul>\n    {% endblock %}\n\n    \n    {% block sw_bulk_edit_save_modal_process_content %}\n    <p class="sw-bulk-edit-save-modal__help-text">\n        {{ $tc(\'sw-bulk-edit.modal.process.description\') }}\n        <br>\n        <br>\n        {{ $tc(\'sw-bulk-edit.modal.process.helpText\') }}\n    </p>\n\n    <sw-alert\n        variant="warning"\n        class="sw-bulk-edit-save-modal__warning"\n    >\n        {{ $tc(\'sw-bulk-edit.modal.warningText\') }}\n    </sw-alert>\n    {% endblock %}\n</div>\n{% endblock %}\n',inject:["orderDocumentApiService"],data:function(){return{requestsPerPayload:5,document:{invoice:{isReached:0},storno:{isReached:0},delivery_note:{isReached:0},credit_note:{isReached:0}}}},computed:{selectedIds:function(){return Shopware.State.get("shopwareApps").selectedIds},documentTypes:function(){var e,t,n;return null===(e=Shopware.State.get("swBulkEdit"))||void 0===e||null===(t=e.orderDocuments)||void 0===t||null===(n=t.download)||void 0===n?void 0:n.value},documentTypeConfigs:function(){return Shopware.State.getters["swBulkEdit/documentTypeConfigs"]},selectedDocumentTypes:function(){var e=this;if(this.documentTypeConfigs.length<=0)return[];var t=[];return this.documentTypeConfigs.forEach((function(n){var r=e.documentTypes.find((function(e){return n.type===e.technicalName}));r&&t.push(r)})),t},createDocumentPayload:function(){var e=this,t=[];return this.selectedIds.forEach((function(n){var r;null===(r=e.documentTypeConfigs)||void 0===r||r.forEach((function(e){e&&t.push(l(l({},e),{},{orderId:n}))}))})),t}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var e=this;return a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.updateButtons(),e.setTitle(),t.next=4,e.createDocuments();case 4:e.$emit("changes-apply");case 5:case"end":return t.stop()}}),t)})))()},setTitle:function(){this.$emit("title-set",this.$tc("sw-bulk-edit.modal.process.title"))},updateButtons:function(){var e=[{key:"cancel",label:this.$tc("sw-bulk-edit.modal.process.buttons.cancel"),position:"left",action:"",disabled:!1},{key:"next",label:this.$tc("global.sw-modal.labelClose"),position:"right",variant:"primary",action:"",disabled:!0}];this.$emit("buttons-update",e)},createDocuments:function(){var e=this;return a()(i.a.mark((function t(){var n,r,a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.createDocumentPayload.length<=0)){t.next=2;break}return t.abrupt("return");case 2:if(n=e.createDocumentPayload.filter((function(e){return"invoice"===e.type})),r=e.createDocumentPayload.filter((function(e){return"storno"===e.type})),a=e.createDocumentPayload.filter((function(e){return"credit_note"===e.type})),c=e.createDocumentPayload.filter((function(e){return"delivery_note"===e.type})),!(n.length>0)){t.next=9;break}return t.next=9,e.createDocument("invoice",n);case 9:if(!(r.length>0)){t.next=12;break}return t.next=12,e.createDocument("storno",r);case 12:if(!(a.length>0)){t.next=15;break}return t.next=15,e.createDocument("credit_note",a);case 15:if(!(c.length>0)){t.next=18;break}return t.next=18,e.createDocument("delivery_note",c);case 18:case"end":return t.stop()}}),t)})))()},createDocument:function(e,t){var n=this;return a()(i.a.mark((function r(){var c,s;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t.length<=n.requestsPerPayload)){r.next=5;break}return r.next=3,n.orderDocumentApiService.generate(e,t);case 3:return n.$set(n.document[e],"isReached",100),r.abrupt("return",Promise.resolve());case 5:return c=d(t,n.requestsPerPayload),s=Math.round(100/c.length),r.abrupt("return",Promise.all(c.map(function(){var t=a()(i.a.mark((function t(r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.orderDocumentApiService.generate(e,r);case 2:n.$set(n.document[e],"isReached",n.document[e].isReached+s);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())).then((function(){n.$set(n.document[e],"isReached",100)})));case 8:case"end":return r.stop()}}),r)})))()}}}},mEa5:function(e,t,n){var r=n("CL3M");r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n("P8hj").default)("579ba4f8",r,!0,{})}}]);
//# sourceMappingURL=d003039868e3e8b1a457.js.map