{"version":3,"sources":["webpack:///./src/module/sw-import-export/component/sw-import-export-exporter/sw-import-export-exporter.html.twig","webpack:///./src/module/sw-import-export/component/sw-import-export-exporter/index.js","webpack:///./src/module/sw-import-export/component/sw-import-export-exporter/sw-import-export-exporter.scss"],"names":["Mixin","Shopware","Criteria","Data","template","inject","mixins","getByName","props","sourceEntity","type","String","required","default","data","selectedProfileId","selectedProfile","config","parameters","isLoading","exportModalProfile","computed","profileCriteria","criteria","addSorting","sort","this","length","addFilter","equals","not","disableExporting","showProductVariantsInfo","includeVariants","logRepository","repositoryFactory","create","methods","onProfileSelect","profileId","profile","onStartProcess","_this","importExport","export","handleProgress","catch","error","response","errors","forEach","singleError","createNotificationError","message","concat","code","detail","log","createNotificationInfo","$tc","$emit","setExportModalProfile","profileName","content","__esModule","module","i","locals","exports","add"],"mappings":"6JAAe,ICMPA,EAAUC,SAAVD,MACAE,EAAaD,SAASE,KAAtBD,SAKO,WACXE,SDbW,g0HCeXC,OAAQ,CAAC,eAAgB,oBAAqB,WAE9CC,OAAQ,CACJN,EAAMO,UAAU,iBAGpBC,MAAO,CACHC,aAAc,CACVC,KAAMC,OACNC,UAAU,EACVC,QAAS,KAIjBC,KAAI,WACA,MAAO,CACHC,kBAAmB,KACnBC,gBAAiB,KACjBC,OAAQ,CACJC,WAAY,IAEhBC,WAAW,EACXC,mBAAoB,OAI5BC,SAAU,CACNC,gBAAe,WACX,IAAMC,EAAW,IAAIrB,EAAS,EAAG,IAUjC,OATAqB,EAASC,WAAWtB,EAASuB,KAAK,UAE9BC,KAAKjB,aAAakB,OAAS,GAC3BJ,EAASK,UACL1B,EAAS2B,OAAO,eAAgBH,KAAKjB,eAG7Cc,EAASK,UAAU1B,EAAS4B,IAAI,MAAO,CAAC5B,EAAS2B,OAAO,OAAQ,aAEzDN,GAGXQ,iBAAgB,WACZ,OAAOL,KAAKP,WAAwC,OAA3BO,KAAKX,mBAGlCiB,wBAAuB,WACnB,OAAON,KAAKV,iBAC8B,YAAtCU,KAAKV,gBAAgBP,cACrBiB,KAAKT,QACLS,KAAKT,OAAOC,YACZQ,KAAKT,OAAOC,WAAWe,iBAG/BC,cAAa,WACT,OAAOR,KAAKS,kBAAkBC,OAAO,uBAI7CC,QAAS,CACLC,gBAAe,SAACC,EAAWC,GACvBd,KAAKX,kBAAoBwB,EACzBb,KAAKV,gBAAkBwB,GAG3BC,eAAc,WAAI,IAADC,EAAA,KACbhB,KAAKP,WAAY,EAEjBO,KAAKiB,aAAaC,OAAOlB,KAAKX,kBAAmBW,KAAKmB,eAAgBnB,KAAKT,QAAQ6B,OAAM,SAACC,GACjFA,EAAMC,UAAaD,EAAMC,SAASlC,MAASiC,EAAMC,SAASlC,KAAKmC,OAKhEF,EAAMC,SAASlC,KAAKmC,OAAOC,SAAQ,SAACC,GAChCT,EAAKU,wBAAwB,CACzBC,QAAQ,GAADC,OAAKH,EAAYI,KAAI,MAAAD,OAAKH,EAAYK,aANrDd,EAAKU,wBAAwB,CACzBC,QAASN,EAAMM,UAUvBX,EAAKvB,WAAY,MAIzB0B,eAAc,SAACY,GACX/B,KAAKgC,uBAAuB,CACxBL,QAAS3B,KAAKiC,IAAI,oDAGtBjC,KAAKP,WAAY,EACjBO,KAAKkC,MAAM,iBAAkBH,IAGjCI,sBAAqB,SAACC,GAClBpC,KAAKN,mBAAqB0C,M,uBC1GtC,IAAIC,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQlD,SACnB,iBAAZkD,IAAsBA,EAAU,CAAC,CAACE,EAAOC,EAAIH,EAAS,MAC7DA,EAAQI,SAAQF,EAAOG,QAAUL,EAAQI,SAG/BE,EADH,EAAQ,QAAwExD,SACzE,WAAYkD,GAAS,EAAM","file":"static/js/2e2d30c943fe6eb0e916.js","sourcesContent":["export default \"\\n{% block sw_import_export_exporter %}\\n<div class=\\\"sw-import-export-exporter\\\">\\n    \\n    {% block sw_import_export_exporter_header %}\\n    <h2>{{ $tc('sw-import-export.importer.selectProfileLabel') }}</h2>\\n    {% endblock %}\\n\\n    \\n    {% block sw_import_export_exporter_profile_select %}\\n    <sw-entity-single-select\\n        class=\\\"sw-import-export-exporter__profile-select\\\"\\n        :disabled=\\\"isLoading\\\"\\n        :label=\\\"$tc('sw-import-export.importer.profileLabel')\\\"\\n        :criteria=\\\"profileCriteria\\\"\\n        entity=\\\"import_export_profile\\\"\\n        label-property=\\\"label\\\"\\n        :value=\\\"selectedProfileId\\\"\\n        required\\n        show-clearable-button\\n        {% if VUE3 %}\\n        @update:value=\\\"onProfileSelect\\\"\\n        {% else %}\\n        @change=\\\"onProfileSelect\\\"\\n        {% endif %}\\n    />\\n    {% endblock %}\\n\\n    <template v-if=\\\"selectedProfile && selectedProfile.sourceEntity === 'product'\\\">\\n        \\n        {% block sw_import_export_exporter_profile_select_product_variants_switch %}\\n        <sw-switch-field\\n            {% if VUE3 %}\\n            v-model:value=\\\"config.parameters.includeVariants\\\"\\n            {% else %}\\n            v-model=\\\"config.parameters.includeVariants\\\"\\n            {% endif %}\\n            class=\\\"sw-import-export-exporter__variants-switch-field\\\"\\n            :label=\\\"$tc('sw-import-export.exporter.exportVariants')\\\"\\n        />\\n        {% endblock %}\\n    </template>\\n\\n    <template v-if=\\\"showProductVariantsInfo\\\">\\n        \\n        {% block sw_import_export_exporter_product_variants_warning %}\\n        <sw-alert\\n            variant=\\\"warning\\\"\\n            class=\\\"sw-import-export-exporter__variants-warning\\\"\\n        >\\n            \\n            {% block sw_import_export_exporter_product_variants_warning_text %}\\n            <p>\\n                <span v-html=\\\"$tc('sw-import-export.exporter.variantsWarning')\\\"></span>\\n            </p>\\n            <p>\\n                <a\\n                    href=\\\"#\\\"\\n                    class=\\\"sw-import-export-exporter__link\\\"\\n                    @click.prevent=\\\"setExportModalProfile('product_configurator_setting')\\\"\\n                >\\n                    {{ $tc('sw-import-export.exporter.directExportVariantsLabel') }}\\n                </a>\\n                <br>\\n                <a\\n                    href=\\\"#\\\"\\n                    class=\\\"sw-import-export-exporter__link\\\"\\n                    @click.prevent=\\\"setExportModalProfile('property_group_option')\\\"\\n                >\\n                    {{ $tc('sw-import-export.exporter.directExportPropertiesLabel') }}\\n                </a>\\n            </p>\\n            {% endblock %}\\n        </sw-alert>\\n        {% endblock %}\\n    </template>\\n\\n    \\n    {% block sw_import_export_exporter_modal %}\\n    <sw-modal\\n        v-if=\\\"exportModalProfile\\\"\\n        :title=\\\"$tc('sw-import-export.exporter.exportLabel')\\\"\\n        @modal-close=\\\"setExportModalProfile(null)\\\"\\n    >\\n        \\n        {% block sw_import_export_exporter_modal_exporter %}\\n        <sw-import-export-exporter\\n            :source-entity=\\\"exportModalProfile\\\"\\n            @export-started=\\\"$emit('export-started', $event)\\\"\\n        />\\n        {% endblock %}\\n\\n        <template #modal-footer>\\n            \\n            {% block sw_import_export_exporter_modal_footer %}\\n            <sw-button\\n                size=\\\"small\\\"\\n                @click=\\\"setExportModalProfile(null)\\\"\\n            >\\n                {{ $tc('sw-import-export.exporter.close') }}\\n            </sw-button>\\n            {% endblock %}\\n        </template>\\n    </sw-modal>\\n    {% endblock %}\\n\\n    \\n    {% block sw_import_export_exporter_progress %}\\n    <sw-import-export-progress\\n        activity-type=\\\"export\\\"\\n        :disable-button=\\\"disableExporting\\\"\\n        @process-start=\\\"onStartProcess\\\"\\n    />\\n    {% endblock %}\\n\\n</div>\\n{% endblock %}\\n\";","/**\n * @package services-settings\n */\nimport template from './sw-import-export-exporter.html.twig';\nimport './sw-import-export-exporter.scss';\n\nconst { Mixin } = Shopware;\nconst { Criteria } = Shopware.Data;\n\n/**\n * @private\n */\nexport default {\n    template,\n\n    inject: ['importExport', 'repositoryFactory', 'feature'],\n\n    mixins: [\n        Mixin.getByName('notification'),\n    ],\n\n    props: {\n        sourceEntity: {\n            type: String,\n            required: false,\n            default: '',\n        },\n    },\n\n    data() {\n        return {\n            selectedProfileId: null,\n            selectedProfile: null,\n            config: {\n                parameters: {},\n            },\n            isLoading: false,\n            exportModalProfile: null,\n        };\n    },\n\n    computed: {\n        profileCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addSorting(Criteria.sort('label'));\n\n            if (this.sourceEntity.length > 0) {\n                criteria.addFilter(\n                    Criteria.equals('sourceEntity', this.sourceEntity),\n                );\n            }\n            criteria.addFilter(Criteria.not('AND', [Criteria.equals('type', 'import')]));\n\n            return criteria;\n        },\n\n        disableExporting() {\n            return this.isLoading || this.selectedProfileId === null;\n        },\n\n        showProductVariantsInfo() {\n            return this.selectedProfile &&\n                this.selectedProfile.sourceEntity === 'product' &&\n                this.config &&\n                this.config.parameters &&\n                this.config.parameters.includeVariants;\n        },\n\n        logRepository() {\n            return this.repositoryFactory.create('import_export_log');\n        },\n    },\n\n    methods: {\n        onProfileSelect(profileId, profile) {\n            this.selectedProfileId = profileId;\n            this.selectedProfile = profile;\n        },\n\n        onStartProcess() {\n            this.isLoading = true;\n\n            this.importExport.export(this.selectedProfileId, this.handleProgress, this.config).catch((error) => {\n                if (!error.response || !error.response.data || !error.response.data.errors) {\n                    this.createNotificationError({\n                        message: error.message,\n                    });\n                } else {\n                    error.response.data.errors.forEach((singleError) => {\n                        this.createNotificationError({\n                            message: `${singleError.code}: ${singleError.detail}`,\n                        });\n                    });\n                }\n\n                this.isLoading = false;\n            });\n        },\n\n        handleProgress(log) {\n            this.createNotificationInfo({\n                message: this.$tc('sw-import-export.exporter.messageExportStarted'),\n            });\n\n            this.isLoading = false;\n            this.$emit('export-started', log);\n        },\n\n        setExportModalProfile(profileName) {\n            this.exportModalProfile = profileName;\n        },\n    },\n};\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-import-export-exporter.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"68142e16\", content, true, {});"],"sourceRoot":""}