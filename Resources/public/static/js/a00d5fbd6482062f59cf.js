(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[20453],{209355:function(){},220453:function(n,i,e){"use strict";e.r(i),e.d(i,{default:function(){return t}}),e(677329);var t={template:'\n{% block sw_first_run_wizard_shopware_domain %}\n<div class="sw-first-run-wizard-shopware-domain">\n    <h3 class="headline">\n        {{ $tc(\'sw-first-run-wizard.shopwareDomain.headline\') }}\n    </h3>\n    <p\n        class="message"\n        v-html="$tc(\'sw-first-run-wizard.shopwareDomain.message\')"\n    ></p>\n\n    <sw-switch-field\n        v-model:value="createShopDomain"\n        :label="$tc(\'sw-first-run-wizard.shopwareDomain.labelCreateDomain\')"\n    />\n\n    <div v-if="createShopDomain">\n        <sw-text-field\n            v-model:value="newShopDomain"\n            name="newShopDomain"\n            validation="required"\n            :label="\'Shop domain\'"\n        />\n        <sw-checkbox-field\n            v-model:value="testEnvironment"\n            :label="$tc(\'sw-first-run-wizard.shopwareDomain.testEnvironment\')"\n        />\n    </div>\n    <div v-else-if="licenceDomains.length > 0">\n        <sw-select-field\n            v-model:value="selectedShopDomain"\n            label="Shop domain"\n            placeholder=""\n        >\n            <option\n                v-for="domain in licenceDomains"\n                :key="domain.domain"\n                :value="domain.domain"\n            >\n                {{ domain.domain }}\n            </option>\n        </sw-select-field>\n    </div>\n    <div\n        v-if="domainError"\n        class="sw-first-run-wizard-shopware-domain__error"\n    >\n        <sw-alert\n            :title="domainError.title"\n            variant="error"\n            appearance="notification"\n        >\n            {{ domainError.detail }}\n        </sw-alert>\n    </div>\n\n    <sw-loader v-if="isLoading" />\n</div>\n{% endblock %}\n',inject:["firstRunWizardService"],data(){return{licenceDomains:[],selectedShopDomain:"",createShopDomain:!1,newShopDomain:"",testEnvironment:!1,domainError:null,isLoading:!1}},computed:{domainToVerify(){return this.createShopDomain?this.newShopDomain:this.selectedShopDomain},isDomainEmpty(){return this.domainToVerify.length<=0},nextAction(){return Shopware.State.get("context").app.config.settings.disableExtensionManagement?"sw.first.run.wizard.index.finish":"sw.first.run.wizard.index.store"}},watch:{isDomainEmpty(){this.updateButtons()}},created(){this.createdComponent()},methods:{createdComponent(){this.isLoading=!0,this.updateButtons(),this.setTitle(),this.firstRunWizardService.getLicenseDomains().then(n=>{let{items:i}=n;i&&!(i.length<1)&&(this.licenceDomains=i,this.selectedShopDomain=i[0].domain)}).finally(()=>{this.licenceDomains.length<=0&&(this.createShopDomain=!0),this.isLoading=!1})},setTitle(){this.$emit("frw-set-title",this.$tc("sw-first-run-wizard.shopwareAccount.modalTitle"))},updateButtons(){let n=[{key:"back",label:this.$tc("sw-first-run-wizard.general.buttonBack"),position:"left",variant:null,action:"sw.first.run.wizard.index.shopware.account",disabled:!1},{key:"next",label:this.$tc("sw-first-run-wizard.general.buttonNext"),position:"right",variant:"primary",action:this.verifyDomain.bind(this),disabled:this.isDomainEmpty}];this.$emit("buttons-update",n)},verifyDomain(){let{testEnvironment:n}=this,i=this.domainToVerify;return this.domainError=null,this.firstRunWizardService.verifyLicenseDomain({domain:i,testEnvironment:n}).then(()=>(this.$emit("frw-redirect",this.nextAction),!1)).catch(n=>{let i=n.response.data.errors.pop();return this.domainError=i,!0})}}}},677329:function(n,i,e){var t=e(209355);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[n.id,t,""]]),t.locals&&(n.exports=t.locals),e(745346).Z("3124a403",t,!0,{})}}]);