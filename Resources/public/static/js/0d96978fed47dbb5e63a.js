(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[80039],{605512:function(){},880039:function(s,t,e){"use strict";e.r(t),e.d(t,{default:function(){return i}}),e(893211);let{Criteria:n}=Shopware.Data,{mapState:o,mapGetters:l}=Shopware.Component.getComponentHelper();var i={template:'\n{% block sw_product_detail_cross_selling %}\n<div v-if="isLoading">\n    <sw-skeleton />\n    <sw-skeleton />\n</div>\n\n<div\n    v-else\n    class="sw-product-detail-cross-selling"\n>\n    \n    {% block sw_product_detail_cross_selling_items_wrapper %}\n    <template v-if="showCrossSellingCard">\n        \n        {% block sw_product_detail_cross_selling_items %}\n        <ul class="sw-product-detail-cross-selling__cross-selling-list">\n            <sw-product-cross-selling-form\n                v-for="item in product.crossSellings"\n                :key="item.id"\n                :cross-selling="item"\n                :allow-edit="acl.can(\'product.editor\')"\n            />\n        </ul>\n        {% endblock %}\n\n        \n        {% block sw_product_detail_cross_selling_add %}\n        <sw-button\n            v-tooltip="{\n                message: onAddCrossSellingTooltipMessage,\n                disabled: acl.can(\'product.editor\') && isSystemDefaultLanguage,\n                showOnDisabledElements: true\n            }"\n            class="sw-product-detail-cross-selling__add-btn"\n            variant="ghost"\n            :disabled="!acl.can(\'product.editor\') || !isSystemDefaultLanguage"\n            @click="onAddCrossSelling"\n        >\n            {{ $tc(\'sw-product.crossselling.buttonAddCrossSelling\') }}\n        </sw-button>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_product_detail_empty_state %}\n    <sw-card\n        v-else\n        position-identifier="sw-product-detail-cross-selling-empty-state"\n    >\n        <sw-empty-state\n            :title="$tc(\'sw-product.crossselling.cardTitleCrossSelling\')"\n            :subline="$tc(\'sw-product.crossselling.emptyStateDescription\')"\n            :absolute="false"\n            empty-module\n        >\n            <template #icon>\n                <img\n                    :src="assetFilter(\'/administration/static/img/empty-states/products-empty-state.svg\')"\n                    :alt="$tc(\'sw-product.crossselling.cardTitleCrossSelling\')"\n                >\n            </template>\n\n            \n            {% block sw_product_detail_empty_state_cross_selling_add %}\n            <template #actions>\n                <sw-button\n                    v-tooltip="{\n                        message: onAddCrossSellingTooltipMessage,\n                        disabled: acl.can(\'product.editor\') && isSystemDefaultLanguage,\n                        showOnDisabledElements: true\n                    }"\n                    variant="ghost"\n                    :disabled="!acl.can(\'product.editor\') || !isSystemDefaultLanguage"\n                    @click="onAddCrossSelling"\n                >\n                    {{ $tc(\'sw-product.crossselling.buttonAddCrossSelling\') }}\n                </sw-button>\n            </template>\n            {% endblock %}\n        </sw-empty-state>\n    </sw-card>\n    {% endblock %}\n</div>\n{% endblock %}\n',inject:["repositoryFactory","acl"],props:{allowEdit:{type:Boolean,required:!1,default:!0}},data(){return{crossSelling:null}},computed:{...o("swProductDetail",["product"]),...l("swProductDetail",["isLoading"]),...l("context",["isSystemDefaultLanguage"]),showCrossSellingCard(){return!this.isLoading&&this.product.crossSellings&&this.product.crossSellings.length>0},onAddCrossSellingTooltipMessage(){return this.isSystemDefaultLanguage?this.$tc("sw-privileges.tooltip.warning"):this.$tc("sw-product.crossselling.buttonAddCrossSellingLanguageWarning")},assetFilter(){return Shopware.Filter.getByName("asset")}},watch:{product(s){s.crossSellings.forEach(s=>{s.assignedProducts.length>0||this.loadAssignedProducts(s)})}},methods:{loadAssignedProducts(s){let t=this.repositoryFactory.create(s.assignedProducts.entity,s.assignedProducts.source),e=new n(1,25);return e.addFilter(n.equals("crossSellingId",s.id)).addSorting(n.sort("position","ASC")).addAssociation("product"),t.search(e,{...Shopware.Context.api,inheritance:!0}).then(t=>{s.assignedProducts=t}),s},onAddCrossSelling(){let s=this.repositoryFactory.create(this.product.crossSellings.entity,this.product.crossSellings.source);this.crossSelling=s.create(),this.crossSelling.productId=this.product.id,this.crossSelling.position=this.product.crossSellings.length+1,this.crossSelling.type="productStream",this.crossSelling.sortBy="name",this.crossSelling.sortDirection="ASC",this.crossSelling.limit=24,this.product.crossSellings.push(this.crossSelling)}}}},893211:function(s,t,e){var n=e(605512);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[s.id,n,""]]),n.locals&&(s.exports=n.locals),e(745346).Z("2c38d490",n,!0,{})}}]);