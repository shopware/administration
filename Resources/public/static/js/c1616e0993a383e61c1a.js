(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[455],{"1Fwx":function(e,t,s){"use strict";s.r(t);s("Z7hw");var n=Shopware.Mixin;t.default={template:'\n{% block sw_settings_search_excluded_search_terms %}\n<sw-card\n    :title="$tc(\'sw-settings-search.generalTab.labelExcludedSearchTerms\')"\n    class="sw-settings-search-excluded-search-terms"\n    position-identifier="sw-settings-search-excluded-search-terms"\n>\n    <template #grid>\n        \n        {% block sw_settings_search_excluded_search_terms_empty_state %}\n        <sw-empty-state\n            v-if="showEmptyState"\n            :title="$tc(\'sw-settings-search.generalTab.textEmptyStateExcludedSearchTerms\')"\n            :show-description="false"\n            :has-action-slot="true"\n            :absolute="false"\n            class="sw-empty-state"\n        >\n            <template #icon>\n                \n                {% block sw_settings_search_excluded_search_terms_empty_state_image %}\n                <img\n                    :src="\'administration/static/img/empty-states/settings-empty-state.svg\' | asset"\n                    :alt="$tc(\'sw-settings-search.generalTab.textEmptyStateExcludedSearchTerms\')"\n                >\n                {% endblock %}\n            </template>\n\n            <template #actions>\n                \n                {% block sw_settings_search_excluded_search_terms_empty_state_action %}\n                <sw-button\n                    class="sw-settings-search-excluded-search-terms__action-add"\n                    variant="ghost"\n                    size="small"\n                    :disabled="!acl.can(\'product_search_config.creator\')"\n                    @click="addExcludedSearchTerms"\n                >\n                    {{ $tc(\'sw-settings-search.generalTab.buttonAddExcludedSearch\') }}\n                </sw-button>\n                {% endblock %}\n            </template>\n        </sw-empty-state>\n        {% endblock %}\n\n        \n        {% block sw_settings_search_excluded_search_terms_grid %}\n        <div v-if="!showEmptyState">\n            \n            {% block sw_settings_search_excluded_search_terms_header_bar %}\n            <sw-container\n                class="sw-settings-search-excluded-search-terms__header-bar"\n                columns="1fr auto"\n                gap="10px"\n                align="center"\n            >\n                \n                {% block sw_settings_search_excluded_search_terms_filter %}\n                <sw-card-filter\n                    ref="itemFilter"\n                    :placeholder="$tc(\'sw-settings-search.generalTab.textPlaceholderTermsFilter\')"\n                    @sw-card-filter-term-change="onSearchTermChange"\n                />\n                {% endblock %}\n\n                \n                {% block sw_settings_search_excluded_search_terms_actions %}\n                <div class="sw-settings-search-excluded-search-terms-group-actions">\n                    \n                    {% block sw_settings_search_excluded_search_terms_add_button %}\n                    <sw-button\n                        class="sw-settings-search-excluded-search-terms__insert-button"\n                        variant="ghost"\n                        size="small"\n                        :disabled="!acl.can(\'product_search_config.creator\')"\n                        @click="onInsertTerm"\n                    >\n                        {{ $tc(\'sw-settings-search.generalTab.buttonAddExcludedSearchTerms\') }}\n                    </sw-button>\n                    {% endblock %}\n\n                    \n                    {% block sw_settings_search_excluded_search_terms_reset_button %}\n                    <sw-button\n                        class="sw-settings-search-excluded-search-terms__reset-button"\n                        size="small"\n                        :disabled="!acl.can(\'product_search_config.creator\')"\n                        :is-loading="isLoading"\n                        @click="onResetExcludedSearchTermDefault"\n                    >\n                        {{ $tc(\'sw-settings-search.generalTab.buttonResetDefault\') }}\n                    </sw-button>\n                    {% endblock %}\n                </div>\n                {% endblock %}\n            </sw-container>\n            {% endblock %}\n\n            \n            {% block sw_settings_search_excluded_search_terms_grid_list %}\n            <sw-container>\n                <sw-data-grid\n                    v-if="items.length !== 0"\n                    ref="dataGrid"\n                    :data-source="items"\n                    :allow-inline-edit="acl.can(\'product_search_config.editor\')"\n                    :is-loading="isLoading || isExcludedTermsLoading"\n                    :columns="getSearchableGeneralColumns"\n                    class="sw-settings-search__grid sw-settings-search-excluded-search-terms_grid"\n                    @inline-edit-save="onSaveEdit"\n                    @inline-edit-cancel="onCancelEdit"\n                    @select-item="selectionChanged"\n                >\n                    <template #bulk>\n                        <sw-button\n                            variant="danger"\n                            size="small"\n                            :disabled="!acl.can(\'product_search_config.deleter\')"\n                            @click="onBulkDeleteExcludedTerm()"\n                        >\n                            {{ $tc(\'global.default.delete\') }}\n                        </sw-button>\n                    </template>\n\n                    <template #actions="{ item }">\n                        \n                        {% block sw_search_excluded_terms_column_actions %}\n                        <sw-context-menu-item\n                            variant="danger"\n                            :disabled="!acl.can(\'product_search_config.deleter\')"\n                            @click="onDeleteExcludedTerm([item])"\n                        >\n                            {{ $tc(\'global.default.delete\') }}\n                        </sw-context-menu-item>\n                        {% endblock %}\n                    </template>\n\n                    <template #pagination>\n                        \n                        {% block sw_search_excluded_terms_list_pagination %}\n                        <sw-pagination\n                            :page="page"\n                            :limit="limit"\n                            :total="total"\n                            :total-visible="7"\n                            @page-change="onPagePagination"\n                        />\n                        {% endblock %}\n                    </template>\n                </sw-data-grid>\n                \n                {% block sw_search_excliuded_terms_no_results %}\n                <div v-if="items.length === 0">\n                    <p class="sw-settings-search__no-data-results">\n                        {{ $tc(\'sw-settings-search.generalTab.labelExcludedSearchTermsNoResults\') }}\n                    </p>\n                </div>\n                {% endblock %}\n            </sw-container>\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </template>\n</sw-card>\n{% endblock %}\n',inject:["excludedSearchTermService","repositoryFactory","acl"],mixins:[n.getByName("notification")],props:{searchConfigs:{type:Object,required:!1,default:null},isExcludedTermsLoading:{type:Boolean,required:!1,default:!1}},data:function(){return{items:[],originalItems:[],showEmptyState:!1,page:1,limit:10,total:0,searchTerm:"",isLoading:!1,isAddingItem:!1,responseMessage:""}},computed:{searchRepository:function(){return this.repositoryFactory.create("product_search_config")},getSearchableGeneralColumns:function(){return[{property:"value",label:"sw-settings-search.generalTab.textColumnSearchTerm",inlineEdit:"string",sortable:!1}]}},watch:{searchConfigs:function(){this.createdComponent()}},created:function(){this.createdComponent()},methods:{createdComponent:function(){if(this.isLoading=!0,void 0===this.searchConfigs.excludedTerms||null===this.searchConfigs.excludedTerms||this.searchConfigs.excludedTerms.length<=0)return this.resetData(),this.showEmptyState=!0,void(this.isLoading=!1);this.originalItems=this.searchConfigs.excludedTerms,this.renderComponent()},resetData:function(){this.originalItems=[],this.items=[],this.page=1,this.total=0},addExcludedSearchTerms:function(){this.showEmptyState=!1},onInsertTerm:function(){this.isAddingItem=!0,this.searchTerm="",this.$refs.itemFilter.term="",this.page=1,this.renderComponent(),this.items.unshift({id:null,value:""}),this.$refs.dataGrid.onDbClickCell(this.items[0]),this.$emit("edit-change",!0)},renderComponent:function(){if(this.originalItems.length<=0)return this.isLoading=!1,void(this.items=[]);var e=this.filterItems();if(this.total=e.length,this.total<=0)return this.items=[],this.showEmptyState=!1,void(this.isLoading=!1);this.items=this.sliceItems(e),this.items.length<=0&&(this.page-=1,this.renderComponent()),this.showEmptyState=!1,this.isLoading=!1},filterItems:function(){var e=this;return this.originalItems.filter((function(t){return t.search(e.searchTerm)>=0}))},sliceItems:function(e){var t=(this.page-1)*this.limit;return e.slice(t,t+this.limit).map((function(e,t){return{id:t,value:e}}))},onPagePagination:function(e){this.page=e.page,this.limit=e.limit,this.isAddingItem=!1,this.renderComponent()},onDeleteExcludedTerm:function(e){this.responseMessage=this.$tc("sw-settings-search.notification.deleteExcludedTermSuccess"),this.isLoading=!0;var t=e.filter((function(e){return""!==e.value})).map((function(e){return e.value}));t.length<=0?this.renderComponent():(this.originalItems=this.originalItems.filter((function(e){return!t.find((function(t){return t===e}))})),this.saveConfig())},onSearchTermChange:function(e){this.page=1,this.searchTerm=e,""===e&&this.isAddingItem||(this.isAddingItem=!1,this.renderComponent())},selectionChanged:function(e){this.selection=e},onSaveEdit:function(e){if(this.isLoading=!0,""===e.value)return this.createNotificationError({message:this.$tc("sw-settings-search.notification.excludedTermRequired")}),void this.renderComponent();var t=this.getOriginItem(e);return this.originalItems.find((function(s){return s===e.value&&s!==t}))?(this.createNotificationError({message:this.$tc("sw-settings-search.notification.excludedTermAlreadyExists")}),void this.renderComponent()):this.isAddingItem?(this.responseMessage=this.$tc("sw-settings-search.notification.createExcludedTermSuccess"),this.originalItems.unshift(e.value),void this.saveConfig()):(this.responseMessage=this.$tc("sw-settings-search.notification.updateExcludedTermSuccess"),this.originalItems[e.id]=e.value,void this.saveConfig())},getOriginItem:function(e){var t=this.filterItems(),s=this.sliceItems(t).find((function(t){return t.id===e.id}));return s?s.value:null},onCancelEdit:function(){this.renderComponent(),this.$emit("edit-change",!1)},onBulkDeleteExcludedTerm:function(){this.onDeleteExcludedTerm(Object.values(this.selection))},saveConfig:function(){var e=this;return this.searchConfigs.excludedTerms=this.originalItems,this.searchRepository.save(this.searchConfigs).then((function(){e.createNotificationSuccess({message:e.responseMessage}),e.isAddingItem=!1,e.renderComponent(),e.$emit("edit-change",!1)})).catch((function(t){e.createNotificationError({message:t})})).finally((function(){e.isLoading=!1}))},onResetExcludedSearchTermDefault:function(){var e=this;this.excludedSearchTermService.resetExcludedSearchTerm().then((function(){e.createNotificationSuccess({message:e.$tc("sw-settings-search.notification.resetToDefaultExcludedTermSuccess")}),e.$emit("data-load")})).catch((function(){e.createNotificationError({message:e.$tc("sw-settings-search.notification.resetToDefaultExcludedTermError")})}))}}}},Z7hw:function(e,t,s){var n=s("esVu");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,s("ydqr").default)("53b1cde9",n,!0,{})},esVu:function(e,t,s){}}]);