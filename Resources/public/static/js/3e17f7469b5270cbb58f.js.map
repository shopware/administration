{"version":3,"sources":["webpack:///./src/module/sw-product/component/sw-product-price-form/index.js","webpack:///./src/module/sw-product/component/sw-product-price-form/sw-product-price-form.html.twig","webpack:///./src/module/sw-product/component/sw-product-price-form/sw-product-price-form.scss"],"names":["Mixin","Shopware","_Shopware$Component$g","Component","getComponentHelper","mapPropertyErrors","mapState","mapGetters","template","mixins","getByName","props","allowEdit","type","Boolean","required","default","data","displayMaintainCurrencies","computed","_objectSpread","taxRateHelpText","this","$tc","link","concat","JSON","stringify","name","prices","get","price","purchasePrices","product","Array","isArray","_toConsumableArray","set","newValue","parentPrices","parentProduct","methods","removePriceInheritation","refPrice","_refPrice$price","_refPrice$purchasePri","_this","defaultRefPrice","find","currencyId","defaultCurrency","id","defaultRefPurchasePrice","push","gross","net","linked","listPrice","regulationPrice","inheritationCheckFunction","length","onMaintainCurrenciesClose","keymonitor","event","key","value","currentTarget","replace","getTaxLabel","tax","$te","content","__esModule","module","i","locals","exports","add"],"mappings":"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","file":"static/js/3e17f7469b5270cbb58f.js","sourcesContent":["/*\n * @package inventory\n */\n\nimport template from './sw-product-price-form.html.twig';\nimport './sw-product-price-form.scss';\n\nconst { Mixin } = Shopware;\nconst { mapPropertyErrors, mapState, mapGetters } = Shopware.Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    mixins: [\n        Mixin.getByName('placeholder'),\n    ],\n\n    props: {\n        allowEdit: {\n            type: Boolean,\n            required: false,\n            // TODO: Boolean props should only be opt in and therefore default to false\n            // eslint-disable-next-line vue/no-boolean-default\n            default: true,\n        },\n    },\n\n    data() {\n        return {\n            displayMaintainCurrencies: false,\n        };\n    },\n\n    computed: {\n        ...mapGetters('swProductDetail', [\n            'isLoading',\n            'defaultPrice',\n            'defaultCurrency',\n            'productTaxRate',\n            'showModeSetting',\n        ]),\n\n        ...mapState('swProductDetail', [\n            'product',\n            'parentProduct',\n            'taxes',\n            'currencies',\n        ]),\n\n        ...mapPropertyErrors('product', ['taxId', 'price', 'purchasePrices']),\n\n        taxRateHelpText() {\n            const link = {\n                name: 'sw.settings.tax.index',\n            };\n\n            return this.$tc('sw-product.priceForm.taxRateHelpText.label', 0, {\n                link: `<sw-internal-link\n                           :router-link=${JSON.stringify(link)}\n                           :inline=\"true\">\n                           ${this.$tc('sw-product.priceForm.taxRateHelpText.linkText')}\n                      </sw-internal-link>`,\n            });\n        },\n\n        prices: {\n            get() {\n                const prices = {\n                    price: [],\n                    purchasePrices: [],\n                };\n\n                if (this.product && Array.isArray(this.product.price)) {\n                    prices.price = [...this.product.price];\n                }\n\n                if (this.product && Array.isArray(this.product.purchasePrices)) {\n                    prices.purchasePrices = [...this.product.purchasePrices];\n                }\n\n                return prices;\n            },\n\n            set(newValue) {\n                this.product.price = (newValue?.price) || null;\n                this.product.purchasePrices = (newValue?.purchasePrices) || null;\n            },\n        },\n\n        parentPrices() {\n            return {\n                price: this.product.price || this.parentProduct.price,\n                purchasePrices: this.product.purchasePrices || this.parentProduct.purchasePrices,\n            };\n        },\n    },\n\n    methods: {\n        removePriceInheritation(refPrice) {\n            const defaultRefPrice = refPrice.price?.find((price) => price.currencyId === this.defaultCurrency.id);\n            const defaultRefPurchasePrice = refPrice.purchasePrices?.find(\n                (price) => price.currencyId === this.defaultCurrency.id,\n            );\n\n            const prices = {\n                price: [],\n                purchasePrices: [],\n            };\n\n            if (defaultRefPrice) {\n                prices.price.push({\n                    currencyId: defaultRefPrice.currencyId,\n                    gross: defaultRefPrice.gross,\n                    net: defaultRefPrice.net,\n                    linked: defaultRefPrice.linked,\n                    listPrice: defaultRefPrice.listPrice ? defaultRefPrice.listPrice : null,\n                    regulationPrice: defaultRefPrice.regulationPrice ? defaultRefPrice.regulationPrice : null,\n                });\n            }\n\n            if (defaultRefPurchasePrice) {\n                prices.purchasePrices.push({\n                    currencyId: defaultRefPurchasePrice.currencyId,\n                    gross: defaultRefPurchasePrice.gross,\n                    net: defaultRefPurchasePrice.net,\n                    linked: defaultRefPurchasePrice.linked,\n                });\n            }\n\n            return prices;\n        },\n\n        inheritationCheckFunction() {\n            return !this.prices.price.length && !this.prices.purchasePrices.length;\n        },\n\n        onMaintainCurrenciesClose(prices) {\n            this.product.price = prices;\n\n            this.displayMaintainCurrencies = false;\n        },\n\n        keymonitor(event) {\n            if (event.key === ',') {\n                const value = event.currentTarget.value;\n                event.currentTarget.value = value.replace(/.$/, '.');\n            }\n        },\n\n        getTaxLabel(tax) {\n            if (this.$te(`global.tax-rates.${tax.name}`)) {\n                return this.$tc(`global.tax-rates.${tax.name}`);\n            }\n\n            return tax.name;\n        },\n    },\n};\n","export default \"\\n{% block sw_product_price_form %}\\n<div class=\\\"sw-product-price-form\\\">\\n    \\n    {% block sw_product_price_form_fields %}\\n    <sw-container\\n        columns=\\\"1fr 2fr\\\"\\n        gap=\\\"0px 30px\\\"\\n        class=\\\"sw-product-price-form__prices\\\"\\n    >\\n\\n        \\n        {% block sw_product_price_form_tax_field %}\\n        <sw-inherit-wrapper\\n            ref=\\\"taxIdInheritation\\\"\\n            {% if VUE3 %}\\n            v-model:value=\\\"product.taxId\\\"\\n            {% else %}\\n            v-model=\\\"product.taxId\\\"\\n            {% endif %}\\n            :inherited-value=\\\"parentProduct.taxId\\\"\\n            :has-parent=\\\"!!parentProduct.taxId\\\"\\n            :help-text=\\\"taxRateHelpText\\\"\\n            :label=\\\"$tc('sw-product.priceForm.labelTaxRate')\\\"\\n            class=\\\"sw-product-price-form__tax-rate\\\"\\n            required\\n        >\\n            <template #content=\\\"{ currentValue, updateCurrentValue, isInherited }\\\">\\n\\n                <sw-select-field\\n                    name=\\\"sw-field--product-taxId\\\"\\n                    :placeholder=\\\"$tc('sw-product.priceForm.placeholderTaxRate')\\\"\\n                    validation=\\\"required\\\"\\n                    :disabled=\\\"isInherited || !allowEdit\\\"\\n                    :value=\\\"currentValue\\\"\\n                    :error=\\\"productTaxIdError\\\"\\n                    {% if VUE3 %}\\n                    @update:value=\\\"updateCurrentValue\\\"\\n                    {% else %}\\n                    @change=\\\"updateCurrentValue\\\"\\n                    {% endif %}\\n                >\\n                    <option\\n                        v-for=\\\"tax in taxes\\\"\\n                        :key=\\\"tax.id\\\"\\n                        :value=\\\"tax.id\\\"\\n                        :selected=\\\"currentValue === tax.id\\\"\\n                    >\\n                        {{ getTaxLabel(tax) }}\\n                    </option>\\n                </sw-select-field>\\n\\n            </template>\\n        </sw-inherit-wrapper>\\n        {% endblock %}\\n\\n        \\n        {% block sw_product_price_form_price_field %}\\n        <sw-inherit-wrapper\\n            v-if=\\\"!isLoading\\\"\\n            {% if VUE3 %}\\n            v-model:value=\\\"prices\\\"\\n            {% else %}\\n            v-model=\\\"prices\\\"\\n            {% endif %}\\n            label=\\\" \\\"\\n            class=\\\"sw-product-price-form__price-list\\\"\\n            :has-parent=\\\"!!parentProduct.id\\\"\\n            :inherited-value=\\\"parentPrices\\\"\\n            :custom-remove-inheritance-function=\\\"removePriceInheritation\\\"\\n            :custom-inheritation-check-function=\\\"inheritationCheckFunction\\\"\\n        >\\n            <template #content=\\\"{ currentValue, isInherited }\\\">\\n                <sw-list-price-field\\n                    vertical\\n                    :price=\\\"currentValue.price\\\"\\n                    :purchase-prices=\\\"currentValue.purchasePrices\\\"\\n                    :tax-rate=\\\"productTaxRate\\\"\\n                    :disabled=\\\"isInherited || !allowEdit\\\"\\n                    :error=\\\"productPriceError ? productPriceError[0] : null\\\"\\n                    :currency=\\\"defaultCurrency\\\"\\n                    :show-setting-price=\\\"showModeSetting\\\"\\n                />\\n            </template>\\n        </sw-inherit-wrapper>\\n        {% endblock %}\\n\\n    </sw-container>\\n    {% endblock %}\\n\\n    \\n    {% block sw_product_price_form_link %}\\n    <sw-container\\n        columns=\\\"1fr\\\"\\n        justify=\\\"end\\\"\\n        class=\\\"sw-product-price-form__links\\\"\\n    >\\n        \\n        {% block sw_product_price_form_advanced_prices_link %}\\n        <router-link\\n            v-if=\\\"!product._isNew\\\"\\n            :to=\\\"{ name: 'sw.product.detail.prices', params: { id: $route.params.id } }\\\"\\n            class=\\\"sw-card__quick-link\\\"\\n        >\\n            {{ $tc('sw-product.detailBase.linkAdvancedPrices') }} <sw-icon\\n                name=\\\"regular-long-arrow-right\\\"\\n                small\\n            />\\n        </router-link>\\n        {% endblock %}\\n\\n        \\n        {% block sw_product_price_form_maintain_currencies_link %}\\n        <a\\n            v-if=\\\"product.price\\\"\\n            class=\\\"sw-card__quick-link\\\"\\n            role=\\\"button\\\"\\n            tabindex=\\\"0\\\"\\n            @click.prevent=\\\"displayMaintainCurrencies = true\\\"\\n            @keydown.enter.prevent=\\\"displayMaintainCurrencies = true\\\"\\n        >\\n            {{ $tc('sw-product.detailBase.linkMaintainCurrencyPrices') }} <sw-icon\\n                name=\\\"regular-long-arrow-right\\\"\\n                small\\n            />\\n        </a>\\n        {% endblock %}\\n    </sw-container>\\n    {% endblock %}\\n\\n    \\n    {% block sw_product_price_form_maintain_currencies_modal %}\\n    <sw-maintain-currencies-modal\\n        v-if=\\\"displayMaintainCurrencies\\\"\\n        :currencies=\\\"currencies\\\"\\n        :prices=\\\"product.price\\\"\\n        :default-price=\\\"defaultPrice\\\"\\n        :tax-rate=\\\"productTaxRate\\\"\\n        :disabled=\\\"!allowEdit\\\"\\n        @modal-close=\\\"onMaintainCurrenciesClose\\\"\\n    />\\n    {% endblock %}\\n</div>\\n{% endblock %}\\n\";","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-product-price-form.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0a1df022\", content, true, {});"],"sourceRoot":""}