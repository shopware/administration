(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[10457],{365207:function(){},10457:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return p}}),i(322868);let{Mixin:o}=Shopware;var p={template:'\n{% block sw_import_export_new_profile_wizard_csv_page %}\n<div class="sw-import-export-new-profile-wizard-csv-page">\n    \n    {% block sw_import_export_new_profile_wizard_csv_page_text %}\n    <p class="sw-import-export-new-profile-wizard-csv-page__text">\n        {{ $tc(\'sw-import-export.profile.csvUploadText\') }}\n    </p>\n    {% endblock %}\n\n    \n    {% block sw_import_export_new_profile_wizard_csv_page_csv_upload %}\n    <sw-file-input\n        v-model:value="csvFile"\n        :allowed-mime-types="[\'text/csv\']"\n        class="sw-import-export-new-profile-wizard-csv-page__file-upload"\n        @update:value="onFileChange"\n    >\n        <template #caption-label>\n            {{ $tc(\'sw-import-export.importer.labelUploadCaption\') }}\n        </template>\n    </sw-file-input>\n    {% endblock %}\n</div>\n{% endblock %}\n',inject:["repositoryFactory","importExport"],mixins:[o.getByName("notification")],props:{profile:{type:Object,required:!0}},data(){return{csvFile:null}},created(){this.createdComponent()},methods:{createdComponent(){this.$emit("next-disable")},onFileChange(){return null===this.csvFile?(this.profile.mapping=[],this.$emit("next-disable"),Promise.resolve()):this.importExport.getMappingFromTemplate(this.csvFile,this.profile.sourceEntity,this.profile.delimiter,this.profile.enclosure).then(e=>{let t=this.transformMapping(e);this.$set(this.profile,"mapping",t),this.$emit("next-allow"),1===t.length&&this.createNotificationWarning({message:this.$tc("sw-import-export.profile.messageCsvTemplateUploadWarning"),duration:1e4})}).catch(e=>{this.profile.mapping=[],this.$emit("next-disable");let t=this.$tc("sw-import-export.profile.messageCsvTemplateUploadError");"CONTENT__IMPORT_EXPORT_FILE_EMPTY"===e.response?.data?.errors?.[0]?.code&&(t=this.$tc("sw-import-export.profile.messageCsvTemplateUploadEmptyError")),this.createNotificationError({message:t})})},transformMapping(e){return e.map(e=>({key:e.key,mappedKey:e.mappedKey}))}}}},322868:function(e,t,i){var o=i(365207);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),i(745346).Z("c2c7949e",o,!0,{})}}]);