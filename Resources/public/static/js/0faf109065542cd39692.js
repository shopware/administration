(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[410],{A7FJ:function(e,n,t){},LV8n:function(e,n,t){var o=t("A7FJ");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,t("P8hj").default)("e03e7ddc",o,!0,{})},wfGr:function(e,n,t){"use strict";t.r(n);t("LV8n");var o=Shopware.Mixin,i=Shopware.Data.Criteria,r=Shopware.Utils.debug.warn;n.default={template:'\n{% block sw_sales_channel_detail_base %}\n<div class="sw-sales-channel-detail-product-comparison">\n\n    \n    {% block sw_sales_channel_detail_product_comparison %}\n    <sw-card\n        key="edit"\n        position-identifier="sw-sales-channel-detail-product-comparison"\n        :is-loading="isLoading"\n        :title="$tc(\'sw-sales-channel.detail.titleProductComparisonTemplate\')"\n    >\n\n        \n        {% block sw_sales_channel_detail_product_comparison_header %}\n        <sw-container>\n            \n            {% block sw_sales_channel_detail_product_comparison_input_header %}\n            <sw-code-editor\n                v-model="productExport.headerTemplate"\n                :label="$tc(\'sw-sales-channel.detail.productComparison.inputHeaderLabel\')"\n                :completer-function="outerCompleterFunctionHeader"\n                :editor-config="editorConfig"\n                completion-mode="entity"\n                mode="twig"\n                :soft-wraps="true"\n                :set-focus="false"\n                :disabled="!acl.can(\'sales_channel.editor\')"\n                @input="resetValid"\n                @blur="resetValid"\n            />\n            {% endblock %}\n        </sw-container>\n        {% endblock %}\n\n        \n        {% block sw_sales_channel_detail_product_comparison_body %}\n        <sw-container>\n            \n            {% block sw_sales_channel_detail_product_comparison_input_body %}\n            <sw-code-editor\n                v-model="productExport.bodyTemplate"\n                :label="$tc(\'sw-sales-channel.detail.productComparison.inputBodyLabel\')"\n                :completer-function="outerCompleterFunctionBody"\n                :editor-config="editorConfig"\n                completion-mode="entity"\n                mode="twig"\n                :soft-wraps="true"\n                :set-focus="false"\n                :disabled="!acl.can(\'sales_channel.editor\')"\n                @input="resetValid"\n                @blur="resetValid"\n            />\n            {% endblock %}\n        </sw-container>\n        {% endblock %}\n\n        \n        {% block sw_sales_channel_detail_product_comparison_footer %}\n        <sw-container>\n            \n            {% block sw_sales_channel_detail_product_comparison_input_footer %}\n            <sw-code-editor\n                v-model="productExport.footerTemplate"\n                :label="$tc(\'sw-sales-channel.detail.productComparison.inputFooterLabel\')"\n                :completer-function="outerCompleterFunctionFooter"\n                :editor-config="editorConfig"\n                completion-mode="entity"\n                mode="twig"\n                :soft-wraps="true"\n                :set-focus="false"\n                :disabled="!acl.can(\'sales_channel.editor\')"\n                @input="resetValid"\n                @blur="resetValid"\n            />\n            {% endblock %}\n        </sw-container>\n        {% endblock %}\n\n        \n        {% block sw_sales_channel_detail_product_comparison_actions %}\n        <div class="sw-sales-channel-detail-product-comparison__button-group">\n            \n            {% block sw_sales_channel_detail_product_comparison_actions_test_button %}\n            <sw-button-process\n                size="small"\n                variant="ghost"\n                class="sw-sales-channel-detail-product-comparison__button sw-sales-channel-detail-product-comparison__test-action"\n                :is-loading="isLoadingValidate"\n                :disabled="isLoadingValidate || (!productExport.headerTemplate && !productExport.bodyTemplate && !productExport.footerTemplate)"\n                :process-success="isValidateSuccessful"\n                @click="validateTemplate"\n            >\n                {{ $tc(\'sw-sales-channel.detail.productComparison.buttonTestLabel\') }}\n            </sw-button-process>\n            {% endblock %}\n\n            \n            {% block sw_sales_channel_detail_product_comparison_actions_preview_button %}\n            <sw-button-process\n                size="small"\n                variant="ghost"\n                class="sw-sales-channel-detail-product-comparison__button sw-sales-channel-detail-product-comparison__preview-action"\n                :is-loading="isLoadingPreview"\n                :disabled="isLoadingPreview || (!productExport.headerTemplate && !productExport.bodyTemplate && !productExport.footerTemplate)"\n                :process-success="isPreviewSuccessful"\n                @click="preview"\n            >\n                {{ $tc(\'sw-sales-channel.detail.productComparison.buttonPreviewLabel\') }}\n            </sw-button-process>\n            {% endblock %}\n\n            \n            {% block sw_sales_channel_detail_product_comparison_actions_preview_component %}\n            <sw-sales-channel-detail-product-comparison-preview\n                :content="previewContent"\n                :errors="previewErrors"\n                @close="onPreviewClose"\n            />\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </sw-card>\n    {% endblock %}\n</div>\n{% endblock %}\n',inject:["salesChannelService","repositoryFactory","productExportService","entityMappingService","acl"],mixins:[o.getByName("notification"),o.getByName("placeholder")],props:{salesChannel:{required:!0},productExport:{required:!0},isLoading:{type:Boolean,default:!1}},data:function(){return{showDeleteModal:!1,defaultSnippetSetId:"71a916e745114d72abafbfdc51cbd9d0",isLoadingDomains:!1,deleteDomain:null,previewContent:null,previewErrors:null,isLoadingPreview:!1,isPreviewSuccessful:!1,isLoadingValidate:!1,isValidateSuccessful:!1}},computed:{editorConfig:function(){return{enableBasicAutocompletion:!0}},productExportRepository:function(){return this.repositoryFactory.create("product_export")},domainRepository:function(){return this.repositoryFactory.create(this.salesChannel.domains.entity,this.salesChannel.domains.source)},salesChannelRepository:function(){return this.repositoryFactory.create("sales_channel")},mainNavigationCriteria:function(){return new i(1,10).addFilter(i.equals("type","page"))},outerCompleterFunctionHeader:function(){return this.outerCompleterFunction({productExport:"product_export"})},outerCompleterFunctionBody:function(){return this.outerCompleterFunction({productExport:"product_export",product:"product"})},outerCompleterFunctionFooter:function(){return this.outerCompleterFunction({productExport:"product_export"})}},methods:{validateTemplate:function(){var e=this,n={message:this.$tc("sw-sales-channel.detail.productComparison.notificationMessageValidateSuccessful")};this.isLoadingValidate=!0,this.productExportService.validateProductExportTemplate(this.productExport).then((function(t){if(e.isLoadingValidate=!1,t.errors)return e.previewContent=t.content,void(e.previewErrors=t.errors);e.createNotificationSuccess(n),e.isValidateSuccessful=!0})).catch((function(n){e.createNotificationError({message:n.response.data.errors[0].detail}),r(e._name,n.message,n.response),e.isLoadingValidate=!1,e.isValidateSuccessful=!1}))},preview:function(){var e=this;this.isLoadingPreview=!0,this.productExportService.previewProductExport(this.productExport).then((function(n){e.isLoadingPreview=!1,e.previewContent=n.content,n.errors?e.previewErrors=n.errors:e.isPreviewSuccessful=!0})).catch((function(n){e.createNotificationError({message:n.response.data.errors[0].detail}),r(e._name,n.message,n.response),e.isLoadingPreview=!1}))},outerCompleterFunction:function(e){var n=this.entityMappingService;return function(t){var o=n.getEntityMapping(t,e);return Object.keys(o).map((function(e){return{value:e}}))}},onPreviewClose:function(){this.previewContent=null,this.previewErrors=null,this.isPreviewSuccessful=!1},resetValid:function(){this.isValidateSuccessful=!1}}}}}]);