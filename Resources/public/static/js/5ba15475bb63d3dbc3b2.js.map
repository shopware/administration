{"version":3,"sources":["webpack:///./src/module/sw-settings-custom-field/component/sw-custom-field-set-detail-base/index.js","webpack:///./src/module/sw-settings-custom-field/component/sw-custom-field-set-detail-base/sw-custom-field-set-detail-base.html.twig"],"names":["template","inject","props","set","type","Object","required","default","technicalNameError","data","propertyNames","label","this","$tc","computed","locales","config","translated","keys","$root","$i18n","messages","fallbackLocale","customFieldSetRelationRepository","relations","Shopware","Service","create","entity","source","selectedRelationEntityNames","map","relation","entityName","relationEntityNames","_this","customFieldDataProviderService","getEntityNames","$set","forEach","locale","$te","concat","searchField","methods","onAddRelation","push","onRemoveRelation","relationToRemove","matchingRelation","find","remove","id","searchRelationEntityNames","_ref","options","lowerSearchTerm","searchTerm","toLowerCase","filter","option","values","some","includes","onTechnicalNameChange","$emit"],"mappings":"4HAMe,WACXA,SCPW,08GDSXC,OAAQ,CAAC,iCAAkC,OAE3CC,MAAO,CACHC,IAAK,CACDC,KAAMC,OACNC,UAAU,EACVC,QAAO,WACH,MAAO,KAGfC,mBAAoB,CAChBJ,KAAMC,OACNC,UAAU,EACVC,QAAS,OAIjBE,KAAI,WACA,MAAO,CACHC,cAAe,CACXC,MAAOC,KAAKC,IAAI,6DAK5BC,SAAU,CACNC,QAAO,WACH,OAAIH,KAAKT,IAAIa,OAAOC,aAA6C,IAA/BL,KAAKT,IAAIa,OAAOC,WACvCZ,OAAOa,KAAKN,KAAKO,MAAMC,MAAMC,UAGjC,CAACT,KAAKO,MAAMC,MAAME,iBAG7BC,iCAAgC,WAC5B,GAAKX,KAAKT,IAAIqB,UAId,OAAOC,SAASC,QAAQ,qBAAqBC,OACzCf,KAAKT,IAAIqB,UAAUI,OACnBhB,KAAKT,IAAIqB,UAAUK,SAI3BC,4BAA2B,WACvB,OAAKlB,KAAKT,IAAIqB,UAIPZ,KAAKT,IAAIqB,UAAUO,KAAI,SAAAC,GAAQ,OAAIA,EAASC,cAHxC,IAMfC,oBAAmB,WAAI,IAADC,EAAA,KAClB,OAAKvB,KAAKT,IAAIqB,UAIMZ,KAAKwB,+BAA+BC,iBAErCN,KAAI,SAAAE,GACnB,IAAMD,EAAWG,EAAKZ,iCAAiCI,SAgBvD,OAfAK,EAASC,WAAaA,EACtBE,EAAKG,KAAKN,EAAU,cAAe,IAEnC3B,OAAOa,KAAKiB,EAAKhB,MAAMC,MAAMC,UAAUkB,SAAQ,SAAAC,GACtCL,EAAKM,IAAI,mBAADC,OAAoBT,KAIjCE,EAAKG,KACDN,EAASW,YACTH,EACAL,EAAKtB,IAAI,mBAAD6B,OAAoBT,GAAc,EAAGO,OAI9CR,KAtBA,KA2BnBY,QAAS,CAELC,cAAa,SAACb,GACVpB,KAAKT,IAAIqB,UAAUsB,KAAKd,IAG5Be,iBAAgB,SAACC,GACb,IAAMC,EAAmBrC,KAAKT,IAAIqB,UAAU0B,MAAK,SAAAlB,GAC7C,OAAOA,EAASC,aAAee,EAAiBf,cAG/CgB,GAILrC,KAAKT,IAAIqB,UAAU2B,OAAOF,EAAiBG,KAG/CC,0BAAyB,SAAAC,GAA2B,IAAxBC,EAAOD,EAAPC,QAClBC,EADqCF,EAAVG,WACEC,cAEnC,OAAOH,EAAQI,QAAO,SAAAC,GAClB,OAAOvD,OAAOwD,OAAOD,EAAOjB,aAAamB,MAAK,SAAAnD,GAC1C,OAAOA,EAAM+C,cAAcK,SAASP,UAKhDQ,sBAAqB,WACjBpD,KAAKqD,MAAM","file":"static/js/5ba15475bb63d3dbc3b2.js","sourcesContent":["/**\n * @package services-settings\n */\nimport template from './sw-custom-field-set-detail-base.html.twig';\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: ['customFieldDataProviderService', 'acl'],\n\n    props: {\n        set: {\n            type: Object,\n            required: true,\n            default() {\n                return {};\n            },\n        },\n        technicalNameError: {\n            type: Object,\n            required: false,\n            default: null,\n        },\n    },\n\n    data() {\n        return {\n            propertyNames: {\n                label: this.$tc('sw-settings-custom-field.customField.detail.labelLabel'),\n            },\n        };\n    },\n\n    computed: {\n        locales() {\n            if (this.set.config.translated && this.set.config.translated === true) {\n                return Object.keys(this.$root.$i18n.messages);\n            }\n\n            return [this.$root.$i18n.fallbackLocale];\n        },\n\n        customFieldSetRelationRepository() {\n            if (!this.set.relations) {\n                return undefined;\n            }\n\n            return Shopware.Service('repositoryFactory').create(\n                this.set.relations.entity,\n                this.set.relations.source,\n            );\n        },\n\n        selectedRelationEntityNames() {\n            if (!this.set.relations) {\n                return [];\n            }\n\n            return this.set.relations.map(relation => relation.entityName);\n        },\n\n        relationEntityNames() {\n            if (!this.set.relations) {\n                return [];\n            }\n\n            const entityNames = this.customFieldDataProviderService.getEntityNames();\n\n            return entityNames.map(entityName => {\n                const relation = this.customFieldSetRelationRepository.create();\n                relation.entityName = entityName;\n                this.$set(relation, 'searchField', {});\n\n                Object.keys(this.$root.$i18n.messages).forEach(locale => {\n                    if (!this.$te(`global.entities.${entityName}`)) {\n                        return;\n                    }\n\n                    this.$set(\n                        relation.searchField,\n                        locale,\n                        this.$tc(`global.entities.${entityName}`, 2, locale),\n                    );\n                });\n\n                return relation;\n            });\n        },\n    },\n\n    methods: {\n\n        onAddRelation(relation) {\n            this.set.relations.push(relation);\n        },\n\n        onRemoveRelation(relationToRemove) {\n            const matchingRelation = this.set.relations.find(relation => {\n                return relation.entityName === relationToRemove.entityName;\n            });\n\n            if (!matchingRelation) {\n                return;\n            }\n\n            this.set.relations.remove(matchingRelation.id);\n        },\n\n        searchRelationEntityNames({ options, searchTerm }) {\n            const lowerSearchTerm = searchTerm.toLowerCase();\n\n            return options.filter(option => {\n                return Object.values(option.searchField).some(label => {\n                    return label.toLowerCase().includes(lowerSearchTerm);\n                });\n            });\n        },\n\n        onTechnicalNameChange() {\n            this.$emit('reset-errors');\n        },\n    },\n};\n","export default \"\\n{% block sw_settings_custom_field_set_detail_base %}\\n<sw-card\\n    class=\\\"sw-settings-custom-field-set-detail-base\\\"\\n    position-identifier=\\\"sw-custom-field-detail-base\\\"\\n    :title=\\\"$tc('sw-settings-custom-field.set.detail.titleCardInformation')\\\"\\n>\\n    \\n    {% block sw_settings_custom_field_set_detail_base_technical_name %}\\n    <sw-text-field\\n        {% if VUE3 %}\\n        v-model:value=\\\"set.name\\\"\\n        name=\\\"sw-field--set-name\\\"\\n        {% else %}\\n        v-model=\\\"set.name\\\"\\n        {% endif %}\\n        class=\\\"sw-settings-custom-field-set-detail-base__technical-name\\\"\\n        :label=\\\"$tc(`sw-settings-custom-field.set.detail.labelTechnicalName`)\\\"\\n        :help-text=\\\"$tc('sw-settings-custom-field.general.tooltipTechnicalName')\\\"\\n        :disabled=\\\"!set._isNew || !acl.can('custom_field.editor')\\\"\\n        :error=\\\"technicalNameError\\\"\\n        required\\n        @change=\\\"onTechnicalNameChange\\\"\\n    />\\n    {% endblock %}\\n\\n    \\n    {% block sw_settings_custom_field_set_detail_base_position %}\\n    <sw-number-field\\n        {% if VUE3 %}\\n        v-model:value=\\\"set.position\\\"\\n        name=\\\"sw-field--set-position\\\"\\n        {% else %}\\n        v-model=\\\"set.position\\\"\\n        {% endif %}\\n        class=\\\"sw-settings-custom-field-set-detail-base__base-postion\\\"\\n        :disabled=\\\"!acl.can('custom_field.editor')\\\"\\n        :label=\\\"$tc(`sw-settings-custom-field.set.detail.labelPosition`)\\\"\\n    />\\n    {% endblock %}\\n\\n    \\n    {% block sw_settings_custom_field_set_detail_base_translated %}\\n    <sw-switch-field\\n        v-if=\\\"set.config\\\"\\n        {% if VUE3 %}\\n        v-model:value=\\\"set.config.translated\\\"\\n        name=\\\"sw-field--set-config-translated\\\"\\n        {% else %}\\n        v-model=\\\"set.config.translated\\\"\\n        {% endif %}\\n        class=\\\"sw-settings-custom-field-set-detail-base__base-translation\\\"\\n        :disabled=\\\"!acl.can('custom_field.editor')\\\"\\n        :label=\\\"$tc('sw-settings-custom-field.set.detail.labelCheckboxTranslated')\\\"\\n    />\\n    {% endblock %}\\n\\n    \\n    {% block sw_settings_custom_field_set_detail_base_labels %}\\n    <sw-custom-field-translated-labels\\n        v-if=\\\"set.config\\\"\\n        {% if VUE3 %}\\n        v-model:config=\\\"set.config\\\"\\n        {% else %}\\n        v-model=\\\"set.config\\\"\\n        {% endif %}\\n        :disabled=\\\"!acl.can('custom_field.editor')\\\"\\n        :property-names=\\\"propertyNames\\\"\\n        :locales=\\\"locales\\\"\\n    />\\n    {% endblock %}\\n\\n    \\n    {% block sw_settings_custom_field_set_detail_base_multi_select %}\\n    <sw-multi-select\\n        id=\\\"entities\\\"\\n        class=\\\"sw-settings-custom-field-set-detail-base__label-entities\\\"\\n        :disabled=\\\"!acl.can('custom_field.editor')\\\"\\n        :label=\\\"$tc('sw-settings-custom-field.set.detail.labelEntities')\\\"\\n        :options=\\\"relationEntityNames\\\"\\n        value-property=\\\"entityName\\\"\\n        label-property=\\\"entityName\\\"\\n        :value=\\\"selectedRelationEntityNames\\\"\\n        :search-function=\\\"searchRelationEntityNames\\\"\\n        @item-add=\\\"onAddRelation\\\"\\n        @item-remove=\\\"onRemoveRelation\\\"\\n    >\\n\\n        <template #result-label-property=\\\"{ item }\\\">\\n            {{ $tc(`global.entities.${item.entityName}`, 2) }}\\n        </template>\\n\\n        <template #selection-label-property=\\\"{ item }\\\">\\n            {{ $tc(`global.entities.${item.entityName}`, 2) }}\\n        </template>\\n\\n    </sw-multi-select>\\n    {% endblock %}\\n\\n    \\n    {% block sw_settings_custom_field_set_detail_base_entities %}\\n    {% endblock %}\\n</sw-card>\\n{% endblock %}\\n\";"],"sourceRoot":""}