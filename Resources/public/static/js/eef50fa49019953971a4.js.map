{"version":3,"sources":["webpack:///./src/module/sw-cms/elements/image-gallery/component/sw-cms-el-image-gallery.scss","webpack:///./src/module/sw-cms/elements/image-gallery/component/index.js","webpack:///./src/module/sw-cms/elements/image-gallery/component/sw-cms-el-image-gallery.html.twig"],"names":["content","__esModule","default","module","i","locals","exports","add","_Shopware","Shopware","Mixin","Filter","template","mixins","getByName","data","galleryLimit","activeMedia","computed","currentDeviceView","this","cmsPageState","currentCmsDeviceView","galleryPositionClass","concat","element","config","galleryPosition","value","currentDeviceViewClass","verticalAlignStyle","verticalAlign","mediaUrls","_this$element","_this$element2","_this$element2$data","source","getDemoValue","sliderItems","isProductPage","_this$cmsPageState$cu","_this$cmsPageState","_this$cmsPageState$cu2","currentPage","type","assetFilter","watch","_this","setTimeout","setGalleryLimit","deep","handler","_this2","$nextTick","_this3","created","createdComponent","mounted","mountedComponent","methods","_this$element3","_this$element3$transl","_this$element3$transl2","_this$element4","_this$element4$data","initElementConfig","initElementData","translated","navigationDots","zoom","fullScreen","displayMode","minHeight","getPlaceholderItems","_this$element5","_this$element5$config","_this4","previewMountain","CMS","MEDIA","slice","lastIndexOf","previewGlasses","previewPlant","url","map","media","fileName","onChangeGalleryImage","mediaItem","index","arguments","length","undefined","sliderIndex","activeMediaClass","id","boxSpace","elSpace","$refs","galleryItemHolder","offsetWidth","offsetHeight","Math","floor"],"mappings":"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","file":"static/js/eef50fa49019953971a4.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-cms-el-image-gallery.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"36a27572\", content, true, {});","import CMS from '../../../constant/sw-cms.constant';\nimport template from './sw-cms-el-image-gallery.html.twig';\nimport './sw-cms-el-image-gallery.scss';\n\nconst { Mixin, Filter } = Shopware;\n\n/**\n * @private\n * @package buyers-experience\n */\nexport default {\n    template,\n\n    mixins: [\n        Mixin.getByName('cms-element'),\n    ],\n\n    data() {\n        return {\n            galleryLimit: 3,\n            activeMedia: null,\n        };\n    },\n\n    computed: {\n        currentDeviceView() {\n            return this.cmsPageState.currentCmsDeviceView;\n        },\n\n        galleryPositionClass() {\n            return `is--preview-${this.element.config.galleryPosition.value}`;\n        },\n\n        currentDeviceViewClass() {\n            if (this.currentDeviceView) {\n                return `is--${this.currentDeviceView}`;\n            }\n\n            return null;\n        },\n\n        verticalAlignStyle() {\n            if (!this.element.config.verticalAlign.value) {\n                return null;\n            }\n\n            return `align-content: ${this.element.config.verticalAlign.value};`;\n        },\n\n        mediaUrls() {\n            const config = this.element?.config;\n\n            if (!config || config.source === 'default') {\n                return [];\n            }\n\n            if (config.source === 'mapped') {\n                return this.getDemoValue(config.sliderItems.value) || [];\n            }\n\n            return this.element?.data?.sliderItems || [];\n        },\n\n        isProductPage() {\n            return (this.cmsPageState?.currentPage?.type ?? '') === 'product_detail';\n        },\n\n        assetFilter() {\n            return Filter.getByName('asset');\n        },\n    },\n\n    watch: {\n        currentDeviceView() {\n            if (this.currentDeviceView === 'mobile') {\n                this.galleryLimit = 0;\n            }\n\n            // timeout due to css transition 0.4s\n            setTimeout(() => {\n                this.setGalleryLimit();\n            }, 400);\n        },\n\n        'element.config.galleryPosition.value': {\n            deep: true,\n            handler() {\n                this.$nextTick(() => {\n                    this.setGalleryLimit();\n                });\n            },\n        },\n\n        'element.config.sliderItems.value': {\n            handler(value) {\n                if (!value) {\n                    this.element.config.sliderItems.value = [];\n                    return;\n                }\n\n                this.$nextTick(() => {\n                    this.setGalleryLimit();\n                });\n            },\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    mounted() {\n        this.mountedComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.initElementConfig('image-gallery');\n            this.initElementData('image-gallery');\n\n            if (!this.isProductPage\n                || this.element?.translated?.config?.sliderItems\n                || this.element?.data?.sliderItems) {\n                return;\n            }\n\n            this.element.config.sliderItems.source = 'mapped';\n            this.element.config.sliderItems.value = 'product.media';\n            this.element.config.navigationDots.value = 'inside';\n            this.element.config.zoom.value = true;\n            this.element.config.fullScreen.value = true;\n            this.element.config.displayMode.value = 'contain';\n            this.element.config.minHeight.value = '430px';\n        },\n\n        mountedComponent() {\n            this.setGalleryLimit();\n        },\n\n        getPlaceholderItems() {\n            if (this.element?.config?.source !== 'default') {\n                const previewMountain = CMS.MEDIA.previewMountain.slice(CMS.MEDIA.previewMountain.lastIndexOf('/') + 1);\n                const previewGlasses = CMS.MEDIA.previewGlasses.slice(CMS.MEDIA.previewGlasses.lastIndexOf('/') + 1);\n                const previewPlant = CMS.MEDIA.previewPlant.slice(CMS.MEDIA.previewPlant.lastIndexOf('/') + 1);\n\n                return [\n                    { url: this.assetFilter(`administration/static/img/cms/${previewMountain}`) },\n                    { url: this.assetFilter(`administration/static/img/cms/${previewGlasses}`) },\n                    { url: this.assetFilter(`administration/static/img/cms/${previewPlant}`) },\n                ];\n            }\n\n            return this.element.config.sliderItems.value.map(media => {\n                const fileName = media.fileName.slice(media.fileName.lastIndexOf('/') + 1);\n\n                return { url: this.assetFilter(`/administration/static/img/cms/${fileName}`) };\n            });\n        },\n\n        onChangeGalleryImage(mediaItem, index = 0) {\n            mediaItem.sliderIndex = index;\n            this.activeMedia = mediaItem;\n        },\n\n        activeMediaClass(mediaItem) {\n            if (!this.activeMedia) {\n                return null;\n            }\n\n            return {\n                'is--active': mediaItem.id === this.activeMedia.id,\n            };\n        },\n\n        setGalleryLimit() {\n            if (this.element.config.sliderItems.value.length === 0) {\n                return;\n            }\n\n            let boxSpace = 0;\n            let elSpace = 0;\n            const elGap = 8;\n            const arrowAndGapWidth = 36;\n\n            if (this.element.config.galleryPosition.value === 'underneath') {\n                boxSpace = this.$refs.galleryItemHolder.offsetWidth - arrowAndGapWidth;\n                elSpace = 92;\n            } else {\n                boxSpace = this.$refs.galleryItemHolder.offsetHeight;\n                elSpace = 64;\n            }\n\n            this.galleryLimit = Math.floor(boxSpace / (elSpace + elGap));\n        },\n    },\n};\n","export default \"\\n{% block sw_cms_element_image_gallery %}\\n<div\\n    class=\\\"sw-cms-el-image-gallery\\\"\\n    :class=\\\"[galleryPositionClass, currentDeviceViewClass]\\\"\\n    :style=\\\"verticalAlignStyle\\\"\\n>\\n\\n    \\n    {% block sw_cms_element_image_gallery_grid %}\\n    <div\\n        ref=\\\"galleryItemHolder\\\"\\n        class=\\\"sw-cms-el-image-gallery__grid\\\"\\n    >\\n\\n        <template v-if=\\\"mediaUrls && mediaUrls.length\\\">\\n            <div class=\\\"sw-cms-el-image-gallery__item-holder\\\">\\n                \\n                {% block sw_cms_element_image_gallery_selection %}\\n                \\n                <template\\n                    v-for=\\\"(sliderItem, index) in mediaUrls\\\"\\n                    {% if VUE3 %}\\n                    :key=\\\"index\\\"\\n                    {% endif %}\\n                >\\n                    <sw-media-list-selection-item-v2\\n                        v-if=\\\"index < galleryLimit\\\"\\n                        {% if VUE2 %}\\n                        :key=\\\"index\\\"\\n                        {% endif %}\\n                        :item=\\\"sliderItem.media\\\"\\n                        :class=\\\"activeMediaClass(sliderItem.media)\\\"\\n                        hide-actions\\n                        hide-tooltip\\n                        @click=\\\"onChangeGalleryImage(sliderItem.media, index)\\\"\\n                    />\\n                </template>\\n                {% endblock %}\\n            </div>\\n        </template>\\n\\n        <template v-else>\\n            \\n            {% block sw_cms_element_image_gallery_empty %}\\n            <div class=\\\"sw-cms-el-image-gallery__item-holder\\\">\\n                <img\\n                    v-for=\\\"mediaItem in getPlaceholderItems()\\\"\\n                    :key=\\\"mediaItem.url\\\"\\n                    class=\\\"sw-cms-el-image-gallery__item-placeholder\\\"\\n                    :src=\\\"mediaItem.url\\\"\\n                    alt=\\\"\\\"\\n                >\\n            </div>\\n            {% endblock %}\\n        </template>\\n\\n        \\n        {% block sw_cms_element_image_gallery_nav_arrow %}\\n        <div\\n            v-if=\\\"element.config.sliderItems.value.length > galleryLimit\\\"\\n            class=\\\"sw-cms-el-image-gallery__grid-arrow\\\"\\n        >\\n            <sw-icon\\n                name=\\\"regular-chevron-down\\\"\\n                size=\\\"20\\\"\\n            />\\n        </div>\\n        {% endblock %}\\n    </div>\\n    {% endblock %}\\n\\n    \\n    {% block sw_cms_element_image_gallery_slider %}\\n    <sw-cms-el-image-slider\\n        :element=\\\"element\\\"\\n        :active-media=\\\"activeMedia\\\"\\n        @active-image-change=\\\"onChangeGalleryImage\\\"\\n    />\\n    {% endblock %}\\n</div>\\n{% endblock %}\\n\";"],"sourceRoot":""}