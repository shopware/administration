(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[369],{USl8:function(n,r,t){"use strict";t.r(r);var e=t("6lmj"),o=t.n(e),i=(t("b1jM"),Shopware.Data.Criteria);r.default={template:'\n{% block sw_product_variants_configurator_prices %}\n<div class="sw-product-variants-configurator-prices">\n    <sw-alert\n        class="sw-product-variants-configurator-prices__alert"\n        variant="info"\n    >\n        {{ $tc(\'sw-product.variations.configuratorModal.surchargeNotice\') }}\n    </sw-alert>\n    <div class="sw-product-variants-configurator-prices__table">\n        \n        {% block sw_product_variants_configurator_prices_groups %}\n        <div class="sw-product-variants-configurator-prices__groups">\n            <ul>\n                <li\n                    v-for="group in selectedGroups"\n                    :key="group.id"\n                    class="sw-product-variants-configurator-prices__groupElement"\n                    :class="{\'is--selected\': activeGroup.id == group.id}"\n                    role="button"\n                    tabindex="0"\n                    @click="activeGroup = group"\n                    @keydown.enter="activeGroup = group"\n                >\n                    <sw-icon\n                        name="regular-folder"\n                        size="16px"\n                        multicolor\n                    />\n                    {{ group.translated.name }}\n                </li>\n            </ul>\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_product_variants_configurator_prices_prices %}\n        <div class="sw-product-variants-configurator-prices__prices">\n            \n            {% block sw_product_variants_configurator_prices_search %}\n            <div class="sw-product-variants-configurator-prices__search">\n                \n                {% block sw_product_variants_configurator_prices_search_field %}\n                <sw-simple-search-field\n                    v-model="term"\n                    size="small"\n                    variant="form"\n                    :placeholder="$tc(\'sw-product.variations.configuratorModal.searchPlaceholder\')"\n                />\n                {% endblock %}\n            </div>\n            {% endblock %}\n\n            \n            {% block sw_product_variants_configurator_prices_grid_wrapper %}\n            <div class="sw-product-variants-configurator-prices__grid-wrapper">\n                \n                {% block sw_product_variants_configurator_prices_data_grid %}\n                <sw-data-grid\n                    v-if="optionsForGroup.length"\n                    :data-source="optionsForGroup"\n                    :show-selection="false"\n                    :columns="optionColumns"\n                    show-settings\n                    full-page\n                >\n\n                    \n                    {% block sw_product_variants_configurator_prices_column_name %}\n                    <template\n                        #column-name="{ item, isInlineEdit, compact }"\n                    >\n                        {{ item.option.translated.name }}\n                    </template>\n                    {% endblock %}\n\n                    \n                    {% block sw_product_variants_configurator_prices_column_currency %}\n                    <template\n                        v-for="currency in currenciesList"\n                        {% if VUE3 %}\n                        :key="currency.id"\n                        {% endif %}\n                        #[`column-currency.${currency.id}`]="{ item, isInlineEdit, compact }"\n                    >\n\n                        <sw-product-variants-price-field\n                            {% if VUE2 %}\n                            :key="currency.id"\n                            {% endif %}\n                            :price="getCurrencyOfOption(item, currency.id)"\n                            :tax-rate="product.taxId"\n                            :currency="currency"\n                            compact\n                        />\n                    </template>\n                    {% endblock %}\n\n                    \n                    {% block sw_product_variants_configurator_prices_actions %}\n                    <template\n                        #actions="{ item }"\n                    >\n                        \n                        {% block sw_product_variants_configurator_prices_actions_items %}\n                        <sw-context-menu-item\n                            variant="danger"\n                            @click="resetSurcharges(item, true)"\n                        >\n                            {{ $tc(\'sw-product.variations.configuratorModal.resetSurcharges\') }}\n                        </sw-context-menu-item>\n                        {% endblock %}\n                    </template>\n                    {% endblock %}\n                </sw-data-grid>\n                {% endblock %}\n            </div>\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </div>\n    \n    {% block sw_product_variants_configurator_prices_loader %}\n    <sw-loader v-if="isLoading" />\n    {% endblock %}\n\n</div>\n{% endblock %}\n',inject:["repositoryFactory"],props:{product:{type:Object,required:!0},selectedGroups:{type:Array,required:!0}},data:function(){return{activeGroup:{},term:"",optionsForGroup:[],currencies:{},isLoading:!0}},computed:{currencyRepository:function(){return this.repositoryFactory.create("currency")},currenciesList:function(){return this.currencies.map((function(n){return{id:n.id,name:n.name,symbol:n.symbol}}))},optionColumns:function(){var n=[{property:"name",label:this.$tc("sw-product.variations.configuratorModal.priceOptions"),rawData:!0}],r=this.currenciesList.map((function(n){return{property:"currency.".concat(n.id),label:n.name,rawData:!0,allowResize:!0,width:"200px"}}));return[].concat(n,o()(r))}},watch:{activeGroup:function(){this.getOptionsForGroup()}},mounted:function(){this.mountedComponent()},methods:{onSearchTermChange:function(){this.getOptionsForGroup()},mountedComponent:function(){this.isLoading=!1,this.loadCurrencies()},loadCurrencies:function(){var n=this;this.currencyRepository.search(new i(1,25)).then((function(r){n.currencies=r}))},getOptionsForGroup:function(){var n=this;this.optionsForGroup=this.product.configuratorSettings.filter((function(r){return r.option.groupId===n.activeGroup.id&&(n.resetSurcharges(r),!0)})).filter((function(r){return r.option.translated.name.toLowerCase().includes(n.term.toLowerCase())}))},resetSurcharges:function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Array.isArray(n.price)&&n.price&&n.price.length>0&&!r||(this.$set(n,"price",[]),this.currenciesList.forEach((function(r){if(!n.price.find((function(n){return n.currencyId===r.id}))){var t={currencyId:r.id,gross:0,linked:!0,net:0};n.price.push(t)}})))},getCurrencyOfOption:function(n,r){return n.price.find((function(n){return n.currencyId===r}))}}}},b1jM:function(n,r,t){var e=t("y0WB");e.__esModule&&(e=e.default),"string"==typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);(0,t("P8hj").default)("7e5a9ac6",e,!0,{})},y0WB:function(n,r,t){}}]);
//# sourceMappingURL=5cc0d4ad6bc6da5cadd9.js.map