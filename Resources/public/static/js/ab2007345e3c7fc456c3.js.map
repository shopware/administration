{"version":3,"sources":["webpack:///./src/module/sw-manufacturer/page/sw-manufacturer-detail/sw-manufacturer-detail.scss","webpack:///./src/module/sw-manufacturer/page/sw-manufacturer-detail/index.js","webpack:///./src/module/sw-manufacturer/page/sw-manufacturer-detail/sw-manufacturer-detail.html.twig"],"names":["content","__esModule","default","module","i","locals","exports","add","_Shopware","Shopware","Mixin","Criteria","Data","mapPropertyErrors","Component","getComponentHelper","template","inject","mixins","getByName","shortcuts","ESCAPE","props","manufacturerId","type","String","required","data","manufacturer","customFieldSets","isLoading","isSaveSuccessful","metaInfo","title","this","$createTitle","identifier","computed","_objectSpread","placeholder","manufacturerIsLoading","manufacturerRepository","repositoryFactory","create","mediaRepository","customFieldSetRepository","customFieldSetCriteria","criteria","addFilter","equals","mediaUploadTag","concat","id","tooltipSave","acl","can","systemKey","$device","getSystemKey","message","appearance","showDelay","$tc","disabled","showOnDisabledElements","tooltipCancel","watch","createdComponent","created","methods","ExtensionAPI","publishData","path","scope","loadEntityData","State","commit","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$Promise$allSet","_yield$Promise$allSet2","manufacturerResponse","customFieldResponse","wrap","_context","prev","next","Promise","allSettled","get","search","sent","_slicedToArray","status","value","createNotificationError","stop","abortOnLanguageChange","hasChanges","saveOnLanguageChange","onSave","onChangeLanguage","setMediaItem","_ref","targetId","mediaId","setMediaFromSidebar","media","onUnlinkLogo","openMediaSidebar","$refs","mediaSidebarItem","openContent","onDropMedia","dragData","_this2","save","then","$router","push","name","params","catch","exception","onCancel"],"mappings":"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","file":"static/js/ab2007345e3c7fc456c3.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-manufacturer-detail.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"cd76b000\", content, true, {});","/*\n * @package inventory\n */\n\nimport template from './sw-manufacturer-detail.html.twig';\nimport './sw-manufacturer-detail.scss';\n\nconst { Mixin, Data: { Criteria } } = Shopware;\n\nconst { mapPropertyErrors } = Shopware.Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: ['repositoryFactory', 'acl'],\n\n    mixins: [\n        Mixin.getByName('placeholder'),\n        Mixin.getByName('notification'),\n        Mixin.getByName('discard-detail-page-changes')('manufacturer'),\n    ],\n\n    shortcuts: {\n        'SYSTEMKEY+S': 'onSave',\n        ESCAPE: 'onCancel',\n    },\n\n    props: {\n        manufacturerId: {\n            type: String,\n            required: false,\n            default: null,\n        },\n    },\n\n\n    data() {\n        return {\n            manufacturer: null,\n            customFieldSets: [],\n            isLoading: false,\n            isSaveSuccessful: false,\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(this.identifier),\n        };\n    },\n\n    computed: {\n        identifier() {\n            return this.placeholder(this.manufacturer, 'name');\n        },\n\n        manufacturerIsLoading() {\n            return this.isLoading || this.manufacturer == null;\n        },\n\n        manufacturerRepository() {\n            return this.repositoryFactory.create('product_manufacturer');\n        },\n\n        mediaRepository() {\n            return this.repositoryFactory.create('media');\n        },\n\n        customFieldSetRepository() {\n            return this.repositoryFactory.create('custom_field_set');\n        },\n\n        customFieldSetCriteria() {\n            const criteria = new Criteria(1, null);\n            criteria.addFilter(\n                Criteria.equals('relations.entityName', 'product_manufacturer'),\n            );\n\n            return criteria;\n        },\n\n        mediaUploadTag() {\n            return `sw-manufacturer-detail--${this.manufacturer.id}`;\n        },\n\n        tooltipSave() {\n            if (this.acl.can('product_manufacturer.editor')) {\n                const systemKey = this.$device.getSystemKey();\n\n                return {\n                    message: `${systemKey} + S`,\n                    appearance: 'light',\n                };\n            }\n\n            return {\n                showDelay: 300,\n                message: this.$tc('sw-privileges.tooltip.warning'),\n                disabled: this.acl.can('order.editor'),\n                showOnDisabledElements: true,\n            };\n        },\n\n        tooltipCancel() {\n            return {\n                message: 'ESC',\n                appearance: 'light',\n            };\n        },\n\n        ...mapPropertyErrors('manufacturer', ['name']),\n    },\n\n    watch: {\n        manufacturerId() {\n            this.createdComponent();\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            Shopware.ExtensionAPI.publishData({\n                id: 'sw-manufacturer-detail__manufacturer',\n                path: 'manufacturer',\n                scope: this,\n            });\n            if (this.manufacturerId) {\n                this.loadEntityData();\n                return;\n            }\n\n            Shopware.State.commit('context/resetLanguageToDefault');\n            this.manufacturer = this.manufacturerRepository.create();\n        },\n\n        async loadEntityData() {\n            this.isLoading = true;\n\n            const [manufacturerResponse, customFieldResponse] = await Promise.allSettled([\n                this.manufacturerRepository.get(this.manufacturerId),\n                this.customFieldSetRepository.search(this.customFieldSetCriteria),\n            ]);\n\n            if (manufacturerResponse.status === 'fulfilled') {\n                this.manufacturer = manufacturerResponse.value;\n            }\n\n            if (customFieldResponse.status === 'fulfilled') {\n                this.customFieldSets = customFieldResponse.value;\n            }\n\n            if (manufacturerResponse.status === 'rejected' || customFieldResponse.status === 'rejected') {\n                this.createNotificationError({\n                    message: this.$tc(\n                        'global.notification.notificationLoadingDataErrorMessage',\n                    ),\n                });\n            }\n\n            this.isLoading = false;\n        },\n\n        abortOnLanguageChange() {\n            return this.manufacturerRepository.hasChanges(this.manufacturer);\n        },\n\n        saveOnLanguageChange() {\n            return this.onSave();\n        },\n\n        onChangeLanguage() {\n            this.loadEntityData();\n        },\n\n        setMediaItem({ targetId }) {\n            this.manufacturer.mediaId = targetId;\n        },\n\n        setMediaFromSidebar(media) {\n            this.manufacturer.mediaId = media.id;\n        },\n\n        onUnlinkLogo() {\n            this.manufacturer.mediaId = null;\n        },\n\n        openMediaSidebar() {\n            this.$refs.mediaSidebarItem.openContent();\n        },\n\n        onDropMedia(dragData) {\n            this.setMediaItem({ targetId: dragData.id });\n        },\n\n        onSave() {\n            if (!this.acl.can('product_manufacturer.editor')) {\n                return;\n            }\n\n            this.isLoading = true;\n\n            this.manufacturerRepository.save(this.manufacturer).then(() => {\n                this.isLoading = false;\n                this.isSaveSuccessful = true;\n                if (this.manufacturerId === null) {\n                    this.$router.push({ name: 'sw.manufacturer.detail', params: { id: this.manufacturer.id } });\n                    return;\n                }\n\n                this.loadEntityData();\n            }).catch((exception) => {\n                this.isLoading = false;\n                this.createNotificationError({\n                    message: this.$tc(\n                        'global.notification.notificationSaveErrorMessageRequiredFieldsInvalid',\n                    ),\n                });\n                throw exception;\n            });\n        },\n\n        onCancel() {\n            this.$router.push({ name: 'sw.manufacturer.index' });\n        },\n    },\n};\n","export default \"\\n{% block sw_manufacturer_detail %}\\n<sw-page class=\\\"sw-manufacturer-detail\\\">\\n\\n    \\n    {% block sw_manufacturer_detail_header %}\\n    <template #smart-bar-header>\\n        <h2>{{ placeholder(manufacturer, 'name', $tc('sw-manufacturer.detail.textHeadline')) }}</h2>\\n    </template>\\n\\n    {% endblock %}\\n\\n    \\n    {% block sw_manufacturer_detail_actions %}\\n    <template #smart-bar-actions>\\n\\n        \\n        {% block sw_manufacturer_detail_actions_abort %}\\n        <sw-button\\n            v-tooltip.bottom=\\\"tooltipCancel\\\"\\n            :disabled=\\\"manufacturerIsLoading\\\"\\n            @click=\\\"onCancel\\\"\\n        >\\n            {{ $tc('sw-manufacturer.detail.buttonCancel') }}\\n        </sw-button>\\n        {% endblock %}\\n\\n        \\n        {% block sw_manufacturer_detail_actions_save %}\\n        <sw-button-process\\n            {% if VUE3 %}\\n            v-model:processSuccess=\\\"isSaveSuccessful\\\"\\n            {% else %}\\n            v-model=\\\"isSaveSuccessful\\\"\\n            {% endif %}\\n            v-tooltip.bottom=\\\"tooltipSave\\\"\\n            class=\\\"sw-manufacturer-detail__save-action\\\"\\n            :is-loading=\\\"isLoading\\\"\\n            :disabled=\\\"isLoading || !acl.can('product_manufacturer.editor')\\\"\\n            variant=\\\"primary\\\"\\n            @click.prevent=\\\"onSave\\\"\\n        >\\n            {{ $tc('sw-manufacturer.detail.buttonSave') }}\\n        </sw-button-process>\\n        {% endblock %}\\n\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_manufacturer_detail_language_switch %}\\n    <template #language-switch>\\n        <sw-language-switch\\n            :disabled=\\\"manufacturerId == null\\\"\\n            :save-changes-function=\\\"saveOnLanguageChange\\\"\\n            :abort-change-function=\\\"abortOnLanguageChange\\\"\\n            @on-change=\\\"onChangeLanguage\\\"\\n        />\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_manufacturer_detail_content %}\\n    <template #content>\\n        <sw-card-view>\\n            <template v-if=\\\"manufacturerIsLoading\\\">\\n                <sw-skeleton variant=\\\"detail-bold\\\" />\\n                <sw-skeleton />\\n            </template>\\n\\n            <template v-else>\\n\\n                \\n                {% block sw_manufacturer_detail_content_language_info %}\\n                <sw-language-info\\n                    :entity-description=\\\"placeholder(manufacturer, 'name', $tc('sw-manufacturer.detail.textHeadline'))\\\"\\n                />\\n                {% endblock %}\\n\\n                \\n                {% block sw_manufacturer_detail_base_basic_info_card %}\\n                <sw-card\\n                    position-identifier=\\\"sw-manufacturer-detail-basic-info\\\"\\n                    :title=\\\"$tc('sw-manufacturer.detail.cardTitleManufacturerInfo')\\\"\\n                >\\n                    <sw-container\\n                        class=\\\"sw-manufacturer-detail__container\\\"\\n                        columns=\\\"repeat(auto-fit, minmax(250px, 1fr))\\\"\\n                        gap=\\\"0 30px\\\"\\n                    >\\n                        <div class=\\\"sw-manufacturer-detail__base-info-wrapper\\\">\\n\\n                            \\n                            {% block sw_manufacturer_detail_base_info_field_name %}\\n                            <sw-text-field\\n                                {% if VUE3 %}\\n                                v-model:value=\\\"manufacturer.name\\\"\\n                                {% else %}\\n                                v-model=\\\"manufacturer.name\\\"\\n                                {% endif %}\\n                                :label=\\\"$tc('sw-manufacturer.detail.labelName')\\\"\\n                                :placeholder=\\\"placeholder(manufacturer, 'name', $tc('sw-manufacturer.detail.placeholderName'))\\\"\\n                                name=\\\"name\\\"\\n                                validation=\\\"required\\\"\\n                                required\\n                                :error=\\\"manufacturerNameError\\\"\\n                                :disabled=\\\"!acl.can('product_manufacturer.editor')\\\"\\n                            />\\n                            {% endblock %}\\n\\n                            \\n                            {% block sw_manufacturer_detail_base_info_field_link %}\\n                            <sw-text-field\\n                                {% if VUE3 %}\\n                                v-model:value=\\\"manufacturer.link\\\"\\n                                {% else %}\\n                                v-model=\\\"manufacturer.link\\\"\\n                                {% endif %}\\n                                :label=\\\"$tc('sw-manufacturer.detail.labelLink')\\\"\\n                                :placeholder=\\\"$tc('sw-manufacturer.detail.placeholderLink')\\\"\\n                                name=\\\"link\\\"\\n                                :disabled=\\\"!acl.can('product_manufacturer.editor')\\\"\\n                            />\\n                            {% endblock %}\\n                        </div>\\n\\n                        \\n                        {% block sw_manufacturer_detail_logo_upload %}\\n                        <sw-upload-listener\\n                            :upload-tag=\\\"mediaUploadTag\\\"\\n                            auto-upload\\n                            @media-upload-finish=\\\"setMediaItem\\\"\\n                        />\\n                        <sw-media-upload-v2\\n                            class=\\\"sw-manufacturer-detail__logo-upload\\\"\\n                            :source=\\\"manufacturer.mediaId\\\"\\n                            :allow-multi-select=\\\"false\\\"\\n                            variant=\\\"regular\\\"\\n                            :upload-tag=\\\"mediaUploadTag\\\"\\n                            :label=\\\"$tc('sw-manufacturer.detail.labelLogo')\\\"\\n                            :default-folder=\\\"manufacturerRepository.entityName\\\"\\n                            :disabled=\\\"!acl.can('product_manufacturer.editor')\\\"\\n                            @sw-media-upload-v2-media-upload-success=\\\"setMediaItem\\\"\\n                            @media-drop=\\\"onDropMedia\\\"\\n                            @media-upload-sidebar-open=\\\"openMediaSidebar\\\"\\n                            @media-upload-remove-image=\\\"onUnlinkLogo\\\"\\n                        />\\n                        {% endblock %}\\n                    </sw-container>\\n\\n                    \\n                    {% block sw_manufacturer_detail_base_info_field_description %}\\n                    <sw-text-editor\\n                        v-model=\\\"manufacturer.description\\\"\\n                        :label=\\\"$tc('sw-manufacturer.detail.labelDescription')\\\"\\n                        :placeholder=\\\"placeholder(manufacturer, 'description', $tc('sw-manufacturer.detail.placeholderDescription'))\\\"\\n                        name=\\\"description\\\"\\n                        sanitize-input\\n                        sanitize-field-name=\\\"product_manufacturer_translation.description\\\"\\n                        :disabled=\\\"!acl.can('product_manufacturer.editor')\\\"\\n                    />\\n                    {% endblock %}\\n                </sw-card>\\n                {% endblock %}\\n\\n                \\n                {% block sw_manufacturer_detail_custom_field_sets %}\\n                <sw-card\\n                    v-if=\\\"customFieldSets.length > 0\\\"\\n                    position-identifier=\\\"sw-manufacturer-detail-custom-field-sets\\\"\\n                    :title=\\\"$tc('sw-settings-custom-field.general.mainMenuItemGeneral')\\\"\\n                    :is-loading=\\\"manufacturerIsLoading\\\"\\n                >\\n                    <sw-custom-field-set-renderer\\n                        v-if=\\\"manufacturer\\\"\\n                        :entity=\\\"manufacturer\\\"\\n                        :sets=\\\"customFieldSets\\\"\\n                        :disabled=\\\"!acl.can('product_manufacturer.editor')\\\"\\n                    />\\n                </sw-card>\\n                {% endblock %}\\n            </template>\\n        </sw-card-view>\\n    </template>\\n    {% endblock %}\\n\\n    \\n    {% block sw_manufacturer_detail_sidebar %}\\n    <template #sidebar>\\n        <sw-sidebar :propagate-width=\\\"true\\\">\\n            <sw-sidebar-media-item\\n                ref=\\\"mediaSidebarItem\\\"\\n                :disabled=\\\"!acl.can('product_manufacturer.editor')\\\"\\n            >\\n                <template\\n                    #context-menu-items=\\\"media\\\"\\n                >\\n                    <sw-context-menu-item @click=\\\"setMediaFromSidebar(media.mediaItem)\\\">\\n                        {{ $tc('sw-manufacturer.detail.labelUseAsLogo') }}\\n                    </sw-context-menu-item>\\n                </template>\\n            </sw-sidebar-media-item>\\n        </sw-sidebar>\\n    </template>\\n    {% endblock %}\\n\\n</sw-page>\\n{% endblock %}\\n\";"],"sourceRoot":""}