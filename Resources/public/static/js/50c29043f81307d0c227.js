(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[389],{IcyD:function(e,n,o){"use strict";o.r(n);var t=o("4fmW"),a=o.n(t),i=o("CsSd"),r=o.n(i),s=o("7gRN"),l=o.n(s),d=o("jBp8"),c=o.n(d);o("lUhp");function p(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function m(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?p(Object(o),!0).forEach((function(n){r()(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function u(){u=function(e,n){return new o(e,void 0,n)};var e=RegExp.prototype,n=new WeakMap;function o(e,t,a){var i=new RegExp(e,t);return n.set(i,a||n.get(e)),c()(i,o.prototype)}function t(e,o){var t=n.get(o);return Object.keys(t).reduce((function(n,o){var a=t[o];if("number"==typeof a)n[o]=e[a];else{for(var i=0;void 0===e[a[i]]&&i+1<a.length;)i++;n[o]=e[a[i]]}return n}),Object.create(null))}return l()(o,RegExp),o.prototype.exec=function(n){var o=e.exec.call(this,n);if(o){o.groups=t(o,this);var a=o.indices;a&&(a.groups=t(a,this))}return o},o.prototype[Symbol.replace]=function(o,i){if("string"==typeof i){var r=n.get(this);return e[Symbol.replace].call(this,o,i.replace(/\$<([^>]+)>/g,(function(e,n){var o=r[n];return"$"+(Array.isArray(o)?o.join("$"):o)})))}if("function"==typeof i){var s=this;return e[Symbol.replace].call(this,o,(function(){var e=arguments;return"object"!=a()(e[e.length-1])&&(e=[].slice.call(e)).push(t(e,s)),i.apply(this,e)}))}return e[Symbol.replace].call(this,o,i)},u.apply(this,arguments)}var _=Shopware.Utils.debounce;n.default={template:'\n{% block sw_promotion_v2_generate_codes_modal %}\n<sw-modal\n    class="sw-promotion-v2-generate-codes-modal"\n    :title="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.title\')"\n    @modal-close="onClose"\n>\n\n    \n    {% block sw_promotion_v2_generate_codes_modal_content %}\n    <div class="sw-promotion-v2-generate-codes-modal__content">\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_warning %}\n        <sw-alert\n            v-if="promotion.individualCodes && promotion.individualCodes.length > 0"\n            class="sw-promotion-v2-generate-codes-modal__warning"\n            variant="warning"\n        >\n            {{ $tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.warning\') }}\n        </sw-alert>\n        {% endblock %}\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_description %}\n        <p class="sw-promotion-v2-generate-codes-modal__description">\n            {{ $tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.description\') }}\n        </p>\n        {% endblock %}\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_container_pattern %}\n        \n        {% block sw_promotion_v2_generate_codes_modal_container_pattern_simple %}\n        <sw-container\n            v-if="!customPatternMode"\n            class="sw-promotion-v2-generate-codes-modal__container-pattern"\n            columns="1fr 1fr 1fr"\n            gap="0px 32px"\n        >\n\n            \n            {% block sw_promotion_v2_generate_codes_modal_prefix %}\n            <sw-text-field\n                {% if VUE3 %}\n                v-model:value="pattern.prefix"\n                {% else %}\n                v-model="pattern.prefix"\n                {% endif %}\n                class="sw-promotion-v2-generate-codes-modal__prefix"\n                :label="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.labelPrefix\')"\n                :placeholder="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.placeholderPrefix\')"\n            />\n            {% endblock %}\n\n            \n            {% block sw_promotion_v2_generate_codes_modal_replacement %}\n            <sw-number-field\n                {% if VUE3 %}\n                v-model:value="pattern.codeLength"\n                {% else %}\n                v-model="pattern.codeLength"\n                {% endif %}\n                class="sw-promotion-v2-generate-codes-modal__replacement"\n                :label="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.labelCodeLength\')"\n                :min="1"\n                :max="20"\n            />\n            {% endblock %}\n\n            \n            {% block sw_promotion_v2_generate_codes_modal_suffix %}\n            <sw-text-field\n                {% if VUE3 %}\n                v-model:value="pattern.suffix"\n                {% else %}\n                v-model="pattern.suffix"\n                {% endif %}\n                class="sw-promotion-v2-generate-codes-modal__suffix"\n                :label="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.labelSuffix\')"\n                :placeholder="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.placeholderSuffix\')"\n            />\n            {% endblock %}\n\n        </sw-container>\n        {% endblock %}\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_container_pattern_custom %}\n        <sw-text-field\n            v-else\n            {% if VUE3 %}\n            v-model:value="promotion.individualCodePattern"\n            {% else %}\n            v-model="promotion.individualCodePattern"\n            {% endif %}\n            class="sw-promotion-v2-generate-codes-modal__custom-pattern"\n            :label="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.labelCustomPattern\')"\n            :placeholder="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.placeholderCustomPattern\')"\n            :help-text="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.helpTextCustomPattern\')"\n        />\n        {% endblock %}\n        {% endblock %}\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_custom_pattern_switch %}\n        <sw-switch-field\n            {% if VUE3 %}\n            v-model:value="customPatternMode"\n            {% else %}\n            v-model="customPatternMode"\n            {% endif %}\n            class="sw-promotion-v2-generate-codes-modal__custom-pattern"\n            :label="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.labelUseCustomPattern\')"\n            bordered\n        />\n        {% endblock %}\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_container_generate %}\n        <sw-container\n            class="sw-promotion-v2-generate-codes-modal__container-generate"\n            columns="1fr 1fr"\n            gap="0px 32px"\n        >\n\n            \n            {% block sw_promotion_v2_generate_codes_modal_preview %}\n            <sw-text-field\n                {% if VUE3 %}\n                v-model:value="preview"\n                {% else %}\n                v-model="preview"\n                {% endif %}\n                class="sw-promotion-v2-generate-codes-modal__preview"\n                :label="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.labelPreview\')"\n                disabled\n            />\n            {% endblock %}\n\n            \n            {% block sw_promotion_v2_generate_codes_modal_code_amount %}\n            <sw-number-field\n                {% if VUE3 %}\n                v-model:value="codeAmount"\n                {% else %}\n                v-model="codeAmount"\n                {% endif %}\n                class="sw-promotion-v2-generate-codes-modal__code-amount"\n                :label="$tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.labelCodeAmount\')"\n                :min="1"\n            />\n            {% endblock %}\n\n        </sw-container>\n        {% endblock %}\n\n    </div>\n    {% endblock %}\n\n    \n    {% block sw_promotion_v2_generate_codes_modal_footer %}\n    <template #modal-footer>\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_cancel %}\n        <sw-button\n            class="sw-promotion-v2-generate-codes-modal__button-cancel"\n            size="small"\n            @click="onClose"\n        >\n            {{ $tc(\'global.default.cancel\') }}\n        </sw-button>\n        {% endblock %}\n\n        \n        {% block sw_promotion_v2_generate_codes_modal_generate %}\n        <sw-button-process\n            class="sw-promotion-v2-generate-codes-modal__button-generate"\n            variant="primary"\n            size="small"\n            :is-loading="isGenerating"\n            :process-success="false"\n            @click="onGenerate"\n        >\n            {{ $tc(\'sw-promotion-v2.detail.base.codes.individual.generateModal.buttonGenerate\') }}\n        </sw-button-process>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n',inject:["promotionCodeApiService"],mixins:["notification"],props:{promotion:{type:Object,required:!0}},data:function(){return{isGenerating:!1,customPatternMode:!1,codeAmount:10,preview:"",pattern:{prefix:"",suffix:"",codeLength:5}}},watch:{pattern:{deep:!0,handler:function(){this.customPatternMode||this.updatePattern(),this.updatePreview()}},"promotion.individualCodePattern":function(){this.updatePreview()},customPatternMode:function(){this.customPatternMode||this.updatePattern(),this.updatePreview()}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var e=this.promotion.individualCodePattern;if(!e||!e.length>0)this.pattern={prefix:"",suffix:"",codeLength:5};else{var n=u(/([^%]*)((%[sd])+)(.*)/g,{prefix:1,replacement:2,suffix:4}).exec(e).groups;this.customPatternMode=n.replacement.includes("d"),this.pattern=m(m({},n),{},{codeLength:n.replacement.length/2||1}),this.updatePreview()}},updatePattern:function(){var e=Array(Number(this.pattern.codeLength)+1).join("%s");this.promotion.individualCodePattern="".concat(this.pattern.prefix).concat(e).concat(this.pattern.suffix)},updatePreview:_((function(){var e=this;this.isGenerating=!0,this.promotionCodeApiService.generatePreview(this.promotion.individualCodePattern).then((function(n){e.isGenerating=!1,e.preview=n}))}),500),onGenerate:function(){var e=this;this.isGenerating=!0,this.promotionCodeApiService.replaceIndividualCodes(this.promotion.id,this.promotion.individualCodePattern,this.codeAmount).then((function(){e.isGenerating=!1,e.$emit("generate-finish")})).catch((function(n){e.isGenerating=!1,n.response.data.errors.forEach((function(n){var o;switch(n.code){case"PROMOTION__INDIVIDUAL_CODES_PATTERN_INSUFFICIENTLY_COMPLEX":o="notComplexEnoughException";break;case"PROMOTION__INDIVIDUAL_CODES_PATTERN_ALREADY_IN_USE":o="alreadyInUseException";break;default:o="unknownErrorCode"}e.createNotificationError({autoClose:!1,message:e.$tc("sw-promotion-v2.detail.base.codes.individual.generateModal.".concat(o))})}))}))},onClose:function(){this.$emit("close")}}}},ZKDA:function(e,n,o){},lUhp:function(e,n,o){var t=o("ZKDA");t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,o("P8hj").default)("63646003",t,!0,{})}}]);
//# sourceMappingURL=50c29043f81307d0c227.js.map