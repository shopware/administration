(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[216],{"Hu/7":function(n,e,s){},Q4ta:function(n,e,s){var t=s("Hu/7");t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);(0,s("P8hj").default)("ed152bda",t,!0,{})},"ss+4":function(n,e,s){"use strict";s.r(e);var t=s("7yzw"),o=s.n(t),i=s("92Mt"),a=s.n(i),c=(s("Q4ta"),Shopware),l=c.Utils,r=c.Filter;e.default={template:'\n{% block sw_extension_card_base %}\n<sw-meteor-card\n    class="sw-extension-card-base"\n    :class="extensionCardClasses"\n>\n    \n    {% block sw_extension_card_base_loader %}\n    <sw-loader v-if="isLoading" />\n    {% endblock %}\n\n    \n    {% block sw_extension_card_base_activation_switch %}\n    <div class="sw-extension-card-base__switch">\n        \n        {% block sw_extension_card_base_activation_switch_switch %}\n        <sw-switch-field\n            {% if VUE3 %}\n            v-model:value="isActive"\n            {% else %}\n            v-model="isActive"\n            {% endif %}\n            v-tooltip="{\n                showDelay: 300,\n                message: $tc(\'sw-extension-store.component.sw-extension-card-base.allowDisableTooltip\'),\n                disabled: allowDisable\n            }"\n            :disabled="!isInstalled || (isActive && !allowDisable)"\n        />\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    \n    {% block sw_extension_card_base_icon %}\n    <sw-extension-icon :src="image" />\n    {% endblock %}\n\n    \n    {% block sw_extension_card_base_info %}\n    <div class="sw-extension-card-base__info">\n        \n        {% block sw_extension_card_base_info_content %}\n        \n        {% block sw_extension_card_base_info_head %}\n        <section>\n            \n            {% block sw_extension_card_base_info_name %}\n            <span class="sw-extension-card-base__info-name">\n                {{ extension.label }}\n            </span>\n            {% endblock %}\n\n            \n            {% block sw_extension_card_base_info_inactive_label %}\n            <span\n                v-if="isInstalled && !extension.active"\n                class="sw-extension-card-base__info-inactive"\n            >\n                {{ $tc(\'sw-extension-store.component.sw-extension-card-base.inactiveLabel\') }}\n            </span>\n            {% endblock %}\n        </section>\n        {% endblock %}\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    \n    {% block sw_extension_card_base_meta_info %}\n    <div class="sw-extension-card-base__meta-info">\n        \n        {% block sw_extension_card_base_meta_info_version %}\n        <section>\n            \n            {% block sw_extension_card_base_meta_info_version_label %}\n            <span\n                v-if="extension.version"\n                class="sw-extension-card-base__meta-info-version"\n            >\n                {{ $tc(\'sw-extension.my-extensions.listing.version\') }}: {{ extension.version }}\n            </span>\n            {% endblock %}\n\n            \n            {% block sw_extension_card_base_meta_info_version_update %}\n            <span v-if="isUpdateable">\n                <a\n                    href="#"\n                    @click.prevent="updateExtension(false)"\n                >\n                    {{ $tc(\'sw-extension.my-extensions.listing.update\') }}\n                </a>\n            </span>\n            {% endblock %}\n        </section>\n        {% endblock %}\n        {% endblock %}\n\n        \n        {% block sw_extension_card_base_meta_info_content %}\n        \n        {% block sw_extension_card_base_meta_date %}\n        <span v-if="isInstalled">\n            {{ $tc(\'sw-extension-store.component.sw-extension-card-base.installedLabel\') }}\n            {{ dateFilter(extension.installedAt.date, { month: \'numeric\', year: \'numeric\', hour: undefined, minute: undefined }) }}\n        </span>\n\n        <span v-else-if="extension.storeLicense">\n            {{ $tc(\'sw-extension-store.component.sw-extension-card-base.purchasedLabel\') }}\n            {{ dateFilter(extension.storeLicense.creationDate, { month: \'numeric\', year: \'numeric\', hour: undefined, minute: undefined }) }}\n        </span>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    \n    {% block sw_extension_card_base_main_action %}\n    <div class="sw-extension-card-base__main-action">\n        \n        {% block sw_extension_card_base_main_action_content %}\n        <span\n            v-if="!isInstalled"\n            class="sw-extension-card-base__open-extension"\n            role="button"\n            tabindex="0"\n            @click="openPermissionsModalForInstall"\n            @keydown.enter="openPermissionsModalForInstall"\n        >\n            {{ $tc(\'sw-extension-store.component.sw-extension-card-base.installExtensionLabel\') }}\n        </span>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    \n    {% block sw_extension_card_base_context_menu %}\n    <sw-context-button\n        class="sw-extension-card-base__context-menu"\n        :menu-width="180"\n    >\n        \n        {% block sw_extension_card_base_context_menu_actions %}\n        \n        {% block sw_extension_card_base_context_menu_settings %}\n        <sw-context-menu-item\n            v-if="isInstalled && extension.configurable"\n            :router-link="{ name: \'sw.extension.config\', params: { namespace: extension.name } }"\n        >\n            {{ $tc(\'sw-extension-store.component.sw-extension-card-base.contextMenu.config\') }}\n        </sw-context-menu-item>\n        {% endblock %}\n\n        \n        {% block sw_extension_card_base_context_menu_theme_settings %}\n        <sw-context-menu-item\n            v-if="openLinkExists && extension.active"\n            :disabled="!openLinkExists"\n            :router-link="link"\n        >\n            {{ $tc(\'sw-extension-store.component.sw-extension-card-base.contextMenu.openExtension\') }}\n        </sw-context-menu-item>\n        {% endblock %}\n\n        \n        {% block sw_extension_card_base_context_menu_privacy_safety %}\n        <sw-context-menu-item\n            v-if="privacyPolicyLink"\n            @click="openPrivacyAndSafety"\n        >\n            <span class="sw-extension-card-base__context-menu-privacy-link">\n                {{ $tc(\'sw-extension-store.component.sw-extension-card-base.contextMenu.privacyAndSafetyLabel\') }}\n                <sw-icon\n                    name="regular-external-link-s"\n                    size="10px"\n                />\n            </span>\n        </sw-context-menu-item>\n        {% endblock %}\n\n        \n        {% block sw_extension_card_base_context_menu_privacy_extensions %}\n        <sw-context-menu-item\n            v-if="isInstalled && extension.privacyPolicyExtension"\n            @click="openPrivacyModal"\n        >\n\n            {{ $tc(\'sw-extension-store.component.sw-extension-card-base.contextMenu.policyExtensions\') }}\n        </sw-context-menu-item>\n        {% endblock %}\n\n        \n        {% block sw_extension_card_base_context_menu_permissions %}\n        <sw-context-menu-item\n            v-if="isInstalled && permissions"\n            @click="openPermissionsModal"\n        >\n\n            {{ $tc(\'sw-extension-store.component.sw-extension-card-base.contextMenu.permissions\') }}\n        </sw-context-menu-item>\n        {% endblock %}\n\n        \n        {% block sw_extension_card_base_context_menu_lifecycle_actions %}\n        \n        {% block sw_extension_card_base_context_menu_remove_extension %}\n        <sw-context-menu-item\n            v-if="isUpdateable"\n            @click="updateExtension(false)"\n        >\n            {{ $tc(\'sw-extension-store.component.sw-extension-card-base.contextMenu.updateLabel\', 0, { version: extension.latestVersion }) }}\n        </sw-context-menu-item>\n\n        <sw-context-menu-item\n            v-if="extension.storeLicense && extension.storeLicense.variant === \'rent\' && extension.storeLicense.expirationDate === null"\n            class="sw-extension-card-base__cancel-and-remove-link"\n            variant="danger"\n            @click="openRemovalModal"\n        >\n            {{ $tc(\'sw-extension-store.component.sw-extension-card-base.contextMenu.cancelAndRemoveLabel\') }}\n        </sw-context-menu-item>\n\n        <sw-context-menu-item\n            v-else-if="isRemovable"\n            class="sw-extension-card-base__remove-link"\n            variant="danger"\n            @click="openRemovalModal"\n        >\n            {{ $tc(\'sw-extension-store.component.sw-extension-card-base.contextMenu.removeLabel\') }}\n        </sw-context-menu-item>\n\n        <sw-context-menu-item\n            v-if="isUninstallable"\n            variant="danger"\n            @click="openUninstallModal"\n        >\n            {{ $tc(\'sw-extension-store.component.sw-extension-card-base.contextMenu.uninstallLabel\') }}\n        </sw-context-menu-item>\n        {% endblock %}\n        {% endblock %}\n        {% endblock %}\n    </sw-context-button>\n    {% endblock %}\n\n    \n    {% block sw_extension_card_base_modals %}\n    \n    {% block sw_extension_card_base_uninstall_modal %}\n    <sw-extension-uninstall-modal\n        v-if="showUninstallModal"\n        :extension-name="extension.label"\n        :is-licensed="extension.storeLicense !== null"\n        :is-loading="isLoading"\n        @modal-close="closeUninstallModal"\n        @uninstall-extension="closeModalAndUninstallExtension"\n    />\n    {% endblock %}\n\n    \n    {% block sw_extension_card_base_removal_modal %}\n    <sw-extension-removal-modal\n        v-if="showRemovalModal"\n        :extension-name="extension.label"\n        :is-licensed="extension.storeLicense !== null && extension.storeLicense.variant === \'rent\'"\n        :is-loading="isLoading"\n        @modal-close="closeRemovalModal"\n        @remove-extension="closeModalAndRemoveExtension"\n    />\n    {% endblock %}\n\n    \n    {% block sw_extension_card_base_permissions_modal %}\n    <sw-extension-permissions-modal\n        v-if="showPermissionsModal"\n        :extension-label="extension.label"\n        :permissions="permissions"\n        :domains="extension.domains"\n        :action-label="permissionModalActionLabel"\n        @modal-close="closePermissionsModal"\n        @close-with-action="closePermissionsModalAndInstallExtension"\n    />\n    {% endblock %}\n\n    \n    {% block sw_extension_card_base_privacy_modal %}\n    <sw-extension-privacy-policy-extensions-modal\n        v-if="showPrivacyModal"\n        :extension-name="extension.label"\n        :privacy-policy-extension="extension.privacyPolicyExtension"\n        @modal-close="closePrivacyModal"\n    />\n    {% endblock %}\n    {% endblock %}\n\n    \n    {% block sw_extension_card_base_consent_affirmation_modal %}\n    <sw-extension-permissions-modal\n        v-if="showConsentAffirmationModal"\n        :title="consentAffirmationModalTitle"\n        :extension-label="extension.label"\n        :permissions="consentAffirmationDeltas.permissions"\n        :domains="consentAffirmationDeltas.domains"\n        :action-label="consentAffirmationModalActionLabel"\n        :close-label="consentAffirmationModalCloseLabel"\n        :description="consentAffirmationModalDescription"\n        @modal-close="closeConsentAffirmationModal"\n        @close-with-action="closeConsentAffirmationModalAndUpdateExtension"\n    />\n    {% endblock %}\n</sw-meteor-card>\n{% endblock %}\n',inheritAttrs:!1,inject:["shopwareExtensionService","extensionStoreActionService","cacheApiService"],mixins:["sw-extension-error"],props:{extension:{type:Object,required:!0}},data:function(){return{isLoading:!1,showUninstallModal:!1,showRemovalModal:!1,showPermissionsModal:!1,permissionsAccepted:!1,showPrivacyModal:!1,permissionModalActionLabel:null,openLink:null,showConsentAffirmationModal:!1,consentAffirmationDeltas:null}},computed:{dateFilter:function(){return Shopware.Filter.getByName("date")},defaultThemeAsset:function(){return this.assetFilter("administration/static/img/theme/default_theme_preview.jpg")},extensionCardClasses:function(){return{"is--deactivated":this.isInstalled&&!this.extension.active,"deactivate-prevented":this.isActive&&!this.allowDisable,"is--not-installed":!this.isInstalled}},licensedExtension:function(){return this.extension.storeLicense},image:function(){return this.extension.icon?this.extension.icon:this.extension.iconRaw?"data:image/png;base64, ".concat(this.extension.iconRaw):this.defaultThemeAsset},isActive:{get:function(){return!!this.isInstalled&&this.extension.active},set:function(n){var e=this;this.isInstalled&&(this.extension.active=n,this.$nextTick((function(){e.changeExtensionStatus()}),0))}},allowDisable:function(){return this.extension.allowDisable},isInstalled:function(){return null!==this.extension.installedAt},privacyPolicyLink:function(){return this.extension.privacyPolicyLink},permissions:function(){return Object.keys(this.extension.permissions).length?this.extension.permissions:null},assetFilter:function(){return r.getByName("asset")},isRemovable:function(){return null===this.extension.installedAt&&"local"===this.extension.source},isUninstallable:function(){return null!==this.extension.installedAt},isUpdateable:function(){return!(!this.extension||null===this.extension.latestVersion)&&this.extension.latestVersion!==this.extension.version},openLinkExists:function(){return!!this.link},extensionMainModule:function(){var n=this;return Shopware.State.get("extensionMainModules").mainModules.find((function(e){return e.extensionName===n.extension.name}))},link:function(){return this.openLink?this.openLink:this.extensionMainModule?{name:"sw.extension.sdk.index",params:{id:this.extensionMainModule.moduleId}}:null},consentAffirmationModalActionLabel:function(){return this.$tc("sw-extension-store.component.sw-extension-permissions-modal.acceptAndUpdate")},consentAffirmationModalCloseLabel:function(){return this.$tc("global.default.cancel")},consentAffirmationModalTitle:function(){return this.$tc("sw-extension-store.component.sw-extension-permissions-modal.titleNewPermissions",1,{extensionLabel:this.extension.label})},consentAffirmationModalDescription:function(){return this.$tc("sw-extension-store.component.sw-extension-permissions-modal.descriptionNewPermissions",1,{extensionLabel:this.extension.label})}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var n=this;return o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.shopwareExtensionService.getOpenLink(n.extension);case 2:n.openLink=e.sent;case 3:case"end":return e.stop()}}),e)})))()},emitUpdateList:function(){this.$emit("update-list"),this.$emit("updateList")},getHelp:function(){},openPrivacyAndSafety:function(){window.open(this.extension.privacyPolicyLink,"_blank")},openRemovalModal:function(){this.showRemovalModal=!0},openUninstallModal:function(){this.showUninstallModal=!0},closeRemovalModal:function(){this.showRemovalModal=!1},closeUninstallModal:function(){this.showUninstallModal=!1},closeModalAndUninstallExtension:function(n){var e=this;return o()(a.a.mark((function s(){return a.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e.showUninstallModal=!1,e.isLoading=!0,s.prev=2,s.next=5,e.shopwareExtensionService.uninstallExtension(e.extension.name,e.extension.type,n);case 5:e.clearCacheAndReloadPage(),s.next=11;break;case 8:s.prev=8,s.t0=s.catch(2),e.showExtensionErrors(s.t0);case 11:return s.prev=11,e.isLoading=!1,s.finish(11);case 14:case"end":return s.stop()}}),s,null,[[2,8,11,14]])})))()},updateExtension:function(){var n=arguments,e=this;return o()(a.a.mark((function s(){var t,o,i,c;return a.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],e.isLoading=!0,s.prev=2,"store"!==e.extension.updateSource){s.next=6;break}return s.next=6,e.extensionStoreActionService.downloadExtension(e.extension.name);case 6:if(!e.extension.installedAt){s.next=9;break}return s.next=9,e.shopwareExtensionService.updateExtension(e.extension.name,e.extension.type,t);case 9:e.clearCacheAndReloadPage(),s.next=19;break;case 12:if(s.prev=12,s.t0=s.catch(2),"FRAMEWORK__EXTENSION_UPDATE_REQUIRES_CONSENT_AFFIRMATION"!==(null===(o=s.t0.response)||void 0===o||null===(i=o.data)||void 0===i||null===(c=i.errors[0])||void 0===c?void 0:c.code)){s.next=18;break}return e.consentAffirmationDeltas=s.t0.response.data.errors[0].meta.parameters.deltas,e.openConsentAffirmationModal(),s.abrupt("return");case 18:e.showExtensionErrors(s.t0);case 19:return s.prev=19,e.isLoading=!1,s.finish(19);case 22:case"end":return s.stop()}}),s,null,[[2,12,19,22]])})))()},closeModalAndRemoveExtension:function(){var n=this;return o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n.extension.storeLicense&&"rent"===n.extension.storeLicense.variant){e.next=5;break}return e.next=3,n.removeExtension();case 3:return n.showRemovalModal=!1,e.abrupt("return");case 5:return e.next=7,n.cancelAndRemoveExtension();case 7:n.showRemovalModal=!1;case 8:case"end":return e.stop()}}),e)})))()},openExtension:function(){this.link&&this.$router.push(this.link)},openPermissionsModalForInstall:function(){var n=this;return o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.permissions){e.next=6;break}return n.permissionsAccepted=!0,n.isLoading=!0,e.next=5,n.installAndActivateExtension();case 5:return e.abrupt("return");case 6:n.permissionModalActionLabel=n.$tc("sw-extension-store.component.sw-extension-card-base.labelAcceptAndInstall"),n.showPermissionsModal=!0;case 8:case"end":return e.stop()}}),e)})))()},openPermissionsModal:function(){this.permissionModalActionLabel=null,this.showPermissionsModal=!0},closePermissionsModal:function(){this.permissionModalActionLabel=null,this.showPermissionsModal=!1},closePermissionsModalAndInstallExtension:function(){var n=this;return o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.permissionsAccepted=!0,n.closePermissionsModal(),e.next=4,n.installExtension();case 4:case"end":return e.stop()}}),e)})))()},changeExtensionStatus:function(){var n=this;return o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.debug.warn(n._name,"No implementation of changeExtensionStatus found");case 1:case"end":return e.stop()}}),e)})))()},installExtension:function(){l.debug.warn(this._name,"No implementation of installExtension found")},installAndActivateExtension:function(){var n=this;return o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.debug.warn(n._name,"No implementation of installAndActivateExtension found");case 1:case"end":return e.stop()}}),e)})))()},removeExtension:function(){var n=this;return o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.showRemovalModal=!1,n.isLoading=!0,e.next=5,n.shopwareExtensionService.removeExtension(n.extension.name,n.extension.type);case 5:n.extension.active=!1,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n.showStoreError(e.t0);case 11:return e.prev=11,n.isLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))()},cancelAndRemoveExtension:function(){l.debug.warn(this._name,"No implementation of cancelAndRemoveExtension found")},openPrivacyModal:function(){this.showPrivacyModal=!0},closePrivacyModal:function(){this.showPrivacyModal=!1},clearCacheAndReloadPage:function(){return this.cacheApiService.clear().then((function(){window.location.reload()}))},openConsentAffirmationModal:function(){this.showConsentAffirmationModal=!0},closeConsentAffirmationModal:function(){this.showConsentAffirmationModal=!1},closeConsentAffirmationModalAndUpdateExtension:function(){var n=this;return o()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.closeConsentAffirmationModal(),e.next=3,n.updateExtension(!0);case 3:case"end":return e.stop()}}),e)})))()}}}}}]);