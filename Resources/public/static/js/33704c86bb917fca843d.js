(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[442],{"3gVJ":function(e,n,t){var i=t("ZL3f");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,t("P8hj").default)("6fe4a57e",i,!0,{})},ElsO:function(e,n,t){"use strict";t.r(n);var i=t("7yzw"),s=t.n(i),r=t("92Mt"),a=t.n(r);t("3gVJ"),n.default={template:'\n{% block sw_settings_mailer_index %}\n<sw-page class="sw-settings-mailer">\n\n    \n    {% block sw_settings_mailer_smart_bar_header %}\n    <template #smart-bar-header>\n        \n        {% block sw_settings_mailer_smart_bar_header_title %}\n        <h2>\n            \n            {% block sw_settings_mailer_smart_bar_header_title_text %}\n            {{ $tc(\'sw-settings.index.title\') }}\n            <sw-icon\n                name="regular-chevron-right-xs"\n                small\n            />\n            {{ $tc(\'sw-settings-mailer.general.textHeadline\') }}\n            {% endblock %}\n        </h2>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_settings_mailer_smart_bar_actions %}\n    <template #smart-bar-actions>\n        \n        {% block sw_settings_mailer_actions_save %}\n        <sw-button-process\n            :is-loading="isLoading"\n            :process-success="isSaveSuccessful"\n            variant="primary"\n            {% if VUE3 %}\n            @update:process-success="onSaveFinish"\n            {% else %}\n            @process-finish="onSaveFinish"\n            {% endif %}\n            @click="saveMailerSettings"\n        >\n            {{ $tc(\'sw-settings-mailer.general.buttonSave\') }}\n        </sw-button-process>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_settings_mailer_content %}\n    <template #content>\n        <sw-card-view>\n            <sw-skeleton v-if="isLoading" />\n\n            <sw-card\n                v-else\n                position-identifier="sw-settings-mailer-configuration"\n                :is-loading="isLoading"\n                :title="$tc(\'sw-settings-mailer.mailer-configuration.card-title\')"\n            >\n\n                \n                {% block sw_settings_mailer_first_configuration %}\n                <div\n                    v-if="isFirstConfiguration"\n                    class="sw-settings-mailer__first-configuration"\n                >\n                    \n                    {% block sw_settings_mailer_first_configuration_headline %}\n                    <h4 class="sw-settings-mailer__headline">\n                        <strong>\n                            {{ $tc(\'sw-settings-mailer.first-configuration.headline\') }}\n                        </strong>\n                    </h4>\n                    {% endblock %}\n\n                    \n                    {% block sw_settings_mailer_first_configuration_description %}\n                    <p>\n                        {{ $tc(\'sw-settings-mailer.first-configuration.description\') }}\n                    </p>\n                    {% endblock %}\n                </div>\n                {% endblock %}\n\n                \n                {% block sw_settings_mailer_headline_agent %}\n                <p class="sw-settings-mailer__headline">\n                    {{ $tc(\'sw-settings-mailer.mailer-configuration.agent\') }}\n                </p>\n                {% endblock %}\n\n                <div class="sw-settings-mailer__radio-selection">\n                    \n                    {% block sw_settings_mailer_agent_options %}\n                    <sw-select-field v-model="mailerSettings[\'core.mailerSettings.emailAgent\']">\n                        <option value="local">\n                            {{ $tc(\'sw-settings-mailer.mailer-configuration.local-agent\') }}\n                        </option>\n                        <option value="smtp">\n                            {{ $tc(\'sw-settings-mailer.mailer-configuration.smtp-server\') }}\n                        </option>\n                        <option value="">\n                            {{ $tc(\'sw-settings-mailer.mailer-configuration.env-file\') }}\n                        </option>\n                    </sw-select-field>\n\n                    <sw-radio-field\n                        v-if="mailerSettings[\'core.mailerSettings.emailAgent\'] === \'local\'"\n                        {% if VUE3 %}\n                        v-model:value="mailerSettings[\'core.mailerSettings.sendMailOptions\']"\n                        {% else %}\n                        v-model="mailerSettings[\'core.mailerSettings.sendMailOptions\']"\n                        {% endif %}\n                        :options="emailSendmailOptions"\n                    />\n                    {% endblock %}\n                </div>\n\n                <p v-html="$tc(\'sw-settings-mailer.helpText\')"></p>\n                <sw-switch-field\n                    v-if="!isSmtpMode"\n                    {% if VUE3 %}\n                    v-model:value="mailerSettings[\'core.mailerSettings.disableDelivery\']"\n                    {% else %}\n                    v-model="mailerSettings[\'core.mailerSettings.disableDelivery\']"\n                    {% endif %}\n                    size="small"\n                    :label="$tc(\'sw-settings-mailer.card-smtp.disable-delivery\')"\n                />\n            </sw-card>\n\n            \n            {% block sw_settings_mailer_smtp %}\n            <sw-card\n                v-if="isSmtpMode"\n                position-identifier="sw-settings-mailer-smtp-settings"\n                :is-loading="isLoading"\n                title="SMTP server"\n                class="sw-settings-mailer__input-fields"\n            >\n\n                \n                {% block sw_settings_mailer_smtp_settings %}\n                <sw-settings-mailer-smtp\n                    :mailer-settings="mailerSettings"\n                    :host-error="smtpHostError"\n                    :port-error="smtpPortError"\n                    @host-changed="resetSmtpHostError"\n                    @port-changed="resetSmtpPortError"\n                />\n                {% endblock %}\n\n            </sw-card>\n            {% endblock %}\n        </sw-card-view>\n    </template>\n    {% endblock %}\n</sw-page>\n{% endblock %}\n',inject:["systemConfigApiService"],mixins:["notification"],data:function(){return{isLoading:!0,isSaveSuccessful:!1,isFirstConfiguration:!1,mailerSettings:{"core.mailerSettings.emailAgent":null,"core.mailerSettings.host":null,"core.mailerSettings.port":null,"core.mailerSettings.username":null,"core.mailerSettings.password":null,"core.mailerSettings.encryption":"null","core.mailerSettings.senderAddress":null,"core.mailerSettings.deliveryAddress":null,"core.mailerSettings.disableDelivery":!1},smtpHostError:null,smtpPortError:null}},metaInfo:function(){return{title:this.$createTitle()}},computed:{emailSendmailOptions:function(){return[{value:"-bs",name:this.$tc("sw-settings-mailer.sendmail.sync")},{value:"-t",name:this.$tc("sw-settings-mailer.sendmail.async")}]},isSmtpMode:function(){return"smtp"===this.mailerSettings["core.mailerSettings.emailAgent"]}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var e=this;return s()(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadPageContent();case 2:case"end":return n.stop()}}),n)})))()},loadPageContent:function(){var e=this;return s()(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadMailerSettings();case 2:e.checkFirstConfiguration();case 3:case"end":return n.stop()}}),n)})))()},loadMailerSettings:function(){var e=this;return s()(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isLoading=!0,n.next=3,e.systemConfigApiService.getValues("core.mailerSettings");case 3:e.mailerSettings=n.sent,0===Object.keys(e.mailerSettings).length&&(e.mailerSettings={"core.mailerSettings.emailAgent":"","core.mailerSettings.sendMailOptions":"-t"}),e.isLoading=!1;case 6:case"end":return n.stop()}}),n)})))()},saveMailerSettings:function(){var e=this;return s()(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.isLoading=!0,""===e.mailerSettings["core.mailerSettings.emailAgent"]&&(e.mailerSettings["core.mailerSettings.emailAgent"]=null),e.isSmtpMode&&e.validateSmtpConfiguration(),null===e.smtpHostError&&null===e.smtpPortError){n.next=7;break}return e.createNotificationError({title:e.$tc("global.default.error"),message:e.$tc("sw-settings-mailer.card-smtp.error.notificationMessage")}),e.isLoading=!1,n.abrupt("return");case 7:return n.next=9,e.systemConfigApiService.saveValues(e.mailerSettings);case 9:e.isLoading=!1;case 10:case"end":return n.stop()}}),n)})))()},onSaveFinish:function(){var e=this;return s()(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadPageContent();case 2:case"end":return n.stop()}}),n)})))()},checkFirstConfiguration:function(){this.isFirstConfiguration=!this.mailerSettings["core.mailerSettings.emailAgent"]},validateSmtpConfiguration:function(){this.smtpHostError=this.mailerSettings["core.mailerSettings.host"]?null:{detail:this.$tc("global.error-codes.c1051bb4-d103-4f74-8988-acbcafc7fdc3")},this.smtpPortError="number"!=typeof this.mailerSettings["core.mailerSettings.port"]?{detail:this.$tc("global.error-codes.c1051bb4-d103-4f74-8988-acbcafc7fdc3")}:null},resetSmtpHostError:function(){this.smtpHostError=null},resetSmtpPortError:function(){this.smtpPortError=null}}}},ZL3f:function(e,n,t){}}]);