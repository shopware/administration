(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[632],{T5VL:function(t,e,n){"use strict";n.r(e);var a=n("CsSd"),i=n.n(a);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var o=Shopware.Mixin,r=Shopware.Data.Criteria,c=Shopware.Classes.ShopwareError,u=Shopware.Component.getComponentHelper().mapPropertyErrors,d=Shopware.Utils;e.default={template:'\n{% block sw_settings_salutation_detail %}\n<sw-page class="sw-settings-salutation-detail">\n\n    \n    {% block sw_settings_salutation_detail_search_bar %}\n    <template #search-bar></template>\n    {% endblock %}\n\n    \n    {% block sw_settings_salutation_detail_smart_bar_header %}\n    <template #smart-bar-header>\n        \n        {% block sw_settings_salutation_detail_smart_bar_header_title %}\n        <h2>\n            \n            {% block sw_settings_salutation_detail_smart_bar_header_title_text %}\n            {{ placeholder(salutation, \'salutationKey\', $tc(\'sw-settings-salutation.detail.placeholderNewSalutation\')) }}\n            {% endblock %}\n        </h2>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_settings_salutation_detail_language_switch %}\n    <template #language-switch>\n        <sw-language-switch\n            :disabled="salutationId == null"\n            @on-change="onChangeLanguage"\n        />\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_settings_salutation_detail_actions %}\n    <template #smart-bar-actions>\n        \n        {% block sw_settings_salutation_detail_actions_cancel %}\n        <sw-button\n            v-tooltip.bottom="tooltipCancel"\n            class="sw-settings-salutation-detail__cancel"\n            @click="onCancel"\n        >\n            {{ $tc(\'sw-settings-salutation.general.buttonCancel\') }}\n        </sw-button>\n        {% endblock %}\n\n        \n        {% block sw_settings_salutation_detail_actions_save %}\n        <sw-button-process\n            v-tooltip.bottom="tooltipSave"\n            class="sw-settings-salutation-detail__save"\n            :is-loading="isLoading"\n            :process-success="isSaveSuccessful"\n            :disabled="invalidKey || isKeyChecking || !allowSave"\n            variant="primary"\n            {% if VUE3 %}\n            @update:process-success="saveFinish"\n            {% else %}\n            @process-finish="saveFinish"\n            {% endif %}\n            @click="onSave"\n        >\n            {{ $tc(\'sw-settings-salutation.general.buttonSave\') }}\n        </sw-button-process>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_settings_salutation_detail_cardview %}\n    <template #content>\n        <sw-card-view>\n            <sw-skeleton v-if="isLoading" />\n\n            <template v-else>\n                \n                {% block sw_settings_salutation_detail_content_language_info %}\n                <sw-language-info :entity-description="entityDescription" />\n                {% endblock %}\n\n                \n                {% block sw_settings_salutation_detail_content_card %}\n                <sw-card\n                    position-identifier="sw-settings-salutation-detail-content"\n                    :is-loading="isLoading"\n                    :title="$tc(\'sw-settings-salutation.detail.cardTitle\')"\n                >\n\n                    <template v-if="salutation">\n                        \n                        {% block sw_settings_salutation_detail_content_card_salutation_key %}\n                        <sw-text-field\n                            {% if VUE3 %}\n                            v-model:value="salutation.salutationKey"\n                            {% else %}\n                            v-model="salutation.salutationKey"\n                            {% endif %}\n                            name="sw-field--salutation-salutationKey"\n                            class="sw-settings-salutation-detail__salutation_key"\n                            :label="$tc(\'sw-settings-salutation.detail.fieldSalutationKeyLabel\')"\n                            :placeholder="$tc(\'sw-settings-salutation.detail.fieldSalutationKeyPlaceholder\')"\n                            :help-text="$tc(\'sw-settings-salutation.detail.fieldSalutationKeyTooltip\')"\n                            :error="salutationSalutationKeyError"\n                            validation="required"\n                            required\n                            :disabled="!acl.can(\'salutation.editor\')"\n                            {% if VUE3 %}\n                            @update:value="onChange"\n                            {% else %}\n                            @input="onChange"\n                            {% endif %}\n                        />\n                        {% endblock %}\n\n                        \n                        {% block sw_settings_salutation_detail_content_card_display_name %}\n                        <sw-text-field\n                            {% if VUE3 %}\n                            v-model:value="salutation.displayName"\n                            {% else %}\n                            v-model="salutation.displayName"\n                            {% endif %}\n                            name="sw-field--salutation-displayName"\n                            required\n                            class="sw-settings-salutation-detail__displayName"\n                            :label="$tc(\'sw-settings-salutation.detail.fieldDisplayNameLabel\')"\n                            :error="salutationDisplayNameError"\n                            :disabled="!acl.can(\'salutation.editor\')"\n                            :placeholder="placeholder(salutation, \'displayName\', $tc(\'sw-settings-salutation.detail.fieldDisplayNamePlaceholder\'))"\n                        />\n                        {% endblock %}\n\n                        \n                        {% block sw_settings_salutation_detail_content_card_letter_name %}\n                        <sw-text-field\n                            {% if VUE3 %}\n                            v-model:value="salutation.letterName"\n                            {% else %}\n                            v-model="salutation.letterName"\n                            {% endif %}\n                            name="sw-field--salutation-letterName"\n                            required\n                            class="sw-settings-salutation-detail__letterName"\n                            :label="$tc(\'sw-settings-salutation.detail.fieldLetterNameLabel\')"\n                            :error="salutationLetterNameError"\n                            :disabled="!acl.can(\'salutation.editor\')"\n                            :placeholder="placeholder(salutation, \'letterName\', $tc(\'sw-settings-salutation.detail.fieldLetterNamePlaceholder\'))"\n                        />\n                        {% endblock %}\n                    </template>\n                </sw-card>\n                {% endblock %}\n\n                \n                {% block sw_settings_salutation_detail_custom_field_sets %}\n                <sw-card\n                    v-if="showCustomFields"\n                    position-identifier="sw-settings-salutation-detail-custom-fields"\n                    :title="$tc(\'sw-settings-custom-field.general.mainMenuItemGeneral\')"\n                    :is-loading="isLoading"\n                >\n                    <sw-custom-field-set-renderer\n                        :entity="salutation"\n                        :disabled="!acl.can(\'salutation.editor\')"\n                        :sets="customFieldSets"\n                    />\n                </sw-card>\n                {% endblock %}\n            </template>\n        </sw-card-view>\n    </template>\n    {% endblock %}\n\n</sw-page>\n{% endblock %}\n',inject:["repositoryFactory","acl","customFieldDataProviderService"],mixins:[o.getByName("notification"),o.getByName("placeholder"),o.getByName("discard-detail-page-changes")("salutation")],props:{salutationId:{type:String,required:!1,default:null}},shortcuts:{"SYSTEMKEY+S":{active:function(){return this.allowSave},method:"onSave"},ESCAPE:"onCancel"},data:function(){return{entityName:"salutation",isLoading:!1,salutation:null,invalidKey:!1,isKeyChecking:!1,isSaveSuccessful:!1,customFieldSets:null}},metaInfo:function(){return{title:this.$createTitle(this.identifier)}},computed:l(l({identifier:function(){return this.placeholder(this.salutation,"displayName")},salutationRepository:function(){return this.repositoryFactory.create("salutation")},entityDescription:function(){return this.placeholder(this.salutation,"salutationKey",this.$tc("sw-settings-salutation.detail.placeholderNewSalutation"))},invalidKeyError:function(){return this.invalidKey&&!this.isKeyChecking?new c({code:"DUPLICATED_SALUTATION_KEY"}):null},allowSave:function(){return this.salutation&&this.salutation.isNew()?this.acl.can("salutation.creator"):this.acl.can("salutation.editor")},tooltipSave:function(){if(!this.allowSave)return{message:this.$tc("sw-privileges.tooltip.warning"),disabled:this.allowSave,showOnDisabledElements:!0};var t=this.$device.getSystemKey();return{message:"".concat(t," + S"),appearance:"light"}},tooltipCancel:function(){return{message:"ESC",appearance:"light"}}},u("salutation",["displayName","letterName","salutationKey"])),{},{showCustomFields:function(){return this.salutation&&this.customFieldSets&&this.customFieldSets.length>0}}),watch:{salutationId:function(){this.salutationId||this.createdComponent()}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var t=this;if(this.isLoading=!0,this.salutationId)return this.salutationRepository.get(this.salutationId).then((function(e){t.salutation=e,t.isLoading=!1})),void this.loadCustomFieldSets();Shopware.State.commit("context/resetLanguageToDefault"),this.salutation=this.salutationRepository.create(),this.isLoading=!1},loadCustomFieldSets:function(){var t=this;this.customFieldDataProviderService.getCustomFieldSets("salutation").then((function(e){t.customFieldSets=e}))},onChangeLanguage:function(){this.createdComponent()},saveFinish:function(){this.isSaveSuccessful=!1},onSave:function(){var t=this;return this.isLoading=!0,this.isSaveSuccessful=!1,this.salutationRepository.save(this.salutation).then((function(){t.isSaveSuccessful=!0,t.salutationId||t.$router.push({name:"sw.settings.salutation.detail",params:{id:t.salutation.id}}),t.salutationRepository.get(t.salutation.id).then((function(e){t.salutation=e,t.isLoading=!1}))})).catch((function(){t.isLoading=!1,t.createNotificationError({title:t.$tc("global.default.error"),message:t.$tc("sw-settings-salutation.detail.notificationErrorMessage")})}))},onCancel:function(){this.$router.push({name:"sw.settings.salutation.index"})},onChange:function(){this.isKeyChecking=!0,this.onChangeDebounce()},onChangeDebounce:d.debounce((function(){var t=this;if(this.salutation){if("string"!=typeof this.salutation.salutationKey||""===this.salutation.salutationKey.trim())return this.invalidKey=!1,void(this.isKeyChecking=!1);var e=new r(1,1);e.addFilter(r.multi("AND",[r.equals("salutationKey",this.salutation.salutationKey),r.not("AND",[r.equals("id",this.salutation.id)])])),this.salutationRepository.search(e).then((function(e){var n=e.total;t.invalidKey=n>0,t.isKeyChecking=!1})).catch((function(){t.invalidKey=!0,t.isKeyChecking=!1}))}}),500)}}}}]);