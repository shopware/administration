(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[373],{EQ23:function(n,t,r){},"e/4s":function(n,t,r){var e=r("EQ23");e.__esModule&&(e=e.default),"string"==typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);(0,r("ydqr").default)("e0e1ace2",e,!0,{})},t4gN:function(n,t,r){"use strict";r.r(t);var e=r("QGb3"),i=r.n(e);r("e/4s"),t.default={template:'\n{% block sw_product_variants_delivery_order %}\n<div class="sw-product-variants-delivery-order">\n    \n    {% block sw_product_variants_delivery_order_groups %}\n    <div class="sw-product-variants-delivery-order__groups">\n        \n        {% block sw_product_variants_delivery_order_groups_sw_tree %}\n        <sw-tree\n            v-if="orderObjects.length"\n            :items="orderObjects"\n            :searchable="false"\n            :disable-context-menu="true"\n            bind-items-to-folder\n            @drag-end="orderChanged"\n        >\n\n            <template\n                #items="{ treeItems, sortable, draggedItem, disableContextMenu, onChangeRoute }"\n            >\n                <sw-tree-item\n                    v-for="item in treeItems"\n                    :key="item.id"\n                    :item="item"\n                    :disable-context-menu="true"\n                    :sortable="true"\n                />\n            </template>\n        </sw-tree>\n        {% endblock %}\n\n        \n        {% block sw_product_variants_delivery_order_loader %}\n        <sw-loader v-else />\n        {% endblock %}\n    </div>\n    {% endblock %}\n</div>\n{% endblock %}\n',props:{product:{type:Object,required:!0},selectedGroups:{type:Array,required:!0}},data:function(){return{groups:[],orderObjects:[]}},mounted:function(){this.mountedComponent()},methods:{mountedComponent:function(){this.createOrderObjects()},createOrderObjects:function(){var n=this,t=[],r=i()(this.selectedGroups);this.product.variantListingConfig.configuratorGroupConfig&&this.product.variantListingConfig.configuratorGroupConfig.length>0&&(t=this.product.variantListingConfig.configuratorGroupConfig.reduce((function(n,t){var e=r.find((function(n){return n.id===t.id}));return e&&(n.push(e),r.splice(r.indexOf(e),1)),n}),[]));var e=(t=[].concat(i()(t),i()(r))).map((function(r,e){var i=n.getOptionsForGroup(r.id);return{id:r.id,name:r.translated.name,childCount:i.length,parentId:null,afterId:e>0?t[e-1].id:null,storeObject:r}})),o=e.reduce((function(t,r){var e=n.getOptionsForGroup(r.id),o=e.sort((function(n,t){return n.position-t.position})).map((function(n,t){var r=n.option,i=null;return t>0&&(i=e[t-1].option.id),{id:r.id,name:r.translated.name,childCount:0,parentId:r.groupId,afterId:i,storeObject:n}}));return[].concat(i()(t),i()(o))}),[]);this.orderObjects=[].concat(i()(e),i()(o))},getOptionsForGroup:function(n){return this.product.configuratorSettings.filter((function(t){return!t.isDeleted&&t.option.groupId===n}))},orderChanged:function(){var n,t=this.orderObjects.filter((function(n){return null===n.parentId}));this.product.variantListingConfig.configuratorGroupConfig||(this.product.variantListingConfig.configuratorGroupConfig=[]);var r=[],e=t.find((function(n){return null===n.afterId}));t.forEach((function(){void 0!==e&&(r.push(e.id),e=t.find((function(n){return n.afterId===e.id})))}));var i=[],o=null!==(n=this.product.variantListingConfig.configuratorGroupConfig)&&void 0!==n?n:[];o.length?r.forEach((function(n){var t=o.find((function(t){return t.id===n}));t?i.push(t):i.push({id:n,expressionForListings:!1,representation:"box"})})):r.forEach((function(n){i.push({id:n,expressionForListings:!1,representation:"box"})})),this.product.variantListingConfig.configuratorGroupConfig=i;var d=this.orderObjects.filter((function(n){return n.parentId}));t.forEach((function(n){var t=d.filter((function(t){return t.parentId===n.id})),r=t.find((function(n){return null===n.afterId}));t.forEach((function(n,e){void 0!==r&&(r.storeObject.position=e+1,r=t.find((function(n){return n.afterId===r.id})))}))}))}}}}}]);