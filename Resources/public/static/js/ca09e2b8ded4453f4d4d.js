(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[449],{"09wO":function(e,t,s){"use strict";s.r(t);s("mT9A");var n=Shopware.Context,o=Shopware.Data.Criteria;t.default={template:'\n{% block sw_settings_product_feature_sets_modal %}\n<sw-modal\n    :title="$tc(\'sw-settings-product-feature-sets.modal.labelTitleModal\')"\n    class="sw-settings-product-feature-sets__modal"\n    @modal-close="$emit(\'modal-close\')"\n>\n\n    \n    {% block sw_settings_product_feature_sets_modal_first_page %}\n    <template v-if="showPageOne">\n        <sw-radio-field\n            {% if VUE3 %}\n            v-model:value="selectedFeatureType"\n            {% else %}\n            v-model="selectedFeatureType"\n            {% endif %}\n            :label="$tc(\'sw-settings-product-feature-sets.modal.labelTitlePageOne\')"\n            block\n            class="sw-settings-product-feature-sets-modal__options"\n            identification="fieldType"\n            :options="settingOptions"\n            {% if VUE3 %}\n            @update:value="onChangeOption"\n            {% else %}\n            @change="onChangeOption"\n            {% endif %}\n        />\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_settings_product_feature_sets_modal_custom_field_list %}\n    <template v-if="showCustomField">\n\n        \n        {% block sw_settings_product_feature_sets_modal_custom_field_list_toolbar %}\n        <div class="sw-product-feature-set-modal-custom-field-list__toolbar">\n\n            \n            {% block sw_settings_product_feature_sets_modal_custom_field_list_toolbar_search %}\n            <sw-simple-search-field\n                v-model="term"\n                size="small"\n                variant="form"\n                @search-term-change="onSearchCustomFields"\n            />\n            {% endblock %}\n\n        </div>\n        {% endblock %}\n\n        <sw-data-grid\n            ref="customFieldGrid"\n            :data-source="customFields"\n            :columns="customFieldColumns"\n            :show-selection="true"\n            :show-actions="false"\n            :is-loading="valuesLoading"\n            identifier="sw-product-feature-set-modal-custom-field-list"\n            @selection-change="setFeatureSelection"\n        >\n\n            \n            {% block sw_settings_product_feature_sets_modal_custom_field_list_column_name %}\n            <template #column-name="{ item }">\n                {{ readCustomFieldLabel(item) }}\n            </template>\n            {% endblock %}\n\n            \n            {% block sw_settings_product_feature_sets_modal_custom_field_list_column_type %}\n            <template #column-type="{ item }">\n                {{ item.type }}\n            </template>\n            {% endblock %}\n\n            \n            {% block sw_settings_product_feature_sets_modal_custom_field_list_pagination %}\n            <template #pagination>\n                <sw-pagination\n                    v-if="customFieldTotal > customFieldCriteria.limit"\n                    :total="customFieldTotal"\n                    :limit="customFieldCriteria.limit"\n                    :page="customFieldCriteria.page"\n                    :auto-hide="false"\n                    @page-change="paginateCustomFieldGrid"\n                />\n            </template>\n            {% endblock %}\n\n        </sw-data-grid>\n\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_settings_product_feature_sets_modal_property_list %}\n    <template v-if="showPropertyGroups">\n\n        \n        {% block sw_settings_product_feature_sets_modal_property_list_toolbar %}\n        <div class="sw-product-feature-set-modal-property-list__toolbar">\n\n            \n            {% block sw_settings_product_feature_sets_modal_property_list_toolbar_search %}\n            <sw-simple-search-field\n                v-model="term"\n                size="small"\n                variant="form"\n                @search-term-change="onSearchPropertyGroups"\n            />\n            {% endblock %}\n\n        </div>\n        {% endblock %}\n\n        <sw-data-grid\n            ref="propertyGroupGrid"\n            :data-source="propertyGroups"\n            :columns="propertyGroupColumns"\n            :show-selection="true"\n            :show-actions="false"\n            :is-loading="valuesLoading"\n            identifier="sw-product-feature-set-modal-property-list"\n            @selection-change="setFeatureSelection"\n        >\n\n            \n            {% block sw_settings_product_feature_sets_modal_property_list_column_property %}\n            <template #column-id="{ item }">\n                {{ item.name }}\n            </template>\n            {% endblock %}\n\n            \n            {% block sw_settings_product_feature_sets_modal_property_list_pagination %}\n            <template #pagination>\n                <sw-pagination\n                    v-if="propertyGroupTotal > propertyGroupCriteria.limit"\n                    :total="propertyGroupTotal"\n                    :limit="propertyGroupCriteria.limit"\n                    :page="propertyGroupCriteria.page"\n                    :auto-hide="false"\n                    @page-change="paginatePropertyGroupGrid"\n                />\n            </template>\n            {% endblock %}\n\n        </sw-data-grid>\n\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_settings_product_feature_sets_modal_product_information_list %}\n    <template v-if="showProductInfo">\n\n        \n        {% block sw_settings_product_feature_sets_modal_product_information_list_toolbar %}{% endblock %}\n\n        <sw-data-grid\n            :data-source="productInfo"\n            :columns="productInformationColumns"\n            :show-selection="true"\n            :show-actions="false"\n            :is-loading="valuesLoading"\n            identifier="sw-product-feature-set-modal-product-information-list"\n            @selection-change="setFeatureSelection"\n        >\n\n            \n            {% block sw_settings_product_feature_sets_modal_product_informationlist_column_property %}\n            <template #column-id="{ item }">\n                {{ item.name }}\n            </template>\n            {% endblock %}\n\n        </sw-data-grid>\n\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_settings_product_feature_sets_modal_footer %}\n    <template #modal-footer>\n\n        \n        {% block sw_settings_product_feature_sets_modal_footer_cancel %}\n        <sw-button\n            size="small"\n            @click="$emit(\'modal-close\')"\n        >\n            {{ $tc(\'sw-settings-product-feature-sets.modal.buttonCancel\') }}\n        </sw-button>\n        {% endblock %}\n\n        \n        {% block sw_settings_product_feature_sets_modal_footer_button_add %}\n        <sw-button\n            v-if="!showPageOne | referencePriceSelected"\n            variant="primary"\n            size="small"\n            :disabled="addButtonDisabled"\n            @click="onConfirm"\n        >\n            {{ $tc(\'sw-settings-product-feature-sets.modal.buttonAdd\') }}\n        </sw-button>\n        {% endblock %}\n\n        \n        {% block sw_settings_product_feature_sets_modal_footer_button_next %}\n        <sw-button\n            v-if="showNextButton"\n            variant="primary"\n            size="small"\n            :disabled="nextButtonDisabled"\n            @click="onClickNext"\n        >\n            {{ $tc(\'sw-settings-product-feature-sets.modal.buttonNext\') }}\n        </sw-button>\n        {% endblock %}\n\n    </template>\n    {% endblock %}\n\n</sw-modal>\n{% endblock %}\n',inject:["repositoryFactory"],props:{productFeatureSet:{type:Object,required:!0}},data:function(){return{showModal:!1,featureType:null,selectedFeatures:new Map,features:[],selectedFeatureType:null,showPageOne:!0,term:"",showCustomField:!1,showPropertyGroups:!1,showProductInfo:!1,nextButtonDisabled:!0,addButtonDisabled:!0,showNextButton:!0,valuesLoading:!1,customFields:[],propertyGroups:[],productInfo:[{id:"fc472b0728ce4000969214a0fa61f2df",type:"product",label:this.$tc("sw-settings-product-feature-sets.modal.label.description"),name:"description"},{id:"f64801aad24a4de7bfea4d312f957258",type:"product",label:this.$tc("sw-settings-product-feature-sets.modal.label.releaseDate"),name:"releaseDate"},{id:"f4a361187eac4f6ea4507ebf20c2e9d7",type:"product",label:this.$tc("sw-settings-product-feature-sets.modal.label.manufacturerNumber"),name:"manufacturerNumber"},{id:"eb6c8ec9b6e24811a176be5a5c9871cf",type:"product",label:this.$tc("sw-settings-product-feature-sets.modal.label.ean"),name:"ean"},{id:"09110f8260804f009ab4536a1ffbc938",type:"product",label:this.$tc("sw-settings-product-feature-sets.modal.label.width"),name:"width"},{id:"e8a48d5fce2f402e8696477b03d7e8e7",type:"product",label:this.$tc("sw-settings-product-feature-sets.modal.label.height"),name:"height"},{id:"e4cf3f607a704f569c3912fb85ada9ad",type:"product",label:this.$tc("sw-settings-product-feature-sets.modal.label.length"),name:"length"},{id:"e06c53dc014a4130a8850fe64e395046",type:"product",label:this.$tc("sw-settings-product-feature-sets.modal.label.weight"),name:"weight"}]}},computed:{productFeatureSetRepository:function(){return this.repositoryFactory.create("product_feature_set")},customFieldsRepository:function(){return this.repositoryFactory.create("custom_field")},propertyGroupsRepository:function(){return this.repositoryFactory.create("property_group")},productFeatureSetCriteria:function(){return new o(1,25)},customFieldCriteria:function(){var e=new o(1,25);e.addSorting(o.sort("type","DESC"));var t=this.getFeaturesIds("customField");return t.length>0&&e.addFilter(o.not("AND",[o.equalsAny("id",t)])),e},propertyGroupCriteria:function(){var e=new o(1,25),t=this.getFeaturesIds("property");return t.length>0&&e.addFilter(o.not("AND",[o.equalsAny("id",t)])),e},referencePriceSelected:function(){return"referencePrice"===this.selectedFeatureType},propertyGroupColumns:function(){return this.getPropertyGroupColumns()},customFieldColumns:function(){return this.getCustomFieldColumns()},productInformationColumns:function(){return this.getProductInformationColumns()},checkIfReferencePriceSelected:function(){return!!this.productFeatureSet.features&&1===this.productFeatureSet.features.filter((function(e){return"referencePrice"===e.type})).length},settingOptions:function(){return[{value:"property",disabled:this.propertyGroups.length<1,name:this.$tc("sw-settings-product-feature-sets.modal.textPropertyLabel")},{value:"customField",disabled:this.customFields.length<1,name:this.$tc("sw-settings-product-feature-sets.modal.textCustomFieldLabel")},{value:"product",disabled:this.productInfo.length<1,name:this.$tc("sw-settings-product-feature-sets.modal.textProductInfoLabel")},{value:"referencePrice",disabled:this.checkIfReferencePriceSelected,name:this.$tc("sw-settings-product-feature-sets.modal.textReferencePriceLabel")}]},customFieldTotal:function(){return this.customFields.total||0},propertyGroupTotal:function(){return this.propertyGroups.total||0}},created:function(){this.createdComponent()},methods:{createdComponent:function(){this.productFeatureSet.features&&(this.features=this.productFeatureSet.features),this.customFieldCriteria.setLimit(10),this.propertyGroupCriteria.setLimit(10),this.getCustomFieldList(),this.getPropertyList(),this.getProductInformationList()},onSearchCustomFields:function(){this.customFieldCriteria.setTerm(this.term),this.getCustomFieldList()},onSearchPropertyGroups:function(){this.propertyGroupCriteria.setTerm(this.term),this.getPropertyList()},onClickNext:function(){switch(this.showPageOne=!1,this.showNextButton=!1,this.featureType=this.selectedFeatureType,this.selectedFeatureType){case"customField":this.showCustomField=!0;break;case"property":this.showPropertyGroups=!0;break;case"product":this.showProductInfo=!0}},getProductInformationList:function(){if(this.productFeatureSet.features){var e=this.productFeatureSet.features.map((function(e){return e.name}));this.productInfo=this.productInfo.filter((function(t){return!("product"===t.type&&e.includes(t.name))}))}},getCustomFieldList:function(){var e=this;return this.getList(this.customFieldsRepository,this.customFieldCriteria,(function(t){e.customFields=t,e.valuesLoading=!1}))},getPropertyList:function(){var e=this;return this.getList(this.propertyGroupsRepository,this.propertyGroupCriteria,(function(t){e.propertyGroups=t,e.valuesLoading=!1}))},getList:function(e,t,s){var n=this;return this.valuesLoading=!0,e.search(t,Shopware.Context.api).then(s).catch((function(){n.valuesLoading=!1}))},getFeaturesIds:function(e){return this.productFeatureSet.features?this.productFeatureSet.features.filter((function(t){return t.type===e})).map((function(e){return e.id})):[]},onChangeOption:function(){this.checkIfReferencePriceIsSelected(),this.addButtonDisabled=!this.referencePriceSelected,this.nextButtonDisabled&&(this.nextButtonDisabled=!1)},checkIfReferencePriceIsSelected:function(){this.showNextButton=!this.referencePriceSelected},onConfirm:function(){var e=this;this.referencePriceSelected?this.features.push({id:"d45b40f6a99c4c2abe66c410369b9d3c",name:"referencePrice",type:"referencePrice",position:this.features.length+1}):this.selectedFeatures.forEach((function(t){return e.setFeatures(t)})),this.productFeatureSet.features=this.features,this.productFeatureSetRepository.save(this.productFeatureSet,n.api).then((function(){e.isSaveSuccessful=!0,e.featureType=null,e.$emit("modal-close")})).catch((function(){e.createNotificationError({title:e.$tc("global.default.error"),message:e.$tc("global.notification.unspecifiedSaveErrorMessage")})})).finally((function(){e.isLoading=!1}))},setFeatures:function(e){var t=this;Object.keys(e).forEach((function(s){t.features.push({id:e[s].id,name:e[s].name,type:t.selectedFeatureType,position:t.features.length+1})}))},setFeatureSelection:function(e,t){if(!this.showCustomField&&!this.showPropertyGroups)return t<1?void(this.addButtonDisabled=!0):(this.selectedFeatures.set(1,e),void(this.addButtonDisabled=!1));var s=(this.showCustomField?this.customFieldCriteria:this.propertyGroupCriteria).page,n=this.selectedFeatures.get(s);if(!n||Object.keys(n).length<1)return this.selectedFeatures.set(s,e),void(this.addButtonDisabled=!1);var o=this.showCustomField?this.$refs.customFieldGrid:this.$refs.propertyGroupGrid;Object.keys(n).forEach((function(e){return o.selectItem(!0,n[e])}))},getPropertyGroupColumns:function(){return[{property:"name",label:"sw-settings-product-feature-sets.modal.textPropertyLabel",primary:!0}]},getCustomFieldColumns:function(){return[{property:"name",label:"sw-settings-product-feature-sets.modal.labelName",primary:!0},{property:"type",label:"sw-settings-product-feature-sets.valuesCard.labelType"}]},getProductInformationColumns:function(){return[{property:"label",label:"sw-settings-product-feature-sets.modal.labelName",primary:!0}]},paginateCustomFieldGrid:function(e){var t=e.page,s=e.limit;this.customFieldCriteria.setPage(t),this.customFieldCriteria.setLimit(s),this.getCustomFieldList()},paginatePropertyGroupGrid:function(e){var t=e.page,s=e.limit;this.propertyGroupCriteria.setPage(t),this.propertyGroupCriteria.setLimit(s),this.getPropertyList()},readCustomFieldLabel:function(e){var t=Shopware.State.get("session").currentLocale,s=Shopware.Context.app.fallbackLocale;return e.config.label[t]||e.config.label[s]}}}},Ms5F:function(e,t,s){},mT9A:function(e,t,s){var n=s("Ms5F");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,s("P8hj").default)("1a0c439c",n,!0,{})}}]);
//# sourceMappingURL=ca09e2b8ded4453f4d4d.js.map