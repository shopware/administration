(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[279],{"3ya6":function(e,n,i){"use strict";i.r(n);var t=i("6lmj"),o=i.n(t),p=(i("utp8"),Shopware.Utils),a=p.debounce,r=p.createId,s=p.object.cloneDeep,l=Shopware.Data.Criteria;n.default={template:'\n{% block sw_import_export_edit_profile_modal_mapping %}\n<div class="sw-import-export-edit-profile-modal-mapping">\n\n    \n    {% block sw_import_export_edit_profile_modal_mapping_toolbar %}\n    <div class="sw-import-export-edit-profile-modal-mapping__toolbar">\n        \n        {% block sw_import_export_edit_profile_modal_mapping_toolbar_search_field %}\n        <sw-simple-search-field\n            v-model="searchTerm"\n            size="small"\n            variant="form"\n            :disabled="!mappingsExist"\n            @search-term-change="onSearch"\n        />\n        {% endblock %}\n\n        \n        {% block sw_import_export_edit_profile_modal_mapping_toolbar_add_mapping %}\n        <sw-button\n            v-tooltip="{\n                message: $tc(\'sw-import-export.profile.addMappingTooltipText\'),\n                disabled: addMappingEnabled,\n                showOnDisabledElements: true\n            }"\n            class="sw-import-export-edit-profile-modal-mapping__add-action"\n            variant="ghost"\n            :disabled="profile.systemDefault || !addMappingEnabled"\n            size="small"\n            @click="onAddMapping"\n        >\n            {{ $tc(\'sw-import-export.profile.addMappingLabel\') }}\n        </sw-button>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    \n    {% block sw_import_export_edit_profile_modal_mapping_grid %}\n    <sw-data-grid\n        v-if="mappingsExist"\n        :data-source="sortedMappings"\n        :compact-mode="false"\n        :show-selection="false"\n        :show-actions="!profile.systemDefault"\n        :columns="mappingColumns"\n        plain-appearance\n        class="sw-import-export-edit-profile-modal-mapping__grid"\n    >\n\n        \n        {% block sw_import_export_edit_profile_modal_mapping_grid_csv_name_column %}\n        <template #column-csvName="{ item, itemIndex }">\n            <sw-text-field\n                {% if VUE3 %}\n                v-model:value="item.mappedKey"\n                {% else %}\n                v-model="item.mappedKey"\n                {% endif %}\n                :name="`mappedKey-${itemIndex}`"\n                :disabled="profile.systemDefault"\n            />\n        </template>\n        {% endblock %}\n\n        \n        {% block sw_import_export_edit_profile_modal_mapping_grid_entry_column %}\n        <template #column-entry="{ item }">\n            <sw-import-export-entity-path-select\n                {% if VUE3 %}\n                v-model:value="item.key"\n                {% else %}\n                v-model="item.key"\n                {% endif %}\n                :languages="languages"\n                :currencies="currencies"\n                :entity-type="profile.sourceEntity"\n                :disabled="profile.systemDefault"\n                :custom-field-sets="customFieldSets"\n            />\n        </template>\n        {% endblock %}\n\n        \n        {% block sw_import_export_edit_profile_modal_mapping_grid_required_column %}\n        <template #column-required="{ item }">\n            <sw-switch-field\n                v-show="isRequiredBySystem(item)"\n                class="sw-import-export-edit-profile-modal-mapping__required-by-user-switch"\n                :value="true"\n                :disabled="true"\n                @change="() => {}"\n            />\n            <sw-switch-field\n                v-show="!isRequiredBySystem(item)"\n                {% if VUE3 %}\n                v-model:value="item.requiredByUser"\n                {% else %}\n                v-model="item.requiredByUser"\n                {% endif %}\n                class="sw-import-export-edit-profile-modal-mapping__required-by-user-switch"\n                :disabled="profile.systemDefault"\n            />\n        </template>\n        {% endblock %}\n\n        \n        {% block sw_import_export_edit_profile_modal_mapping_grid_default_value_column %}\n        <template #column-defaultValue="{ item, itemIndex }">\n            <sw-switch-field\n                {% if VUE3 %}\n                v-model:value="item.useDefaultValue"\n                {% else %}\n                v-model="item.useDefaultValue"\n                {% endif %}\n                :name="`useDefaultValue-${itemIndex}`"\n                :disabled="isDefaultValueCheckboxDisabled()"\n                class="sw-import-export-edit-profile-modal-mapping__default-value-switch"\n            />\n\n            <sw-text-field\n                {% if VUE3 %}\n                v-model:value="item.defaultValue"\n                {% else %}\n                v-model="item.defaultValue"\n                {% endif %}\n                :name="`defaultValue-${itemIndex}`"\n                :disabled="isDefaultValueTextFieldDisabled(item)"\n            />\n        </template>\n        {% endblock %}\n\n        \n        {% block sw_import_export_edit_profile_modal_mapping_grid_position_column %}\n        <template #column-position="{ item, itemIndex }">\n\n            \n            {% block sw_import_export_edit_profile_modal_mapping_grid_position_column_button_group %}\n            <sw-button-group>\n                \n                {% block sw_import_export_edit_profile_modal_mapping_grid_position_column_button_group_up %}\n                <sw-button\n                    size="x-small"\n                    square\n                    :disabled="isFirstMapping(item) || !!searchTerm"\n                    @click="updateSorting(itemIndex, \'up\')"\n                >\n                    \n                    {% block sw_import_export_edit_profile_modal_mapping_grid_position_column_button_group_up_icon %}\n                    <sw-icon\n                        name="regular-chevron-up-xxs"\n                        size="14px"\n                    />\n                    {% endblock %}\n                </sw-button>\n                {% endblock %}\n\n                \n                {% block sw_import_export_edit_profile_modal_mapping_grid_position_column_button_group_down %}\n                <sw-button\n                    size="x-small"\n                    square\n                    :disabled="isLastMapping(item) || !!searchTerm"\n                    @click="updateSorting(itemIndex, \'down\')"\n                >\n                    \n                    {% block sw_import_export_edit_profile_modal_mapping_grid_position_column_button_group_down_icon %}\n                    <sw-icon\n                        name="regular-chevron-down-xxs"\n                        size="14px"\n                    />\n                    {% endblock %}\n                </sw-button>\n                {% endblock %}\n            </sw-button-group>\n            {% endblock %}\n        </template>\n        {% endblock %}\n\n        \n        {% block sw_import_export_edit_profile_modal_mapping_grid_context_menu_delete %}\n        <template #actions="{ item }">\n            <sw-context-menu-item\n                variant="danger"\n                :disabled="profile.systemDefault"\n                @click="onDeleteMapping(item.id)"\n            >\n                {{ $tc(\'sw-import-export.profile.deleteMappingLabel\') }}\n            </sw-context-menu-item>\n        </template>\n        {% endblock %}\n\n    </sw-data-grid>\n    {% endblock %}\n\n    \n    {% block sw_import_export_edit_profile_modal_mapping_empty_state %}\n    <sw-empty-state\n        v-else\n        class="sw-import-export-edit-profile-modal-mapping__empty-state"\n        :title="$tc(\'sw-import-export.profile.mappingEmptyState\')"\n        :absolute="false"\n    />\n    {% endblock %}\n</div>\n{% endblock %}\n',inject:["repositoryFactory","feature"],mixins:[Shopware.Mixin.getByName("notification")],props:{profile:{type:Object,required:!1,default:null},systemRequiredFields:{type:Object,required:!1,default:function(){return{}}}},data:function(){return{searchTerm:null,mappings:[],currencies:[],languages:[],customFieldSets:[],addMappingEnabled:!1}},computed:{languageRepository:function(){return this.repositoryFactory.create("language")},currencyRepository:function(){return this.repositoryFactory.create("currency")},customFieldSetRepository:function(){return this.repositoryFactory.create("custom_field_set")},languageCriteria:function(){var e=new l(1,500);return e.addAssociation("locale"),e},currencyCriteria:function(){return new l(1,500)},customFieldSetCriteria:function(){var e=new l(1,500);return e.addAssociation("relations"),e.addAssociation("customFields"),e},mappingColumns:function(){var e=[{property:"csvName",label:"sw-import-export.profile.mapping.fileValueLabel",allowResize:!0,primary:!0},{property:"entry",label:"sw-import-export.profile.mapping.entityLabel",allowResize:!0,width:"300px"}];return"export"!==this.profile.type&&(e=[].concat(o()(e),[{property:"required",label:"sw-import-export.profile.mapping.isRequired",allowResize:!0,align:"center"},{property:"defaultValue",label:"sw-import-export.profile.mapping.defaultValue",allowResize:!0,width:"300px"}])),this.profile.systemDefault||(e=[].concat(o()(e),[{property:"position",label:"sw-import-export.profile.mapping.position",allowResize:!1,align:"center"}])),e},mappingsExist:function(){return this.profile.mapping.length>0},sortedMappings:function(){return this.profile.mapping.sort((function(e,n){return e.position>n.position?1:e.position<n.position?-1:0}))}},watch:{profile:{handler:function(e){this.toggleAddMappingActionState(e.sourceEntity)},deep:!0}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var e=this;this.toggleAddMappingActionState(this.profile.sourceEntity),this.languageRepository.search(this.languageCriteria).then((function(n){e.languages=n,e.languages.push({locale:{code:"DEFAULT"}})})),this.currencyRepository.search(this.currencyCriteria).then((function(n){e.currencies=n,e.currencies.push({isoCode:"DEFAULT"})})),this.customFieldSetRepository.search(this.customFieldSetCriteria).then((function(n){e.customFieldSets=n})),this.loadMappings()},toggleAddMappingActionState:function(e){this.addMappingEnabled=!!e},onDeleteMapping:function(e){this.profile.mapping=this.profile.mapping.filter((function(n){return n.id!==e})),this.loadMappings()},loadMappings:function(){var e=this;if(this.searchTerm){var n=this.searchTerm.toLowerCase();this.mappings=this.profile.mapping.filter((function(e){var i=e.key.toLowerCase(),t=e.mappedKey.toLowerCase();return!(!i.includes(n)&&!t.includes(n))}))}else this.mappings=[],this.profile.mapping.forEach((function(n){n.id||(n.id=r()),e.mappings.push(n)}))},onAddMapping:function(){this.profile.sourceEntity&&(this.profile.mapping.forEach((function(e){e.position+=1})),this.profile.mapping.unshift({id:r(),key:"",mappedKey:"",position:0}),this.loadMappings())},onSearch:function(){this.debouncedSearch()},debouncedSearch:a((function(){this.loadMappings()}),100),isDefaultValueCheckboxDisabled:function(){return this.profile.systemDefault},isDefaultValueTextFieldDisabled:function(e){return this.profile.systemDefault||!e.useDefaultValue},isRequiredBySystem:function(e){return!(!e||!e.key)&&void 0!==this.systemRequiredFields[e.key]},updateSorting:function(e,n){var i=s(this.sortedMappings),t=i[e];if("up"===n&&e>0){var o=i[e-1];return this.swapItems(o,t),void this.$emit("update-mapping",i)}var p=i.length;if("down"===n&&p-1){var a=i[e+1];this.swapItems(t,a),this.$emit("update-mapping",i)}},swapItems:function(e,n){var i=e.position;e.position=n.position,n.position=i},isFirstMapping:function(e){return 0===e.position},isLastMapping:function(e){var n=this.profile.mapping.length-1;return e.position===n}}}},mphz:function(e,n,i){},utp8:function(e,n,i){var t=i("mphz");t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,i("P8hj").default)("9628ac20",t,!0,{})}}]);