(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[97429],{620580:function(){},397429:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return n}}),r(882394);var n={template:'\n{% block sw_product_variants_delivery_order %}\n<div class="sw-product-variants-delivery-order">\n    \n    {% block sw_product_variants_delivery_order_groups %}\n    <div class="sw-product-variants-delivery-order__groups">\n        \n        {% block sw_product_variants_delivery_order_groups_sw_tree %}\n        <sw-tree\n            v-if="orderObjects.length"\n            :items="orderObjects"\n            :searchable="false"\n            :disable-context-menu="true"\n            bind-items-to-folder\n            @drag-end="orderChanged"\n        >\n\n            <template\n                #items="{ treeItems, sortable, draggedItem, disableContextMenu, onChangeRoute }"\n            >\n                <sw-tree-item\n                    v-for="item in treeItems"\n                    :key="item.id"\n                    :item="item"\n                    :disable-context-menu="true"\n                    :sortable="true"\n                />\n            </template>\n        </sw-tree>\n        {% endblock %}\n\n        \n        {% block sw_product_variants_delivery_order_loader %}\n        <sw-loader v-else />\n        {% endblock %}\n    </div>\n    {% endblock %}\n</div>\n{% endblock %}\n',props:{product:{type:Object,required:!0},selectedGroups:{type:Array,required:!0}},data(){return{groups:[],orderObjects:[]}},mounted(){this.mountedComponent()},methods:{mountedComponent(){this.createOrderObjects()},createOrderObjects(){let e=[],t=[...this.selectedGroups];this.product.variantListingConfig.configuratorGroupConfig&&this.product.variantListingConfig.configuratorGroupConfig.length>0&&(e=this.product.variantListingConfig.configuratorGroupConfig.reduce((e,r)=>{let n=t.find(e=>e.id===r.id);return n&&(e.push(n),t.splice(t.indexOf(n),1)),e},[]));let r=(e=[...e,...t]).map((t,r)=>{let n=this.getOptionsForGroup(t.id);return{id:t.id,name:t.translated.name,childCount:n.length,parentId:null,afterId:r>0?e[r-1].id:null,storeObject:t}}),n=r.reduce((e,t)=>{let r=this.getOptionsForGroup(t.id);return[...e,...r.sort((e,t)=>e.position-t.position).map((e,t)=>{let n=e.option,i=null;return t>0&&(i=r[t-1].option.id),{id:n.id,name:n.translated.name,childCount:0,parentId:n.groupId,afterId:i,storeObject:e}})]},[]);this.orderObjects=[...r,...n]},getOptionsForGroup(e){return this.product.configuratorSettings.filter(t=>!t.isDeleted&&t.option.groupId===e)},orderChanged(){let e=this.orderObjects.filter(e=>null===e.parentId);this.product.variantListingConfig.configuratorGroupConfig||(this.product.variantListingConfig.configuratorGroupConfig=[]);let t=[],r=e.find(e=>null===e.afterId);e.forEach(()=>{void 0!==r&&(t.push(r.id),r=e.find(e=>e.afterId===r.id))});let n=[],i=this.product.variantListingConfig.configuratorGroupConfig??[];i.length?t.forEach(e=>{let t=i.find(t=>t.id===e);t?n.push(t):n.push({id:e,expressionForListings:!1,representation:"box"})}):t.forEach(e=>{n.push({id:e,expressionForListings:!1,representation:"box"})}),this.product.variantListingConfig.configuratorGroupConfig=n;let o=this.orderObjects.filter(e=>e.parentId);e.forEach(e=>{let t=o.filter(t=>t.parentId===e.id),r=t.find(e=>null===e.afterId);t.forEach((e,n)=>{void 0!==r&&(r.storeObject.position=n+1,r=t.find(e=>e.afterId===r.id))})})}}}},882394:function(e,t,r){var n=r(620580);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),r(745346).Z("eaa55138",n,!0,{})}}]);