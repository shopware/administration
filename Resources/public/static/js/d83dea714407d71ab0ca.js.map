{"version":3,"sources":["webpack:///./src/module/sw-customer/component/sw-customer-address-form/sw-customer-address-form.scss","webpack:///./src/module/sw-customer/constant/sw-customer.constant.js","webpack:///./src/module/sw-customer/component/sw-customer-address-form/index.js","webpack:///./src/module/sw-customer/component/sw-customer-address-form/sw-customer-address-form.html.twig"],"names":["content","__esModule","default","module","i","locals","exports","add","Object","freeze","ACCOUNT_TYPE_PRIVATE","ACCOUNT_TYPE_BUSINESS","_Shopware","Shopware","Defaults","EntityDefinition","Criteria","Data","mapPropertyErrors","Component","getComponentHelper","template","inject","props","customer","type","required","address","this","addressRepository","create","context","disabled","Boolean","data","country","states","computed","_objectSpread","repositoryFactory","addresses","entity","source","countryRepository","countryStateRepository","countryId","get","set","countryCriteria","criteria","addSorting","sort","stateCriteria","addFilter","equals","salutationCriteria","not","defaultSalutationId","hasStates","length","isBusinessAccountType","_this$customer","accountType","CUSTOMER","watch","immediate","handler","newId","oldId","_this","countryStateId","then","getCountryStates","Promise","resolve","newVal","company","State","dispatch","expression","concat","getEntityName","id","properties","flags","zipcode","methods","_this2","search","response"],"mappings":"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","file":"static/js/d83dea714407d71ab0ca.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--15-1!../../../../../node_modules/css-loader/dist/cjs.js??ref--15-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--15-3!./sw-customer-address-form.scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6366fda4\", content, true, {});","/**\n * @package checkout\n */\n\nconst ACCOUNT_TYPE_PRIVATE = 'private';\nconst ACCOUNT_TYPE_BUSINESS = 'business';\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default Object.freeze({\n    ACCOUNT_TYPE_PRIVATE,\n    ACCOUNT_TYPE_BUSINESS,\n});\n","import template from './sw-customer-address-form.html.twig';\nimport './sw-customer-address-form.scss';\nimport CUSTOMER from '../../constant/sw-customer.constant';\n\n/**\n * @package checkout\n */\n\nconst { Defaults, EntityDefinition } = Shopware;\nconst { Criteria } = Shopware.Data;\nconst { mapPropertyErrors } = Shopware.Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: ['repositoryFactory'],\n\n    props: {\n        customer: {\n            type: Object,\n            required: true,\n        },\n\n        address: {\n            type: Object,\n            required: true,\n            default() {\n                return this.addressRepository.create(this.context);\n            },\n        },\n\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n    },\n\n    data() {\n        return {\n            country: null,\n            states: [],\n        };\n    },\n\n    computed: {\n        addressRepository() {\n            return this.repositoryFactory.create(\n                this.customer.addresses.entity,\n                this.customer.addresses.source,\n            );\n        },\n\n        countryRepository() {\n            return this.repositoryFactory.create('country');\n        },\n\n        countryStateRepository() {\n            return this.repositoryFactory.create('country_state');\n        },\n\n        ...mapPropertyErrors('address', [\n            'company',\n            'department',\n            'salutationId',\n            'title',\n            'firstName',\n            'lastName',\n            'street',\n            'additionalAddressLine1',\n            'additionalAddressLine2',\n            'zipcode',\n            'city',\n            'countryId',\n            'phoneNumber',\n            'vatId',\n            'countryStateId',\n            'salutationId',\n            'city',\n            'street',\n            'zipcode',\n            'lastName',\n            'firstName',\n        ]),\n\n        countryId: {\n            get() {\n                return this.address.countryId;\n            },\n\n            set(countryId) {\n                this.address.countryId = countryId;\n            },\n        },\n\n        countryCriteria() {\n            const criteria = new Criteria(1, 25);\n            criteria.addSorting(Criteria.sort('position', 'ASC', true))\n                .addSorting(Criteria.sort('name', 'ASC'));\n            return criteria;\n        },\n\n        stateCriteria() {\n            if (!this.countryId) {\n                return null;\n            }\n\n            const criteria = new Criteria(1, 25);\n            criteria.addFilter(Criteria.equals('countryId', this.countryId))\n                .addSorting(Criteria.sort('position', 'ASC', true))\n                .addSorting(Criteria.sort('name', 'ASC'));\n            return criteria;\n        },\n\n        salutationCriteria() {\n            const criteria = new Criteria(1, 25);\n\n            criteria.addFilter(Criteria.not('or', [\n                Criteria.equals('id', Defaults.defaultSalutationId),\n            ]));\n\n            return criteria;\n        },\n\n        hasStates() {\n            return this.states.length > 0;\n        },\n\n        isBusinessAccountType() {\n            return this.customer?.accountType === CUSTOMER.ACCOUNT_TYPE_BUSINESS;\n        },\n    },\n\n    watch: {\n        countryId: {\n            immediate: true,\n            handler(newId, oldId) {\n                if (typeof oldId !== 'undefined') {\n                    this.address.countryStateId = null;\n                }\n\n                if (!this.countryId) {\n                    this.country = null;\n                    return Promise.resolve();\n                }\n\n                return this.countryRepository.get(this.countryId).then((country) => {\n                    this.country = country;\n                    this.getCountryStates();\n                });\n            },\n        },\n\n        'address.company'(newVal) {\n            if (!newVal) {\n                return;\n            }\n\n            this.customer.company = newVal;\n        },\n\n        'country.forceStateInRegistration'(newVal) {\n            if (!newVal) {\n                Shopware.State.dispatch(\n                    'error/removeApiError',\n                    {\n                        expression: `${this.address.getEntityName()}.${this.address.id}.countryStateId`,\n                    },\n                );\n            }\n\n            const definition = EntityDefinition.get(this.address.getEntityName());\n\n            definition.properties.countryStateId.flags.required = newVal;\n        },\n\n        'country.postalCodeRequired'(newVal) {\n            if (!newVal) {\n                Shopware.State.dispatch(\n                    'error/removeApiError',\n                    {\n                        expression: `${this.address.getEntityName()}.${this.address.id}.zipcode`,\n                    },\n                );\n            }\n\n            const definition = EntityDefinition.get(this.address.getEntityName());\n\n            definition.properties.zipcode.flags.required = newVal;\n        },\n    },\n\n    methods: {\n        getCountryStates() {\n            if (!this.country) {\n                return Promise.resolve();\n            }\n\n            return this.countryStateRepository.search(this.stateCriteria).then((response) => {\n                this.states = response;\n            });\n        },\n    },\n};\n","export default \"\\n{% block sw_customer_address_form %}\\n<div class=\\\"sw-customer-address-form\\\">\\n    \\n    {% block sw_customer_address_form_container %}\\n    <sw-container\\n        columns=\\\"repeat(auto-fit, minmax(250px, 1fr))\\\"\\n        gap=\\\"0px 30px\\\"\\n    >\\n        \\n        {% block sw_customer_address_form_company_field %}\\n        <sw-text-field\\n            {% if VUE3 %}\\n            v-model:value=\\\"address.company\\\"\\n            {% else %}\\n            v-model=\\\"address.company\\\"\\n            {% endif %}\\n            :required=\\\"isBusinessAccountType\\\"\\n            :label=\\\"$tc('sw-customer.addressForm.labelCompany')\\\"\\n            :error=\\\"disabled ? null : addressCompanyError\\\"\\n            :disabled=\\\"disabled\\\"\\n            :placeholder=\\\"$tc('sw-customer.addressForm.placeholderCompany')\\\"\\n        />\\n        {% endblock %}\\n\\n        \\n        {% block sw_customer_address_form_department_field %}\\n        <sw-text-field\\n            {% if VUE3 %}\\n            v-model:value=\\\"address.department\\\"\\n            {% else %}\\n            v-model=\\\"address.department\\\"\\n            {% endif %}\\n            :label=\\\"$tc('sw-customer.addressForm.labelDepartment')\\\"\\n            :error=\\\"disabled ? null : addressDepartmentError\\\"\\n            :disabled=\\\"disabled\\\"\\n            :placeholder=\\\"$tc('sw-customer.addressForm.placeholderDepartment')\\\"\\n        />\\n        {% endblock %}\\n\\n        \\n        {% block sw_customer_address_form_salutation_title_container %}\\n        \\n        {% block sw_customer_address_form_salutation_field %}\\n        <sw-entity-single-select\\n            {% if VUE3 %}\\n            v-model:value=\\\"address.salutationId\\\"\\n            {% else %}\\n            v-model=\\\"address.salutationId\\\"\\n            {% endif %}\\n            class=\\\"sw-customer-address-form__salutation-select\\\"\\n            entity=\\\"salutation\\\"\\n            :label=\\\"$tc('sw-customer.addressForm.labelSalutation')\\\"\\n            :placeholder=\\\"$tc('sw-customer.addressForm.placeholderSalutation')\\\"\\n            :error=\\\"disabled ? null : addressSalutationIdError\\\"\\n            :disabled=\\\"disabled\\\"\\n            :criteria=\\\"salutationCriteria\\\"\\n            label-property=\\\"displayName\\\"\\n        />\\n        {% endblock %}\\n\\n        \\n        {% block sw_customer_address_form_title_field %}\\n        <sw-text-field\\n            {% if VUE3 %}\\n            v-model:value=\\\"address.title\\\"\\n            {% else %}\\n            v-model=\\\"address.title\\\"\\n            {% endif %}\\n            :label=\\\"$tc('sw-customer.addressForm.labelTitle')\\\"\\n            :placeholder=\\\"$tc('sw-customer.addressForm.placeholderTitle')\\\"\\n            :error=\\\"disabled ? null : addressTitleError\\\"\\n            :disabled=\\\"disabled\\\"\\n        />\\n        {% endblock %}\\n        {% endblock %}\\n\\n        \\n        {% block sw_customer_address_form_first_name_field %}\\n        <sw-text-field\\n            {% if VUE3 %}\\n            v-model:value=\\\"address.firstName\\\"\\n            {% else %}\\n            v-model=\\\"address.firstName\\\"\\n            {% endif %}\\n            :label=\\\"$tc('sw-customer.addressForm.labelFirstName')\\\"\\n            :placeholder=\\\"$tc('sw-customer.addressForm.placeholderFirstName')\\\"\\n            validation=\\\"required\\\"\\n            required\\n            :error=\\\"disabled ? null : addressFirstNameError\\\"\\n            :disabled=\\\"disabled\\\"\\n        />\\n        {% endblock %}\\n\\n        \\n        {% block sw_customer_address_form_last_name_field %}\\n        <sw-text-field\\n            {% if VUE3 %}\\n            v-model:value=\\\"address.lastName\\\"\\n            {% else %}\\n            v-model=\\\"address.lastName\\\"\\n            {% endif %}\\n            :label=\\\"$tc('sw-customer.addressForm.labelLastName')\\\"\\n            :placeholder=\\\"$tc('sw-customer.addressForm.placeholderLastName')\\\"\\n            validation=\\\"required\\\"\\n            required\\n            :error=\\\"disabled ? null : addressLastNameError\\\"\\n            :disabled=\\\"disabled\\\"\\n        />\\n        {% endblock %}\\n\\n        \\n        {% block sw_customer_address_form_street_field %}\\n        <sw-text-field\\n            {% if VUE3 %}\\n            v-model:value=\\\"address.street\\\"\\n            {% else %}\\n            v-model=\\\"address.street\\\"\\n            {% endif %}\\n            :label=\\\"$tc('sw-customer.addressForm.labelStreet')\\\"\\n            :placeholder=\\\"$tc('sw-customer.addressForm.placeholderStreet')\\\"\\n            validation=\\\"required\\\"\\n            required\\n            :error=\\\"disabled ? null : addressStreetError\\\"\\n            :disabled=\\\"disabled\\\"\\n        />\\n        {% endblock %}\\n\\n        \\n        {% block sw_customer_address_form_additional_address_line_1_field %}\\n        <sw-text-field\\n            {% if VUE3 %}\\n            v-model:value=\\\"address.additionalAddressLine1\\\"\\n            {% else %}\\n            v-model=\\\"address.additionalAddressLine1\\\"\\n            {% endif %}\\n            :label=\\\"$tc('sw-customer.addressForm.labelAdditionalAddressLine1')\\\"\\n            :placeholder=\\\"$tc('sw-customer.addressForm.placeholderAdditionalAddressLine1')\\\"\\n            :error=\\\"disabled ? null : addressAdditionalAddressLine1Error\\\"\\n            :disabled=\\\"disabled\\\"\\n        />\\n        {% endblock %}\\n\\n        \\n        {% block sw_customer_address_form_additional_address_line_2_field %}\\n        <sw-text-field\\n            {% if VUE3 %}\\n            v-model:value=\\\"address.additionalAddressLine2\\\"\\n            {% else %}\\n            v-model=\\\"address.additionalAddressLine2\\\"\\n            {% endif %}\\n            :label=\\\"$tc('sw-customer.addressForm.labelAdditionalAddressLine2')\\\"\\n            :placeholder=\\\"$tc('sw-customer.addressForm.placeholderAdditionalAddressLine2')\\\"\\n            :error=\\\"disabled ? null : addressAdditionalAddressLine2Error\\\"\\n            :disabled=\\\"disabled\\\"\\n        />\\n        {% endblock %}\\n\\n        \\n        {% block sw_customer_address_form_zipcode_city_container %}\\n        \\n        {% block sw_customer_address_form_zipcode_field %}\\n        <sw-text-field\\n            {% if VUE3 %}\\n            v-model:value=\\\"address.zipcode\\\"\\n            {% else %}\\n            v-model=\\\"address.zipcode\\\"\\n            {% endif %}\\n            :label=\\\"$tc('sw-customer.addressForm.labelZipcode')\\\"\\n            :placeholder=\\\"$tc('sw-customer.addressForm.placeholderZipcode')\\\"\\n            validation=\\\"required\\\"\\n            :required=\\\"country && country.postalCodeRequired\\\"\\n            :error=\\\"disabled ? null : addressZipcodeError\\\"\\n            :disabled=\\\"disabled\\\"\\n        />\\n        {% endblock %}\\n\\n        \\n        {% block sw_customer_address_form_city_field %}\\n        <sw-text-field\\n            {% if VUE3 %}\\n            v-model:value=\\\"address.city\\\"\\n            {% else %}\\n            v-model=\\\"address.city\\\"\\n            {% endif %}\\n            :label=\\\"$tc('sw-customer.addressForm.labelCity')\\\"\\n            :placeholder=\\\"$tc('sw-customer.addressForm.placeholderCity')\\\"\\n            validation=\\\"required\\\"\\n            required\\n            :error=\\\"disabled ? null : addressCityError\\\"\\n            :disabled=\\\"disabled\\\"\\n        />\\n        {% endblock %}\\n        {% endblock %}\\n\\n        \\n        {% block sw_customer_address_form_country_field %}\\n        <sw-entity-single-select\\n            {% if VUE3 %}\\n            v-model:value=\\\"countryId\\\"\\n            {% else %}\\n            v-model=\\\"countryId\\\"\\n            {% endif %}\\n            class=\\\"sw-customer-address-form__country-select\\\"\\n            entity=\\\"country\\\"\\n            :criteria=\\\"countryCriteria\\\"\\n            :label=\\\"$tc('sw-customer.addressForm.labelCountry')\\\"\\n            :placeholder=\\\"$tc('sw-customer.addressForm.placeholderCountry')\\\"\\n            validation=\\\"required\\\"\\n            required\\n            :error=\\\"disabled ? null : addressCountryIdError\\\"\\n            :disabled=\\\"disabled\\\"\\n            show-clearable-button\\n        />\\n        {% endblock %}\\n\\n        \\n        {% block sw_customer_address_form_state_field %}\\n        <div\\n            v-if=\\\"countryId && hasStates\\\"\\n            class=\\\"sw-customer-address-form__state-select-placeholder\\\"\\n        >\\n            <sw-entity-single-select\\n                {% if VUE3 %}\\n                v-model:value=\\\"address.countryStateId\\\"\\n                {% else %}\\n                v-model=\\\"address.countryStateId\\\"\\n                {% endif %}\\n                class=\\\"sw-customer-address-form__state-select\\\"\\n                entity=\\\"country_state\\\"\\n                :criteria=\\\"stateCriteria\\\"\\n                :label=\\\"$tc('sw-customer.addressForm.labelState')\\\"\\n                :placeholder=\\\"$tc('sw-customer.addressForm.placeholderState')\\\"\\n                :required=\\\"country && country.forceStateInRegistration\\\"\\n                :error=\\\"disabled ? null : addressCountryStateIdError\\\"\\n                :disabled=\\\"disabled\\\"\\n                show-clearable-button\\n            />\\n        </div>\\n        {% endblock %}\\n\\n        \\n        {% block sw_customer_address_form_phone_number_field %}\\n        <sw-text-field\\n            {% if VUE3 %}\\n            v-model:value=\\\"address.phoneNumber\\\"\\n            {% else %}\\n            v-model=\\\"address.phoneNumber\\\"\\n            {% endif %}\\n            :label=\\\"$tc('sw-customer.addressForm.labelPhoneNumber')\\\"\\n            :placeholder=\\\"$tc('sw-customer.addressForm.placeholderPhoneNumber')\\\"\\n            :error=\\\"disabled ? null : addressPhoneNumberError\\\"\\n            :disabled=\\\"disabled\\\"\\n        />\\n        {% endblock %}\\n\\n        <slot v-bind=\\\"{ disabled }\\\">\\n            \\n            {% block sw_customer_address_form_extension_slot %}\\n            {% endblock %}\\n        </slot>\\n    </sw-container>\\n    {% endblock %}\\n</div>\\n{% endblock %}\\n\";"],"sourceRoot":""}