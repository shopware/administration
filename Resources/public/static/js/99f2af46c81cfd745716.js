(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[47560],{892494:function(){},847560:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return l}}),n(720252);let{Data:i,Mixin:t}=Shopware,{Criteria:o}=i;var l={template:'\n{% block sw_users_permissions_role_listing %}\n<sw-card\n    class="sw-users-permissions-role-listing"\n    position-identifier="sw-users-permissions-role-listing"\n    :title="$tc(\'sw-users-permissions.roles.general.cardLabel\')"\n>\n\n    \n    {% block sw_users_permissions_role_listing_toolbar %}\n    <div class="sw-users-permissions-role-listing__toolbar">\n        <sw-container\n            columns="1fr minmax(100px, 200px)"\n            gap="0 10px"\n        >\n            \n            {% block sw_users_permissions_role_listing_toolbar_search_field %}\n            <sw-simple-search-field\n                v-model:value="term"\n                size="small"\n                variant="form"\n                @search-term-change="onSearch"\n            />\n            {% endblock %}\n\n            \n            {% block sw_users_permissions_role_listing_toolbar_add_role_button %}\n            <sw-button\n                :router-link="{ name: \'sw.users.permissions.role.detail\' }"\n                variant="ghost"\n                size="small"\n                :disabled="!acl.can(\'users_and_permissions.creator\') || undefined"\n                class="sw-users-permissions-role-listing__add-role-button"\n            >\n                {{ $tc(\'sw-users-permissions.roles.general.labelCreateNewRole\') }}\n            </sw-button>\n            {% endblock %}\n        </sw-container>\n    </div>\n    {% endblock %}\n\n    \n    {% block sw_users_permissions_role_listing_verify_modal %}\n    <sw-verify-user-modal\n        v-if="confirmPasswordModal"\n        @verified="deleteRole"\n        @close="onCloseConfirmPasswordModal"\n    />\n    {% endblock %}\n\n    \n    {% block sw_users_permissions_role_listing_grid %}\n    <sw-data-grid\n        v-if="showListingResults"\n        :data-source="roles"\n        :columns="rolesColumns"\n        identifier="roles-grid"\n        :show-settings="true"\n        :show-selection="false"\n        :is-loading="isLoading"\n        @column-sort="onSortColumn"\n    >\n\n        \n        {% block sw_users_permissions_role_listing_grid_actions %}\n        <template #actions="{ item }">\n            \n            {% block sw_users_permissions_role_listing_grid_actions_edit %}\n            <sw-context-menu-item\n                :router-link="{ name: \'sw.users.permissions.role.detail\', params: { id: item.id } }"\n                class="sw-users-permissions-role-listing__context-menu-edit"\n                :disabled="!acl.can(\'users_and_permissions.editor\') || undefined"\n            >\n                {{ $tc(\'sw-users-permissions.roles.role-grid.contextMenuEdit\') }}\n            </sw-context-menu-item>\n            {% endblock %}\n\n            \n            {% block sw_users_permissions_role_listing_grid_actions_delete %}\n            <sw-context-menu-item\n                variant="danger"\n                class="sw-users-permissions-role-listing__context-menu-delete"\n                :disabled="!acl.can(\'users_and_permissions.deleter\') || undefined"\n                @click="onDelete(item)"\n            >\n                {{ $tc(\'sw-users-permissions.roles.role-grid.contextMenuDelete\') }}\n            </sw-context-menu-item>\n            {% endblock %}\n        </template>\n        {% endblock %}\n\n        \n        {% block sw_users_permissions_role_listing_grid_columns %}\n        <template #column-name="{ item }">\n            \n            {% block sw_users_permissions_role_listing_grid_columns_name %}\n            <router-link :to="{ name: \'sw.users.permissions.role.detail\', params: { id: item.id } }">\n                {{ item.name }}\n            </router-link>\n            {% endblock %}\n        </template>\n        {% endblock %}\n\n        \n        {% block sw_users_permissions_role_listing_grid_action_modals %}\n        <template #action-modals="{ item }">\n            \n            {% block sw_users_permissions_role_listing_grid_actions_modals_modal %}\n            <sw-modal\n                v-if="getItemToDelete(item)"\n                :title="$tc(\'sw-users-permissions.roles.role-grid.titleModalDelete\')"\n                variant="small"\n                @modal-close="onCloseDeleteModal"\n            >\n                \n                {% block sw_users_permissions_role_listing_grid_actions_modals_modal_delete_text %}\n                <p class="sw-users-permissions-role-listing__confirm-delete-text">\n                    {{ $tc(\'sw-users-permissions.roles.role-grid.textModalDelete\', 0, { name: item.name }) }}\n                </p>\n                {% endblock %}\n\n                \n                {% block sw_users_permissions_role_listing_grid_actions_modals_modal_footer %}\n                <template #modal-footer>\n                    \n                    {% block sw_users_permissions_role_listing_grid_actions_modals_modal_close_delete %}\n                    <sw-button\n                        size="small"\n                        @click="onCloseDeleteModal"\n                    >\n                        {{ $tc(\'sw-users-permissions.roles.role-grid.labelButtonCancel\') }}\n                    </sw-button>\n                    {% endblock %}\n\n                    \n                    {% block sw_users_permissions_role_listing_grid_actions_modals_modal_confirm_delete %}\n                    <sw-button\n                        variant="danger"\n                        size="small"\n                        @click="onConfirmDelete(item)"\n                    >\n                        {{ $tc(\'sw-users-permissions.roles.role-grid.labelButtonDelete\') }}\n                    </sw-button>\n                    {% endblock %}\n                </template>\n                {% endblock %}\n            </sw-modal>\n            {% endblock %}\n        </template>\n        {% endblock %}\n\n        <template #pagination>\n            \n            {% block sw_users_permissions_role_listing_grid_pagination %}\n            <sw-pagination\n                :page="page"\n                :limit="limit"\n                :total="total"\n                :auto-hide="true"\n                @page-change="onPageChange"\n            />\n            {% endblock %}\n        </template>\n    </sw-data-grid>\n    {% endblock %}\n\n    \n    {% block sw_users_permissions_role_listing_empty_state %}\n    <sw-empty-state\n        v-else\n        :absolute="false"\n        :title="$tc(\'sw-users-permissions.roles.role-grid.messageEmptyTitle\')"\n        :subline="$tc(\'sw-users-permissions.roles.role-grid.messageEmptySubline\')"\n    />\n    {% endblock %}\n\n</sw-card>\n{% endblock %}\n',compatConfig:Shopware.compatConfig,inject:["repositoryFactory","acl"],emits:["get-list"],mixins:[t.getByName("listing"),t.getByName("notification")],data(){return{roles:[],isLoading:!1,itemToDelete:null,confirmDelete:null,disableRouteParams:!0,confirmPasswordModal:!1}},computed:{rolesColumns(){return[{property:"name",label:this.$tc("sw-users-permissions.roles.role-grid.labelName")},{property:"description",label:this.$tc("sw-users-permissions.roles.role-grid.labelDescription")}]},roleRepository(){return this.repositoryFactory.create("acl_role")},roleCriteria(){let e=new o(this.page,this.limit);return e.addFilter(o.equals("app.id",null)),e.addFilter(o.equals("deletedAt",null)),this.term&&e.setTerm(this.term),this.sortBy&&e.addSorting(o.sort(this.sortBy,this.sortDirection||"ASC")),e},showListingResults(){return!this.isLoading&&(this.roles&&this.roles.length>0||this.term&&this.term.length<=0)}},created(){this.createdComponent()},methods:{createdComponent(){this.$emit("get-list")},getList(){return this.isLoading=!0,this.roles=[],this.roleRepository.search(this.roleCriteria).then(e=>{this.total=e.total,this.roles=e}).finally(()=>{this.isLoading=!1})},onSearch(e){this.term=e,this.$emit("get-list")},getItemToDelete(e){return!!this.itemToDelete&&this.itemToDelete.id===e.id},onDelete(e){this.itemToDelete=e},onCloseDeleteModal(){this.itemToDelete=null},onConfirmDelete(){this.confirmDelete=this.itemToDelete,this.onCloseDeleteModal(),this.confirmPasswordModal=!0},deleteRole(e){this.confirmPasswordModal=!1;let s=this.confirmDelete;this.confirmDelete=null,this.roleRepository.delete(s.id,e).then(()=>{this.createNotificationSuccess({message:this.$tc("sw-users-permissions.roles.role-grid.notification.deleteSuccess.message",0,{name:s.name})}),this.$emit("get-list")}).catch(()=>{this.createNotificationError({message:this.$tc("sw-users-permissions.roles.role-grid.notification.deleteError.message",0,{name:s.name})})})},onCloseConfirmPasswordModal(){this.confirmPasswordModal=!1}}}},720252:function(e,s,n){var i=n(892494);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),n(745346).Z("418a7920",i,!0,{})}}]);