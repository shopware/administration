(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[46270],{181319:function(){},883185:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n(978527);n(217908);var a=n(869599),s=n(195866);n(502127),n(952754);let{Mixin:l}=Shopware,r=["onChange","onClose","onDestroy","onMonthChange","onOpen","onYearChange","onValueUpdate","onDayCreate","onParseConfig","onReady","onPreCalendarPosition","onKeyDown"];var o={template:'\n{% block sw_datepicker %}\n<sw-contextual-field\n    class="sw-field--datepicker"\n    :class="{ \'has--focus\': isDatepickerOpen }"\n    v-bind="{\n        ...additionalAttrs,\n        ...inheritanceAttrs\n    }"\n    :required="required"\n    :name="formFieldName"\n    :disabled="disabled"\n    @sw-contextual-field-suffix-clicked="openDatepicker"\n    @inheritance-restore="$emit(\'inheritance-restore\', $event)"\n    @inheritance-remove="$emit(\'inheritance-remove\', $event)"\n    @base-field-mounted="createFlatpickrInstance"\n    v-on="additionalEventListeners"\n>\n\n    <template #sw-field-input="{ identification, disabled }">\n        \n        <input\n            :id="identification"\n            ref="flatpickrInput"\n            type="text"\n            :name="identification"\n            :disabled="disabled"\n            :placeholder="placeholderText"\n        >\n        <sw-icon\n            v-if="!required && timezoneFormattedValue && !disabled"\n            class="sw-field--datepicker__button-reset-value"\n            name="regular-times-xs"\n            @click="unsetValue"\n        />\n    </template>\n\n    <template\n        v-if="showTimeZoneHint"\n        #hint\n    >\n        <sw-icon\n            name="solid-clock"\n            size="12px"\n        />\n        {{ timeZoneHint }}\n    </template>\n\n    <template #sw-contextual-field-suffix>\n        <sw-icon\n            :name="suffixName"\n            @click.stop="openDatepicker"\n        />\n    </template>\n\n    <template #label>\n        <slot name="label"></slot>\n    </template>\n</sw-contextual-field>\n{% endblock %}\n',inheritAttrs:!1,compatConfig:Shopware.compatConfig,emits:["update:value","inheritance-restore","inheritance-remove"],inject:["feature"],mixins:[l.getByName("sw-form-field"),l.getByName("remove-api-error")],props:{value:{type:String,required:!1,default:null},config:{type:Object,default(){return{}}},dateType:{type:String,default:"date",validValues:["time","date","datetime"],validator(e){return["time","date","datetime"].includes(e)}},placeholder:{type:String,default:"",required:!1},required:{type:Boolean,default:!1,required:!1},disabled:{type:Boolean,default:!1,required:!1},hideHint:{type:Boolean,default:!1,required:!1}},data(){return{flatpickrInstance:null,isDatepickerOpen:!1,defaultConfig:{}}},computed:{locale(){return Shopware.State.getters.adminLocaleLanguage||"en"},currentFlatpickrConfig(){return null===this.flatpickrInstance?{}:this.flatpickrInstance.config},placeholderText(){return this.placeholder.length>0?this.placeholder:null===this.flatpickrInstance?this.defaultConfig.altFormat:this.flatpickrInstance.config.altFormat},suffixName(){return this.noCalendar?"regular-clock":"regular-calendar"},noCalendar(){return"time"===this.dateType},enableTime(){return this.noCalendar||"datetime"===this.dateType},additionalEventListeners(){let e={};return this.isCompatEnabled("INSTANCE_LISTENERS")&&Object.keys(this.$listeners).forEach(t=>{["change","input"].includes(t)||(e[t]=this.$listeners[t])}),e},additionalAttrs(){let e={};return Object.keys(this.$attrs).forEach(t=>{["onChange","onInput"].includes(t)||(e[t]=this.$attrs[t])}),e},userTimeZone(){return Shopware?.State?.get("session")?.currentUser?.timeZone??"UTC"},timezoneFormattedValue:{get(){return this.value?["time","date"].includes(this.dateType)?this.value:(0,a.Z)(this.value,this.userTimeZone).toISOString():null},set(e){if(null===e){this.$emit("update:value",null);return}if(["time","date"].includes(this.dateType)){this.$emit("update:value",e);return}let t=(0,s.Z)(new Date(e),this.userTimeZone);this.$emit("update:value",t.toISOString())}},showTimeZoneHint(){return!this.hideHint},timeZoneHint(){return"datetime"===this.dateType?this.userTimeZone:"UTC"}},watch:{config:{deep:!0,handler(){this.updateFlatpickrInstance()}},dateType(){this.createConfig(),this.updateFlatpickrInstance()},locale:{immediate:!0,handler(){this.defaultConfig.locale=this.locale,this.updateFlatpickrInstance(this.config)}},timezoneFormattedValue(e){this.setDatepickerValue(e)},disabled(e){this.flatpickrInstance._input.disabled=e}},created(){this.createdComponent()},mounted(){this.mountedComponent()},methods:{createdComponent(){this.createConfig()},mountedComponent(){null!==this.flatpickrInstance&&this.updateFlatpickrInstance()},beforeDestroyComponent(){this.$nextTick(()=>{null!==this.flatpickrInstance&&(this.flatpickrInstance.destroy(),this.flatpickrInstance=null)})},setDatepickerValue(e){null!==this.flatpickrInstance&&this.flatpickrInstance.setDate(e,!1)},getMergedConfig(e){return void 0!==e.mode&&console.warn("[sw-datepicker] The only allowed mode is the default 'single' mode (the specified mode will be ignored!). The modes 'multiple' or 'range' are currently not supported"),{...this.defaultConfig,enableTime:this.enableTime,noCalendar:this.noCalendar,...e,mode:"single"}},updateFlatpickrInstance(){if(null===this.flatpickrInstance)return;let e=this.getMergedConfig(this.config);if(void 0!==e.enableTime&&e.enableTime!==this.currentFlatpickrConfig.enableTime){this.createFlatpickrInstance(this.config);return}r.forEach(t=>{delete e[t]}),this.flatpickrInstance.set(e),["locale","showMonths"].forEach(t=>{void 0!==e[t]&&this.flatpickrInstance.set(t,e[t])})},createFlatpickrInstance(){null!==this.flatpickrInstance&&(this.flatpickrInstance.destroy(),this.flatpickrInstance=null);let e=this.getMergedConfig(this.config);this.getEventNames().forEach(({kebabCase:t,camelCase:n})=>{e[n]=(...e)=>{this.$emit(t,...e)}}),this.flatpickrInstance=new i.Z(this.$refs.flatpickrInput,e),this.flatpickrInstance.config.onOpen.push(()=>{this.isDatepickerOpen=!0}),this.flatpickrInstance.config.onClose.push(()=>{this.isDatepickerOpen=!1}),this.flatpickrInstance.config.onChange.push((...e)=>{this.emitValue(e[1])}),this.setDatepickerValue(this.timezoneFormattedValue)},getEventNames(){let e=[];return Object.keys(this.additionalEventListeners).forEach(t=>{e.push({kebabCase:t,camelCase:this.kebabToCamel(t)})}),e},openDatepicker(){this.$nextTick(()=>{this.flatpickrInstance.open()})},kebabToCamel(e){return e.replace(/-([a-z])/g,(e,t)=>t.toUpperCase())},unsetValue(){this.$nextTick(()=>{this.emitValue(null)})},emitValue(e){""===e&&(e=null),e!==this.timezoneFormattedValue&&(this.timezoneFormattedValue=e)},createConfig(){let e="Y-m-dTH:i:S",t="Y-m-d H:i";"time"===this.dateType&&(e="H:i:S",t="H:i"),"date"===this.dateType&&(t="Y-m-d"),this.defaultConfig={time_24hr:!0,locale:this.locale,dateFormat:e,altInput:!0,altFormat:t,allowInput:!0}}}}},952754:function(e,t,n){var i=n(181319);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),n(745346).Z("0e0faa2e",i,!0,{})}}]);