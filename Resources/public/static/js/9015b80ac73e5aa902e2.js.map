{"version":3,"sources":["webpack:///./src/module/sw-product/component/sw-product-visibility-select/index.js","webpack:///./src/module/sw-product/component/sw-product-visibility-select/sw-product-visibility-select.html.twig"],"names":["EntityCollection","Shopware","Data","mapState","Component","getComponentHelper","template","data","defaultVisibility","computed","_objectSpread","repository","this","repositoryFactory","create","associationRepository","methods","isSelected","item","currentCollection","some","entity","salesChannelId","id","addItem","associationEntity","find","remove","newSalesChannelAssociation","entityCollection","context","productId","product","productVersionId","versionId","visibility","salesChannel","$emit","changedCollection","fromCollection","add","emitChanges","onSelectExpanded"],"mappings":"wtBAMA,IAAQA,EAAqBC,SAASC,KAA9BF,iBACAG,EAAaF,SAASG,UAAUC,qBAAhCF,SAGO,WACXG,SCXW,0eDaXC,KAAI,WACA,MAAO,CACHC,kBAAmB,KAI3BC,SAAQC,IAAA,GACDP,EAAS,kBAAmB,CAC3B,aACF,IAEFQ,WAAU,WACN,OAAOC,KAAKC,kBAAkBC,OAAO,kBAGzCC,sBAAqB,WACjB,OAAOH,KAAKC,kBAAkBC,OAAO,yBAI7CE,QAAS,CACLC,WAAU,SAACC,GACP,OAAON,KAAKO,kBAAkBC,MAAK,SAAAC,GAC/B,OAAOA,EAAOC,iBAAmBJ,EAAKK,OAI9CC,QAAO,SAACN,GAEJ,GAAIN,KAAKK,WAAWC,GAApB,CACI,IAAMO,EAAoBb,KAAKO,kBAAkBO,MAAK,SAAAL,GAClD,OAAOA,EAAOC,iBAAmBJ,EAAKK,MAE1CX,KAAKe,OAAOF,OAJhB,CAUA,IAAMG,EAA6BhB,KAAKG,sBAAsBD,OAAOF,KAAKiB,iBAAiBC,SAC3FF,EAA2BG,UAAYnB,KAAKoB,QAAQT,GACpDK,EAA2BK,iBAAmBrB,KAAKoB,QAAQE,UAC3DN,EAA2BN,eAAiBJ,EAAKK,GACjDK,EAA2BO,WAAavB,KAAKJ,kBAC7CoB,EAA2BQ,aAAelB,EAE1CN,KAAKyB,MAAM,WAAYnB,GAEvB,IAAMoB,EAAoBtC,EAAiBuC,eAAe3B,KAAKO,mBAC/DmB,EAAkBE,IAAIZ,GAEtBhB,KAAK6B,YAAYH,GACjB1B,KAAK8B","file":"static/js/9015b80ac73e5aa902e2.js","sourcesContent":["/*\n * @package inventory\n */\n\nimport template from './sw-product-visibility-select.html.twig';\n\nconst { EntityCollection } = Shopware.Data;\nconst { mapState } = Shopware.Component.getComponentHelper();\n\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    data() {\n        return {\n            defaultVisibility: 30,\n        };\n    },\n\n    computed: {\n        ...mapState('swProductDetail', [\n            'product',\n        ]),\n\n        repository() {\n            return this.repositoryFactory.create('sales_channel');\n        },\n\n        associationRepository() {\n            return this.repositoryFactory.create('product_visibility');\n        },\n    },\n\n    methods: {\n        isSelected(item) {\n            return this.currentCollection.some(entity => {\n                return entity.salesChannelId === item.id;\n            });\n        },\n\n        addItem(item) {\n            // Remove when already selected\n            if (this.isSelected(item)) {\n                const associationEntity = this.currentCollection.find(entity => {\n                    return entity.salesChannelId === item.id;\n                });\n                this.remove(associationEntity);\n\n                return;\n            }\n\n            // Create new entity\n            const newSalesChannelAssociation = this.associationRepository.create(this.entityCollection.context);\n            newSalesChannelAssociation.productId = this.product.id;\n            newSalesChannelAssociation.productVersionId = this.product.versionId;\n            newSalesChannelAssociation.salesChannelId = item.id;\n            newSalesChannelAssociation.visibility = this.defaultVisibility;\n            newSalesChannelAssociation.salesChannel = item;\n\n            this.$emit('item-add', item);\n\n            const changedCollection = EntityCollection.fromCollection(this.currentCollection);\n            changedCollection.add(newSalesChannelAssociation);\n\n            this.emitChanges(changedCollection);\n            this.onSelectExpanded();\n        },\n    },\n};\n","export default \"\\n{% block sw_entity_multi_select_base_selection_list_label_inner %}\\n<slot\\n    name=\\\"selection-label-property\\\"\\n    v-bind=\\\"{ item, index, labelProperty, valueProperty }\\\"\\n>\\n    {{ item.salesChannel.translated.name }}\\n</slot>\\n{% endblock %}\\n\\n\\n{% block sw_entity_multi_select_base_results_list_result_label %}\\n<slot\\n    name=\\\"result-label-property\\\"\\n    v-bind=\\\"{ item, index, labelProperty, valueProperty: 'id' }\\\"\\n>\\n    {{ item.translated.name }}\\n</slot>\\n{% endblock %}\\n\";"],"sourceRoot":""}