(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[7652],{10323:function(){},707652:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return l}}),t(865590);let{Context:s,Mixin:n}=Shopware,{Criteria:i}=Shopware.Data;var l={template:'\n{% block sw_settings_search_searchable_content %}\n<sw-card\n    class="sw-settings-search-searchable-content"\n    position-identifier="sw-settings-search-searchable-content"\n    :title="$tc(\'sw-settings-search.generalTab.labelSearchableContent\')"\n>\n    \n    {% block sw_settings_search_searchable_content_title %}\n    <span class="sw-field sw-settings-search__searchable-content-title">\n        {{ $tc(\'sw-settings-search.generalTab.textDescriptionSearchableContent\') }}\n    </span>\n    {% endblock %}\n\n    \n    {% block sw_settings_search_searchable_actions %}\n    <sw-container\n        class="sw-field"\n        columns="repeat(auto-fit, minmax(100px, 1fr))"\n        align="center"\n        gap="0px 30px"\n    >\n        <div class="sw-settings-search__searchable-content-button-group">\n            \n            {% block sw_settings_search_searchable_add_item %}\n            <sw-button\n                v-if="defaultTab !== tabNames.generalTab"\n                class="sw-settings-search__searchable-content-add-button"\n                variant="ghost"\n                size="small"\n                :disabled="!acl.can(\'product_search_config.creator\')"\n                @click="onAddNewConfig"\n            >\n                {{ $tc(\'sw-settings-search.generalTab.buttonAddContent\') }}\n            </sw-button>\n            {% endblock %}\n\n            \n            {% block sw_settings_search_searchable_reset_default %}\n            <sw-button\n                v-if="defaultTab !== tabNames.customTab"\n                class="sw-settings-search__searchable-content-reset-button"\n                size="small"\n                :disabled="isEnabledReset || !acl.can(\'product_search_config.editor\')"\n                @click="onResetToDefault"\n            >\n                {{ $tc(\'sw-settings-search.generalTab.buttonResetDefault\') }}\n            </sw-button>\n            {% endblock %}\n        </div>\n\n        \n        {% block sw_settings_search_searchable_show_example %}\n        \n        {% block sw_settings_search_searchable_show_example_link %}\n        <div class="sw-settings-search__searchable-content-link-text">\n\n            \n            {% block sw_settings_search_searchable_show_example_link_element %}\n            \n            <a\n                class="sw-settings-search__searchable-content-show-example-link"\n                role="button"\n                tabindex="0"\n                @click="onShowExampleModal"\n            >\n                {{ $tc(\'sw-settings-search.generalTab.linkExample\') }}\n                <sw-icon\n                    name="regular-long-arrow-right"\n                    small\n                />\n            </a>\n            {% endblock %}\n\n            <router-link\n                :to="{ name: \'sw.settings.search.index.liveSearch\' }"\n                class="sw-settings-search__searchable-content-rebuild-link"\n            >\n                {{ $tc(\'sw-settings-search.liveSearchTab.linkRebuildSearchIndex\') }}\n                <sw-icon\n                    name="regular-long-arrow-right"\n                    small\n                />\n            </router-link>\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_settings_search_searchable_show_example_modal %}\n        <sw-settings-search-example-modal\n            v-if="showExampleModal"\n            @modal-close="onCloseExampleModal"\n        />\n        {% endblock %}\n        {% endblock %}\n    </sw-container>\n    {% endblock %}\n\n    \n    {% block sw_settings_search_searchable_content_tabs %}\n    <sw-tabs\n        :default-item="defaultTab"\n        position-identifier="sw-settings-search-searchable-content"\n    >\n        <template #default="{ active }">\n            \n            {% block sw_settings_search_searchable_content_general_tab_title %}\n            <sw-tabs-item\n                v-bind="$props"\n                class="sw-settings-search__searchable-content-tab-title"\n                :name="tabNames.generalTab"\n                :active-tab="active"\n                @click="onChangeTab(tabNames.generalTab)"\n            >\n                {{ $tc(\'sw-settings-search.generalTab.labelGeneralTab\') }}\n            </sw-tabs-item>\n            {% endblock %}\n\n            <sw-tabs-item\n                v-bind="$props"\n                class="sw-settings-search__searchable-content-tab-title"\n                :name="tabNames.customTab"\n                :active-tab="active"\n                @click="onChangeTab(tabNames.customTab)"\n            >\n                {{ $tc(\'sw-settings-search.generalTab.labelCustomFieldsTab\') }}\n            </sw-tabs-item>\n        </template>\n\n        <template #content="{ active }">\n            \n            {% block sw_settings_search_searchable_content_general_tab_item %}\n            <sw-settings-search-searchable-content-general\n                v-if="active === tabNames.generalTab"\n                :is-empty="isListEmpty"\n                :is-loading="isLoading"\n                :columns="getProductSearchFieldColumns"\n                :repository="productSearchFieldRepository"\n                :search-configs="searchConfigFields"\n                :field-configs="fieldConfigs"\n                @data-load="loadData"\n                @config-save="saveConfig"\n            />\n            {% endblock %}\n\n            <sw-settings-search-searchable-content-customfields\n                v-if="active === tabNames.customTab"\n                :is-empty="isListEmpty"\n                :is-loading="isLoading"\n                :columns="getProductSearchFieldColumns"\n                :repository="productSearchFieldRepository"\n                :search-configs="searchConfigFields"\n                @data-load="loadData"\n                @config-add="onAddNewConfig"\n                @config-save="saveConfig"\n                @config-delete="deleteConfig"\n            />\n        </template>\n    </sw-tabs>\n    {% endblock %}\n</sw-card>\n{% endblock %}\n',inject:["repositoryFactory","acl"],mixins:[n.getByName("notification")],props:{searchConfigId:{type:String,required:!0},productSearchConfigs:{type:Object,required:!1,default(){return null}}},data(){return{showExampleModal:!1,defaultTab:"general",tabNames:{generalTab:"general",customTab:"customfields"},isLoading:!1,isEnabledReset:!0,searchConfigFields:[],fieldConfigs:[{label:this.$tc("sw-settings-search.generalTab.configFields.name"),value:"name",defaultConfigs:{searchable:!0,ranking:700,tokenize:!0}},{label:this.$tc("sw-settings-search.generalTab.configFields.description"),value:"description",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.productNumber"),value:"productNumber",defaultConfigs:{searchable:!0,ranking:1e3,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.manufacturerNumber"),value:"manufacturerNumber",defaultConfigs:{searchable:!0,ranking:500,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.ean"),value:"ean",defaultConfigs:{searchable:!0,ranking:500,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.customSearchKeywords"),value:"customSearchKeywords",defaultConfigs:{searchable:!0,ranking:800,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.manufacturerName"),value:"manufacturer.name",defaultConfigs:{searchable:!0,ranking:500,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.manufacturerCustomFields"),value:"manufacturer.customFields",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.categoriesName"),value:"categories.name",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.categoriesCustomFields"),value:"categories.customFields",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.tagsName"),value:"tags.name",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.metaTitle"),value:"metaTitle",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.metaDescription"),value:"metaDescription",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.propertiesValue"),value:"properties.name",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}},{label:this.$tc("sw-settings-search.generalTab.configFields.variantValue"),value:"options.name",defaultConfigs:{searchable:!1,ranking:0,tokenize:!1}}]}},computed:{productSearchFieldRepository(){return this.repositoryFactory.create("product_search_config_field")},productSearchFieldCriteria(){let e=new i(1,25);return e.addFilter(i.equals("searchConfigId",this.searchConfigId||null)),e.addSorting(i.sort("field","ESC")),this.defaultTab===this.tabNames.generalTab?e.addFilter(i.equals("customFieldId",null)):e.addFilter(i.not("AND",[i.equals("customFieldId",null)])),e},isListEmpty(){return!this.searchConfigFields||!this.searchConfigFields.length},getProductSearchFieldColumns(){return[{property:"field",label:"sw-settings-search.generalTab.list.columnContent",inlineEdit:"string",sortable:!0,width:"250px"},{property:"searchable",label:"sw-settings-search.generalTab.list.columnSearchable",align:"center",inlineEdit:"string",sortable:!0},{property:"ranking",inlineEdit:"number",label:"sw-settings-search.generalTab.list.columnRankingPoints",align:"center",sortable:!0},{property:"tokenize",inlineEdit:"string",label:"sw-settings-search.generalTab.list.columnSplitKeywords",align:"center",sortable:!0}]},storefrontEsEnable(){return s.app.storefrontEsEnable??!1}},watch:{searchConfigId(){this.loadData()},productSearchConfigs(){this.loadData()}},methods:{onShowExampleModal(){this.showExampleModal=!0},onCloseExampleModal(){this.showExampleModal=!1},onAddNewConfig(){let e=this.createNewConfigItem();this.searchConfigFields.unshift(e),this.$emit("edit-change",!0)},createNewConfigItem(){let e=this.productSearchFieldRepository.create();return e.searchConfigId=this.searchConfigId,e.searchable=!1,e.ranking=0,e.field="",e.tokenize=!1,e},getConfigFieldDefault(e){let a=this.fieldConfigs.find(a=>a.value===e);return a?{...a.defaultConfigs}:{ranking:0,searchable:!1,tokenize:!1}},onResetToDefault(){let e=this.defaultTab===this.tabNames.generalTab;this.searchConfigFields.forEach(a=>(a.ranking=e?this.getConfigFieldDefault(a.field).ranking:0,a.searchable=!!e&&this.getConfigFieldDefault(a.field).searchable,a.tokenize=!!e&&this.getConfigFieldDefault(a.field).tokenize,a)),this.saveConfig()},onChangeTab(e){this.defaultTab=e,this.loadData()},loadData(){this.getProductSearchFieldsList()},getProductSearchFieldsList(){this.isLoading=!0;let e=this.productSearchFieldCriteria;this.productSearchFieldRepository.search(e).then(e=>{this.total=e.total,this.isEnabledReset=!e.total,this.searchConfigFields=e}).catch(()=>{this.createNotificationError({message:this.$tc("sw-settings-search.notification.loadError")})}).finally(()=>{this.isLoading=!1})},saveConfig(){this.isLoading=!0,this.productSearchFieldRepository.saveAll(this.searchConfigFields).then(()=>{this.createNotificationSuccess({message:this.$tc("sw-settings-search.notification.saveSuccess")}),this.$emit("edit-change",!1)}).catch(()=>{this.createNotificationError({message:this.$tc("sw-settings-search.notification.saveError")})}).finally(()=>{this.isLoading=!1,this.loadData()})},deleteConfig(e){e&&(this.isLoading=!0,this.productSearchFieldRepository.delete(e).then(()=>{this.createNotificationSuccess({message:this.$tc("sw-settings-search.notification.saveSuccess")})}).catch(()=>{this.createNotificationError({message:this.$tc("sw-settings-search.notification.saveError")})}).finally(()=>{this.isLoading=!1,this.loadData()}))}}}},865590:function(e,a,t){var s=t(10323);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),t(745346).Z("02d4995f",s,!0,{})}}]);