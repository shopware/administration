(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[424],{F8eb:function(t,e,i){"use strict";i.r(e);var n=i("J58c"),s=i.n(n);i("zOwT");function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){s()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var c=Shopware,d=c.Mixin,r=c.Context,a=Shopware.Data.Criteria;e.default={template:'\n{% block sw_custom_field_detail %}\n<sw-modal\n    class="sw-custom-field-detail"\n    :title="modalTitle"\n    @modal-close="onCancel"\n>\n    \n    {% block sw_custom_field_detail_modal %}\n    <sw-container\n        columns="1fr 1fr"\n        gap="20px"\n    >\n        \n        {% block sw_custom_field_detail_modal_type %}\n        <sw-select-field\n            v-model="currentCustomField.config.customFieldType"\n            :label="$tc(\'sw-settings-custom-field.customField.detail.labelCustomFieldType\')"\n            :placeholder="$tc(\'sw-settings-custom-field.customField.detail.placeholderCustomFieldType\')"\n            class="sw-custom-field-detail__modal-type"\n            type="select"\n            :help-text="$tc(\'sw-settings-custom-field.general.tooltipType\')"\n            :disabled="!currentCustomField._isNew || !acl.can(\'custom_field.editor\')"\n        >\n            <option\n                v-for="(option, key) in fieldTypes"\n                :key="key"\n                :value="key"\n            >\n                {{ $tc(`sw-settings-custom-field.types.${key}`) }}\n            </option>\n        </sw-select-field>\n        {% endblock %}\n\n        \n        {% block sw_custom_field_detail_modal_technical_name %}\n        <sw-field\n            v-model="currentCustomField.name"\n            type="text"\n            class="sw-custom-field-detail__technical-name"\n            :label="$tc(\'sw-settings-custom-field.customField.detail.labelTechnicalName\')"\n            :help-text="$tc(\'sw-settings-custom-field.general.tooltipTechnicalName\')"\n            :disabled="!currentCustomField._isNew || !acl.can(\'custom_field.editor\')"\n        />\n        {% endblock %}\n\n        \n        {% block sw_custom_field_detail_modal_position %}\n        <sw-field\n            v-model="currentCustomField.config.customFieldPosition"\n            type="number"\n            class="sw-custom-field-detail__modal-position"\n            :help-text="$tc(\'sw-settings-custom-field.customField.detail.tooltipCustomFieldPosition\')"\n            number-type="int"\n            :label="$tc(\'sw-settings-custom-field.customField.detail.labelCustomFieldPosition\')"\n            :disabled="!acl.can(\'custom_field.editor\')"\n        />\n        {% endblock %}\n\n        \n        {% block sw_custom_field_detail_modal_required %}\n        <sw-field\n            v-model="required"\n            type="switch"\n            bordered\n            :help-text="$tc(\'sw-settings-custom-field.customField.detail.tooltipRequired\')"\n            class="sw-custom-field-detail__switch"\n            :label="$tc(\'sw-settings-custom-field.customField.detail.labelRequired\')"\n            required\n            :disabled="!acl.can(\'custom_field.editor\')"\n        />\n        {% endblock %}\n\n        \n        {% block sw_custom_field_detail_modal_allow_customer_write %}\n        <sw-field\n            v-model="currentCustomField.allowCustomerWrite"\n            type="switch"\n            bordered\n            :help-text="$tc(\'sw-settings-custom-field.customField.detail.tooltipAllowCustomerWrite\')"\n            class="sw-custom-field-detail__allow-customer-write"\n            :label="$tc(\'sw-settings-custom-field.customField.detail.labelAllowCustomerWrite\')"\n            :disabled="!acl.can(\'custom_field.editor\')"\n        />\n        {% endblock %}\n\n        <sw-field\n            v-if="isProductCustomField"\n            v-model="currentCustomField.allowCartExpose"\n            v-tooltip="getCartExposeTooltipConfig()"\n            type="switch"\n            bordered\n            :help-text="$tc(\'sw-settings-custom-field.customField.detail.tooltipAllowCartExpose\')"\n            class="sw-custom-field-detail__allow-cart-expose"\n            :label="$tc(\'sw-settings-custom-field.customField.detail.labelAllowCartExpose\')"\n            :disabled="!acl.can(\'custom_field.editor\') || disableCartExpose"\n        />\n\n        \n        {% block sw_custom_field_detail_modal_snippet_info  %}\n        <sw-alert class="sw-custom-field-detail__info">\n            {{ $tc(\'sw-settings-custom-field.customField.detail.infoText\', 0, { name: currentCustomField.name }) }}\n        </sw-alert>\n        {% endblock %}\n    </sw-container>\n\n    \n    {% block sw_custom_field_detail_modal_render_component %}\n    <div v-if="currentCustomField.config.customFieldType.length > 0">\n        <component\n            :is="renderComponentName"\n            :current-custom-field="currentCustomField"\n            :set="set"\n        />\n    </div>\n    {% endblock %}\n\n    \n    {% block sw_custom_field_detail_modal_footer %}\n    <template #modal-footer>\n        \n        {% block sw_custom_field_detail_modal_footer_cancel %}\n        <sw-button\n            size="small"\n            @click="onCancel"\n        >\n            {{ $tc(\'sw-settings-custom-field.customField.detail.buttonCancel\') }}\n        </sw-button>\n        {% endblock %}\n\n        \n        {% block sw_custom_field_detail_modal_footer_save %}\n        <sw-button\n            class="sw-custom-field-detail__footer-save"\n            variant="primary"\n            size="small"\n            :disabled="!canSave || !acl.can(\'custom_field.editor\')"\n            @click="onSave"\n        >\n            {{ labelSaveButton }}\n        </sw-button>\n        {% endblock %}\n    </template>\n    {% endblock %}\n    {% endblock %}\n</sw-modal>\n{% endblock %}\n',inject:["repositoryFactory","customFieldDataProviderService","SwCustomFieldListIsCustomFieldNameUnique","acl"],mixins:[d.getByName("notification")],props:{currentCustomField:{type:Object,required:!0},set:{type:Object,required:!0}},data:function(){return{fieldTypes:{},required:!1,disableCartExpose:!0}},computed:{locales:function(){return this.set.config.translated&&!0===this.set.config.translated?Object.keys(this.$root.$i18n.messages):[this.$root.$i18n.fallbackLocale]},canSave:function(){return this.currentCustomField.config.customFieldType},renderComponentName:function(){return this.fieldTypes[this.currentCustomField.config.customFieldType].configRenderComponent},modalTitle:function(){return this.currentCustomField._isNew?this.$tc("sw-settings-custom-field.customField.detail.titleNewCustomField"):this.$tc("sw-settings-custom-field.customField.detail.titleEditCustomField")},labelSaveButton:function(){return this.currentCustomField._isNew?this.$tc("sw-settings-custom-field.customField.detail.buttonSaveApply"):this.$tc("sw-settings-custom-field.customField.detail.buttonEditApply")},isProductCustomField:function(){return!!this.set.relations&&0!==this.set.relations.filter((function(t){return"product"===t.entityName})).length},ruleConditionRepository:function(){return this.repositoryFactory.create("rule_condition")}},watch:{required:function(t){t?this.currentCustomField.config.validation="required":this.currentCustomField.config.hasOwnProperty("validation")&&this.$delete(this.currentCustomField.config,"validation")}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var t=this;if(this.fieldTypes=this.customFieldDataProviderService.getTypes(),this.currentCustomField.config||this.$set(this.currentCustomField,"config",{}),this.currentCustomField.config.hasOwnProperty("customFieldType")||this.$set(this.currentCustomField.config,"customFieldType",""),this.currentCustomField.name||(this.currentCustomField.name="".concat(this.set.name.toLowerCase(),"_")),this.currentCustomField.config.hasOwnProperty("validation")&&(this.required="required"===this.currentCustomField.config.validation),this.currentCustomField.config.hasOwnProperty("customFieldPosition")||this.$set(this.currentCustomField.config,"customFieldPosition",1),this.currentCustomField.allowCartExpose){var e=new a(1,1);e.addFilter(a.multi("AND",[a.equals("type","cartLineItemCustomField"),a.equals("value.renderedField.name",this.currentCustomField.name)])),this.ruleConditionRepository.search(e,r.api).then((function(e){t.disableCartExpose=e.length>0}))}else this.disableCartExpose=!1},onCancel:function(){this.$emit("custom-field-edit-cancel",this.currentCustomField)},onSave:function(){var t=this;this.applyTypeConfiguration(),this.currentCustomField._isNew?"entity"!==this.currentCustomField.config.customFieldType||this.currentCustomField.config.entity?this.SwCustomFieldListIsCustomFieldNameUnique(this.currentCustomField).then((function(e){e?t.$emit("custom-field-edit-save",t.currentCustomField):t.createNameNotUniqueNotification()})):this.createEntityTypeRequiredNotification():this.$emit("custom-field-edit-save",this.currentCustomField)},createNameNotUniqueNotification:function(){var t=this.$tc("global.default.error"),e=this.$tc("sw-settings-custom-field.set.detail.messageNameNotUnique");this.createNotificationError({title:t,message:e})},createEntityTypeRequiredNotification:function(){var t=this.$tc("global.default.error"),e=this.$tc("sw-settings-custom-field.set.detail.entityTypeRequired");this.createNotificationError({title:t,message:e})},applyTypeConfiguration:function(){var t=this.currentCustomField.config.customFieldType;this.currentCustomField.type||(this.currentCustomField.type=this.fieldTypes[t].type||t),this.currentCustomField.config=l(l({},this.currentCustomField.config),this.fieldTypes[t].config)},getCartExposeTooltipConfig:function(){return this.disableCartExpose?{disabled:!1,width:260,message:this.$t("sw-settings-custom-field.customField.detail.tooltipCartExposeDisabled")}:{message:"",disabled:!0}}}}},fnOn:function(t,e,i){},zOwT:function(t,e,i){var n=i("fnOn");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i("ydqr").default)("391cf949",n,!0,{})}}]);