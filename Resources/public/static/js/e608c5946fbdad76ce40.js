(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[401],{HG3x:function(n,e,a){var t=a("anTh");t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);(0,a("P8hj").default)("88e51178",t,!0,{})},NIIm:function(n,e,a){"use strict";a.r(e);var t=a("7yzw"),l=a.n(t),i=a("4fmW"),s=a.n(i),o=a("6lmj"),r=a.n(o),c=a("92Mt"),d=a.n(c),u=(a("HG3x"),Shopware.Context),m=Shopware.Data.Criteria,h=Shopware.Classes.ShopwareError;e.default={template:'\n{% block sw_sales_channel_detail_domains %}\n<sw-card\n    :title="$tc(\'sw-sales-channel.detail.titleDomains\')"\n    class="sw-sales-channel-detail-domains"\n    position-identifier="sw-sales-channel-detail-domains"\n>\n\n    \n    {% block sw_sales_channel_detail_domains_meta %}\n    <div class="sw-sales-channel-detail-domains__meta">\n        \n        {% block sw_sales_channel_detail_domains_headline %}\n        <h4 class="sw-sales-channel-detail-domains__headline sw-sales-channel-detail-base__headline">\n            <span class="sw-sales-channel-detail-domains__headline-text sw-sales-channel-detail-base__headline-text">\n                {{ $tc(\'sw-sales-channel.detail.titleDomainHeadline\') }}\n            </span>\n        </h4>\n        {% endblock %}\n\n        \n        {% block sw_sales_channel_detail_domains_add_button %}\n        <sw-button\n            size="small"\n            :disabled="disableEdit"\n            class="sw-sales-channel-detail__button-domain-add"\n            @click="onClickOpenCreateDomainModal"\n        >\n            {{ $tc(\'sw-sales-channel.detail.buttonAddDomain\') }}\n        </sw-button>\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    <template #grid>\n        \n        {% block sw_sales_channel_detail_domains_grid %}\n        <sw-data-grid\n            ref="gridDomains"\n            :data-source="sortedDomains"\n            :columns="getDomainColumns()"\n            :show-selection="false"\n            :is-loading="isLoadingDomains"\n            :show-actions="true"\n            :sort-by="sortBy"\n            :sort-direction="sortDirection"\n            @column-sort="sortColumns"\n        >\n            \n            {% block sw_sales_channel_detail_domains_columns_template %}\n\n            \n            {% block sw_sales_channel_detail_domains_column_url %}\n            <template\n                #column-url="{ item }"\n            >\n                {{ item.url|unicodeUri }}\n            </template>\n            {% endblock %}\n\n            \n            {% block sw_sales_channel_detail_domains_column_language_id %}\n            <template\n                #column-languageId="{ item, isInlineEdit}"\n            >\n                {{ item.language.name }}\n            </template>\n            {% endblock %}\n\n            \n            {% block sw_sales_channel_detail_domains_column_currency_id %}\n            <template\n                #column-currencyId="{ item, isInlineEdit}"\n            >\n                {{ item.currency.translated.name }}\n            </template>\n            {% endblock %}\n\n            \n            {% block sw_sales_channel_detail_domains_column_snippet_set_id %}\n            <template\n                #column-snippetSetId="{ item, isInlineEdit}"\n            >\n                {{ item.snippetSet.name }}\n            </template>\n            {% endblock %}\n\n            \n            {% block sw_sales_channel_detail_domains_column_actions %}\n            <template #actions="{ item }">\n                \n                {% block sw_sales_channel_detail_domains_column_action_domain_edit %}\n                <sw-context-menu-item\n                    :disabled="disableEdit"\n                    @click="onClickEditDomain(item)"\n                >\n                    {{ $tc(\'sw-sales-channel.detail.buttonEditDomain\') }}\n                </sw-context-menu-item>\n                {% endblock %}\n\n                \n                {% block sw_sales_channel_detail_domains_column_action_domain_delete %}\n                <sw-context-menu-item\n                    :disabled="disableEdit"\n                    variant="danger"\n                    @click="onClickDeleteDomain(item)"\n                >\n                    {{ $tc(\'sw-sales-channel.detail.buttonDeleteDomain\') }}\n                </sw-context-menu-item>\n                {% endblock %}\n            </template>\n            {% endblock %}\n            {% endblock %}\n        </sw-data-grid>\n    </template>\n    {% endblock %}\n\n    \n    {% block sw_sales_channel_detail_domains_create_modal %}\n    <sw-modal\n        v-if="currentDomain"\n        :title="currentDomainModalTitle"\n        @modal-close="onCloseCreateDomainModal"\n    >\n\n        \n        {% block sw_sales_channel_detail_domains_create_modal_content %}\n        <sw-container\n            columns="repeat(auto-fit, minmax(250px, 1fr))"\n            gap="0px 30px"\n        >\n            \n            {% block sw_sales_channel_detail_domains_input_url %}\n            <sw-url-field\n                {% if VUE3 %}\n                v-model:value="currentDomain.url"\n                {% else %}\n                v-model="currentDomain.url"\n                {% endif %}\n                type="text"\n                omit-url-hash\n                omit-url-search\n                :label="$tc(\'sw-sales-channel.detail.labelInputUrl\')"\n                :error="error"\n                {% if VUE3 %}\n                @update:value="onInput"\n                {% else %}\n                @input="onInput"\n                {% endif %}\n            />\n            {% endblock %}\n\n            \n            {% block sw_sales_channel_detail_domains_input_language %}\n            <sw-single-select\n                {% if VUE3 %}\n                v-model:value="currentDomain.languageId"\n                {% else %}\n                v-model="currentDomain.languageId"\n                {% endif %}\n                class="sw-sales-channel-detail-domains__domain-language-select"\n                :options="salesChannel.languages"\n                label-property="name"\n                value-property="id"\n                required\n                :label="$tc(\'sw-sales-channel.detail.labelInputLanguage\')"\n                show-clearable-button\n                {% if VUE3 %}\n                @update:value="onLanguageSelect"\n                {% else %}\n                @change="onLanguageSelect"\n                {% endif %}\n            />\n            {% endblock %}\n        </sw-container>\n\n        <sw-container\n            columns="repeat(auto-fit, minmax(250px, 1fr))"\n            gap="0px 30px"\n        >\n            \n            {% block sw_sales_channel_detail_domains_input_currency %}\n            <sw-single-select\n                {% if VUE3 %}\n                v-model:value="currentDomain.currencyId"\n                {% else %}\n                v-model="currentDomain.currencyId"\n                {% endif %}\n                class="sw-sales-channel-detail-domains__domain-currency-select"\n                :label="$tc(\'sw-sales-channel.detail.labelInputCurrency\')"\n                required\n                show-clearable-button\n                :options="salesChannel.currencies"\n                label-property="name"\n                value-property="id"\n                {% if VUE3 %}\n                @update:value="onCurrencySelect"\n                {% else %}\n                @change="onCurrencySelect"\n                {% endif %}\n            />\n            {% endblock %}\n\n            \n            {% block sw_sales_channel_detail_domains_input_snippet_set %}\n            <sw-entity-single-select\n                {% if VUE3 %}\n                v-model:value="currentDomain.snippetSetId"\n                {% else %}\n                v-model="currentDomain.snippetSetId"\n                {% endif %}\n                entity="snippet_set"\n                :criteria="snippetSetCriteria"\n                :label="$tc(\'sw-sales-channel.detail.labelInputSnippet\')"\n                required\n                show-clearable-button\n                @option-select="onOptionSelect"\n            />\n            {% endblock %}\n        </sw-container>\n\n        \n        {% block sw_sales_channel_detail_domains_hreflang %}\n        <sw-radio-field\n            {% if VUE3 %}\n            v-model:value="currentDomain.hreflangUseOnlyLocale"\n            {% else %}\n            v-model="currentDomain.hreflangUseOnlyLocale"\n            {% endif %}\n            :label="$tc(\'sw-sales-channel.detail.hreflang.domainSettings.label\')"\n            identification="hreflang"\n            :options="hreflangLocalisationOptions"\n        />\n        {% endblock %}\n        {% endblock %}\n\n        <template #modal-footer>\n            \n            {% block sw_sales_channel_detail_domains_create_action_cancel %}\n            <sw-button\n                size="small"\n                @click="onCloseCreateDomainModal"\n            >\n                {{ $tc(\'sw-sales-channel.modal.buttonCancel\') }}\n            </sw-button>\n            {% endblock %}\n\n            \n            {% block sw_sales_channel_detail_domains_create_action_create %}\n            <sw-button\n                size="small"\n                variant="primary"\n                :disabled="disabled"\n                @click="onClickAddNewDomain"\n            >\n                {{ currentDomainModalButtonText }}\n            </sw-button>\n            {% endblock %}\n        </template>\n    </sw-modal>\n    {% endblock %}\n\n    \n    {% block sw_sales_channel_detail_domains_delete_modal %}\n    <sw-modal\n        v-if="deleteDomain"\n        :title="$tc(\'sw-sales-channel.detail.deleteDomainModalTitle\')"\n        variant="small"\n        @modal-close="onCloseDeleteDomainModal"\n    >\n\n        \n        {% block sw_sales_channel_detail_domains_delete_modal_confirm_text %}\n        {{ $tc(\'sw-sales-channel.detail.textConfirmDeleteDomain\', 0, { url: unicodeUriFilter(deleteDomain.url) }) }}\n        {% endblock %}\n\n        \n        {% block sw_sales_channel_detail_domains_delete_modal_footer %}\n        <template #modal-footer>\n            \n            {% block sw_sales_channel_detail_domains_delete_modal_abort %}\n            <sw-button\n                size="small"\n                @click="onCloseDeleteDomainModal"\n            >\n                {{ $tc(\'sw-sales-channel.detail.buttonCloseDeleteDomainModal\') }}\n            </sw-button>\n            {% endblock %}\n\n            \n            {% block sw_sales_channel_detail_domains_delete_modal_confirm %}\n            <sw-button\n                size="small"\n                variant="danger"\n                @click="onConfirmDeleteDomain(deleteDomain)"\n            >\n                {{ $tc(\'sw-sales-channel.detail.buttonConfirmDeleteDomain\') }}\n            </sw-button>\n            {% endblock %}\n        </template>\n        {% endblock %}\n    </sw-modal>\n    {% endblock %}\n</sw-card>\n{% endblock %}\n',inject:["repositoryFactory"],props:{salesChannel:{required:!0},disableEdit:{type:Boolean,required:!1,default:!1}},data:function(){return{currentDomain:null,currentDomainBackup:{url:null,language:null,languageId:null,currency:null,currencyId:null,snippetSet:null,snippetSetId:null},isLoadingDomains:!1,deleteDomain:null,sortBy:"url",sortDirection:"ASC",error:null}},computed:{domainRepository:function(){return this.repositoryFactory.create(this.salesChannel.domains.entity,this.salesChannel.domains.source)},currentDomainModalTitle:function(){return this.currentDomain.isNew()?this.$t("sw-sales-channel.detail.titleCreateDomain"):this.$t("sw-sales-channel.detail.titleEditDomain",0,{name:this.unicodeUriFilter(this.currentDomainBackup.url)})},currentDomainModalButtonText:function(){return this.currentDomain.isNew()?this.$t("sw-sales-channel.detail.buttonAddDomain"):this.$t("sw-sales-channel.detail.buttonEditDomain")},snippetSetCriteria:function(){return new m(1,25).addSorting(m.sort("name","ASC"))},salesChannelFilterCriteria:function(){var n=new m(1,25);return n.addAssociation("salesChannels").addSorting(m.sort("name","ASC")),n.addFilter(m.equals("salesChannels.id",this.salesChannel.id))},currencyCriteria:function(){return new m(1,25).addSorting(m.sort("name","ASC"))},hreflangLocalisationOptions:function(){return[{name:this.$tc("sw-sales-channel.detail.hreflang.domainSettings.byIso"),value:!1,helpText:this.$tc("sw-sales-channel.detail.hreflang.domainSettings.byIsoHelpText")},{name:this.$tc("sw-sales-channel.detail.hreflang.domainSettings.byAbbreviation"),value:!0,helpText:this.$tc("sw-sales-channel.detail.hreflang.domainSettings.byAbbreviationHelpText")}]},disabled:function(){return!this.currentDomain||!this.currentDomain.currencyId||!this.currentDomain.snippetSetId||!this.currentDomain.url||!this.currentDomain.languageId||this.disableEdit||null!==this.error},sortedDomains:function(){var n=r()(this.salesChannel.domains);return this.localSortDomains(n)}},methods:{sortColumns:function(n){this.sortBy===n.dataIndex?this.sortDirection="ASC"===this.sortDirection?"DESC":"ASC":(this.sortBy=n.dataIndex,this.sortDirection="ASC")},unicodeUriFilter:function(n){var e=Shopware.Filter.getByName("unicodeUri");return e(n)},localSortDomains:function(n){var e=this;return n.sort((function(n,a){var t=e.getSortValue(n,e.sortBy).toString(),l=e.getSortValue(a,e.sortBy).toString(),i=t.localeCompare(l,void 0,{numeric:!0,sensitivity:"base"});return"ASC"===e.sortDirection?i:-1*i})),n},getSortValue:function(n,e){return e=e.replace("Id",""),n.hasOwnProperty(e)&&"object"===s()(n[e])&&n[e].hasOwnProperty("name")?n[e].name:n[e]},onInput:function(){this.error=null},verifyUrl:function(n){var e=this;return l()(d.a.mark((function a(){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.t0=e.domainExistsLocal(n),a.t0){a.next=5;break}return a.next=4,e.domainExistsInDatabase(n.url);case 4:a.t0=a.sent;case 5:return a.abrupt("return",!a.t0);case 6:case"end":return a.stop()}}),a)})))()},domainExistsLocal:function(n){return this.salesChannel.domains.filter((function(e){return e.id!==n.id&&e.url===n.url})).length>0},isOriginalUrl:function(n){return n===this.currentDomainBackup.url},domainExistsInDatabase:function(n){var e=this;return l()(d.a.mark((function a(){var t,l,i;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.repositoryFactory.create(e.salesChannel.domains.entity),(l=new m(1,25)).addFilter(m.equals("url",n)),a.next=5,t.search(l);case 5:if(0!==(i=a.sent).total){a.next=8;break}return a.abrupt("return",!1);case 8:return a.abrupt("return",i.first().salesChannelId!==e.salesChannel.id);case 9:case"end":return a.stop()}}),a)})))()},setCurrentDomainBackup:function(n){this.currentDomainBackup={url:n.url,language:n.language,languageId:n.languageId,currency:n.currency,currencyId:n.currencyId,snippetSet:n.snippetSet,snippetSetId:n.snippetSetId}},resetCurrentDomainToBackup:function(){this.currentDomain.url=this.currentDomainBackup.url,this.currentDomain.language=this.currentDomainBackup.language,this.currentDomain.languageId=this.currentDomainBackup.languageId,this.currentDomain.currency=this.currentDomainBackup.currency,this.currentDomain.currencyId=this.currentDomainBackup.currencyId,this.currentDomain.snippetSet=this.currentDomainBackup.snippetSet,this.currentDomain.snippetSetId=this.currentDomainBackup.snippetSetId},setInitialCurrency:function(n){var e=this.salesChannel.currencies.first();n.currency=e,n.currencyId=e.id,this.currentDomain=n},setInitialLanguage:function(n){var e=this.salesChannel.languages.first();n.language=e,n.languageId=e.id,this.currentDomain=n},onClickOpenCreateDomainModal:function(){var n=this.domainRepository.create(u.api);this.setCurrentDomainBackup(n),1===this.salesChannel.currencies.length&&this.setInitialCurrency(n),1===this.salesChannel.languages.length&&this.setInitialLanguage(n),this.currentDomain=n},onClickAddNewDomain:function(){var n=this;return l()(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOriginalUrl(n.currentDomain.url)){e.next=3;break}return n.currentDomain=null,e.abrupt("return");case 3:return e.next=5,n.verifyUrl(n.currentDomain);case 5:if(e.sent){e.next=8;break}return n.error=new h({code:"DUPLICATED_URL"}),e.abrupt("return");case 8:n.currentDomain.isNew()&&n.salesChannel.domains.add(n.currentDomain),n.currentDomain=null;case 10:case"end":return e.stop()}}),e)})))()},onClickEditDomain:function(n){this.currentDomain=n,this.setCurrentDomainBackup(this.currentDomain)},onCloseCreateDomainModal:function(){this.resetCurrentDomainToBackup(),this.currentDomain=null},onClickDeleteDomain:function(n){n.isNew()?this.onConfirmDeleteDomain(n):this.deleteDomain=n},onConfirmDeleteDomain:function(n){var e=this;this.deleteDomain=null,this.$nextTick((function(){e.salesChannel.domains.remove(n.id)}))},onCloseDeleteDomainModal:function(){this.deleteDomain=null},onLanguageSelect:function(n){this.onOptionSelect("language",this.salesChannel.languages.get(n))},onCurrencySelect:function(n){this.onOptionSelect("currency",this.salesChannel.currencies.get(n))},onOptionSelect:function(n,e){this.currentDomain[n]=e},getDomainColumns:function(){return[{property:"url",dataIndex:"url",label:this.$t("sw-sales-channel.detail.columnDomainUrl"),allowResize:!1,primary:!0,inlineEdit:!0},{property:"languageId",dataIndex:"languageId",label:this.$t("sw-sales-channel.detail.columnDomainLanguage"),allowResize:!1,inlineEdit:!1},{property:"snippetSetId",dataIndex:"snippetSetId",label:this.$t("sw-sales-channel.detail.columnDomainSnippetSet"),allowResize:!1,inlineEdit:!1},{property:"currencyId",dataIndex:"currencyId",label:this.$t("sw-sales-channel.detail.columnDomainCurrency"),allowResize:!1,inlineEdit:!1}]}}}},anTh:function(n,e,a){}}]);