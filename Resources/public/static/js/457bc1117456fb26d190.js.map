{"version":3,"sources":["webpack:///./src/module/sw-mail-template/component/sw-mail-template-list/sw-mail-template-list.html.twig","webpack:///./src/module/sw-mail-template/component/sw-mail-template-list/index.js"],"names":["Mixin","Shopware","Criteria","Data","template","inject","mixins","getByName","props","searchTerm","type","String","required","default","data","mailTemplates","showDeleteModal","isLoading","computed","mailTemplateRepository","this","repositoryFactory","create","skeletonItemAmount","length","showListing","assetFilter","Filter","watch","getList","methods","_this","criteria","page","limit","addAssociation","addSorting","sort","setTerm","search","then","items","total","getListColumns","property","dataIndex","label","allowResize","routerLink","primary","onChangeLanguage","languageId","onDuplicate","id","_this2","clone","mailTemplate","$router","push","name","params","updateRecords","result"],"mappings":"4HAAe,ICEPA,EAAUC,SAAVD,MACAE,EAAaD,SAASE,KAAtBD,SAMO,WACXE,SDVW,o+ECYXC,OAAQ,CAAC,oBAAqB,OAE9BC,OAAQ,CACJN,EAAMO,UAAU,WAChBP,EAAMO,UAAU,iBAGpBC,MAAO,CACHC,WAAY,CACRC,KAAMC,OACNC,UAAU,EACVC,QAAS,KAIjBC,KAAI,WACA,MAAO,CACHC,cAAe,KACfC,gBAAiB,KACjBC,WAAW,IAInBC,SAAU,CACNC,uBAAsB,WAClB,OAAOC,KAAKC,kBAAkBC,OAAO,kBAGzCC,mBAAkB,WACd,OAAOH,KAAKL,eAA+C,IAA9BK,KAAKL,cAAcS,OAAeJ,KAAKL,cAAcS,OAAS,GAG/FC,YAAW,WACP,QAASL,KAAKL,eAA+C,IAA9BK,KAAKL,cAAcS,QAGtDE,YAAW,WACP,OAAOzB,SAAS0B,OAAOpB,UAAU,WAIzCqB,MAAO,CACHnB,WAAU,WACNW,KAAKS,YAIbC,QAAS,CACLD,QAAO,WAAI,IAADE,EAAA,KACNX,KAAKH,WAAY,EAEjB,IAAMe,EAAW,IAAI9B,EAASkB,KAAKa,KAAMb,KAAKc,OAC9CF,EACKG,eAAe,oBACfC,WAAWlC,EAASmC,KAAK,0BAE1BjB,KAAKX,YACLuB,EAASM,QAAQlB,KAAKX,YAG1BW,KAAKD,uBAAuBoB,OAAOP,GAAUQ,MAAK,SAAAC,GAK9C,OAJAV,EAAKW,MAAQD,EAAMC,MACnBX,EAAKhB,cAAgB0B,EACrBV,EAAKd,WAAY,EAEVc,EAAKhB,kBAIpB4B,eAAc,WACV,MAAO,CAAC,CACJC,SAAU,wBACVC,UAAW,wBACXC,MAAO,uCACPC,aAAa,EACbC,WAAY,0BACZC,SAAS,GACV,CACCL,SAAU,cACVC,UAAW,cACXC,MAAO,0CACPC,aAAa,KAIrBG,iBAAgB,SAACC,GACb/B,KAAKS,QAAQsB,IAGjBC,YAAW,SAACC,GAAK,IAADC,EAAA,KACZlC,KAAKH,WAAY,EACjBG,KAAKD,uBAAuBoC,MAAMF,GAAIb,MAAK,SAACgB,GACxCF,EAAKzB,UACLyB,EAAKrC,WAAY,EACjBqC,EAAKG,QAAQC,KACT,CACIC,KAAM,0BACNC,OAAQ,CAAEP,GAAIG,EAAaH,UAM3CQ,cAAa,SAACC,GACV1C,KAAKL,cAAgB+C","file":"static/js/457bc1117456fb26d190.js","sourcesContent":["export default \"\\n{% block sw_mail_template_list_grid %}\\n<sw-card\\n    :title=\\\"$tc('sw-mail-template.list.titleMailTemplateList')\\\"\\n    position-identifier=\\\"sw-mail-template-list\\\"\\n>\\n\\n    \\n    {% block sw_mail_template_list_grid_empty_state %}\\n    <sw-empty-state\\n        v-if=\\\"!isLoading && !showListing\\\"\\n        :title=\\\"$tc('sw-mail-template.list.emptyStateTitle')\\\"\\n        :subline=\\\"$tc('sw-mail-template.list.emptyStateSubTitle')\\\"\\n        :absolute=\\\"false\\\"\\n    >\\n\\n        \\n        {% block sw_mail_template_list_grid_empty_state_icon %}\\n        <template #icon>\\n            <img\\n                :src=\\\"assetFilter('/administration/static/img/empty-states/settings-empty-state.svg')\\\"\\n                alt=\\\"\\\"\\n            >\\n        </template>\\n        {% endblock %}\\n\\n    </sw-empty-state>\\n    {% endblock %}\\n\\n    <template #grid>\\n        <sw-entity-listing\\n            v-if=\\\"isLoading || showListing\\\"\\n            id=\\\"mailTemplateGrid\\\"\\n            class=\\\"sw-mail-templates-list-grid\\\"\\n            detail-route=\\\"sw.mail.template.detail\\\"\\n            identifier=\\\"sw-mail-template-list\\\"\\n            :items=\\\"mailTemplates\\\"\\n            :columns=\\\"getListColumns()\\\"\\n            :repository=\\\"mailTemplateRepository\\\"\\n            :full-page=\\\"false\\\"\\n            :is-loading=\\\"isLoading\\\"\\n            :allow-view=\\\"acl.can('mail_templates.viewer')\\\"\\n            :allow-edit=\\\"acl.can('mail_templates.editor')\\\"\\n            :allow-delete=\\\"acl.can('mail_templates.deleter')\\\"\\n            :show-selection=\\\"acl.can('mail_templates.deleter')\\\"\\n            :skeleton-item-amount=\\\"skeletonItemAmount\\\"\\n            @update-records=\\\"updateRecords\\\"\\n        >\\n            \\n            {% block sw_mail_template_list_grid_columns %}\\n            {% endblock %}\\n\\n            \\n            {% block sw_mail_template_list_grid_actions %}\\n            <template #more-actions=\\\"{ item }\\\">\\n                \\n                {% block sw_mail_template_list_grid_columns_actions_duplicate %}\\n                <sw-context-menu-item\\n                    class=\\\"sw-mail-template-list-grid__duplicate-action\\\"\\n                    :disabled=\\\"!acl.can('mail_templates.creator')\\\"\\n                    @click=\\\"onDuplicate(item.id)\\\"\\n                >\\n                    {{ $tc('sw-mail-template.list.contextMenuDuplicate') }}\\n                </sw-context-menu-item>\\n                {% endblock %}\\n            </template>\\n            {% endblock %}\\n        </sw-entity-listing>\\n    </template>\\n</sw-card>\\n{% endblock %}\\n\";","import template from './sw-mail-template-list.html.twig';\n\nconst { Mixin } = Shopware;\nconst { Criteria } = Shopware.Data;\n\n/**\n * @package services-settings\n */\n// eslint-disable-next-line sw-deprecation-rules/private-feature-declarations\nexport default {\n    template,\n\n    inject: ['repositoryFactory', 'acl'],\n\n    mixins: [\n        Mixin.getByName('listing'),\n        Mixin.getByName('notification'),\n    ],\n\n    props: {\n        searchTerm: {\n            type: String,\n            required: false,\n            default: '',\n        },\n    },\n\n    data() {\n        return {\n            mailTemplates: null,\n            showDeleteModal: null,\n            isLoading: false,\n        };\n    },\n\n    computed: {\n        mailTemplateRepository() {\n            return this.repositoryFactory.create('mail_template');\n        },\n\n        skeletonItemAmount() {\n            return this.mailTemplates && this.mailTemplates.length !== 0 ? this.mailTemplates.length : 3;\n        },\n\n        showListing() {\n            return !!this.mailTemplates && this.mailTemplates.length !== 0;\n        },\n\n        assetFilter() {\n            return Shopware.Filter.getByName('asset');\n        },\n    },\n\n    watch: {\n        searchTerm() {\n            this.getList();\n        },\n    },\n\n    methods: {\n        getList() {\n            this.isLoading = true;\n\n            const criteria = new Criteria(this.page, this.limit);\n            criteria\n                .addAssociation('mailTemplateType')\n                .addSorting(Criteria.sort('mailTemplateType.name'));\n\n            if (this.searchTerm) {\n                criteria.setTerm(this.searchTerm);\n            }\n\n            this.mailTemplateRepository.search(criteria).then(items => {\n                this.total = items.total;\n                this.mailTemplates = items;\n                this.isLoading = false;\n\n                return this.mailTemplates;\n            });\n        },\n\n        getListColumns() {\n            return [{\n                property: 'mailTemplateType.name',\n                dataIndex: 'mailTemplateType.name',\n                label: 'sw-mail-template.list.columnMailType',\n                allowResize: true,\n                routerLink: 'sw.mail.template.detail',\n                primary: true,\n            }, {\n                property: 'description',\n                dataIndex: 'description',\n                label: 'sw-mail-template.list.columnDescription',\n                allowResize: true,\n            }];\n        },\n\n        onChangeLanguage(languageId) {\n            this.getList(languageId);\n        },\n\n        onDuplicate(id) {\n            this.isLoading = true;\n            this.mailTemplateRepository.clone(id).then((mailTemplate) => {\n                this.getList();\n                this.isLoading = false;\n                this.$router.push(\n                    {\n                        name: 'sw.mail.template.detail',\n                        params: { id: mailTemplate.id },\n                    },\n                );\n            });\n        },\n\n        updateRecords(result) {\n            this.mailTemplates = result;\n        },\n    },\n};\n"],"sourceRoot":""}