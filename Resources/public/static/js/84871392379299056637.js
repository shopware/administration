(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[148],{A7Mq:function(e,n,t){"use strict";t.r(n);var s=t("7yzw"),i=t.n(s),o=t("c1oF"),a=t.n(o),c=t("CsSd"),l=t.n(c),r=t("92Mt"),d=t.n(r),b=t("D03b");t("w9Qi");function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){l()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var g=Shopware,_=g.Component,u=g.Mixin,k=_.getComponentHelper().mapPropertyErrors,v=Shopware.Data.Criteria,w=Shopware.Utils.object.cloneDeep,f=Shopware.Utils.types;n.default={template:'\n{% block sw_cms_sidebar %}\n<sw-sidebar class="sw-cms-sidebar">\n\n    \n    {% block sw_cms_sidebar_page_settings %}\n    <sw-sidebar-item\n        ref="pageConfigSidebar"\n        icon="regular-cog"\n        :title="$tc(\'sw-cms.detail.sidebar.titlePageSettings\')"\n        :has-simple-badge="hasPageConfigErrors"\n        badge-type="error"\n        :disabled="page.locked || disabled"\n    >\n\n        \n        {% block sw_cms_sidebar_page_settings_content %}\n        <sw-sidebar-collapse :expand-on-loading="true">\n\n            \n            {% block sw_cms_sidebar_page_settings_header %}\n            <template #header>\n                <span>{{ $tc(\'sw-cms.detail.sidebar.headerPageSettings\') }}</span>\n            </template>\n            {% endblock %}\n\n            \n            {% block sw_cms_sidebar_page_settings_form %}\n            <template #content>\n                <div class="sw-cms-sidebar__settings">\n                    \n                    {% block sw_cms_sidebar_page_settings_name_field %}\n                    <sw-text-field\n                        {% if VUE3 %}\n                        v-model:value="page.name"\n                        {% else %}\n                        v-model="page.name"\n                        {% endif %}\n                        :label="$tc(\'sw-cms.detail.label.pageName\')"\n                        :placeholder="placeholder(page, \'name\')"\n                        :error="pageNameError"\n                    />\n                    {% endblock %}\n\n                    \n                    {% block sw_cms_sidebar_page_settings_css_class_field %}\n                    <sw-text-field\n                        {% if VUE3 %}\n                        v-model:value="page.cssClass"\n                        {% else %}\n                        v-model="page.cssClass"\n                        {% endif %}\n                        :label="$tc(\'sw-cms.detail.label.pageCssClass\')"\n                        :placeholder="placeholder(page, \'cssClass\')"\n                        :help-text="$tc(\'sw-cms.detail.helpText.cssClassField\')"\n                    />\n                    {% endblock %}\n\n                    \n                    {% block sw_cms_sidebar_page_settings_type_field %}\n                    <sw-select-field\n                        v-tooltip.bottom="tooltipDisabled"\n                        :value="page.type"\n                        :label="$tc(\'sw-cms.detail.label.pageTypeSelection\')"\n                        :disabled="!isSystemDefaultLanguage || page.type === \'product_detail\'"\n                        {% if VUE3 %}\n                        @update:value="onPageTypeChange"\n                        {% else %}\n                        @change="onPageTypeChange"\n                        {% endif %}\n                    >\n                        \n                        {% block sw_cms_sidebar_page_settings_type_field_options %}\n                        <option\n                            v-for="pageType in pageTypes"\n                            :key="pageType.name"\n                            :value="pageType.name"\n                            :disabled="isDisabledPageType(pageType)"\n                        >\n                            {{ $tc(pageType.title) }}\n                        </option>\n                        {% endblock %}\n                    </sw-select-field>\n                    {% endblock %}\n\n                    \n                    {% block sw_cms_sidebar_page_settings_demo_field %}\n                    <sw-entity-single-select\n                        v-if="demoEntity !== null"\n                        v-model="demoEntityId"\n                        :label="$tc(\'sw-cms.detail.label.demoEntity\')"\n                        :placeholder="$tc(\'sw-cms.detail.placeholder.demoEntity\')"\n                        :entity="demoEntity"\n                        :criteria="demoCriteria"\n                        :context="demoContext"\n                        show-clearable-button\n                        {% if VUE3 %}\n                        @update:value="onDemoEntityChange"\n                        {% else %}\n                        @change="onDemoEntityChange"\n                        {% endif %}\n                    >\n\n                        \n                        {% block sw_cms_sidebar_page_settings_demo_field_variant_label %}\n                        <template\n                            v-if="demoEntity === \'product\'"\n                            #selection-label-property="{ item }"\n                        >\n                            <sw-product-variant-info :variations="item.variation">\n                                {{ item.translated.name || item.name }}\n                            </sw-product-variant-info>\n                        </template>\n                        {% endblock %}\n\n                        \n                        {% block sw_cms_sidebar_page_settings_demo_field_result_item %}\n                        <template\n                            v-if="demoEntity === \'product\'"\n                            #result-item="{ item, index }"\n                        >\n                            <sw-select-result\n                                v-bind="{ item, index }"\n                            >\n\n                                \n                                {% block sw_cms_sidebar_page_settings_demo_field_result_label %}\n                                <span class="sw-select-result__result-item-text">\n                                    <sw-product-variant-info :variations="item.variation">\n                                        {{ item.translated.name || item.name }}\n                                    </sw-product-variant-info>\n                                </span>\n                                {% endblock %}\n                            </sw-select-result>\n                        </template>\n                        {% endblock %}\n                    </sw-entity-single-select>\n                    {% endblock %}\n                </div>\n            </template>\n            {% endblock %}\n        </sw-sidebar-collapse>\n        {% endblock %}\n    </sw-sidebar-item>\n    {% endblock %}\n\n    \n    {% block sw_cms_sidebar_block_overview %}\n    <sw-sidebar-item\n        ref="blockSelectionSidebar"\n        icon="regular-plus-circle"\n        :title="addBlockTitle"\n        :disabled="currentDeviceView === \'form\' || !isSystemDefaultLanguage || page.locked || disabled"\n    >\n        \n        {% block sw_cms_sidebar_block_overview_content %}\n        <div class="sw-cms-sidebar__block-overview">\n\n            \n            {% block sw_cms_sidebar_block_overview_category %}\n            <div class="sw-cms-sidebar__block-category">\n                <sw-select-field\n                    {% if VUE3 %}\n                    v-model:value="currentBlockCategory"\n                    {% else %}\n                    v-model="currentBlockCategory"\n                    {% endif %}\n                    :label="$tc(\'sw-cms.detail.label.blockCategorySelection\')"\n                >\n                    \n                    {% block sw_cms_sidebar_block_overview_category_options %}\n                    <option value="favorite">\n                        {{ $tc(\'sw-cms.detail.label.blockCategoryFavorite\') }}\n                    </option>\n                    <option value="text">\n                        {{ $tc(\'sw-cms.detail.label.blockCategoryText\') }}\n                    </option>\n                    <option value="image">\n                        {{ $tc(\'sw-cms.detail.label.blockCategoryImage\') }}\n                    </option>\n                    <option value="video">\n                        {{ $tc(\'sw-cms.detail.label.blockCategoryVideo\') }}\n                    </option>\n                    <option value="text-image">\n                        {{ $tc(\'sw-cms.detail.label.blockCategoryTextImage\') }}\n                    </option>\n                    <option value="commerce">\n                        {{ $tc(\'sw-cms.detail.label.blockCategoryCommerce\') }}\n                    </option>\n                    <option value="sidebar">\n                        {{ $tc(\'sw-cms.detail.label.blockCategorySidebar\') }}\n                    </option>\n                    <option value="form">\n                        {{ $tc(\'sw-cms.detail.label.blockCategoryForm\') }}\n                    </option>\n                    {% endblock %}\n                </sw-select-field>\n            </div>\n            {% endblock %}\n\n            \n            {% block sw_cms_sidebar_block_overview_preview %}\n            <div\n                class="sw-cms-sidebar__block-selection"\n            >\n                <sw-empty-state\n                    v-if="cmsBlocksBySelectedBlockCategory.length === 0 && currentBlockCategory === \'favorite\'"\n                    icon="solid-heart"\n                    :absolute="false"\n                    :title="$tc(\'sw-cms.detail.title.blockFavoriteEmptyState\')"\n                >\n                    {{ $tc(\'sw-cms.detail.label.blockFavoriteEmptyState\') }}\n                </sw-empty-state>\n                <div\n                    v-for="block in cmsBlocksBySelectedBlockCategory"\n                    :key="block.name"\n                    class="sw-cms-sidebar__block"\n                >\n\n                    <div class="sw-cms-sidebar__block-preview-with-actions">\n                        <div\n                            v-draggable="{ dragGroup: \'cms-stage\', data: { block }, onDrop: onBlockStageDrop }"\n                            class="sw-cms-sidebar__block-preview"\n                            :class="{ \'has--no-label\': !block.label }"\n                        >\n\n                            \n                            {% block sw_cms_sidebar_block_overview_preview_component %}\n                            <component :is="block.previewComponent" />\n                            {% endblock %}\n                        </div>\n\n                        \n                        {% block sw_cms_sidebar_block_overview_preview_favorite_action %}\n                        <sw-button\n                            class="sw-cms-sidebar__block-favorite"\n                            size="small"\n                            square\n                            block\n                            @click="onToggleBlockFavorite(block.name)"\n                        >\n                            <sw-icon\n                                v-if="cmsBlockFavorites.isFavorite(block.name)"\n                                name="solid-heart"\n                                size="20"\n                                class="sw-cms-sidebar__icon-cms-block-favorite"\n                            />\n                            <sw-icon\n                                v-else\n                                name="regular-heart"\n                                size="20"\n                                class="sw-cms-sidebar__icon-cms-block-favorite"\n                            />\n                        </sw-button>\n                        {% endblock %}\n                    </div>\n\n                    \n                    {% block sw_cms_sidebar_block_overview_preview_label %}\n                    <span\n                        v-if="block.label"\n                        class="sw-cms-sidebar__block-label"\n                    >\n                        {{ $tc(block.label) }}\n                    </span>\n                    {% endblock %}\n                </div>\n            </div>\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </sw-sidebar-item>\n    {% endblock %}\n\n    \n    {% block sw_cms_sidebar_block_and_section_settings %}\n    <sw-sidebar-item\n        ref="itemConfigSidebar"\n        icon="regular-file-edit"\n        :title="sidebarItemSettings"\n        :disabled="(selectedBlock === null && selectedSection === null) || page.locked || disabled"\n        @close-content="onCloseBlockConfig"\n    >\n\n        \n        {% block sw_cms_sidebar_block_settings %}\n        <div class="sw-cms-sidebar__block-settings">\n            <template v-if="selectedBlock !== null">\n\n                \n                {% block sw_cms_sidebar_block_settings_content %}\n                <sw-sidebar-collapse :expand-on-loading="true">\n\n                    \n                    {% block sw_cms_sidebar_block_settings_header %}\n                    <template #header>\n                        <span>\n                            {{ $tc(\'sw-cms.sidebar.contentMenu.generalSettings\') }}\n                        </span>\n                    </template>\n                    {% endblock %}\n\n                    \n                    {% block sw_cms_sidebar_block_settings_form %}\n                    <template #content>\n                        <sw-cms-block-config\n                            :block="selectedBlock"\n                            @block-delete="onBlockDelete"\n                            @block-duplicate="onBlockDuplicate"\n                        />\n                    </template>\n                    {% endblock %}\n                </sw-sidebar-collapse>\n                {% endblock %}\n\n                \n                {% block sw_cms_sidebar_block_layout_settings_content %}\n                <sw-sidebar-collapse :expand-on-loading="false">\n\n                    \n                    {% block sw_cms_sidebar_block_layout_settings_header %}\n                    <template #header>\n                        <span> {{ $tc(\'sw-cms.sidebar.contentMenu.layoutSettings\') }}</span>\n                    </template>\n                    {% endblock %}\n\n                    \n                    {% block sw_cms_sidebar_block_layout_settings_form %}\n                    <template #content>\n                        <sw-cms-block-layout-config :block="selectedBlock" />\n                    </template>\n                    {% endblock %}\n                </sw-sidebar-collapse>\n                {% endblock %}\n\n                <sw-sidebar-collapse :expand-on-loading="false">\n                    <template #header>\n                        <span>{{ $tc(\'sw-cms.sidebar.contentMenu.visibilitySettings\') }}</span>\n                    </template>\n                    <template #content>\n                        <sw-cms-visibility-config\n                            class="sw-cms-sidebar__visibility-config-block"\n                            :visibility="selectedBlock.visibility"\n                            @visibility-change="(viewport, isVisible) => onVisibilityChange(selectedBlock, viewport, isVisible)"\n                        />\n                    </template>\n                </sw-sidebar-collapse>\n            </template>\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_cms_sidebar_section_settings %}\n        <div class="sw-cms-sidebar__section-settings">\n            <template v-if="selectedSection !== null">\n\n                \n                {% block sw_cms_sidebar_section_settings_content %}\n                <sw-sidebar-collapse :expand-on-loading="true">\n\n                    \n                    {% block sw_cms_sidebar_section_settings_header %}\n                    <template #header>\n                        <span>\n                            {{ $tc(\'sw-cms.sidebar.contentMenu.generalSettings\') }}\n                        </span>\n                    </template>\n                    {% endblock %}\n\n                    \n                    {% block sw_cms_sidebar_section_settings_form %}\n                    <template #content>\n                        <sw-cms-section-config\n                            :section="selectedSection"\n                            @section-duplicate="onSectionDuplicate"\n                            @section-delete="onSectionDelete"\n                        />\n                    </template>\n                    {% endblock %}\n                </sw-sidebar-collapse>\n\n                <sw-sidebar-collapse :expand-on-loading="false">\n                    <template #header>\n                        <span>{{ $tc(\'sw-cms.sidebar.contentMenu.visibilitySettings\') }}</span>\n                    </template>\n                    <template #content>\n                        <sw-cms-visibility-config\n                            class="sw-cms-sidebar__visibility-config-section"\n                            :visibility="selectedSection.visibility"\n                            @visibility-change="(viewport, isVisible) => onVisibilityChange(selectedSection, viewport, isVisible)"\n                        />\n                    </template>\n                </sw-sidebar-collapse>\n                {% endblock %}\n            </template>\n        </div>\n        {% endblock %}\n    </sw-sidebar-item>\n    {% endblock %}\n\n    \n    {% block sw_cms_sidebar_navigator %}\n    <sw-sidebar-item\n        ref="blockNavigator"\n        icon="regular-layer-group"\n        :title="$tc(\'sw-cms.detail.sidebar.titleNavigator\')"\n        :disabled="!page.sections.length === 0 || currentDeviceView === \'form\' || page.locked || disabled"\n        @click="onSidebarNavigatorClick"\n    >\n        \n        {% block sw_cms_sidebar_navigator_content %}\n        <div class="sw-cms-sidebar__navigator">\n\n            \n            {% block sw_cms_sidebar_navigator_section %}\n            <div\n                v-for="(section, sectionIndex) in page.sections"\n                :id="`sw-cms-sidebar__section-${section.id}`"\n                :key="section.id"\n                class="sw-cms-sidebar__navigator-section"\n            >\n\n                \n                {% block sw_cms_sidebar_navigator_section_header %}\n                <div class="sw-cms-sidebar__navigator-section-header">\n                    <template v-if="section.name">\n                        {{ $tc(\'sw-cms.section.layoutSection\') }} - {{ section.name }}\n                    </template>\n\n                    <template v-else-if="section.type === \'sidebar\'">\n                        {{ $tc(\'sw-cms.section.isSidebar\') }}\n                    </template>\n\n                    <template v-else>\n                        {{ $tc(\'sw-cms.section.isDefault\') }}\n                    </template>\n\n                    \n                    {% block sw_cms_sidebar_navigator_section_menu %}\n                    <sw-context-button :key="section.position">\n\n                        \n                        {% block sw_cms_sidebar_navigator_section_menu_move_up %}\n                        <sw-context-menu-item\n                            class="sw-cms-sidebar__navigator-section-move-up"\n                            :disabled="section.position === 0"\n                            @click="moveSectionUp(section)"\n                        >\n                            {{ $tc(\'sw-cms.sidebar.contentMenu.moveUp\') }}\n                        </sw-context-menu-item>\n                        {% endblock %}\n\n                        \n                        {% block sw_cms_sidebar_navigator_section_menu_move_down %}\n                        <sw-context-menu-item\n                            class="sw-cms-sidebar__navigator-section-move-down"\n                            :disabled="section.position === page.sections.length - 1"\n                            @click="moveSectionDown(section)"\n                        >\n                            {{ $tc(\'sw-cms.sidebar.contentMenu.moveDown\') }}\n                        </sw-context-menu-item>\n                        {% endblock %}\n\n                        \n                        {% block sw_cms_sidebar_navigator_section_menu_settings %}\n                        <sw-context-menu-item\n                            class="sw-cms-sidebar__navigator-section-settings"\n                            @click="openSectionSettings(sectionIndex)"\n                        >\n                            {{ $tc(\'sw-cms.sidebar.contentMenu.settings\') }}\n                        </sw-context-menu-item>\n                        {% endblock %}\n\n                        \n                        {% block sw_cms_sidebar_navigator_section_menu_duplicate %}\n                        <sw-context-menu-item\n                            class="sw-cms-sidebar__navigator-section-duplicate"\n                            :disabled="!sectionIsDuplicable(section)"\n                            @click="onSectionDuplicate(section)"\n                        >\n                            {{ $tc(\'global.default.duplicate\') }}\n                        </sw-context-menu-item>\n                        {% endblock %}\n\n                        \n                        {% block sw_cms_sidebar_navigator_section_menu_delete %}\n                        <sw-context-menu-item\n                            class="sw-cms-sidebar__navigator-section-delete"\n                            variant="danger"\n                            @click="onSectionDelete(section.id)"\n                        >\n                            {{ $tc(\'sw-cms.general.buttonDelete\') }}\n                        </sw-context-menu-item>\n                        {% endblock %}\n                    </sw-context-button>\n                    {% endblock %}\n                </div>\n                {% endblock %}\n\n                \n                {% block sw_cms_sidebar_navigator_main_elements %}\n                <template v-if="getMainContentBlocks(section.blocks).length > 0">\n                    \n                    {% block sw_cms_sidebar_navigator_main_element %}\n                    <template\n                        v-for="block in getMainContentBlocks(section.blocks)"\n                        {% if VUE3 %}\n                        :key="block.id"\n                        {% endif %}\n                    >\n                        <sw-cms-sidebar-nav-element\n                            {% if VUE2 %}\n                            :key="block.id"\n                            {% endif %}\n                            v-draggable="getDragData(block, sectionIndex)"\n                            v-droppable="getDropData(block, sectionIndex)"\n                            :block="block"\n                            class="sw-cms-sidebar__navigator-block"\n                            :removable="blockIsRemovable(block)"\n                            :duplicable="blockIsDuplicable(block)"\n                            :class="{ \'is--dragging\': block.isDragging }"\n                            @block-delete="onBlockDelete($event, section)"\n                            @block-duplicate="onBlockDuplicate($event, section)"\n                        />\n                    </template>\n                    {% endblock %}\n                </template>\n\n                <template v-else>\n                    \n                    {% block sw_cms_sidebar_navigator_main_empty %}\n                    <div\n                        :key="section.id + \'_main\'"\n                        v-droppable="getDropData({ position: 0, sectionPosition: \'main\' }, sectionIndex)"\n                        class="sw-cms-sidebar__navigator-empty-element"\n                    >\n                        {{ $tc(\'sw-cms.detail.label.addBlocks\') }}\n                    </div>\n                    {% endblock %}\n                </template>\n                {% endblock %}\n\n                <template v-if="section.type === \'sidebar\'">\n                    <div class="sw-cms-sidebar__navigator-section-spacer"></div>\n\n                    \n                    {% block sw_cms_sidebar_navigator_sidebar_elements %}\n                    <template v-if="getSidebarContentBlocks(section.blocks).length > 0">\n                        \n                        {% block sw_cms_sidebar_navigator_sidebar_element %}\n                        <template\n                            v-for="block in getSidebarContentBlocks(section.blocks)"\n                            {% if VUE3 %}\n                            :key="block.id"\n                            {% endif %}\n                        >\n                            <sw-cms-sidebar-nav-element\n                                {% if VUE2 %}\n                                :key="block.id"\n                                {% endif %}\n                                v-draggable="getDragData(block, sectionIndex)"\n                                v-droppable="getDropData(block, sectionIndex)"\n                                :block="block"\n                                :removable="blockIsRemovable(block)"\n                                class="sw-cms-sidebar__navigator-block is--sidebar"\n                                :class="{ \'is--dragging\': block.isDragging }"\n                                @block-delete="onBlockDelete($event, section)"\n                                @block-duplicate="onBlockDuplicate($event, section)"\n                            />\n                        </template>\n                        {% endblock %}\n                    </template>\n\n                    <template v-else>\n                        \n                        {% block sw_cms_sidebar_navigator_sidebar_empty %}\n                        <div\n                            :key="section.id + \'_sidebar\'"\n                            v-droppable="getDropData({ position: 0, sectionPosition: \'sidebar\' }, sectionIndex)"\n                            class="sw-cms-sidebar__navigator-empty-element"\n                        >\n                            {{ $tc(\'sw-cms.detail.label.addBlocks\') }}\n                        </div>\n                        {% endblock %}\n                    </template>\n                    {% endblock %}\n                </template>\n            </div>\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </sw-sidebar-item>\n    {% endblock %}\n\n    \n    {% block sw_cms_sidebar_layout_assignment %}\n    <sw-sidebar-item\n        ref="layoutAssignment"\n        class="sw-cms-sidebar__layout-assignment"\n        icon="regular-share"\n        :title="$tc(\'sw-cms.detail.sidebar.titleLayoutAssignment\')"\n        :disabled="page.locked || disabled"\n    >\n\n        \n        {% block sw_cms_sidebar_layout_assignment_content %}\n        <div class="sw-cms-sidebar__layout-assignment-content">\n            \n            {% block sw_cms_sidebar_layout_assignment_headline %}\n            <h3 class="sw-cms-sidebar__layout-assignment-headline">\n                {{ $tc(\'sw-cms.sidebar.layoutAssignment.headline\') }}\n            </h3>\n            {% endblock %}\n\n            \n            {% block sw_cms_sidebar_layout_assignment_info_text %}\n            <p class="sw-cms-sidebar__layout-assignment-info-text">\n                {{ $tc(\'sw-cms.sidebar.layoutAssignment.infoText\') }}\n            </p>\n            {% endblock %}\n\n            \n            {% block sw_cms_sidebar_layout_assignment_action_open %}\n            <sw-button\n                variant="ghost"\n                size="small"\n                class="sw-cms-sidebar__layout-assignment-open"\n                @click="onOpenLayoutAssignment"\n            >\n                {{ $tc(\'sw-cms.sidebar.layoutAssignment.actionAssignLayout\') }}\n            </sw-button>\n            {% endblock %}\n        </div>\n        {% endblock %}\n\n        <div\n            v-if="showDefaultLayoutSelection"\n            class="sw-cms-sidebar__layout-set-as-default-content"\n        >\n            <h3 class="sw-cms-sidebar__layout-set-as-default-headline">\n                {{ $tc(\'sw-cms.sidebar.layoutSetAsDefault.headline\') }}\n            </h3>\n\n            <p class="sw-cms-sidebar__layout-set-as-default-info-text">\n                {{ $tc(\'sw-cms.components.setDefaultLayoutModal.infoText\') }}\n            </p>\n\n            <sw-button\n                variant="ghost"\n                size="small"\n                class="sw-cms-sidebar__layout-set-as-default-open"\n                @click="onOpenLayoutSetAsDefault"\n            >\n                {{ $tc(\'sw-cms.sidebar.layoutSetAsDefault.actionSetAsDefaultLayout\') }}\n            </sw-button>\n        </div>\n    </sw-sidebar-item>\n    {% endblock %}\n\n    \n    {% block sw_cms_sidebar_navigator_confirm_modal %}\n    <sw-modal\n        v-if="showSidebarNavigatorModal"\n        class="sw-cms-sidebar__navigator-confirm-modal"\n        :title="$tc(\'global.default.warning\')"\n        variant="small"\n        @modal-close="onSidebarNavigationCancel"\n    >\n\n        \n        {% block sw_cms_sidebar_navigator_confirm_modal_content %}\n        <p class="sw-confirm-modal__text">\n            {{ $tc(\'sw-cms.detail.sidebar.confirmTextNavigator\') }}\n\n            \n            {% block sw_cms_sidebar_navigator_confirm_modal_content_input_reminder %}\n            <sw-checkbox-field\n                {% if VUE3 %}\n                v-model:value="navigatorDontRemind"\n                {% else %}\n                v-model="navigatorDontRemind"\n                {% endif %}\n                class="sw-cms-sidebar__navigator-confirm-modal-reminder"\n                :label="$tc(\'sw-cms.detail.sidebar.confirmReminderNavigator\')"\n            />\n            {% endblock %}\n        </p>\n        {% endblock %}\n\n        <template #modal-footer>\n            \n            {% block sw_cms_sidebar_navigator_confirm_modal_content_footer %}\n            \n            {% block sw_cms_sidebar_navigator_confirm_modal_content_footer_cancel %}\n            <sw-button\n                class="sw-cms-sidebar__navigator-confirm-modal-cancel"\n                size="small"\n                @click="onSidebarNavigationCancel"\n            >\n                {{ $tc(\'global.default.cancel\') }}\n            </sw-button>\n            {% endblock %}\n\n            \n            {% block sw_cms_sidebar_navigator_confirm_modal_content_footer_confirm %}\n            <sw-button\n                class="sw-cms-sidebar__navigator-confirm-modal-confirm"\n                variant="primary"\n                size="small"\n                @click="onSidebarNavigationConfirm"\n            >\n                {{ $tc(\'global.default.confirm\') }}\n            </sw-button>\n            {% endblock %}\n            {% endblock %}\n        </template>\n    </sw-modal>\n    {% endblock %}\n</sw-sidebar>\n{% endblock %}\n',inject:["acl","cmsService","repositoryFactory","feature","cmsBlockFavorites","cmsPageTypeService"],mixins:[u.getByName("cms-state"),u.getByName("placeholder")],props:{page:{type:Object,required:!0},demoEntity:{type:String,required:!1,default:null},demoEntityIdProp:{type:String,required:!1,default:null},disabled:{type:Boolean,required:!1,default:!1}},data:function(){return{demoEntityId:this.demoEntityIdProp,currentBlockCategory:"text",currentDragSectionIndex:null,showSidebarNavigatorModal:!1,navigatorDontRemind:!1}},computed:p({pageTypes:function(){return this.cmsPageTypeService.getTypes()},blockRepository:function(){return this.repositoryFactory.create("cms_block")},slotRepository:function(){return this.repositoryFactory.create("cms_slot")},cmsBlocks:function(){var e=this,n=Shopware.State.get("cmsPageState").currentPageType,t=Object.entries(this.cmsService.getCmsBlockRegistry()).filter((function(t){var s=a()(t,2),i=s[0];return!0!==s[1].hidden&&e.cmsService.isBlockAllowedInPageType(i,n)}));return Object.fromEntries(t)},mediaRepository:function(){return this.repositoryFactory.create("media")},addBlockTitle:function(){return this.isSystemDefaultLanguage?this.$tc("sw-cms.detail.sidebar.titleBlockOverview"):this.$tc("sw-cms.general.disabledAddingBlocksToolTip")},pageSections:function(){return this.page.sections},sidebarItemSettings:function(){return null!==this.selectedBlock?this.$tc("sw-cms.detail.sidebar.titleBlockSettings"):this.$tc("sw-cms.detail.sidebar.titleSectionSettings")},tooltipDisabled:function(){return{message:this.$tc("sw-cms.detail.tooltip.cannotSelectProductPageLayout"),disabled:"product_detail"!==this.page.type}},demoCriteria:function(){if("product"===this.demoEntity){var e=new v(1,25);return e.addAssociation("options.group"),e}return new v(1,25)},demoContext:function(){return"product"===this.demoEntity?p(p({},Shopware.Context.api),{},{inheritance:!0}):Shopware.Context.api},blockTypes:function(){return Object.keys(this.cmsService.getCmsBlockRegistry())},pageConfigErrors:function(){return[this.pageNameError].filter((function(e){return!!e}))},hasPageConfigErrors:function(){return this.pageConfigErrors.length>0},showDefaultLayoutSelection:function(){return!!this.acl.can("system_config.editor")&&("product_list"===this.page.type||!("product_detail"!==this.page.type||!this.feature.isActive("v6.6.0.0")))},cmsBlocksBySelectedBlockCategory:function(){var e=this,n=Object.values(this.cmsBlocks).filter((function(e){return!0!==e.hidden}));return"favorite"===this.currentBlockCategory?n.filter((function(n){return e.cmsBlockFavorites.isFavorite(n.name)})):n.filter((function(n){return n.category===e.currentBlockCategory}))}},k("page",["name"])),created:function(){this.createdComponent()},methods:{createdComponent:function(){var e=this;this.blockTypes.some((function(n){return e.cmsBlockFavorites.isFavorite(n)}))&&(this.currentBlockCategory="favorite")},onPageTypeChange:function(e){this.$emit("page-type-change",e)},onDemoEntityChange:function(e){this.$emit("demo-entity-change",e)},onCloseBlockConfig:function(){Shopware.State.commit("cmsPageState/removeSelectedBlock"),Shopware.State.commit("cmsPageState/removeSelectedSection")},isDisabledPageType:function(e){return"product_detail"===this.page.type||(this.page.type.includes("custom_entity_")?!e.name.includes("custom_entity_"):"product_detail"===e.name||e.name.includes("custom_entity_"))},openSectionSettings:function(e){var n=this;this.$refs.pageConfigSidebar.openContent(),this.$nextTick((function(){n.$refs.sectionConfigSidebar[e].collapseItem()}))},blockIsRemovable:function(e){return!1!==this.cmsService.getCmsBlockRegistry()[e.type].removable&&this.isSystemDefaultLanguage},blockIsUnique:function(e){return this.page.type===b.a.PAGE_TYPES.PRODUCT_DETAIL&&e.slots.some((function(e){return b.a.UNIQUE_SLOTS_KEBAB.includes(e.type)}))},blockIsDuplicable:function(e){return!this.blockIsUnique(e)},sectionIsDuplicable:function(e){var n=this;return e.blocks.every((function(e){return n.blockIsDuplicable(e)}))},onBlockDragSort:function(e,n,t){var s=this;return i()(d.a.mark((function i(){var o,a,c,l,r,b;return d.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!0===t){i.next=2;break}return i.abrupt("return");case 2:if(o=e.sectionIndex,a=n.sectionIndex,c=s.page.sections[a],!(o<0||o>=s.page.sections.length||a<0||a>=s.page.sections.length)){i.next=7;break}return i.abrupt("return");case 7:if(e.block.sectionPosition!==n.block.sectionPosition&&(e.block.isDragging=!0,e.block.sectionPosition=n.block.sectionPosition),null===s.currentDragSectionIndex&&(s.currentDragSectionIndex=o),l=c.blocks.has(e.block.id),s.currentDragSectionIndex===a||l){i.next=24;break}return e.block.isDragging=!0,r=o,s.currentDragSectionIndex!==o&&1===Math.abs(s.currentDragSectionIndex-a)&&(r=s.currentDragSectionIndex),s.currentDragSectionIndex-a<0&&(s.currentDragSectionIndex+=1),s.currentDragSectionIndex-a>0&&(s.currentDragSectionIndex-=1),e.block.sectionId=c.id,c.blocks.add(e.block),(b=s.page.sections[r]).blocks.remove(e.block.id),b._origin.blocks.remove(e.block.id),s.refreshPosition(b.blocks),s.refreshPosition(c.blocks),i.abrupt("return");case 24:if(e.block.position!==n.block.position){i.next=26;break}return i.abrupt("return");case 26:s.page.sections[a].blocks.moveItem(e.block.position,n.block.position),s.refreshPosition(c.blocks);case 28:case"end":return i.stop()}}),i)})))()},refreshPosition:function(e){return e.forEach((function(e,n){e.position=n}))},onSidebarNavigatorClick:function(){this.$refs.blockNavigator.isActive&&("true"!==localStorage.getItem("cmsNavigatorDontRemind")?(this.navigatorDontRemind=!1,this.showSidebarNavigatorModal=!0):this.onSidebarNavigationConfirm())},onSidebarNavigationConfirm:function(){this.navigatorDontRemind&&localStorage.setItem("cmsNavigatorDontRemind",!0),this.$emit("page-save"),this.showSidebarNavigatorModal=!1},onSidebarNavigationCancel:function(){var e=this;this.showSidebarNavigatorModal=!1,this.$nextTick((function(){e.$refs.pageConfigSidebar.openContent()}))},getDragData:function(e,n){return{delay:300,dragGroup:"cms-navigator",data:{block:e,sectionIndex:n},validDragCls:null,onDragEnter:this.onBlockDragSort,onDrop:this.onBlockDragStop}},getDropData:function(e,n){return{dragGroup:"cms-navigator",data:{block:e,sectionIndex:n},onDrop:this.onBlockDropAbort}},onBlockDragStop:function(e){this.currentDragSectionIndex=null,e.block.isDragging=!1},onBlockDropAbort:function(e,n){var t=e.sectionIndex,s=n.sectionIndex;if(!(t<0||s<0)){var i=this.page.sections[t].blocks.has(e.block.id),o=this.page.sections[s].blocks.has(e.block.id);i||o||this.page.sections[t].blocks.add(e.block)}},onBlockStageDrop:function(e,n){var t=this;if(n&&e.block&&!(n.dropIndex<0)&&n.section){var s=this.cmsService.getCmsBlockRegistry(),i=n.section,o=s[e.block.name],a=this.blockRepository.create();a.type=e.block.name,a.position=n.dropIndex,a.sectionPosition=n.sectionPosition,a.sectionId=i.id,a.visibility={desktop:!0,tablet:!0,mobile:!0},Object.assign(a,w(this.blockConfigDefaults),w(o.defaultConfig||{})),Object.keys(o.slots).forEach((function(e){var n,s,i,c=o.slots[e],l=t.slotRepository.create();l.blockId=a.id,l.slot=e,"string"==typeof c?l.type=c:f.isPlainObject(c)&&(l.type=c.type,c.default&&f.isPlainObject(c.default)&&Object.assign(l,w(c.default)));var r=null===(n=c.default)||void 0===n?void 0:n.data;[null==r||null===(s=r.media)||void 0===s?void 0:s.source,null==r||null===(i=r.sliderItems)||void 0===i?void 0:i.source].includes("default")&&(l.config=p(p({},l.config),r)),a.slots.add(l)})),this.page.sections[i.position].blocks.splice(n.dropIndex,0,a),this.$emit("block-stage-drop"),this.$emit("current-block-change",i.id,a)}},moveSectionUp:function(e){this.page.sections.moveItem(e.position,e.position-1),this.$emit("page-save",!0)},moveSectionDown:function(e){this.page.sections.moveItem(e.position,e.position+1),this.$emit("page-save",!0)},onSectionDuplicate:function(e){this.$emit("section-duplicate",e)},onSectionDelete:function(e){Shopware.State.commit("cmsPageState/removeSelectedSection"),this.page.sections.remove(e),this.$emit("page-save")},onBlockDelete:function(e,n){n||(n=this.page.sections.get(e.sectionId)),n.blocks.remove(e.id),this.selectedBlock&&this.selectedBlock.id===e.id&&Shopware.State.commit("cmsPageState/removeSelectedBlock"),this.$emit("page-save",!0)},onBlockDuplicate:function(e,n){n||(n=this.page.sections.get(e.sectionId)),this.$emit("block-duplicate",e,n)},onRemoveSectionBackgroundMedia:function(e){e.backgroundMediaId=null,e.backgroundMedia=null,this.pageUpdate()},onSetSectionBackgroundMedia:function(e,n){var t=a()(e,1)[0];n.backgroundMediaId=t.id,n.backgroundMedia=t,this.pageUpdate()},onToggleBlockFavorite:function(e){this.cmsBlockFavorites.update(!this.cmsBlockFavorites.isFavorite(e),e)},successfulUpload:function(e,n){var t=this;n.backgroundMediaId=e.targetId,this.mediaRepository.get(e.targetId).then((function(e){n.backgroundMedia=e,t.pageUpdate()}))},uploadTag:function(e){return"cms-section-media-config-".concat(e.id)},getMainContentBlocks:function(e){var n=this;return e.filter((function(e){return n.blockTypeExists(e.type)&&"main"===e.sectionPosition}))},getSidebarContentBlocks:function(e){var n=this;return e.filter((function(e){return n.blockTypeExists(e.type)&&"sidebar"===e.sectionPosition}))},pageUpdate:function(){this.$emit("page-update")},onOpenLayoutAssignment:function(){this.$emit("open-layout-assignment")},onOpenLayoutSetAsDefault:function(){this.$emit("open-layout-set-as-default")},blockTypeExists:function(e){return this.blockTypes.includes(e)},onVisibilityChange:function(e,n,t){e.visibility[n]=t}}}},YvJp:function(e,n,t){},w9Qi:function(e,n,t){var s=t("YvJp");s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,t("P8hj").default)("0e9f6041",s,!0,{})}}]);
//# sourceMappingURL=84871392379299056637.js.map