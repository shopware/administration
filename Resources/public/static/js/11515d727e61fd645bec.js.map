{"version":3,"sources":["webpack:///./src/module/sw-flow/component/modals/sw-flow-affiliate-and-campaign-code-modal/index.js","webpack:///./src/module/sw-flow/component/modals/sw-flow-affiliate-and-campaign-code-modal/sw-flow-affiliate-and-campaign-code-modal.html.twig"],"names":["_Shopware","Shopware","Component","Mixin","Service","ShopwareError","Classes","mapState","getComponentHelper","template","mixins","getByName","props","sequence","type","Object","required","action","String","default","data","entityError","entity","affiliateCode","value","upsert","campaignCode","computed","_objectSpread","entityOptions","_this$triggerEvent$aw","this","triggerEvent","allowedAware","aware","getAvailableEntities","triggerActions","watch","created","createdComponent","methods","length","config","fieldError","field","code","onSave","$emit","onClose"],"mappings":"stBAEA,IAAAA,EAAsCC,SAA9BC,EAASF,EAATE,UAAWC,EAAKH,EAALG,MAAOC,EAAOJ,EAAPI,QAClBC,EAAkBJ,SAASK,QAA3BD,cACAE,EAAaL,EAAUM,qBAAvBD,SAMO,WACXE,SCXW,y9IDaXC,OAAQ,CACJP,EAAMQ,UAAU,eAChBR,EAAMQ,UAAU,iBAGpBC,MAAO,CACHC,SAAU,CACNC,KAAMC,OACNC,UAAU,GAEdC,OAAQ,CACJH,KAAMI,OACNF,UAAU,EACVG,QAAS,OAIjBC,KAAI,WACA,MAAO,CACHC,YAAa,KACbC,OAAQ,KACRC,cAAe,CACXC,MAAO,KACPC,QAAQ,GAEZC,aAAc,CACVF,MAAO,KACPC,QAAQ,KAKpBE,SAAQC,EAAA,CACJC,cAAa,WAAI,IAADC,EACZ,IAAKC,KAAKC,aACN,MAAO,GAGX,IAAMC,EAAsC,QAA1BH,EAAGC,KAAKC,aAAaE,aAAK,IAAAJ,IAAI,GAGhD,OAAO1B,EAAQ,sBAAsB+B,qBAAqBJ,KAAKd,OAAQc,KAAKK,eAAgBH,EAFzE,MAKpB1B,EAAS,cAAe,CAAC,eAAgB,oBAGhD8B,MAAO,CACHf,OAAM,SAACE,GACCA,GAASO,KAAKV,cACdU,KAAKV,YAAc,QAK/BiB,QAAO,WACHP,KAAKQ,oBAGTC,QAAS,CACLD,iBAAgB,WACRR,KAAKF,cAAcY,SACnBV,KAAKT,OAASS,KAAKF,cAAc,GAAGL,OAGnCO,KAAKlB,SAAS6B,SAInBX,KAAKT,OAASS,KAAKlB,SAAS6B,OAAOpB,OACnCS,KAAKR,cAAaK,EAAA,GAAQG,KAAKlB,SAAS6B,OAAOnB,eAC/CQ,KAAKL,aAAYE,EAAA,GAAQG,KAAKlB,SAAS6B,OAAOhB,gBAGlDiB,WAAU,SAACC,GACP,OAAKA,GAAUA,EAAMH,OAMd,KALI,IAAIpC,EAAc,CACrBwC,KAAM,0CAOlBC,OAAM,WAEF,GADAf,KAAKV,YAAcU,KAAKY,WAAWZ,KAAKT,SACpCS,KAAKV,YAAT,CAIA,IAAMqB,EAAS,CACXpB,OAAQS,KAAKT,OACbC,cAAeQ,KAAKR,cACpBG,aAAcK,KAAKL,cAGjBb,EAAQe,IAAA,GACPG,KAAKlB,UAAQ,IAChB6B,WAGJX,KAAKgB,MAAM,iBAAkBlC,GAC7BkB,KAAKiB,YAGTA,QAAO,WACHjB,KAAKgB,MAAM","file":"static/js/11515d727e61fd645bec.js","sourcesContent":["import template from './sw-flow-affiliate-and-campaign-code-modal.html.twig';\n\nconst { Component, Mixin, Service } = Shopware;\nconst { ShopwareError } = Shopware.Classes;\nconst { mapState } = Component.getComponentHelper();\n\n/**\n * @private\n * @package services-settings\n */\nexport default {\n    template,\n\n    mixins: [\n        Mixin.getByName('placeholder'),\n        Mixin.getByName('notification'),\n    ],\n\n    props: {\n        sequence: {\n            type: Object,\n            required: true,\n        },\n        action: {\n            type: String,\n            required: false,\n            default: null,\n        },\n    },\n\n    data() {\n        return {\n            entityError: null,\n            entity: null,\n            affiliateCode: {\n                value: null,\n                upsert: false,\n            },\n            campaignCode: {\n                value: null,\n                upsert: false,\n            },\n        };\n    },\n\n    computed: {\n        entityOptions() {\n            if (!this.triggerEvent) {\n                return [];\n            }\n\n            const allowedAware = this.triggerEvent.aware ?? [];\n            const properties = [];\n            // eslint-disable-next-line max-len\n            return Service('flowBuilderService').getAvailableEntities(this.action, this.triggerActions, allowedAware, properties);\n        },\n\n        ...mapState('swFlowState', ['triggerEvent', 'triggerActions']),\n    },\n\n    watch: {\n        entity(value) {\n            if (value && this.entityError) {\n                this.entityError = null;\n            }\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            if (this.entityOptions.length) {\n                this.entity = this.entityOptions[0].value;\n            }\n\n            if (!this.sequence.config) {\n                return;\n            }\n\n            this.entity = this.sequence.config.entity;\n            this.affiliateCode = { ...this.sequence.config.affiliateCode };\n            this.campaignCode = { ...this.sequence.config.campaignCode };\n        },\n\n        fieldError(field) {\n            if (!field || !field.length) {\n                return new ShopwareError({\n                    code: 'c1051bb4-d103-4f74-8988-acbcafc7fdc3',\n                });\n            }\n\n            return null;\n        },\n\n        onSave() {\n            this.entityError = this.fieldError(this.entity);\n            if (this.entityError) {\n                return;\n            }\n\n            const config = {\n                entity: this.entity,\n                affiliateCode: this.affiliateCode,\n                campaignCode: this.campaignCode,\n            };\n\n            const sequence = {\n                ...this.sequence,\n                config,\n            };\n\n            this.$emit('process-finish', sequence);\n            this.onClose();\n        },\n\n        onClose() {\n            this.$emit('modal-close');\n        },\n    },\n};\n","export default \"\\n{% block sw_flow_affiliate_and_campaign_code_modal %}\\n<sw-modal\\n    class=\\\"sw-flow-affiliate-and-campaign-code-modal\\\"\\n    :title=\\\"$tc('sw-flow.modals.affiliateAndCampaignCode.title')\\\"\\n    :closable=\\\"false\\\"\\n    @modal-close=\\\"onClose\\\"\\n>\\n    \\n    {% block sw_flow_affiliate_and_campaign_code_modal_content %}\\n    <div class=\\\"sw-flow-affiliate-and-campaign-code-modal__content\\\">\\n        \\n        {% block sw_flow_affiliate_and_campaign_code_modal_entity %}\\n        <sw-single-select\\n            {% if VUE3 %}\\n            v-model:value=\\\"entity\\\"\\n            {% else %}\\n            v-model=\\\"entity\\\"\\n            {% endif %}\\n            class=\\\"sw-flow-affiliate-and-campaign-code-modal__entity\\\"\\n            required\\n            show-clearable-button\\n            :label=\\\"$tc('sw-flow.modals.affiliateAndCampaignCode.labelEntity')\\\"\\n            :placeholder=\\\"$tc('sw-flow.modals.affiliateAndCampaignCode.placeholderEntity')\\\"\\n            :error=\\\"entityError\\\"\\n            :options=\\\"entityOptions\\\"\\n        />\\n        {% endblock %}\\n\\n        <sw-container\\n            columns=\\\"3fr 1fr\\\"\\n            gap=\\\"16px\\\"\\n        >\\n            \\n            {% block sw_flow_affiliate_and_campaign_code_modal_affiliate_code %}\\n            <sw-text-field\\n                {% if VUE3 %}\\n                v-model:value=\\\"affiliateCode.value\\\"\\n                {% else %}\\n                v-model=\\\"affiliateCode.value\\\"\\n                {% endif %}\\n                class=\\\"sw-flow-affiliate-and-campaign-code-modal__affiliate-code\\\"\\n                :label=\\\"$tc('sw-flow.modals.affiliateAndCampaignCode.labelAffiliateCode')\\\"\\n                :placeholder=\\\"$tc('sw-flow.modals.affiliateAndCampaignCode.placeholderAffiliateCode')\\\"\\n            />\\n            {% endblock %}\\n\\n            \\n            {% block sw_flow_affiliate_and_campaign_code_modal_affiliate_code_overwrite %}\\n            <sw-switch-field\\n                {% if VUE3 %}\\n                v-model:value=\\\"affiliateCode.upsert\\\"\\n                {% else %}\\n                v-model=\\\"affiliateCode.upsert\\\"\\n                {% endif %}\\n                class=\\\"sw-flow-affiliate-and-campaign-code-modal__affiliate-code-overwrite\\\"\\n                :label=\\\"$tc('sw-flow.modals.affiliateAndCampaignCode.overwrite')\\\"\\n            />\\n            {% endblock %}\\n        </sw-container>\\n\\n        <sw-container\\n            columns=\\\"3fr 1fr\\\"\\n            gap=\\\"16px\\\"\\n        >\\n            \\n            {% block sw_flow_affiliate_and_campaign_code_modal_campaign_code %}\\n            <sw-text-field\\n                {% if VUE3 %}\\n                v-model:value=\\\"campaignCode.value\\\"\\n                {% else %}\\n                v-model=\\\"campaignCode.value\\\"\\n                {% endif %}\\n                class=\\\"sw-flow-affiliate-and-campaign-code-modal__campaign-code\\\"\\n                :label=\\\"$tc('sw-flow.modals.affiliateAndCampaignCode.labelCampaignCode')\\\"\\n                :placeholder=\\\"$tc('sw-flow.modals.affiliateAndCampaignCode.placeholderCampaignCode')\\\"\\n            />\\n            {% endblock %}\\n\\n            \\n            {% block sw_flow_affiliate_and_campaign_code_modal_campaign_code_overwrite %}\\n            <sw-switch-field\\n                {% if VUE3 %}\\n                v-model:value=\\\"campaignCode.upsert\\\"\\n                {% else %}\\n                v-model=\\\"campaignCode.upsert\\\"\\n                {% endif %}\\n                class=\\\"sw-flow-affiliate-and-campaign-code-modal__campaign-code-overwrite\\\"\\n                :label=\\\"$tc('sw-flow.modals.affiliateAndCampaignCode.overwrite')\\\"\\n            />\\n            {% endblock %}\\n        </sw-container>\\n    </div>\\n    {% endblock %}\\n\\n    <template #modal-footer>\\n        \\n        {% block sw_flow_affiliate_and_campaign_code_modal_footer_cancel_button %}\\n        <sw-button\\n            class=\\\"sw-flow-affiliate-and-campaign-code-modal__cancel-button\\\"\\n            size=\\\"small\\\"\\n            @click=\\\"onClose\\\"\\n        >\\n            {{ $tc('global.default.cancel') }}\\n        </sw-button>\\n        {% endblock %}\\n\\n        \\n        {% block sw_flow_affiliate_and_campaign_code_modal_footer_save_button %}\\n        <sw-button\\n            class=\\\"sw-flow-affiliate-and-campaign-code-modal__save-button\\\"\\n            variant=\\\"primary\\\"\\n            size=\\\"small\\\"\\n            @click=\\\"onSave\\\"\\n        >\\n            {{ sequence.id ? $tc('sw-flow.modals.buttonSaveAction') : $tc('sw-flow.modals.buttonAddAction') }}\\n        </sw-button>\\n        {% endblock %}\\n    </template>\\n</sw-modal>\\n{% endblock %}\\n\";"],"sourceRoot":""}