(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[31789,37108],{891693:function(){},483616:function(){},737108:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return a}}),n(944285);var a={template:'\n{% block sw_settings_search_view_live_search_keyword %}\n<div class="sw-settings-search-live-search-keyword">\n\n    \n    {% block sw_settings_search_view_live_search_keyword_highlight %}\n    <span\n        v-for="(keyword, i) in parsedMsg"\n        :key="i"\n        :class="getClass(i%2)"\n    >{{ keyword }}</span>\n    {% endblock %}\n\n</div>\n{% endblock %}\n',compatConfig:Shopware.compatConfig,props:{text:{type:String,required:!0,default:null},searchTerm:{type:String,required:!0,default:null},highlightClass:{type:String,required:!1,default:"sw-settings-search-live-search-keyword__highlight"}},computed:{parsedSearch(){return`(${this.searchTerm.trim().replace(/ +/g,"|")})`},parsedMsg(){return this.text.split(RegExp(this.parsedSearch,"gi"))}},methods:{getClass(e){return e?this.highlightClass:{}}}}},631789:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return r}}),n(716105),n(737108);let{Mixin:a}=Shopware,{Criteria:t}=Shopware.Data;var r={template:'\n{% block sw_settings_search_view_live_search_card %}\n<sw-card\n    class="sw-settings-search-live-search"\n    position-identifier="sw-settings-search-live-search"\n    :title="$tc(\'sw-settings-search.liveSearchTab.titleCard\')"\n>\n\n    \n    {% block sw_settings_search_view_live_search_rebuild_index_row %}\n    <div class="sw-settings-search-live-search__rebuild-index-row">\n\n        \n        {% block sw_settings_search_view_live_search_description %}\n        <div class="sw-settings-search-live-search__description">\n            {{ $tc(\'sw-settings-search.liveSearchTab.textDescription\') }}\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_settings_search_view_live_search_show_example_link %}\n        <sw-container\n            columns="1fr"\n            justify="end"\n        >\n            \n            <a\n                class="sw-settings-search-live-search__show-example-link"\n                role="button"\n                tabindex="0"\n                @click="onShowExampleModal"\n            >\n                {{ $tc(\'sw-settings-search.generalTab.linkExample\') }}\n                <sw-icon\n                    name="regular-long-arrow-right"\n                    small\n                />\n            </a>\n        </sw-container>\n        {% endblock %}\n\n        \n        {% block sw_settings_search_searchable_show_example_modal %}\n        <sw-settings-search-example-modal\n            v-if="showExampleModal"\n            @modal-close="onCloseExampleModal"\n        />\n        {% endblock %}\n    </div>\n    {% endblock %}\n\n    \n    {% block sw_settings_search_view_live_search_sales_channel %}\n    <sw-single-select\n        class="sw-settings-search-live-search__sales-channel-select"\n        value-property="id"\n        label-property="translated.name"\n        :placeholder="$tc(\'sw-settings-search.liveSearchTab.textPlaceholderSalesChannel\')"\n        :label="$tc(\'sw-settings-search.liveSearchTab.labelSalesChannelSelect\')"\n        :value="salesChannelId"\n        :options="salesChannels"\n        show-clearable-button\n        @update:value="changeSalesChannel"\n    />\n    {% endblock %}\n\n    \n    {% block sw_settings_search_view_live_search_input %}\n    <sw-simple-search-field\n        v-model:value="liveSearchTerm"\n        class="sw-settings-search-live-search__search_box"\n        variant="form"\n        :delay="1000"\n        :disabled="!isSearchEnable || undefined"\n        @search-term-change="searchOnStorefront"\n    >\n\n        \n        {% block sw_settings_search_view_live_search_search_icon_wrapper %}\n        <template #sw-simple-search-field-icon>\n            \n            {% block sw_settings_search_view_live_search_search_icon %}\n            <sw-icon\n                class="sw-settings-search-live-search__search-icon"\n                name="regular-search-s"\n                small\n                @click="searchOnStorefront"\n            />\n            {% endblock %}\n        </template>\n        {% endblock %}\n\n    </sw-simple-search-field>\n    {% endblock %}\n\n    \n    {% block sw_settings_search_view_live_search_results %}\n    <div class="sw-settings-search-live-search__search-results">\n\n        \n        {% block sw_search_bar_results_empty_state %}\n        <sw-loader v-if="searchInProgress" />\n        {% endblock %}\n\n        \n        {% block sw_settings_search_view_live_search_results_no_result %}\n        <div\n            v-if="products && products.length === 0"\n            class="sw-settings-search-live-search__no-result"\n        >\n            {{ $tc(\'sw-settings-search.liveSearchTab.textNoResult\') }}\n        </div>\n        {% endblock %}\n\n        \n        {% block sw_settings_search_view_live_search_results_search_grid %}\n        <sw-data-grid\n            v-if="products && products.length > 0"\n            class="sw-settings-search-live-search__grid-result"\n            :plain-appearance="true"\n            :show-selection="false"\n            :show-actions="false"\n            :data-source="products"\n            :is-loading="searchInProgress"\n            :columns="searchColumns"\n        >\n\n            \n            {% block sw_settings_search_view_live_search_results_search_grid_columns %}\n            \n            {% block sw_settings_search_view_live_search_results_search_grid_name %}\n            <template #column-name="{ item }">\n                <sw-product-variant-info\n                    :variations="item.variation"\n                    :show-tooltip="false"\n                >\n                    <sw-settings-search-live-search-keyword\n                        :text="(item.name || item.translated.name)"\n                        :search-term="liveSearchTerm"\n                    />\n                </sw-product-variant-info>\n            </template>\n            {% endblock %}\n\n            \n            {% block sw_settings_search_view_live_search_results_search_grid_score %}\n            <template #column-score="{ item }">\n                <span class="sw-settings-search-live-search__grid-result__score">\n                    {{ Math.round(parseFloat(item.extensions.search._score)) }}\n                </span>\n            </template>\n            {% endblock %}\n            {% endblock %}\n\n        </sw-data-grid>\n        {% endblock %}\n\n    </div>\n    {% endblock %}\n</sw-card>\n{% endblock %}\n',compatConfig:Shopware.compatConfig,inject:["repositoryFactory","liveSearchService"],emits:["live-search-results-change","sales-channel-change"],mixins:[a.getByName("notification")],props:{currentSalesChannelId:{type:String,required:!1,default:null},searchTerms:{type:String,required:!1,default:null},searchResults:{type:Object,required:!1,default:null}},data(){return{liveSearchTerm:"",salesChannels:[],salesChannelId:this.currentSalesChannelId,liveSearchResults:null,searchInProgress:!1,showExampleModal:!1}},computed:{salesChannelRepository(){return this.repositoryFactory.create("sales_channel")},isSearchEnable(){return null!==this.salesChannelId},searchColumns(){return[{property:"name",label:this.$tc("sw-settings-search.liveSearchTab.labelName"),rawData:!0},{property:"score",label:this.$tc("sw-settings-search.liveSearchTab.labelScore"),rawData:!0}]},products(){return this.liveSearchResults&&this.liveSearchResults.elements}},created(){this.createdComponent()},methods:{createdComponent(){this.fetchSalesChannels(),this.liveSearchTerm=this.searchTerms,this.liveSearchResults=this.searchResults},searchOnStorefront(){this.liveSearchTerm.length&&(this.searchInProgress=!0,this.liveSearchService.search({salesChannelId:this.salesChannelId,search:this.liveSearchTerm},{},{},{"sw-language-id":Shopware.Context.api.languageId}).then(e=>{this.liveSearchResults=e.data,this.searchInProgress=!1,this.$emit("live-search-results-change",{searchTerms:this.liveSearchTerm,searchResults:this.liveSearchResults})}).catch(e=>{let s=500===e.response.status?this.$tc("sw-settings-search.notification.notSupportedLanguageError"):e.message;this.createNotificationError({message:s})}).finally(()=>{this.searchInProgress=!1}))},fetchSalesChannels(){this.salesChannelRepository.search(new t(1,25)).then(e=>{this.salesChannels=e})},changeSalesChannel(e){this.salesChannelId=e,this.$emit("sales-channel-change",e)},onShowExampleModal(){this.showExampleModal=!0},onCloseExampleModal(){this.showExampleModal=!1}}}},944285:function(e,s,n){var a=n(891693);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),n(745346).Z("cca6b4a2",a,!0,{})},716105:function(e,s,n){var a=n(483616);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),n(745346).Z("587d1fda",a,!0,{})}}]);