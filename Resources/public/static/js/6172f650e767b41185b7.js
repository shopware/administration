(window.webpackJsonpAdministration=window.webpackJsonpAdministration||[]).push([[4800],{53383:function(){},4800:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}}),n(70200);let{Mixin:o}=Shopware,{Criteria:s}=Shopware.Data,{warn:i}=Shopware.Utils.debug;var r={template:'\n{% block sw_sales_channel_detail_base %}\n<div class="sw-sales-channel-detail-product-comparison">\n\n    \n    {% block sw_sales_channel_detail_product_comparison %}\n    <sw-card\n        key="edit"\n        position-identifier="sw-sales-channel-detail-product-comparison"\n        :is-loading="isLoading"\n        :title="$tc(\'sw-sales-channel.detail.titleProductComparisonTemplate\')"\n    >\n\n        \n        {% block sw_sales_channel_detail_product_comparison_header %}\n        <sw-container>\n            \n            {% block sw_sales_channel_detail_product_comparison_input_header %}\n            <sw-code-editor\n                v-model:value="productExport.headerTemplate"\n                :label="$tc(\'sw-sales-channel.detail.productComparison.inputHeaderLabel\')"\n                :completer-function="outerCompleterFunctionHeader"\n                :editor-config="editorConfig"\n                completion-mode="entity"\n                mode="twig"\n                :soft-wraps="true"\n                :set-focus="false"\n                :disabled="!acl.can(\'sales_channel.editor\')"\n                @update:value="resetValid"\n                @blur="resetValid"\n            />\n            {% endblock %}\n        </sw-container>\n        {% endblock %}\n\n        \n        {% block sw_sales_channel_detail_product_comparison_body %}\n        <sw-container>\n            \n            {% block sw_sales_channel_detail_product_comparison_input_body %}\n            <sw-code-editor\n                v-model:value="productExport.bodyTemplate"\n                :label="$tc(\'sw-sales-channel.detail.productComparison.inputBodyLabel\')"\n                :completer-function="outerCompleterFunctionBody"\n                :editor-config="editorConfig"\n                completion-mode="entity"\n                mode="twig"\n                :soft-wraps="true"\n                :set-focus="false"\n                :disabled="!acl.can(\'sales_channel.editor\')"\n                @update:value="resetValid"\n                @blur="resetValid"\n            />\n            {% endblock %}\n        </sw-container>\n        {% endblock %}\n\n        \n        {% block sw_sales_channel_detail_product_comparison_footer %}\n        <sw-container>\n            \n            {% block sw_sales_channel_detail_product_comparison_input_footer %}\n            <sw-code-editor\n                v-model:value="productExport.footerTemplate"\n                :label="$tc(\'sw-sales-channel.detail.productComparison.inputFooterLabel\')"\n                :completer-function="outerCompleterFunctionFooter"\n                :editor-config="editorConfig"\n                completion-mode="entity"\n                mode="twig"\n                :soft-wraps="true"\n                :set-focus="false"\n                :disabled="!acl.can(\'sales_channel.editor\')"\n                @update:value="resetValid"\n                @blur="resetValid"\n            />\n            {% endblock %}\n        </sw-container>\n        {% endblock %}\n\n        \n        {% block sw_sales_channel_detail_product_comparison_actions %}\n        <div class="sw-sales-channel-detail-product-comparison__button-group">\n            \n            {% block sw_sales_channel_detail_product_comparison_actions_test_button %}\n            <sw-button-process\n                size="small"\n                variant="ghost"\n                class="sw-sales-channel-detail-product-comparison__button sw-sales-channel-detail-product-comparison__test-action"\n                :is-loading="isLoadingValidate"\n                :disabled="isLoadingValidate || (!productExport.headerTemplate && !productExport.bodyTemplate && !productExport.footerTemplate)"\n                :process-success="isValidateSuccessful"\n                @click="validateTemplate"\n            >\n                {{ $tc(\'sw-sales-channel.detail.productComparison.buttonTestLabel\') }}\n            </sw-button-process>\n            {% endblock %}\n\n            \n            {% block sw_sales_channel_detail_product_comparison_actions_preview_button %}\n            <sw-button-process\n                size="small"\n                variant="ghost"\n                class="sw-sales-channel-detail-product-comparison__button sw-sales-channel-detail-product-comparison__preview-action"\n                :is-loading="isLoadingPreview"\n                :disabled="isLoadingPreview || (!productExport.headerTemplate && !productExport.bodyTemplate && !productExport.footerTemplate)"\n                :process-success="isPreviewSuccessful"\n                @click="preview"\n            >\n                {{ $tc(\'sw-sales-channel.detail.productComparison.buttonPreviewLabel\') }}\n            </sw-button-process>\n            {% endblock %}\n\n            \n            {% block sw_sales_channel_detail_product_comparison_actions_preview_component %}\n            <sw-sales-channel-detail-product-comparison-preview\n                :content="previewContent"\n                :errors="previewErrors"\n                @close="onPreviewClose"\n            />\n            {% endblock %}\n        </div>\n        {% endblock %}\n    </sw-card>\n    {% endblock %}\n</div>\n{% endblock %}\n',inject:["salesChannelService","repositoryFactory","productExportService","entityMappingService","acl"],mixins:[o.getByName("notification"),o.getByName("placeholder")],props:{salesChannel:{required:!0},productExport:{required:!0},isLoading:{type:Boolean,default:!1}},data(){return{showDeleteModal:!1,defaultSnippetSetId:"71a916e745114d72abafbfdc51cbd9d0",isLoadingDomains:!1,deleteDomain:null,previewContent:null,previewErrors:null,isLoadingPreview:!1,isPreviewSuccessful:!1,isLoadingValidate:!1,isValidateSuccessful:!1}},computed:{editorConfig(){return{enableBasicAutocompletion:!0}},productExportRepository(){return this.repositoryFactory.create("product_export")},domainRepository(){return this.repositoryFactory.create(this.salesChannel.domains.entity,this.salesChannel.domains.source)},salesChannelRepository(){return this.repositoryFactory.create("sales_channel")},mainNavigationCriteria(){return new s(1,10).addFilter(s.equals("type","page"))},outerCompleterFunctionHeader(){return this.outerCompleterFunction({productExport:"product_export"})},outerCompleterFunctionBody(){return this.outerCompleterFunction({productExport:"product_export",product:"product"})},outerCompleterFunctionFooter(){return this.outerCompleterFunction({productExport:"product_export"})}},methods:{validateTemplate(){let e={message:this.$tc("sw-sales-channel.detail.productComparison.notificationMessageValidateSuccessful")};this.isLoadingValidate=!0,this.productExportService.validateProductExportTemplate(this.productExport).then(t=>{if(this.isLoadingValidate=!1,t.errors){this.previewContent=t.content,this.previewErrors=t.errors;return}this.createNotificationSuccess(e),this.isValidateSuccessful=!0}).catch(e=>{this.createNotificationError({message:e.response.data.errors[0].detail}),i(this._name,e.message,e.response),this.isLoadingValidate=!1,this.isValidateSuccessful=!1})},preview(){this.isLoadingPreview=!0,this.productExportService.previewProductExport(this.productExport).then(e=>{if(this.isLoadingPreview=!1,this.previewContent=e.content,e.errors){this.previewErrors=e.errors;return}this.isPreviewSuccessful=!0}).catch(e=>{this.createNotificationError({message:e.response.data.errors[0].detail}),i(this._name,e.message,e.response),this.isLoadingPreview=!1})},outerCompleterFunction(e){let t=this.entityMappingService;return function(n){return Object.keys(t.getEntityMapping(n,e)).map(e=>({value:e}))}},onPreviewClose(){this.previewContent=null,this.previewErrors=null,this.isPreviewSuccessful=!1},resetValid(){this.isValidateSuccessful=!1}}}},70200:function(e,t,n){var o=n(53383);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),n(45346).Z("4d9a9e30",o,!0,{})}}]);