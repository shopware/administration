(this.webpackJsonpAdministration=this.webpackJsonpAdministration||[]).push([[280],{"3Ihp":function(e,t,i){},bzB1:function(e,t,i){var o=i("3Ihp");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,i("P8hj").default)("5ba7c41e",o,!0,{})},f5cs:function(e,t,i){"use strict";i.r(t);var o=i("CsSd"),n=i.n(o);i("bzB1");function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){n()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var p=Shopware.Mixin,s=Shopware.Data.Criteria,a=Shopware.Component.getComponentHelper().mapPropertyErrors;t.default={template:'\n{% block sw_import_export_edit_profile_modal %}\n<div class="sw-import-export-edit-profile-modal">\n    <sw-modal\n        v-if="show && profile"\n        class="sw-import-export-edit-profile-modal"\n        :title="modalTitle"\n        variant="full"\n        @modal-close="$emit(\'profile-close\')"\n    >\n\n        \n        {% block sw_import_export_edit_profile_modal_alert %}\n        <sw-alert\n            v-if="profile.systemDefault"\n            variant="info"\n        >\n            {{ $tc(\'sw-import-export.profile.systemDefaultInfoText\') }}\n        </sw-alert>\n        {% endblock %}\n\n        \n        {% block sw_import_export_edit_profile_modal_tabs %}\n        <sw-tabs\n            position-identifier="sw-import-export-edit-profile-modal"\n            :small="false"\n            default-item="general"\n        >\n\n            <template #default="{ active }">\n\n                \n                {% block sw_import_export_edit_profile_modal_tabs_general %}\n                <sw-tabs-item\n                    :title="$tc(\'sw-import-export.profile.generalTab\')"\n                    :active-tab="active"\n                    name="general"\n                >\n                    {{ $tc(\'sw-import-export.profile.generalTab\') }}\n                </sw-tabs-item>\n                {% endblock %}\n\n                \n                {% block sw_import_export_edit_profile_modal_tabs_field_mappings %}\n                <sw-tabs-item\n                    :title="$tc(\'sw-import-export.profile.mappingsTab\')"\n                    :active-tab="active"\n                    name="mappings"\n                >\n                    {{ $tc(\'sw-import-export.profile.mappingsTab\') }}\n                </sw-tabs-item>\n                {% endblock %}\n\n                \n                {% block sw_import_export_edit_profile_modal_tabs_field_advanced %}\n                <sw-tabs-item\n                    v-if="profile.type !== \'export\' && profile.config.updateEntities !== false"\n                    :title="$tc(\'sw-import-export.profile.advancedTab\')"\n                    :active-tab="active"\n                    name="advanced"\n                >\n                    {{ $tc(\'sw-import-export.profile.advancedTab\') }}\n                </sw-tabs-item>\n                {% endblock %}\n            </template>\n\n            <template #content="{ active }">\n                <template v-if="active === \'general\'">\n                    <sw-import-export-edit-profile-general :profile="profile" />\n\n                    <sw-import-export-edit-profile-field-indicators :profile="profile" />\n                    \n                    {% block sw_import_export_edit_profile_modal_tabs_general_import_settings %}\n                    <sw-import-export-edit-profile-import-settings :profile="profile" />\n                    {% endblock %}\n                </template>\n\n                <template v-if="active === \'mappings\'">\n                    \n                    {% block sw_import_export_edit_profile_modal_tabs_mappings %}\n\n                    \n                    {% block sw_import_export_edit_profile_modal_tabs_mappings_text %}\n                    <p class="sw-import-export-edit-profile-modal__text">\n                        {{ $tc(\'sw-import-export.profile.mappingDescription\') }}\n                    </p>\n                    {% endblock %}\n\n                    \n                    {% block sw_import_export_edit_profile_modal_tabs_mappings_mapping %}\n                    <sw-import-export-edit-profile-modal-mapping\n                        :profile="profile"\n                        :system-required-fields="systemRequiredFields"\n                        @update-mapping="updateMapping"\n                    />\n                    {% endblock %}\n                    {% endblock %}\n                </template>\n\n                <template v-if="active === \'advanced\' && profile.type !== \'export\' && profile.config.updateEntities !== false">\n                    \n                    {% block sw_import_export_edit_profile_modal_tabs_advanced %}\n\n                    \n                    {% block sw_import_export_edit_profile_modal_tabs_advanced_text %}\n                    <p class="sw-import-export-edit-profile-modal__text">\n                        {{ $tc(\'sw-import-export.profile.advancedDescription\') }}\n                    </p>\n                    {% endblock %}\n\n                    \n                    {% block sw_import_export_edit_profile_modal_tabs_advanced_identifiers %}\n                    <sw-import-export-edit-profile-modal-identifiers\n                        :profile="profile"\n                    />\n                    {% endblock %}\n                    {% endblock %}\n                </template>\n\n                <template v-if="active === \'fieldIndicators\'">\n                    <p class="sw-import-export-edit-profile-modal__text">\n                        {{ $tc(\'sw-import-export.profile.csvDescriptionBlock\') }}\n                    </p>\n                </template>\n            </template>\n        </sw-tabs>\n        {% endblock %}\n\n        \n        {% block sw_import_export_edit_profile_modal_footer %}\n        <template #modal-footer>\n            <sw-button\n                size="small"\n                @click="$emit(\'profile-close\')"\n            >\n                {{ $tc(\'sw-import-export.profile.cancelLabel\') }}\n            </sw-button>\n            <template v-if="profile.systemDefault">\n                <sw-button\n                    class="sw-import-export-edit-profile-modal__save-action"\n                    size="small"\n                    variant="primary"\n                    @click="$emit(\'profile-close\')"\n                >\n                    {{ $tc(\'sw-import-export.profile.closeProfileLabel\') }}\n                </sw-button>\n            </template>\n            <template v-else>\n                <sw-button\n                    class="sw-import-export-edit-profile-modal__save-action"\n                    size="small"\n                    :disabled="!profile.sourceEntity\n                        || profile.sourceEntity.length <= 0\n                        || !profile.type"\n                    variant="primary"\n                    @click="saveProfile"\n                >\n                    {{ saveLabelSnippet }}\n                </sw-button>\n            </template>\n        </template>\n        {% endblock %}\n    </sw-modal>\n\n    \n    {% block sw_import_export_edit_profile_violation_modal %}\n    <sw-modal\n        v-if="showValidationError"\n        :title="$tc(\'global.default.error\')"\n        class="sw-import-export-edit-profile-modal__violation-modal"\n        @modal-close="resetViolations"\n    >\n\n        \n        {% block sw_import_export_edit_profile_violation_modal_message %}\n        <p>{{ $tc(\'sw-import-export.profile.violationMessage\') }}</p>\n        {% endblock %}\n\n        \n        {% block sw_import_export_edit_profile_violation_modal_required_fields %}\n        <ul>\n            \n            {% block sw_import_export_edit_profile_violation_modal_required_field %}\n            <li\n                v-for="requiredField in missingRequiredFields"\n                :key="requiredField"\n            >\n                {{ requiredField }}\n            </li>\n            {% endblock %}\n        </ul>\n        {% endblock %}\n\n        \n        {% block sw_import_export_edit_profile_violation_modal_footer %}\n        <template #modal-footer>\n            <sw-button\n                size="small"\n                @click="resetViolations"\n            >\n                {{ $tc(\'sw-import-export.profile.closeViolation\') }}\n            </sw-button>\n        </template>\n        {% endblock %}\n    </sw-modal>\n    {% endblock %}\n</div>\n{% endblock %}\n',inject:["repositoryFactory","feature","importExportProfileMapping","importExportUpdateByMapping"],mixins:[p.getByName("notification")],props:{profile:{type:Object,required:!1,default:function(){return{}}},show:{type:Boolean,required:!1,default:function(){return!0}}},data:function(){return{missingRequiredFields:[],systemRequiredFields:{}}},computed:l(l({},a("profile",["name","sourceEntity","delimiter","enclosure","type"])),{},{isNew:function(){return!(!this.profile||!this.profile.isNew)&&this.profile.isNew()},modalTitle:function(){return this.isNew?this.$tc("sw-import-export.profile.newProfileLabel"):this.$tc("sw-import-export.profile.editProfileLabel")},saveLabelSnippet:function(){return this.isNew?this.$tc("sw-import-export.profile.addProfileLabel"):this.$tc("sw-import-export.profile.saveProfileLabel")},showValidationError:function(){return this.missingRequiredFields.length>0},profileRepository:function(){return this.repositoryFactory.create("import_export_profile")}}),watch:{"profile.sourceEntity":{handler:function(e){e&&this.loadSystemRequiredFieldsForEntity(e)}},"profile.mapping":{handler:function(){this.importExportUpdateByMapping.removeUnusedMappings(this.profile)}}},methods:{saveProfile:function(){var e=this;this.getParentProfileSelected().then((function(t){e.checkValidation(t),0===e.missingRequiredFields.length&&e.$emit("profile-save")}))},updateMapping:function(e){this.profile.mapping=e},getParentProfileSelected:function(){var e=this,t=new s(1,25);return t.addFilter(s.equals("sourceEntity",this.profile.sourceEntity)),t.addFilter(s.equals("systemDefault",!0)),this.profileRepository.search(t).then((function(e){return e.total>0?e[0]:null})).catch((function(){e.createNotificationError({message:e.$tc("sw-import-export.profile.messageSearchParentProfileError")})}))},checkValidation:function(e){if("export"!==this.profile.type){var t=e?e.mapping:[],i=!1===this.profile.config.createEntities&&!0===this.profile.config.updateEntities,o=this.importExportProfileMapping.validate(this.profile.sourceEntity,this.profile.mapping,t,i);o.missingRequiredFields.length>0&&(this.missingRequiredFields=o.missingRequiredFields)}},resetViolations:function(){this.missingRequiredFields=[]},loadSystemRequiredFieldsForEntity:function(e){this.systemRequiredFields=this.importExportProfileMapping.getSystemRequiredFields(e)}}}}}]);